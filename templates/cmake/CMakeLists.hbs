# {{projectName}} - CMakeLists.txt
# Auto-generated by TrinityCore MCP Server
# Generation date: {{generationDate}}

{{#if isModule}}
# Playerbot Module: {{moduleName}}
{{else}}
# Playerbot Component: {{componentName}}
{{/if}}

# Source files
set({{projectName}}_SOURCES
{{#each sourceFiles}}
    {{this}}
{{/each}}
)

# Header files
set({{projectName}}_HEADERS
{{#each headerFiles}}
    {{this}}
{{/each}}
)

{{#if hasTests}}
# Test files
set({{projectName}}_TESTS
{{#each testFiles}}
    {{this}}
{{/each}}
)
{{/if}}

# Group source files for IDE
source_group("Source Files" FILES ${ {{projectName}}_SOURCES})
source_group("Header Files" FILES ${ {{projectName}}_HEADERS})
{{#if hasTests}}
source_group("Tests" FILES ${ {{projectName}}_TESTS})
{{/if}}

{{#if isLibrary}}
# Create static library
add_library({{projectName}} STATIC
    ${ {{projectName}}_SOURCES}
    ${ {{projectName}}_HEADERS}
)
{{else}}
# Add to parent target
list(APPEND PLAYERBOT_SOURCES
    ${ {{projectName}}_SOURCES}
)
list(APPEND PLAYERBOT_HEADERS
    ${ {{projectName}}_HEADERS}
)
{{/if}}

{{#if dependencies}}
# Dependencies
target_link_libraries({{projectName}}
{{#each dependencies}}
    {{this}}
{{/each}}
)
{{/if}}

{{#if includeDirectories}}
# Include directories
target_include_directories({{projectName}} PUBLIC
{{#each includeDirectories}}
    {{this}}
{{/each}}
)
{{/if}}

{{#if compileDefinitions}}
# Compile definitions
target_compile_definitions({{projectName}} PRIVATE
{{#each compileDefinitions}}
    {{this}}
{{/each}}
)
{{/if}}

{{#if hasTests}}
# Tests
if(BUILD_TESTING)
    add_executable({{projectName}}_tests
        ${ {{projectName}}_TESTS}
        ${ {{projectName}}_SOURCES}
        ${ {{projectName}}_HEADERS}
    )

    target_link_libraries({{projectName}}_tests
        gtest
        gtest_main
{{#if dependencies}}
{{#each dependencies}}
        {{this}}
{{/each}}
{{/if}}
    )

    add_test(NAME {{projectName}}_tests COMMAND {{projectName}}_tests)
endif()
{{/if}}

# Installation
{{#if isLibrary}}
install(TARGETS {{projectName}}
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)
{{/if}}

install(FILES ${ {{projectName}}_HEADERS}
    DESTINATION include/modules/Playerbot/{{installPath}}
)
