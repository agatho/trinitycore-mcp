# TrinityCore MCP Web-UI Configuration
# Copy this file to .env.local and configure your settings

# =============================================================================
# SOAP API Configuration (for Live Data Inspector)
# =============================================================================

# SOAP API Host (usually localhost if running on same machine)
TRINITY_SOAP_HOST=127.0.0.1

# SOAP API Port (default: 7878, configured in worldserver.conf)
TRINITY_SOAP_PORT=7878

# SOAP API Username (must have admin privileges)
TRINITY_SOAP_USERNAME=your_soap_user_here

# SOAP API Password
TRINITY_SOAP_PASSWORD=your_soap_password_here

# Use mock SOAP client for development (set to 'true' if worldserver is not running)
# When enabled, the Live Data Inspector will use simulated data
TRINITY_SOAP_MOCK=true

# =============================================================================
# Database Configuration
# =============================================================================

# MySQL/MariaDB server hostname or IP address
TRINITY_DB_HOST=127.0.0.1

# Database server port (default: 3306)
TRINITY_DB_PORT=3306

# Database username with read/write permissions
TRINITY_DB_USER=your_db_user_here

# Database user password
TRINITY_DB_PASSWORD=your_db_password_here

# World database name (game content, NPCs, quests)
TRINITY_DB_WORLD=world

# Auth database name (accounts, permissions)
TRINITY_DB_AUTH=auth

# Characters database name (player data, inventory, achievements)
TRINITY_DB_CHARACTERS=characters

# =============================================================================
# TrinityCore Data Paths
# =============================================================================

# Path to TrinityCore source code root directory
TRINITY_ROOT=./

# GameTable files (combat ratings, XP tables, stat calculations)
GT_PATH=./data/gt

# Legacy database client files (pre-WoW 4.0)
DBC_PATH=./data/dbc

# Modern database client files (WoW 4.0+)
DB2_PATH=./data/db2

# Visibility/Collision maps for line-of-sight and spawn validation
VMAP_PATH=./data/vmaps

# Movement maps / Navigation mesh for pathfinding and AI movement
MMAP_PATH=./data/mmaps

# Terrain height maps (.map files) for terrain rendering
MAP_PATH=./data/maps

# =============================================================================
# MCP Server Configuration
# =============================================================================

# MCP server bind address (0.0.0.0 for all interfaces, localhost for local only)
MCP_HOST=localhost

# MCP server port (default: 3000)
MCP_PORT=3000

# =============================================================================
# WebSocket Configuration
# =============================================================================

# WebSocket server port (must differ from HTTP port)
WEBSOCKET_PORT=3001

# Maximum simultaneous WebSocket connections
WEBSOCKET_MAX_CLIENTS=50

# Keep-alive ping interval in milliseconds (30000ms = 30 seconds)
WEBSOCKET_HEARTBEAT_INTERVAL=30000

# Connection timeout before disconnect in milliseconds (60000ms = 1 minute)
WEBSOCKET_TIMEOUT_MS=60000

# Maximum events per second per client (prevents spam)
WEBSOCKET_RATE_LIMIT=100

# =============================================================================
# Testing Configuration
# =============================================================================

# Activate automated testing tools and test execution
TESTING_ENABLED=true

# Automatically create test cases from API endpoints and database schemas
TESTING_AUTO_GENERATE=false

# Minimum code coverage percentage required (0-100)
TESTING_COVERAGE_THRESHOLD=80

# Record and monitor query execution times for performance regression detection
TESTING_PERFORMANCE_BASELINES=true

# =============================================================================
# Logging Configuration
# =============================================================================

# Minimum log level to capture (debug, info, warn, error)
LOG_LEVEL=info

# Output logs to console/stdout for real-time monitoring
LOG_CONSOLE=true

# Write logs to file with automatic rotation
LOG_FILE=true

# Path where log files will be written
LOG_FILE_PATH=./logs/trinity-mcp.log

# Rotate log when size exceeds this value in bytes (10485760 = 10MB)
LOG_MAX_FILE_SIZE=10485760

# Number of log files to keep (older files are deleted)
LOG_MAX_FILES=5

# =============================================================================
# API Authentication & Security
# =============================================================================

# API secret key for protecting API endpoints (required to enable auth)
# Generate a key with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# When set, all /api/* routes require authentication via:
#   - X-API-Key header
#   - Authorization: Bearer <key> header
#   - ?api_key=<key> query parameter
# Leave empty to disable authentication (development mode)
API_SECRET_KEY=

# Enable/disable API authentication (default: true if API_SECRET_KEY is set)
# Set to 'false' to explicitly disable even when API_SECRET_KEY is configured
API_AUTH_ENABLED=true

# Rate limit: maximum requests per minute per IP address (default: 120)
API_RATE_LIMIT_RPM=120

# =============================================================================
# CORS Configuration
# =============================================================================

# Allowed CORS origins (comma-separated for multiple origins)
# Defaults to http://localhost:3000 if not set
# Use "*" ONLY for development - never in production
# Examples:
#   CORS_ORIGIN=http://localhost:3000
#   CORS_ORIGIN=http://localhost:3000,https://my-ui.example.com
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# Application Configuration
# =============================================================================

NEXT_PUBLIC_APP_NAME="TrinityCore API Explorer"
NEXT_PUBLIC_APP_VERSION="3.0.0"

# =============================================================================
# Feature Flags
# =============================================================================

NEXT_PUBLIC_ENABLE_SOAP_INSPECTOR=true
NEXT_PUBLIC_ENABLE_SCHEMA_EXPLORER=true
NEXT_PUBLIC_ENABLE_PROFILER=true
NEXT_PUBLIC_ENABLE_WORKFLOW=true
