api:
  class: AuraEffect
  method: HandleForceReaction
  signature: void AuraEffect::HandleForceReaction(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Applies or removes a forced reaction change to the target based on the aura
    application.
  description: The HandleForceReaction method is responsible for modifying the target's
    faction reaction state when an aura effect that forces a specific reaction is
    applied or removed. This method interacts with the AuraApplication object to determine
    how the reaction should be changed, and whether it should be applied or reverted.
    It typically affects NPC factions and can influence combat behavior, quest interactions,
    and other faction-based mechanics in World of Warcraft. The method operates based
    on the mode parameter which defines the type of reaction change to perform, and
    the apply flag which indicates whether to set or clear the forced reaction.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object that contains information about
      the aura being applied or removed. This parameter is used to determine the target
      and other aura-specific properties.
  - name: mode
    description: An unsigned 8-bit integer that defines the type of reaction change
      to perform. Valid values typically correspond to specific faction reaction types
      such as hostile, neutral, friendly, etc., though exact values depend on internal
      TrinityCore implementation.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the forced reaction effect. When true, the target's faction reaction is changed;
      when false, it reverts to normal behavior.
  returns: null
  examples:
  - title: Applying a Forced Hostile Reaction
    code: 'AuraEffect* auraEffect = ...;

      // Apply hostile reaction

      auraEffect->HandleForceReaction(auraApplication, 1, true);'
    language: cpp
  - title: Removing a Forced Reaction Effect
    code: 'AuraEffect* auraEffect = ...;

      // Remove forced reaction

      auraEffect->HandleForceReaction(auraApplication, 0, false);'
    language: cpp
  notes: This method is part of the aura effect handling system in TrinityCore and
    is typically called internally by the core framework when processing aura applications.
    It's important to note that this method does not directly modify faction data
    but rather affects how the game engine interprets faction reactions for the target
    unit.
  warnings: Improper use of this method can lead to unexpected behavior in faction
    interactions, including NPCs becoming unresponsive or hostile at inappropriate
    times. Ensure that the mode parameter is set correctly according to the intended
    reaction type and that the aura application context is valid before calling.
  related:
  - AuraEffect::HandleEffect
  - AuraApplication::GetTarget
  - Unit::SetFaction
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T12:48:29.957922'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
