api:
  class: Unit
  method: DealDamageMods
  signature: void Unit::DealDamageMods(const Unit * attacker, const Unit * victim,
    uint32 & damage, uint32 * absorb)
documentation:
  brief: Applies damage modifications and absorbs to a damage value based on attacker
    and victim units.
  description: The DealDamageMods method modifies the base damage value according
    to various game mechanics such as damage reduction, absorb effects, and combat
    calculations. It takes into account the attacker and victim units to determine
    how much of the initial damage should be applied or absorbed. This function is
    typically used internally during damage calculation processes within the TrinityCore
    engine. The method directly modifies the input damage value and may update the
    absorb parameter if applicable.
  parameters:
  - name: attacker
    description: Pointer to the Unit that is dealing the damage. Must not be null.
  - name: victim
    description: Pointer to the Unit that is receiving the damage. Must not be null.
  - name: damage
    description: Reference to the base damage value to be modified. The method will
      update this value with the final calculated damage after applying all applicable
      modifiers and absorbs.
  - name: absorb
    description: Pointer to a uint32 that will store the amount of damage absorbed.
      If null, no absorb information is returned.
  returns: null
  examples:
  - title: Basic Damage Modification Example
    code: 'Unit* attacker = ...;

      Unit* victim = ...;

      uint32 damage = 100;

      uint32 absorb = 0;

      attacker->DealDamageMods(attacker, victim, damage, &absorb);

      // damage now contains the modified value after applying all modifiers

      // absorb contains the amount of damage that was absorbed'
    language: cpp
  - title: Damage Calculation with Absorption Tracking
    code: 'Unit* player = ...;

      Unit* mob = ...;

      uint32 base_damage = 500;

      uint32 absorbed = 0;

      player->DealDamageMods(player, mob, base_damage, &absorbed);

      // base_damage is now the actual damage dealt

      // absorbed contains how much was absorbed by mob''s mitigation'
    language: cpp
  notes: This method is part of the internal combat system and should typically be
    called as part of a larger damage calculation sequence. It modifies the damage
    value in place and may update the absorb parameter if needed. The method relies
    on various unit properties such as armor, resistance, and mitigation effects to
    compute final values.
  warnings: Ensure that both attacker and victim pointers are valid before calling
    this method. Passing null pointers can lead to undefined behavior or crashes.
    The damage reference is modified directly, so be aware of the side effect when
    using it in calculations.
  related:
  - DealDamage
  - CalculateDamage
  - ModifyDamage
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T08:49:25.213823'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
