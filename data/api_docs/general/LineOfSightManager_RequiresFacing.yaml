api:
  class: LineOfSightManager
  method: RequiresFacing
  signature: bool LineOfSightManager::RequiresFacing(Unit * target, LoSCheckType checkType)
documentation:
  brief: Determines whether a unit requires facing adjustment to maintain line of
    sight with a target based on the specified check type.
  description: The RequiresFacing method evaluates if a given unit needs to adjust
    its facing direction in order to maintain a valid line of sight to a target unit.
    This is typically used in AI behavior and spell casting logic where facing direction
    affects whether an action can be performed or if the target is visible. The method
    takes into account the LoSCheckType parameter which defines the type of line of
    sight check being performed, such as whether it's for melee range, ranged attacks,
    or general visibility. The result helps determine if the unit should rotate to
    face the target before proceeding with an action that requires direct line of
    sight.
  parameters:
  - name: target
    description: Pointer to the Unit object that serves as the target for line of
      sight evaluation. This represents the entity the unit is trying to see or interact
      with.
  - name: checkType
    description: Enumeration value of type LoSCheckType that specifies the type of
      line of sight check being performed. Common values may include checks for melee
      range, ranged attacks, or general visibility requirements.
  returns: Returns true if the unit requires a facing adjustment to maintain valid
    line of sight with the target based on the specified check type; otherwise returns
    false.
  examples:
  - title: Basic usage in AI behavior
    code: "if (losManager.RequiresFacing(target, LoSCheckType::MELEE)) {\n    unit->SetFacingTo(target);\n\
      \    // Proceed with melee attack\n}"
    language: cpp
  - title: Spell casting line of sight check
    code: "if (losManager.RequiresFacing(caster, LoSCheckType::SPELL_RANGE)) {\n \
      \   caster->SetFacingTo(target);\n    // Cast spell only after proper facing\n\
      }"
    language: cpp
  notes: This method is commonly used in TrinityCore's AI system to ensure units properly
    face their targets before performing actions that require line of sight. It may
    involve calculations based on unit bounding boxes, collision detection, and target
    positioning. The implementation likely caches previous results for performance
    optimization.
  warnings: Ensure that the target pointer is valid and not null before calling this
    method, as dereferencing a null pointer will cause undefined behavior. Also note
    that frequent calls to this method may impact performance in high-frequency AI
    updates.
  related:
  - LineOfSightManager::IsInLoS
  - LineOfSightManager::GetFacingRequirement
  - Unit::SetFacingTo
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T03:37:45.787338'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
