api:
  class: PlayerbotGroupScript
  method: GetOrCreateGroupState
  signature: GroupState & PlayerbotGroupScript::GetOrCreateGroupState(int groupGuid)
documentation:
  brief: Retrieves or creates a group state instance for the specified group GUID.
  description: The GetOrCreateGroupState method is used to obtain a reference to the
    GroupState object associated with a specific group identifier. If a GroupState
    already exists for the given group GUID, it returns the existing instance. Otherwise,
    it creates a new GroupState object and associates it with the provided GUID. This
    method ensures that each group has a unique and accessible state representation
    within the playerbot system, which is essential for managing group-specific behaviors,
    strategies, and data during bot operations in World of Warcraft. The returned
    reference allows direct manipulation of the group's state properties.
  parameters:
  - name: groupGuid
    description: The unique identifier (GUID) of the group for which to retrieve or
      create a GroupState instance. This parameter must be a valid group GUID within
      the TrinityCore framework.
  returns: A reference to the GroupState object associated with the specified group
    GUID. If no such state exists, a new one is created and returned. The reference
    remains valid for the lifetime of the script or until explicitly removed.
  examples:
  - title: Basic Usage Example
    code: 'GroupState& groupState = playerbotGroupScript->GetOrCreateGroupState(12345);

      // Use groupState to configure bot behavior for this specific group'
    language: cpp
  - title: Accessing Group State Properties
    code: 'GroupState& state = playerbotGroupScript->GetOrCreateGroupState(player->GetGroup()->GetGUID().GetCounter());

      state.SetLeaderGuid(player->GetGUID());

      state.SetFormationType(FormationType::FORMATION_CIRCLE);'
    language: cpp
  notes: This method is thread-safe in the context of TrinityCore's playerbot system,
    but modifications to GroupState should be handled carefully to avoid race conditions.
    The returned reference points to an internal object managed by PlayerbotGroupScript,
    so direct deletion or invalidation of the referenced GroupState is not recommended.
  warnings: Modifying the returned GroupState reference directly may affect all bots
    in that group if they share references. Be cautious when using this method in
    multi-threaded environments or when multiple scripts might access the same group
    state simultaneously.
  related:
  - GetGroupState
  - RemoveGroupState
  - HasGroupState
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T21:20:25.286606'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
