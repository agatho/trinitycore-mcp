api:
  class: PersonalPhaseGridLoader
  method: PersonalPhaseGridLoader
  signature: void PersonalPhaseGridLoader::PersonalPhaseGridLoader(NGridType & grid,
    int * map, const int & cell, const ObjectGuid & phaseOwner)
documentation:
  brief: Initializes a personal phase grid loader for managing object visibility within
    a specific grid cell based on a phase owner's GUID.
  description: The PersonalPhaseGridLoader constructor initializes a grid loader that
    handles phase-based visibility for objects within a specified grid cell. This
    mechanism ensures that only players or objects within the same phase as the 'phaseOwner'
    can see each other, which is crucial for implementing phased content such as instance
    phases, world events, or player-specific quests in World of Warcraft. The method
    takes a reference to an NGridType (a grid container), a map identifier, a cell
    coordinate, and a GUID representing the owner of the phase. It sets up internal
    structures that will be used by the core game loop to determine visibility during
    grid loading and updates.
  parameters:
  - name: grid
    description: Reference to an NGridType object representing the grid cell where
      the loader is initialized. This grid contains spatial data for objects in a
      specific area of the game world.
  - name: map
    description: Pointer to an integer representing the map ID where the grid resides.
      Used to identify which map the grid belongs to for phase management purposes.
  - name: cell
    description: Integer value indicating the cell coordinate within the grid. This
      is typically used in conjunction with the grid's spatial indexing system to
      manage object visibility.
  - name: phaseOwner
    description: ObjectGuid representing the GUID of the entity that owns or controls
      the phase being applied to this grid. Objects within the same phase as this
      owner will be visible to each other.
  returns: null
  examples:
  - title: Basic Initialization of PersonalPhaseGridLoader
    code: 'NGridType* grid = sMapMgr->FindOrCreateGrid(mapId, cellX, cellY);

      ObjectGuid phaseOwner = player->GetGUID();

      int mapId = player->GetMapId();

      int cellCoord = 0;

      PersonalPhaseGridLoader loader(*grid, &mapId, cellCoord, phaseOwner);'
    language: cpp
  notes: This method is typically invoked during grid loading or when a new phase
    is introduced to the game world. It's part of a larger system that manages phased
    visibility and should be used carefully in multi-threaded environments where grid
    state changes may occur concurrently.
  warnings: Incorrectly setting the phase owner GUID can lead to improper object visibility,
    potentially causing players to see or not see objects they shouldn't. Ensure that
    the map pointer is valid and that the grid reference is properly initialized before
    calling this constructor.
  related:
  - PersonalPhaseGridLoader::LoadGrid
  - PersonalPhaseGridLoader::UpdateGrid
  - PersonalPhaseGridLoader::SetPhaseOwner
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T03:31:16.688385'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
