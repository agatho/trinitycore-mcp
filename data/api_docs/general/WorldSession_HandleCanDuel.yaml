api:
  class: WorldSession
  method: HandleCanDuel
  signature: void WorldSession::HandleCanDuel(WorldPackets::Duel::CanDuel & packet)
documentation:
  brief: Processes a duel capability request from a player, determining if a duel
    can be initiated with another player.
  description: The HandleCanDuel method handles incoming duel capability requests
    from players in the World of Warcraft client. It verifies whether the requesting
    player is eligible to initiate a duel with the target player based on game rules
    such as PvP status, distance, and combat state. This method is part of the duel
    system mechanics and ensures that duels are only allowed under appropriate conditions.
    The method typically receives a packet containing the target player's information
    and performs validation checks before responding to the client.
  parameters: []
  returns: null
  examples:
  - title: Basic duel capability check
    code: "void WorldSession::HandleCanDuel(WorldPackets::Duel::CanDuel& packet)\n\
      {\n    Player* player = GetPlayer();\n    if (!player || !packet.TargetGuid)\n\
      \        return;\n\n    Player* target = ObjectAccessor::FindPlayer(packet.TargetGuid);\n\
      \    if (!target)\n        return;\n\n    // Perform duel eligibility checks\
      \ here\n    // ...\n}"
    language: cpp
  notes: This method is typically invoked when a player attempts to initiate a duel
    with another player. It's important to note that this method does not actually
    start the duel, but rather validates whether it can be started. The actual duel
    initiation logic is handled by other methods in the system.
  warnings: null
  related:
  - HandleDuelAccept
  - HandleDuelCancelled
  - HandleDuelRequested
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:45:03.608771'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
