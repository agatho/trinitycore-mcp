api:
  class: BattlePetManager
  method: CapturePet
  signature: bool BattlePetManager::CapturePet(int * player, uint32 speciesId, PetQuality
    quality)
documentation:
  brief: Attempts to capture a battle pet with the specified species and quality for
    the given player.
  description: The CapturePet method is responsible for handling the logic of capturing
    a battle pet in World of Warcraft's Battle Pet system. It takes a player identifier,
    a species ID representing the type of pet to capture, and a quality level indicating
    the pet's rarity or strength. The method evaluates whether the capture is successful
    based on game mechanics such as pet level, health, and the player's current battle
    pet collection capacity. This function typically integrates with the BattlePetManager's
    internal state tracking to manage pet ownership and inventory.
  parameters:
  - name: player
    description: Pointer to an integer representing the player's unique identifier
      (GUID). Must be a valid pointer to an existing player object.
  - name: speciesId
    description: A unique identifier for the battle pet species. Corresponds to the
      BattlePetSpecies.db2 database entry and defines the pet type, appearance, and
      base stats.
  - name: quality
    description: The quality level of the pet, indicating its rarity or strength.
      Valid values are typically 0-5, where 0 is common and 5 is legendary.
  returns: Returns true if the pet was successfully captured and added to the player's
    collection; otherwise returns false. Failure may occur due to insufficient inventory
    space, invalid parameters, or game logic preventing capture.
  examples:
  - title: Basic Pet Capture
    code: "int playerId = 12345;\nuint32 speciesId = 123;\nPetQuality quality = PET_QUALITY_RARE;\n\
      bool success = battlePetManager->CapturePet(&playerId, speciesId, quality);\n\
      if (success)\n    printf(\"Pet captured successfully!\\n\");\nelse\n    printf(\"\
      Failed to capture pet.\\n\");"
    language: cpp
  notes: This method likely interacts with the player's BattlePetJournal and may trigger
    visual effects or UI updates upon successful capture. The implementation probably
    checks against internal limits such as maximum number of pets per player, and
    could involve random chance calculations based on pet stats.
  warnings: Ensure that the player pointer is valid before calling this function to
    avoid undefined behavior. Also, verify that speciesId corresponds to a known battle
    pet in the game's database to prevent invalid captures.
  related:
  - GetPlayerPets
  - ReleasePet
  - HasPet
  - AddPetToJournal
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T13:07:28.890050'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
