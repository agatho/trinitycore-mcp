api:
  class: MageAI
  method: CanUseAbility
  signature: bool MageAI::CanUseAbility(uint32 spellId)
documentation:
  brief: Determines whether a mage AI can use a specified spell ability based on current
    game state and resource requirements.
  description: The CanUseAbility method evaluates if a mage AI character is capable
    of casting a given spell by checking various conditions such as mana availability,
    cooldown status, target validity, and spell-specific prerequisites. This method
    integrates with the TrinityCore AI framework to ensure that spell usage aligns
    with game mechanics and player behavior logic. It serves as a core decision-making
    function within the MageAI class for determining valid spell casting opportunities
    during combat or non-combat scenarios.
  parameters:
  - name: spellId
    description: The unique identifier of the spell to be evaluated for usage. This
      ID corresponds to entries in the Spell.dbc database file and must reference
      a valid mage spell.
  returns: Returns true if the mage AI can legally cast the specified spell under
    current conditions; otherwise returns false. The evaluation includes checking
    mana costs, cooldown timers, target requirements, and other contextual factors.
  examples:
  - title: Basic Spell Usage Check
    code: "if (mageAI->CanUseAbility(SPELL_FIREBALL)) {\n    // Proceed with casting\
      \ Fireball\n    mageAI->CastSpell(SPELL_FIREBALL);\n}"
    language: cpp
  - title: Conditional Spell Casting Logic
    code: "uint32 spellToCast = 0;\nif (mageAI->CanUseAbility(SPELL_FROST_NOVA)) {\n\
      \    spellToCast = SPELL_FROST_NOVA;\n} else if (mageAI->CanUseAbility(SPELL_BLIZZARD))\
      \ {\n    spellToCast = SPELL_BLIZZARD;\n}\n\nif (spellToCast) {\n    mageAI->CastSpell(spellToCast);\n\
      }"
    language: cpp
  notes: This method relies on internal AI state tracking and should be called before
    attempting to cast any spell to prevent invalid actions. It may perform multiple
    checks including mana level, cooldowns, target status, and line-of-sight conditions.
    The implementation assumes that the MageAI instance has been properly initialized
    with valid target information and resource states.
  warnings: Calling this method without proper initialization of the AI context may
    lead to incorrect results or undefined behavior. Avoid calling CanUseAbility in
    rapid succession without considering performance implications, as it might involve
    database lookups or complex state evaluations.
  related:
  - CastSpell
  - GetMana
  - IsCasting
  - HasCooldown
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T00:23:27.632724'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
