api:
  class: ConversationActor
  method: WriteUpdate
  signature: void ConversationActor::WriteUpdate(ByteBuffer & data, bool ignoreChangesMask,
    const Conversation * owner, const Player * receiver) const
documentation:
  brief: Serializes conversation actor data into a ByteBuffer for network transmission
    to a specific player.
  description: The WriteUpdate method serializes the state of a ConversationActor
    instance into a ByteBuffer, preparing it for network transmission to a specific
    player. This method is typically used during packet construction for sending conversation-related
    updates to clients. It takes into account whether changes have occurred and may
    ignore change masks based on the provided flag. The method requires a reference
    to the owning conversation and the receiving player to properly construct the
    update packet with appropriate context and visibility rules.
  parameters:
  - name: data
    description: Reference to a ByteBuffer where the serialized actor data will be
      written. This buffer is typically used to build network packets for client communication.
  - name: ignoreChangesMask
    description: Boolean flag indicating whether to ignore the internal change tracking
      mask. When true, all fields are serialized regardless of their changed status.
  - name: owner
    description: Pointer to the Conversation object that owns this actor. Used to
      determine context and visibility rules for the update packet.
  - name: receiver
    description: Pointer to the Player object who will receive this update. Required
      for proper serialization of player-specific data and visibility checks.
  returns: null
  examples:
  - title: Basic usage in conversation update
    code: 'ByteBuffer buffer;

      ConversationActor actor;

      Player* player = ...; // Get player reference

      Conversation* conv = ...; // Get conversation reference

      actor.WriteUpdate(buffer, false, conv, player);

      // Buffer now contains serialized actor data for network transmission'
    language: cpp
  notes: This method is part of the TrinityCore's conversation system and is typically
    called internally by the framework when constructing update packets. The method
    respects player visibility rules and conversation context, ensuring that only
    relevant data is sent to each client.
  warnings: null
  related:
  - ConversationActor::ReadUpdate
  - ConversationActor::BuildUpdateData
  - Conversation::SendUpdate
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T06:53:36.399067'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
