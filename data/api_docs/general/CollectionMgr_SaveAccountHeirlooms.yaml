api:
  class: CollectionMgr
  method: SaveAccountHeirlooms
  signature: void CollectionMgr::SaveAccountHeirlooms(int trans)
documentation:
  brief: Saves account heirloom data to the database for the current session's transaction.
  description: The SaveAccountHeirlooms method persists all collected heirloom data
    associated with the current account into the database using the provided transaction
    context. This method is typically invoked during account logout or periodic save
    operations to ensure that player progress related to heirlooms is not lost. It
    handles serialization and writing of heirloom collection states, including any
    newly acquired items, to the appropriate database tables. The method assumes that
    a valid database transaction has been started and passed as an argument, ensuring
    atomicity of the save operation.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Account Logout
    code: "void Player::OnLogout()\n{\n    // ... other logout logic ...\n    sCollectionMgr->SaveAccountHeirlooms(m_transaction);\n\
      \    // ... continue with cleanup ...\n}"
    language: cpp
  notes: This method should only be called within the context of an active database
    transaction to maintain data consistency. It is part of the heirloom collection
    system which tracks player progress in acquiring various heirloom items across
    different characters on the same account.
  warnings: Calling this method outside of a valid transaction context may lead to
    database corruption or inconsistent state. Ensure that all related heirloom data
    has been properly updated before invoking this method.
  related:
  - CollectionMgr::LoadAccountHeirlooms
  - CollectionMgr::AddAccountHeirloom
  - CollectionMgr::HasAccountHeirloom
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T01:21:28.461842'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
