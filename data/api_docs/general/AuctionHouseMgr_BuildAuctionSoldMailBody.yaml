api:
  class: AuctionHouseMgr
  method: BuildAuctionSoldMailBody
  signature: int AuctionHouseMgr::BuildAuctionSoldMailBody(int guid, uint64 bid, uint64
    buyout, uint32 deposit, uint64 consignment)
documentation:
  brief: Constructs and returns the body content for an auction sold mail notification.
  description: The BuildAuctionSoldMailBody method generates the text content of a
    mail message that is sent to the seller when an auction item is successfully sold.
    This method calculates and formats relevant financial details such as bid amount,
    buyout price, deposit, and consignment fees into a readable string suitable for
    inclusion in a game mail. It serves as part of the auction house system's communication
    mechanism, ensuring sellers are informed about the outcome and financial aspects
    of their completed auctions. The method is typically invoked during the auction
    closing process when an item has been purchased either through bidding or buyout.
  parameters:
  - name: guid
    description: The unique identifier (GUID) of the player who sold the auction item.
  - name: bid
    description: The final bid amount paid by the winning bidder, in copper coins.
  - name: buyout
    description: The buyout price set for the auction item, in copper coins. Zero
      if no buyout was used.
  - name: deposit
    description: The deposit amount paid by the seller when listing the item, in copper
      coins.
  - name: consignment
    description: The consignment fee charged by the auction house for selling the
      item, in copper coins.
  returns: Returns an integer representing the length of the constructed mail body
    string. A negative value may indicate an error during construction.
  examples:
  - title: Basic Usage Example
    code: int bodyLength = auctionHouseMgr->BuildAuctionSoldMailBody(12345, 1000000,
      0, 50000, 20000);
    language: cpp
  - title: Advanced Usage with Error Handling
    code: "int result = auctionHouseMgr->BuildAuctionSoldMailBody(sellerGuid, finalBid,\
      \ buyoutPrice, sellerDeposit, consignmentFee);\nif (result < 0) {\n    // Handle\
      \ error\n    sLog->outError(\"Failed to build auction sold mail body\");\n}\
      \ else {\n    // Proceed with sending mail using result as body length\n}"
    language: cpp
  notes: This method is likely used internally by the AuctionHouseMgr class when preparing
    auction completion notifications. It may involve string formatting and localization,
    so developers should be aware that the output string may vary based on server
    settings or locale configurations.
  warnings: Ensure all monetary values are passed in copper (the smallest unit of
    in-game currency) to maintain consistency with TrinityCore's internal currency
    handling. Incorrectly formatted values could lead to misleading information in
    the mail body.
  related:
  - BuildAuctionWonMailBody
  - SendAuctionSoldMail
  - GetAuctionItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T13:45:26.384395'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
