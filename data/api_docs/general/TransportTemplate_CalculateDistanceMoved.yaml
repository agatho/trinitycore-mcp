api:
  class: TransportTemplate
  method: CalculateDistanceMoved
  signature: double TransportTemplate::CalculateDistanceMoved(double timePassedInSegment,
    double segmentDuration, bool isFirstSegment, bool isLastSegment) const
documentation:
  brief: Calculates the distance a transport has moved during a given time segment.
  description: The CalculateDistanceMoved method computes the distance traveled by
    a transport entity over a specified time interval. This calculation takes into
    account whether the current segment is the first or last in a sequence, which
    may affect how movement is interpolated or handled at boundaries. The method is
    typically used during transport movement updates to determine accurate positioning
    within the game world. It operates on internal transport data and uses time-based
    interpolation for smooth movement transitions.
  parameters:
  - name: timePassedInSegment
    description: The amount of time that has passed within the current segment, measured
      in seconds. This value should be between 0 and the segmentDuration.
  - name: segmentDuration
    description: The total duration of the current movement segment, measured in seconds.
      This defines the time window over which movement occurs.
  - name: isFirstSegment
    description: Boolean flag indicating whether this is the first segment of the
      transport's movement sequence. Used to handle initial state calculations or
      special interpolation logic.
  - name: isLastSegment
    description: Boolean flag indicating whether this is the last segment of the transport's
      movement sequence. Used to handle final state calculations or special interpolation
      logic.
  returns: Returns a double value representing the calculated distance moved by the
    transport during the specified time segment, in game units (typically yards).
    The result may be zero if no movement occurs or if invalid parameters are provided.
  examples:
  - title: Basic usage for calculating transport movement
    code: double distance = transportTemplate->CalculateDistanceMoved(2.5, 5.0, true,
      false);
    language: cpp
  - title: Using the method in a transport update loop
    code: "for (auto& segment : transportSegments) {\n    double distance = transportTemplate->CalculateDistanceMoved(\n\
      \        segment.timePassed,\n        segment.duration,\n        segment.isFirst,\n\
      \        segment.isLast\n    );\n    totalDistance += distance;\n}"
    language: cpp
  notes: This method is part of the transport movement system in TrinityCore and relies
    on internal transport path data. It assumes that timePassedInSegment is always
    less than or equal to segmentDuration. The calculation may involve interpolation
    between waypoints, so results can vary depending on the transport's defined path.
  warnings: Ensure that timePassedInSegment does not exceed segmentDuration, as this
    could lead to incorrect calculations. Also, be cautious when calling this method
    outside of a valid transport movement context, as it depends on internal state
    variables.
  related:
  - GetTransportPath
  - UpdatePosition
  - CalculateNextWaypoint
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T21:08:00.558355'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
