api:
  class: BehaviorPriorityManager
  method: SelectActiveBehavior
  signature: Strategy * BehaviorPriorityManager::SelectActiveBehavior(int & activeStrategies)
documentation:
  brief: Selects and returns the highest priority active behavior strategy from the
    manager.
  description: The SelectActiveBehavior method evaluates all registered behavior strategies
    within the BehaviorPriorityManager and determines which one has the highest priority
    to be actively used. This method is typically invoked during AI decision-making
    processes to determine the appropriate action or behavior for an NPC or unit.
    The method updates the provided reference parameter 'activeStrategies' with the
    count of currently active strategies. It ensures that only one strategy is selected
    as the active behavior at any given time, based on priority rankings defined within
    the system.
  parameters:
  - name: activeStrategies
    description: Reference to an integer that will be updated with the number of currently
      active strategies after selection. This parameter allows callers to track how
      many behaviors are active in the manager.
  returns: Returns a pointer to the Strategy object representing the highest priority
    active behavior, or nullptr if no active behaviors exist.
  examples:
  - title: Basic usage of SelectActiveBehavior
    code: "int activeCount = 0;\nStrategy* activeBehavior = behaviorManager.SelectActiveBehavior(activeCount);\n\
      if (activeBehavior != nullptr)\n{\n    // Execute the selected behavior\n  \
      \  activeBehavior->Execute();\n}\nelse\n{\n    // No active behaviors available\n\
      \    // Handle default case\n}"
    language: cpp
  - title: Using SelectActiveBehavior in AI decision loop
    code: "class AIController\n{\npublic:\n    void Update()\n    {\n        int activeStrategies\
      \ = 0;\n        Strategy* currentStrategy = behaviorManager.SelectActiveBehavior(activeStrategies);\n\
      \        \n        if (currentStrategy != nullptr && activeStrategies > 0)\n\
      \        {\n            currentStrategy->Execute();\n        }\n        else\n\
      \        {\n            // Fallback logic when no strategies are active\n  \
      \          DoDefaultBehavior();\n        }\n    }\n};"
    language: cpp
  notes: This method assumes that the BehaviorPriorityManager has been properly initialized
    with valid strategy entries. The returned Strategy pointer is only valid until
    the next call to SelectActiveBehavior or until the manager's state changes. This
    method may be called frequently during AI processing, so performance considerations
    should be taken into account when implementing custom strategies.
  warnings: Calling this method without ensuring that the BehaviorPriorityManager
    contains at least one registered strategy may result in unexpected behavior or
    null pointer access if not handled properly. Always check for a valid return value
    before attempting to execute the returned strategy.
  related:
  - AddStrategy
  - RemoveStrategy
  - GetStrategies
  - UpdatePriorities
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T12:15:43.865839'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
