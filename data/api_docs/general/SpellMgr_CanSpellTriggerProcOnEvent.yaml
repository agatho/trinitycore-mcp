api:
  class: SpellMgr
  method: CanSpellTriggerProcOnEvent
  signature: bool SpellMgr::CanSpellTriggerProcOnEvent(const SpellProcEntry & procEntry,
    ProcEventInfo & eventInfo)
documentation:
  brief: Determines whether a spell can trigger a proc event based on the provided
    proc entry and event information.
  description: The CanSpellTriggerProcOnEvent method evaluates if a specific spell,
    defined by its proc entry, is eligible to trigger a proc event given the context
    of the current event. This function is crucial for implementing game mechanics
    such as spell procs, where certain spells have a chance to activate additional
    effects when specific conditions are met. The method checks various factors including
    spell attributes, proc chances, and event types to determine eligibility. It is
    typically used internally by the TrinityCore core during spell processing and
    event handling to ensure proper triggering of procs according to game rules.
  parameters:
  - name: procEntry
    description: A reference to a SpellProcEntry structure that defines the proc properties
      and conditions for the spell being evaluated.
  - name: eventInfo
    description: A reference to a ProcEventInfo structure containing details about
      the current event that may trigger a proc, such as damage type, target information,
      and other relevant context.
  returns: Returns true if the spell defined in procEntry can trigger a proc based
    on the conditions specified in eventInfo; otherwise returns false.
  examples:
  - title: Basic Usage in Spell Proc Evaluation
    code: "SpellProcEntry entry;\nentry.ProcFlags = PROC_FLAG_DAMAGE_DONE;\nentry.ProcChance\
      \ = 10;\n\nProcEventInfo eventInfo;\neventInfo.SetDamageType(DAMAGE_PHYSICAL);\n\
      \nclass MySpellHandler\n{\npublic:\n    bool HandleSpellProc(SpellMgr* spellMgr,\
      \ const SpellProcEntry& entry, ProcEventInfo& info)\n    {\n        return spellMgr->CanSpellTriggerProcOnEvent(entry,\
      \ info);\n    }\n};"
    language: cpp
  notes: This method is part of the core spell processing system and should only be
    called during appropriate spell evaluation phases. It relies on accurate event
    information being passed in the ProcEventInfo structure to make correct decisions.
  warnings: Incorrectly setting up the SpellProcEntry or ProcEventInfo structures
    can lead to unexpected proc behavior or missed triggers. Ensure all relevant flags
    and conditions are properly initialized before calling this method.
  related:
  - GetSpellProcEntry
  - IsSpellProcAllowed
  - ProcessSpellProc
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T06:28:28.104304'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
