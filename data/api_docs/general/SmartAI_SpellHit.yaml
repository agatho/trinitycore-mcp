api:
  class: SmartAI
  method: SpellHit
  signature: void SmartAI::SpellHit(WorldObject * caster, const SpellInfo * spellInfo)
documentation:
  brief: Handles spell hit events for SmartAI, executing associated scripts when a
    spell affects the AI's unit.
  description: The SpellHit method is invoked by the SmartAI system when a spell successfully
    hits the creature or game object that is using this AI. It processes the spell
    hit event and triggers any associated smart scripts defined in the database for
    that specific spell. This method allows for dynamic behavior modification based
    on incoming spells, enabling complex interactions such as triggering events, changing
    AI states, or modifying unit properties upon spell impact. The method does not
    directly control spell casting but responds to the result of spells cast by other
    entities.
  parameters:
  - name: caster
    description: Pointer to the WorldObject that initiated the spell. This can be
      a player, creature, or game object that cast the spell. May be NULL if the spell
      was cast without a direct caster.
  - name: spellInfo
    description: Pointer to the SpellInfo structure containing detailed information
      about the spell that hit the AI unit. Includes spell ID, effects, duration,
      and other spell properties. Must not be NULL.
  returns: null
  examples:
  - title: Basic SpellHit Implementation
    code: "void SmartAI::SpellHit(WorldObject* caster, const SpellInfo* spellInfo)\n\
      {\n    // Trigger a script when the unit is hit by a specific spell\n    if\
      \ (spellInfo->Id == 12345)\n    {\n        DoAction(ACTION_SPELL_HIT);\n   \
      \ }\n}"
    language: cpp
  - title: Conditional SpellHit with Caster Check
    code: "void SmartAI::SpellHit(WorldObject* caster, const SpellInfo* spellInfo)\n\
      {\n    if (caster && caster->GetTypeId() == TYPEID_PLAYER)\n    {\n        if\
      \ (spellInfo->Id == 98765)\n        {\n            Talk(SAY_SPELL_HIT);\n  \
      \          SetReactState(REACT_AGGRESSIVE);\n        }\n    }\n}"
    language: cpp
  notes: This method is part of the SmartAI framework and is automatically called
    by the core when a spell hits an AI-controlled unit. It's essential to validate
    both parameters before using them, especially caster which may be NULL. The method
    should not be used for spell casting itself but rather for reacting to spells
    cast by others.
  warnings: Ensure that all script actions within SpellHit are safe and do not cause
    infinite recursion or stack overflow. Be cautious when modifying the unit's state
    directly from this method, as it might interfere with ongoing spell processing
    or AI logic.
  related:
  - SmartAI::SpellHitUinit
  - SmartAI::UpdateAI
  - SmartAI::DoAction
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T02:40:49.214711'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
