api:
  class: Aura
  method: UpdateTargetMap
  signature: void Aura::UpdateTargetMap(Unit * caster, bool apply)
documentation:
  brief: Updates the target map of an aura based on the caster and application state.
  description: The UpdateTargetMap method is responsible for updating the target map
    of an Aura object, which defines which units are affected by the aura. This method
    is typically invoked during aura application or removal to ensure that the target
    list accurately reflects the current state of the aura's effects. The method takes
    into account the caster unit and whether the aura should be applied or removed
    from the target list. It plays a crucial role in maintaining proper game mechanics
    related to spell effects and their targeting.
  parameters:
  - name: caster
    description: Pointer to the Unit object that is casting the aura. This determines
      the source of the aura's effects and influences how targets are updated.
  - name: apply
    description: Boolean value indicating whether the aura should be applied (true)
      or removed (false) from the target map. This controls the behavior of the method.
  returns: null
  examples:
  - title: Basic Aura Update Example
    code: 'Aura* aura = new Aura();

      Unit* caster = player;

      bool apply = true;

      aura->UpdateTargetMap(caster, apply);'
    language: cpp
  notes: This method is typically called internally by the TrinityCore system during
    spell application or removal processes. It may involve complex target selection
    logic depending on the aura type and its effects. Performance considerations include
    avoiding unnecessary updates when targets are already correctly set.
  warnings: Improper handling of the caster parameter can lead to incorrect targeting,
    potentially causing the aura to affect unintended units or fail to affect intended
    ones. Care must be taken when applying or removing auras to ensure proper target
    mapping.
  related:
  - Aura::GetTargetMap
  - Aura::AddTarget
  - Aura::RemoveTarget
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T02:51:38.551399'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
