api:
  class: RetributionPaladinRefactored
  method: UpdateRotation
  signature: void RetributionPaladinRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the retribution paladin's spell rotation based on current target
    and combat state
  description: The UpdateRotation method manages the core combat decision-making logic
    for a Retribution Paladin AI. It evaluates the current target, player's resource
    levels, spell cooldowns, and combat situation to determine the optimal next spell
    to cast. This method integrates with TrinityCore's combat system to ensure proper
    spell sequencing, cooldown management, and resource optimization. The method typically
    gets called during the AI update cycle and may modify the paladin's current target
    or spell selection based on tactical considerations such as Holy Power generation,
    judgment timing, and damage output efficiency.
  parameters:
  - name: target
    description: Pointer to the current target entity that the paladin should evaluate
      for rotation decisions. The target may be modified by this method if a different
      target is deemed more optimal for combat effectiveness.
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void PaladinAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \    {\n        m_retributionPaladin.UpdateRotation(&target);\n    }\n}"
    language: cpp
  - title: Integration with Custom Combat Logic
    code: "void RetributionPaladinRefactored::UpdateRotation(int* target)\n{\n   \
      \ if (!*target || !GetUnit(*target))\n        return;\n    \n    Unit* pTarget\
      \ = GetUnit(*target);\n    if (pTarget->IsDead())\n    {\n        *target =\
      \ 0; // Reset target\n        return;\n    }\n    \n    // Core rotation logic\
      \ here\n    // ... spell selection and execution\n}"
    language: cpp
  notes: This method is typically invoked within the AI update loop at regular intervals.
    The target parameter may be modified by this function to switch targets if a more
    optimal combat situation arises. Performance considerations include avoiding expensive
    operations during rotation updates, as this method can be called frequently during
    combat.
  warnings: Modifying the target pointer directly can cause unexpected behavior if
    other systems depend on the original target reference. Ensure that any target
    switching logic properly notifies dependent systems of changes.
  related:
  - GetNextSpell
  - CanCastSpell
  - CheckCooldowns
  - EvaluateTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T20:35:45.707502'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
