api:
  class: VendorInteraction
  method: ExecutePurchaseTransaction
  signature: void VendorInteraction::ExecutePurchaseTransaction(Player * player, uint32
    vendorGuid, uint32 itemId, uint32 count)
documentation:
  brief: Processes a purchase transaction from a player to a vendor for a specified
    item and quantity.
  description: The ExecutePurchaseTransaction method handles the core logic for processing
    a player's purchase request from a vendor. It validates the transaction, checks
    if the player has sufficient funds, verifies item availability in the vendor's
    inventory, and performs the necessary currency deduction and item delivery. This
    method is typically invoked when a player selects an item to buy from a vendor
    interface, ensuring that all game mechanics related to trading are properly enforced.
  parameters:
  - name: player
    description: Pointer to the Player object initiating the purchase transaction.
      Must be a valid player instance with an active session.
  - name: vendorGuid
    description: The unique identifier (GUID) of the vendor the player is purchasing
      from. Used to locate and validate the vendor in the game world.
  - name: itemId
    description: The entry ID of the item being purchased. Must correspond to a valid
      item in the game database.
  - name: count
    description: The quantity of items the player wishes to purchase. Must be a positive
      integer, typically limited by item stacking rules.
  returns: null
  examples:
  - title: Basic Purchase Transaction
    code: 'Player* player = ...; // Valid player instance

      uint32 vendorGuid = 12345;

      uint32 itemId = 1001;

      uint32 count = 1;

      VendorInteraction::ExecutePurchaseTransaction(player, vendorGuid, itemId, count);'
    language: cpp
  - title: Bulk Purchase Transaction
    code: 'Player* player = ...; // Valid player instance

      uint32 vendorGuid = 67890;

      uint32 itemId = 2005;

      uint32 count = 10;

      VendorInteraction::ExecutePurchaseTransaction(player, vendorGuid, itemId, count);'
    language: cpp
  notes: This method assumes that all preconditions such as player proximity to the
    vendor and item availability have already been validated. The method internally
    handles currency deduction, item delivery, and vendor inventory updates. It does
    not perform any validation on the input parameters beyond basic type checks.
  warnings: Calling this method without proper prior validation may result in unexpected
    behavior or crashes. Ensure that the player is within interaction range of the
    vendor and that the item exists in the vendor's inventory before calling this
    method.
  related:
  - VendorInteraction::ValidatePurchase
  - VendorInteraction::UpdateVendorInventory
  - Player::ModifyMoney
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T17:46:34.819017'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
