api:
  class: DeclinedNames
  method: WriteUpdate
  signature: void DeclinedNames::WriteUpdate(ByteBuffer & data, bool ignoreChangesMask,
    const Player * owner, const Player * receiver) const
documentation:
  brief: Serializes declined name data into a ByteBuffer for network transmission
    to a player.
  description: The WriteUpdate method serializes the declined names data of a player
    character into a ByteBuffer, preparing it for network transmission. This method
    is typically used when sending updated declined name information to a client player,
    ensuring that any changes to the character's declined names are properly synchronized.
    The serialization process respects the ignoreChangesMask parameter which can bypass
    certain change tracking mechanisms. The owner and receiver parameters provide
    context for determining what data should be included in the update packet based
    on the relationship between the player whose data is being sent and the receiving
    player.
  parameters:
  - name: data
    description: Reference to a ByteBuffer where the serialized declined names data
      will be written. This buffer is typically used for constructing network packets.
  - name: ignoreChangesMask
    description: Boolean flag that determines whether to ignore change tracking masks
      when serializing data. When true, all declined name fields are included regardless
      of their change status.
  - name: owner
    description: Pointer to the Player object whose declined names data is being serialized.
      This represents the character whose information is being sent.
  - name: receiver
    description: Pointer to the Player object who will receive this declined name
      update. Used to determine what data should be included based on player relationship
      and permissions.
  returns: null
  examples:
  - title: Basic declined names update serialization
    code: 'ByteBuffer data;

      Player* owner = ...; // Player whose declined names are being updated

      Player* receiver = ...; // Player receiving the update

      DeclinedNames* declinedNames = owner->GetDeclinedNames();

      declinedNames->WriteUpdate(data, false, owner, receiver);'
    language: cpp
  notes: This method is part of the TrinityCore's player data synchronization system.
    It should only be called when declined names have actually changed or when explicit
    updates are required. The method handles proper serialization format for World
    of Warcraft client compatibility, including field ordering and packet structure.
  warnings: Calling this method without proper change tracking can result in unnecessary
    network traffic. Ensure that declined names data is properly marked as changed
    before calling this method to maintain performance optimization.
  related:
  - GetDeclinedNames
  - SetDeclinedNames
  - HasDeclinedNames
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T06:35:00.059551'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
