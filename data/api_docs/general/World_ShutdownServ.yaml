api:
  class: World
  method: ShutdownServ
  signature: void World::ShutdownServ(uint32 time, uint32 options, uint8 exitcode,
    const std::string & reason)
documentation:
  brief: Initiates a controlled shutdown of the World server with specified delay,
    options, and exit code.
  description: The ShutdownServ method schedules a controlled shutdown of the TrinityCore
    World server. It allows administrators to specify a delay before shutdown, configure
    shutdown options (such as restart or clean exit), define an exit code for the
    process, and provide a reason for the shutdown. This method is typically used
    during maintenance windows, updates, or emergency situations where the server
    needs to be taken offline gracefully. The shutdown process respects active connections
    and pending operations to ensure data integrity and prevent corruption.
  parameters:
  - name: time
    description: The delay in milliseconds before the shutdown occurs. A value of
      0 means immediate shutdown.
  - name: options
    description: Bitmask options controlling shutdown behavior. Common values include
      0 for normal shutdown, 1 for restart, and 2 for clean exit.
  - name: exitcode
    description: The exit code returned by the process upon shutdown completion. Used
      by operating systems to indicate success or failure of the shutdown operation.
  - name: reason
    description: A descriptive string explaining why the server is shutting down.
      This can be displayed in logs or console output for administrative reference.
  returns: null
  examples:
  - title: Immediate Shutdown with Restart Option
    code: World::instance()->ShutdownServ(0, 1, 0, "Scheduled maintenance reboot");
    language: cpp
  - title: Delayed Shutdown with Clean Exit
    code: World::instance()->ShutdownServ(30000, 0, 0, "Emergency patch deployment");
    language: cpp
  notes: This method should only be called from within the server's main thread or
    a controlled environment to avoid race conditions. The shutdown process may take
    several seconds to complete depending on active connections and pending operations.
    It is recommended to use this method instead of direct process termination for
    proper cleanup.
  warnings: Calling ShutdownServ with a time value of 0 will cause an immediate shutdown
    without warning players, which can result in lost data or incomplete transactions.
    Always ensure that appropriate warnings are sent to players before initiating
    a shutdown.
  related:
  - World::Shutdown
  - World::IsShuttingDown
  - World::GetShutDownTime
metadata:
  confidence: 0.95
  generated_at: '2025-11-05T23:29:54.748335'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
