api:
  class: ShamanAI
  method: GetOptimalWeaponImbue
  signature: int ShamanAI::GetOptimalWeaponImbue(bool mainHand) const
documentation:
  brief: Determines the optimal weapon imbue type for a shaman based on current combat
    state and spell availability.
  description: The GetOptimalWeaponImbue method evaluates the shaman's current combat
    situation to determine which weapon imbue should be applied to maximize damage
    output. It considers factors such as available spells, weapon types, and current
    target conditions. The method returns an integer representing the type of imbue
    to apply, with specific values corresponding to different imbue effects like Elemental
    Sharpening Stone, Windfury Weapon, or other applicable enchantments. This method
    is crucial for AI decision-making in shaman combat behavior and ensures optimal
    use of weapon enhancements during battle.
  parameters: []
  returns: 'Returns an integer representing the optimal imbue type to apply to the
    weapon. Possible values include: 1 for Elemental Sharpening Stone, 2 for Windfury
    Weapon, 3 for Flametongue Weapon, and 0 if no optimal imbue is available or applicable.'
  examples:
  - title: Basic Usage in Shaman AI
    code: "int imbueType = shamanAI->GetOptimalWeaponImbue(true);\nif (imbueType >\
      \ 0)\n{\n    // Apply the determined imbue to main hand weapon\n    player->ApplyWeaponImbue(imbueType,\
      \ true);\n}"
    language: cpp
  - title: Using Imbue Result for Combat Decision
    code: "ShamanAI* ai = static_cast<ShamanAI*>(unit->GetAI());\nint mainHandImbue\
      \ = ai->GetOptimalWeaponImbue(true);\nint offHandImbue = ai->GetOptimalWeaponImbue(false);\n\
      \nif (mainHandImbue == 2 || offHandImbue == 2)\n{\n    // Windfury is optimal,\
      \ cast appropriate spell\n    if (!unit->HasAura(SPELL_WINDFURY_WEAPON))\n \
      \       unit->CastSpell(unit, SPELL_WINDFURY_WEAPON, true);\n}"
    language: cpp
  notes: This method relies on internal AI state tracking and should only be called
    when the shaman is in combat or has valid target information. The returned values
    are based on hardcoded constants that correspond to specific imbue types defined
    within TrinityCore's spell system.
  warnings: Do not call this method outside of combat context as it may return invalid
    results due to missing target or spell availability data. The method assumes the
    shaman has access to appropriate weapon types and does not validate if the player
    actually possesses the required items.
  related:
  - GetAI
  - CastSpell
  - HasAura
  - ApplyWeaponImbue
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T10:05:52.758501'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
