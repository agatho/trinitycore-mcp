api:
  class: RoleAssignment
  method: SetPlayerRolePreference
  signature: void RoleAssignment::SetPlayerRolePreference(uint32 playerGuid, GroupRole
    preferredRole)
documentation:
  brief: Sets the preferred role for a player within the group assignment system.
  description: The SetPlayerRolePreference method assigns a specific role preference
    to a player identified by their GUID. This role preference is used by the group
    assignment logic to determine optimal role distribution during group creation
    or reassignment. The method updates internal player data structures to reflect
    the new preferred role, which may influence future group compositions and role
    balancing decisions. This functionality is integral to TrinityCore's group management
    system, particularly in scenarios involving raid groups where role specialization
    (tank, healer, damage dealer) is important for optimal performance.
  parameters:
  - name: playerGuid
    description: The unique identifier (GUID) of the player whose role preference
      is being set. Must be a valid player GUID within the current session.
  - name: preferredRole
    description: The GroupRole enum value representing the player's preferred role.
      Valid values typically include GROUP_ROLE_TANK, GROUP_ROLE_HEALER, and GROUP_ROLE_DAMAGE.
  returns: null
  examples:
  - title: Setting a Player's Preferred Role
    code: 'RoleAssignment ra;

      ra.SetPlayerRolePreference(12345, GROUP_ROLE_DAMAGE);'
    language: cpp
  - title: Updating Role Preference for a Specific Player
    code: 'uint32 playerId = player->GetGUID().GetCounter();

      RoleAssignment* roleAssign = sObjectMgr->GetRoleAssignment();

      roleAssign->SetPlayerRolePreference(playerId, GROUP_ROLE_HEALER);'
    language: cpp
  notes: This method directly modifies in-memory player data structures. Changes made
    through this method are not persisted to the database automatically and will be
    lost upon server restart unless explicitly saved. The method should be called
    during appropriate game events or player interactions where role preferences are
    being updated.
  warnings: Calling this method with an invalid player GUID may result in undefined
    behavior or crashes. Ensure that the player GUID corresponds to an active player
    session before calling this method. Also, be aware that frequent changes to role
    preferences might interfere with automatic group balancing algorithms if not properly
    coordinated.
  related:
  - GetPlayerRolePreference
  - UpdateGroupRoles
  - AssignRolesToGroup
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T19:25:57.639391'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
