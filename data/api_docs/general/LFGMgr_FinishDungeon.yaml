api:
  class: LFGMgr
  method: FinishDungeon
  signature: void LFGMgr::FinishDungeon(int gguid, uint32 dungeonId, const Map * currMap)
documentation:
  brief: Completes a dungeon instance for the given group and updates LFG status
  description: The FinishDungeon method finalizes a dungeon instance by marking it
    as completed for the specified group GUID. It handles cleanup of LFG (Looking
    For Group) data, updates player statuses, and ensures proper synchronization with
    the game's dungeon finding system. This method is typically invoked when a group
    successfully finishes a dungeon or when a dungeon instance is abandoned. The method
    requires a valid map context to properly update the LFG state for all players
    in the group.
  parameters:
  - name: gguid
    description: The global group identifier (GUID) of the group that completed the
      dungeon. Must be a valid group GUID within the LFG system.
  - name: dungeonId
    description: The unique identifier for the dungeon that was completed. This ID
      corresponds to the dungeon entry in the game's database.
  - name: currMap
    description: Pointer to the current Map object where the dungeon completion occurred.
      Must be a valid map pointer, typically representing the instance map.
  returns: null
  examples:
  - title: Basic Dungeon Completion
    code: LFGMgr::instance()->FinishDungeon(123456, 7890, player->GetMap());
    language: cpp
  - title: Complete Dungeon with Group Cleanup
    code: "if (group && group->IsLfgGroup()) {\n    LFGMgr::instance()->FinishDungeon(group->GetGUID().GetCounter(),\
      \ 1234, instanceMap);\n}"
    language: cpp
  notes: This method assumes that all players in the group have been properly removed
    from the dungeon instance before calling. The method internally handles LFG state
    updates and may trigger notifications to other players in the group or LFG system.
    It is recommended to call this method only when the dungeon instance has truly
    ended, either through completion or abandonment.
  warnings: Calling this method with an invalid group GUID or dungeon ID can lead
    to undefined behavior or corruption of LFG data. Ensure that the provided map
    pointer is valid and represents the actual dungeon instance where the completion
    occurred.
  related:
  - LFGMgr::UpdateDungeon
  - LFGMgr::JoinDungeon
  - LFGMgr::LeaveDungeon
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T04:11:16.415930'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
