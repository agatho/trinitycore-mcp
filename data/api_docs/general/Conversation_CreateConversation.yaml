api:
  class: Conversation
  method: CreateConversation
  signature: Conversation * Conversation::CreateConversation(int conversationEntry,
    Unit * creator, const int & pos, int privateObjectOwner, const SpellInfo * spellInfo,
    bool autoStart)
documentation:
  brief: Creates a new conversation instance with specified parameters including entry
    ID, creator unit, position, and optional spell info.
  description: The CreateConversation method initializes and returns a new Conversation
    object based on the provided parameters. It allows for the creation of interactive
    dialogue sequences in World of Warcraft using TrinityCore's scripting system.
    The method accepts a conversation entry ID which defines the dialogue content,
    a creator unit that initiates the conversation, a position parameter to determine
    where the conversation starts, an optional private object owner for scope control,
    and a spell info pointer for context-specific behavior. This method is typically
    used when triggering NPC dialogues or scripted events that involve multiple dialogue
    options or sequential conversations.
  parameters:
  - name: conversationEntry
    description: The unique identifier (ID) of the conversation template to be created.
      This ID corresponds to entries in the `conversation_template` database table.
  - name: creator
    description: Pointer to the Unit object that initiates or owns this conversation.
      Usually an NPC or player unit.
  - name: pos
    description: Reference to an integer representing the position in the conversation
      flow, typically used for tracking dialogue progression or branching paths.
  - name: privateObjectOwner
    description: Optional integer value that defines the owner of private objects
      within the conversation context. Used for scope and access control.
  - name: spellInfo
    description: Pointer to a SpellInfo structure that provides additional context
      or behavior for the conversation, such as spell-based dialogue triggers or effects.
  - name: autoStart
    description: Boolean flag indicating whether the conversation should start automatically
      upon creation. If false, manual start is required.
  returns: Returns a pointer to the newly created Conversation object if successful,
    or nullptr if the creation fails due to invalid parameters or internal errors.
  examples:
  - title: Basic Conversation Creation
    code: Conversation* conv = Conversation::CreateConversation(12345, playerUnit,
      pos, 0, nullptr, true);
    language: cpp
  - title: Advanced Conversation with Spell Context
    code: 'SpellInfo* spell = sSpellMgr->GetSpellInfo(98765);

      Conversation* conv = Conversation::CreateConversation(12345, npcUnit, pos, 1001,
      spell, false);'
    language: cpp
  notes: This method internally handles memory allocation for the new Conversation
    object and sets up initial state variables. The conversation entry must exist
    in the database or the method will fail. The 'pos' parameter is crucial for maintaining
    conversation flow and should be managed carefully to avoid incorrect progression.
  warnings: Ensure that the conversation entry ID exists in the database, otherwise
    the returned pointer will be null. Be cautious with the 'privateObjectOwner' value
    as improper usage can lead to access violations or unexpected behavior in multi-threaded
    environments.
  related:
  - Conversation::Start
  - Conversation::Stop
  - Conversation::GetEntry
  - Conversation::SetCreator
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T09:21:49.689394'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
