api:
  class: CriteriaHandler
  method: CanUpdateCriteriaTree
  signature: bool CriteriaHandler::CanUpdateCriteriaTree(const Criteria * criteria,
    const CriteriaTree * tree, Player * referencePlayer) const
documentation:
  brief: Determines whether a criteria tree can be updated based on the provided criteria
    and reference player.
  description: The CanUpdateCriteriaTree method evaluates if a given criteria tree
    is eligible for an update operation. This function checks various conditions related
    to the criteria definition, the state of the reference player, and contextual
    game mechanics to determine eligibility. It is typically used during quest progression,
    achievement tracking, or other criterion-based systems within TrinityCore's framework.
    The method ensures that updates are only performed when appropriate, preventing
    invalid or unintended modifications to criteria trees.
  parameters:
  - name: criteria
    description: Pointer to the Criteria object that defines the conditions to be
      checked. Must not be null.
  - name: tree
    description: Pointer to the CriteriaTree object representing the tree structure
      associated with the criteria. Must not be null.
  - name: referencePlayer
    description: Pointer to the Player object used as context for evaluating the criteria
      update eligibility. Must not be null.
  returns: Returns true if the criteria tree can be updated under the given conditions,
    false otherwise. The result depends on internal validation logic involving player
    state, criteria requirements, and tree structure.
  examples:
  - title: Basic usage in a quest handler
    code: "if (criteriaHandler->CanUpdateCriteriaTree(criteria, tree, player)) {\n\
      \    // Proceed with updating the criteria tree\n    criteriaHandler->UpdateCriteriaTree(tree,\
      \ player);\n}"
    language: cpp
  - title: Advanced usage with conditional logic
    code: "bool canUpdate = criteriaHandler->CanUpdateCriteriaTree(criteria, tree,\
      \ player);\nif (canUpdate && player->HasQuest(12345)) {\n    // Perform additional\
      \ checks before updating\n    if (player->GetQuestStatus(12345) == QUEST_STATUS_INCOMPLETE)\
      \ {\n        criteriaHandler->UpdateCriteriaTree(tree, player);\n    }\n}"
    language: cpp
  notes: This method is part of the internal criteria management system and should
    not be called directly from external modules unless necessary. It performs checks
    against player state and criteria conditions that may vary depending on the specific
    implementation in TrinityCore.
  warnings: Ensure that all parameters passed to this method are valid pointers; passing
    null values will likely result in undefined behavior or crashes. This function
    is typically used internally by the core systems, so direct invocation should
    be done with caution.
  related:
  - UpdateCriteriaTree
  - GetCriteriaTree
  - CheckCriteriaProgress
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T09:00:32.282887'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
