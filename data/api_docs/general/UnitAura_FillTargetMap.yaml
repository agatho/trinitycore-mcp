api:
  class: UnitAura
  method: FillTargetMap
  signature: void UnitAura::FillTargetMap(int & targets, Unit * caster)
documentation:
  brief: Populates a target map with units affected by the aura, considering the caster's
    perspective.
  description: The FillTargetMap method is responsible for identifying and recording
    all units that are currently affected by the aura instance. It iterates through
    the aura's target list and adds valid targets to an internal mapping structure,
    typically used for managing aura effects on multiple targets. This method is crucial
    in the context of World of Warcraft spell mechanics where auras can affect multiple
    targets simultaneously, such as area-of-effect spells or periodic damage over
    time effects. The method takes into account the caster's perspective when determining
    which targets are valid for the aura application.
  parameters:
  - name: targets
    description: Reference to an integer that will be updated with the count of valid
      targets affected by this aura.
  - name: caster
    description: Pointer to the Unit object representing the caster of the aura. This
      is used to determine valid target relationships and to filter out invalid or
      immune targets.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'UnitAura* aura = new UnitAura();

      int targetCount = 0;

      Unit* caster = player;

      aura->FillTargetMap(targetCount, caster);

      // targetCount now contains the number of valid targets affected by this aura'
    language: cpp
  - title: Advanced Usage with Target Filtering
    code: "UnitAura* aura = unit->GetAura(12345);\nif (aura)\n{\n    int targetCount\
      \ = 0;\n    Unit* caster = aura->GetCaster();\n    aura->FillTargetMap(targetCount,\
      \ caster);\n    // Process the target count for further logic\n}"
    language: cpp
  notes: This method is typically called during aura application or update cycles.
    It's important to note that the targets parameter is modified by reference and
    should be initialized before calling this method. The method relies on internal
    target tracking mechanisms within the UnitAura class.
  warnings: Ensure that the caster pointer is valid before calling this method, as
    passing a null pointer may lead to undefined behavior. Also, be aware that calling
    this method during aura removal or modification can cause inconsistencies in target
    tracking if not handled carefully.
  related:
  - GetTargets
  - AddTarget
  - RemoveTarget
  - GetCaster
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T00:11:15.433502'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
