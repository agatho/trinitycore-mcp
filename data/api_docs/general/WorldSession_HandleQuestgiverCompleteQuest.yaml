api:
  class: WorldSession
  method: HandleQuestgiverCompleteQuest
  signature: void WorldSession::HandleQuestgiverCompleteQuest(WorldPackets::Quest::QuestGiverCompleteQuest
    & packet)
documentation:
  brief: Processes a client request to complete a quest from a questgiver.
  description: The HandleQuestgiverCompleteQuest method handles the client's request
    to finish a quest that was offered by a questgiver. It validates the quest completion
    conditions, updates the player's quest log, rewards the player with experience,
    items, and other benefits, and sends appropriate responses back to the client.
    This method is typically invoked when a player clicks the 'Complete Quest' button
    in the quest dialog after fulfilling all quest requirements. The method ensures
    that quest objectives are properly validated before granting rewards.
  parameters: []
  returns: null
  examples:
  - title: Basic Quest Completion Handling
    code: "void WorldSession::HandleQuestgiverCompleteQuest(WorldPackets::Quest::QuestGiverCompleteQuest&\
      \ packet)\n{\n    // Validate quest completion\n    if (!player->GetQuestStatus(packet.QuestID)\
      \ == QUEST_STATUS_COMPLETE)\n        return;\n    \n    // Process rewards and\
      \ update quest log\n    player->RewardQuest(packet.QuestID);\n    \n    // Send\
      \ confirmation to client\n    WorldPackets::Quest::QuestGiverQuestComplete questComplete;\n\
      \    questComplete.QuestID = packet.QuestID;\n    SendPacket(questComplete.Write());\n\
      }"
    language: cpp
  notes: This method is part of the core quest handling system in TrinityCore. It
    should only be called from within the network packet processing loop. The method
    assumes that all prerequisite checks (such as quest availability and completion
    requirements) have already been validated by earlier stages of the quest flow.
  warnings: Do not call this method directly without proper validation of quest state
    and player eligibility. Incorrect handling can lead to quest reward duplication
    or client desynchronization issues.
  related:
  - HandleQuestgiverHello
  - HandleQuestgiverAcceptQuest
  - HandleQuestgiverCancel
  - RewardQuest
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T20:57:50.705321'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
