api:
  class: ShamanAI
  method: UpdateElementalRotation
  signature: bool ShamanAI::UpdateElementalRotation(int * target)
documentation:
  brief: Updates the elemental shaman's rotation logic and returns whether a new target
    was selected.
  description: The UpdateElementalRotation method manages the core AI decision-making
    process for elemental shamans, determining when to cast spells based on combat
    state, mana availability, and target conditions. It evaluates the current situation
    and may select a new target if the existing one is invalid or if a better opportunity
    arises. The method integrates with the shaman's spell rotation system to ensure
    optimal use of abilities like Lava Burst, Earth Shock, and Chain Lightning according
    to game mechanics and cooldowns. This function is typically called during AI update
    cycles to maintain active combat engagement.
  parameters: []
  returns: Returns true if a new target was successfully selected or if the rotation
    logic determined that a spell should be cast immediately; returns false otherwise,
    indicating no action was taken or the current target remains valid.
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void ElementalShamanAI::UpdateAI(uint32 diff)\n{\n    if (!UpdateElementalRotation(nullptr))\n\
      \        return;\n    // Continue with other AI logic\n}"
    language: cpp
  - title: Target Management with Custom Logic
    code: "bool ShamanAI::UpdateElementalRotation(int* target)\n{\n    if (me->GetVictim()\
      \ && !me->GetVictim()->IsAlive())\n        me->SelectNearestTarget();\n    \n\
      \    if (!me->GetVictim())\n        return false;\n    \n    if (target)\n \
      \       *target = me->GetVictim()->GetGUID().GetRawValue();\n    \n    return\
      \ true;\n}"
    language: cpp
  notes: This method is part of the core AI update cycle and should be called regularly
    to maintain proper spell rotation behavior. The implementation may vary between
    different versions of TrinityCore, but generally follows standard elemental shaman
    rotation priorities including maintaining DoTs, managing mana efficiently, and
    responding to threat levels.
  warnings: Do not call this method directly from outside the AI context without understanding
    its internal dependencies. Improper usage can lead to incorrect spell casting
    or target selection issues that may break combat logic.
  related:
  - ShamanAI::UpdateCombat
  - ShamanAI::SelectNewTarget
  - ShamanAI::CastSpell
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T23:42:02.846929'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
