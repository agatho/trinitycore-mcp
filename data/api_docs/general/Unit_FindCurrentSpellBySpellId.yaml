api:
  class: Unit
  method: FindCurrentSpellBySpellId
  signature: Spell * Unit::FindCurrentSpellBySpellId(uint32 spell_id) const
documentation:
  brief: Returns the current spell instance matching the specified spell ID if found.
  description: This method searches through the active spells of a Unit (such as a
    player or creature) to find and return the Spell instance that matches the given
    spell ID. It is commonly used in World of Warcraft TrinityCore to retrieve specific
    active spell effects, particularly when dealing with spell mechanics that require
    checking if a particular spell is currently active on the unit. The method returns
    nullptr if no matching spell is found, making it useful for conditional logic
    and spell validation checks.
  parameters: []
  returns: Returns a pointer to the Spell instance matching the specified spell ID,
    or nullptr if no such spell is currently active on the unit. This allows developers
    to perform further operations on the spell, such as checking its duration, stack
    count, or other properties.
  examples:
  - title: Basic usage example
    code: "Spell *spell = unit->FindCurrentSpellBySpellId(12345);\nif (spell)\n{\n\
      \    // Spell is active\n    // Do something with the spell\n}"
    language: cpp
  - title: Advanced usage example
    code: "Spell *spell = unit->FindCurrentSpellBySpellId(12345);\nif (spell && spell->IsSpellActive())\n\
      {\n    // Check if spell is active and perform actions\n    uint32 stackCount\
      \ = spell->GetStackAmount();\n    // Use stack count for further logic\n}"
    language: cpp
  notes: This method is typically used in conjunction with other spell-related methods
    like GetSpellInfo or GetSpellMod. It does not modify the spell state, but rather
    retrieves an existing active spell from the unit's current spell list. Performance-wise,
    it should be used carefully as it involves iterating through all active spells.
  warnings: Be cautious when using this method with spell IDs that may have multiple
    instances (e.g., stacking spells). This method returns only one instance and may
    not account for all active spell effects of the same ID. Also, ensure that the
    unit is not null before calling this method to avoid crashes.
  related:
  - FindCurrentSpellBySpellId
  - GetSpellInfo
  - GetSpellMod
  - IsSpellActive
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T21:08:15.453841'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
