api:
  class: FormulaScript
  method: OnZeroDifferenceCalculation
  signature: void FormulaScript::OnZeroDifferenceCalculation(uint8 & diff, uint8 playerLevel)
documentation:
  brief: Calculates and adjusts the difference value for zero-difference scenarios
    in combat or skill calculations.
  description: The OnZeroDifferenceCalculation method is a hook point within the FormulaScript
    class that allows custom logic to be applied when calculating differences in combat
    or skill-related scenarios where the base difference is zero. This method modifies
    the 'diff' parameter, which typically represents a level or skill difference between
    entities involved in an interaction such as PvP combat, spell casting, or skill
    checks. It is invoked during formula calculations to ensure proper handling of
    edge cases where standard logic may not apply. The playerLevel parameter provides
    context for how the calculation should be adjusted based on the player's current
    level.
  parameters:
  - name: diff
    description: Reference to a uint8 value representing the calculated difference
      that may be modified by this method. This is typically used in combat or skill
      calculations where zero-difference scenarios need special handling.
  - name: playerLevel
    description: A uint8 value indicating the level of the player involved in the
      calculation. This parameter provides context for adjusting the difference based
      on player progression and game balance requirements.
  returns: null
  examples:
  - title: Basic Override Example
    code: "class MyFormulaScript : public FormulaScript {\npublic:\n    void OnZeroDifferenceCalculation(uint8&\
      \ diff, uint8 playerLevel) override {\n        // Ensure minimum difference\
      \ of 1 for low-level players\n        if (playerLevel < 10)\n            diff\
      \ = 1;\n    }\n};"
    language: cpp
  - title: Advanced Conditional Adjustment
    code: "class MyFormulaScript : public FormulaScript {\npublic:\n    void OnZeroDifferenceCalculation(uint8&\
      \ diff, uint8 playerLevel) override {\n        // Adjust based on player level\
      \ and game balance\n        if (playerLevel >= 60 && diff == 0)\n          \
      \  diff = 2; // Higher-level players get a slight advantage\n        else if\
      \ (playerLevel < 10 && diff == 0)\n            diff = 3; // Low-level players\
      \ get more leniency\n    }\n};"
    language: cpp
  notes: This method is part of the FormulaScript system, which allows developers
    to override default game formulas for various mechanics. It's commonly used in
    PvP balancing, skill progression adjustments, and combat formula modifications.
    The diff parameter is passed by reference, so changes made directly affect the
    calling code's value.
  warnings: Modifying the 'diff' parameter can significantly impact gameplay balance.
    Ensure that any custom logic maintains fairness and does not create exploits or
    unintended advantages for certain player levels or classes. Be cautious when changing
    values based on player level without thorough testing.
  related:
  - OnCalculateDamage
  - OnCalculateHealing
  - OnSpellMissChance
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T07:22:08.070667'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
