api:
  class: CombatStateAnalyzer
  method: CheckForDefensiveNeed
  signature: bool CombatStateAnalyzer::CheckForDefensiveNeed() const
documentation:
  brief: Determines whether the combat state requires defensive action based on current
    threat and health metrics.
  description: The CheckForDefensiveNeed method evaluates the current combat state
    of a unit to determine if defensive actions are necessary. It analyzes factors
    such as the unit's health percentage, incoming threat level, and proximity to
    dangerous attacks. This method is typically used by AI systems to decide when
    to activate defensive abilities or spells. The evaluation considers both immediate
    danger and overall combat context to make an informed decision about defensive
    needs.
  parameters: []
  returns: Returns true if the combat state indicates a need for defensive action,
    such as when health is critically low or threat levels are high; returns false
    otherwise.
  examples:
  - title: Basic Usage in AI Logic
    code: "if (analyzer.CheckForDefensiveNeed()) {\n    unit->CastSpell(unit, DEFENSIVE_SPELL_ID);\n\
      }"
    language: cpp
  - title: Integration with Combat State Management
    code: "void UnitAI::UpdateAI() {\n    if (combatAnalyzer.CheckForDefensiveNeed())\
      \ {\n        // Activate defensive cooldowns\n        if (defensiveCooldown.IsReady())\
      \ {\n            unit->CastSpell(unit, SHIELD_SPELL_ID);\n        }\n    }\n\
      }"
    language: cpp
  notes: This method is part of the combat state analysis system and should be called
    regularly during combat updates. It may perform multiple internal checks including
    health thresholds, threat calculations, and attack pattern analysis. The method
    assumes that the unit's current combat state has been properly initialized.
  warnings: The method relies on accurate combat state data; calling it without proper
    initialization of the combat context may lead to incorrect defensive decisions.
    Avoid calling this method in high-frequency loops without considering performance
    implications.
  related:
  - CombatStateAnalyzer::GetThreatLevel
  - CombatStateAnalyzer::GetCurrentHealthPercentage
  - CombatStateAnalyzer::IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:38:46.270124'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
