api:
  class: DungeonBehavior
  method: HandleEncounterLoot
  signature: void DungeonBehavior::HandleEncounterLoot(Group * group, uint32 encounterId)
documentation:
  brief: Processes loot distribution for a completed dungeon encounter within a group.
  description: The HandleEncounterLoot method manages the loot distribution logic
    for a completed dungeon encounter. It takes a pointer to a Group object and an
    encounter identifier, then handles the appropriate loot generation, distribution,
    and assignment to group members. This method is typically invoked when a dungeon
    encounter concludes successfully, ensuring that all eligible players receive their
    share of the encounter rewards. The method operates within the TrinityCore's dungeon
    management system and integrates with the game's loot rules and group loot settings.
  parameters:
  - name: group
    description: Pointer to the Group object containing players who participated in
      the encounter. Must be a valid group with at least one member.
  - name: encounterId
    description: Unique identifier for the completed dungeon encounter. This ID corresponds
      to specific encounters defined in the game's database and determines which loot
      is awarded.
  returns: null
  examples:
  - title: Basic usage in dungeon completion handler
    code: "void OnDungeonComplete(Player* player, uint32 encounterId)\n{\n    Group*\
      \ group = player->GetGroup();\n    if (group)\n    {\n        sDungeonBehavior->HandleEncounterLoot(group,\
      \ encounterId);\n    }\n}"
    language: cpp
  - title: Integration with custom dungeon system
    code: "class CustomDungeonSystem\n{\npublic:\n    void CompleteEncounter(Player*\
      \ player, uint32 encounterId)\n    {\n        Group* group = player->GetGroup();\n\
      \        if (group && group->isRaidGroup())\n        {\n            // Apply\
      \ custom loot rules before calling base handler\n            HandleCustomLootRules(group,\
      \ encounterId);\n            sDungeonBehavior->HandleEncounterLoot(group, encounterId);\n\
      \        }\n    }\n};"
    language: cpp
  notes: This method relies on the TrinityCore's loot system and group management
    components. It assumes that the group members are valid and that the encounter
    has been properly marked as completed in the database. The method does not perform
    any validation of the encounter state or group membership beyond basic null checks.
  warnings: Ensure that the Group pointer is valid and contains at least one member
    before calling this method. Passing an invalid encounterId may result in undefined
    behavior or no loot being distributed. This method should only be called after
    verifying that the encounter has been successfully completed.
  related:
  - DungeonBehavior::HandleEncounterStart
  - DungeonBehavior::HandleEncounterEnd
  - Group::SendLoot
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T15:20:35.834189'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
