api:
  class: HolyPaladinRefactored
  method: GetMainTank
  signature: Player * HolyPaladinRefactored::GetMainTank(int * group) const
documentation:
  brief: Returns the main tank player in the Holy Paladin's group.
  description: The GetMainTank method retrieves the Player object representing the
    main tank assigned to the Holy Paladin's current group. This method is typically
    used in group-based gameplay scenarios where the Holy Paladin needs to identify
    which player is designated as the primary target for threat management or defensive
    abilities. The returned Player pointer may be null if no valid main tank is assigned
    or if the player is not in a group. The method considers the group's current tank
    assignment and returns the appropriate player object.
  parameters: []
  returns: A pointer to the Player object representing the main tank in the group,
    or nullptr if no main tank is assigned or the player is not in a group.
  examples:
  - title: Basic Usage
    code: "Player* mainTank = paladin->GetMainTank();\nif (mainTank)\n{\n    // Use\
      \ the main tank for defensive actions\n    paladin->CastSpell(mainTank, SPELL_HOLY_SHIELD);\n\
      }"
    language: cpp
  - title: Group Tank Management
    code: "Player* mainTank = paladin->GetMainTank();\nif (mainTank && mainTank->IsAlive())\n\
      {\n    // Ensure the main tank is still alive before targeting\n    paladin->SetTarget(mainTank->GetGUID());\n\
      \    paladin->CastSpell(mainTank, SPELL_BLESSING_OF_PROTECTION);\n}\nelse\n\
      {\n    // Find a new target if main tank is dead or invalid\n    paladin->SelectNewTarget();\n\
      }"
    language: cpp
  notes: This method relies on the internal group management system of TrinityCore.
    The returned Player pointer should not be stored for extended periods as it may
    become invalid if the player leaves the group or is disconnected. The method performs
    no locking operations, so thread safety must be ensured by the calling code if
    used in multithreaded contexts.
  warnings: The method may return nullptr if the player is not in a group or if there's
    no valid main tank assigned. Always check for null before using the returned pointer
    to prevent crashes. The main tank assignment can change dynamically during combat,
    so relying on cached results may lead to outdated behavior.
  related:
  - GetGroup
  - SetMainTank
  - IsInGroup
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T09:10:54.210503'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
