api:
  class: Guild
  method: HandleBuyBankTab
  signature: void Guild::HandleBuyBankTab(WorldSession * session, uint8 tabId)
documentation:
  brief: Processes a player's request to purchase a new bank tab for their guild.
  description: The HandleBuyBankTab method handles the logic when a guild member attempts
    to buy a new bank tab using guild funds. It verifies that the player has sufficient
    gold, checks if the guild has enough money to cover the tab cost, and ensures
    the tab ID is valid. If all conditions are met, it deducts the required amount
    from the guild's bank and creates a new bank tab for the guild. This method is
    typically invoked when a player interacts with a guild banker NPC or uses a specific
    command to purchase a bank tab.
  parameters:
  - name: session
    description: Pointer to the WorldSession object representing the player's active
      session. Used to access player information and send responses back to the client.
  - name: tabId
    description: The index of the bank tab to be purchased (0-based). Must be a valid
      tab ID within the range of available tabs for the guild, typically 0-6 for standard
      WoW guilds.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'WorldSession* session = player->GetSession();

      uint8 tabId = 2;

      player->GetGuild()->HandleBuyBankTab(session, tabId);'
    language: cpp
  notes: This method assumes that the guild member has proper permissions to purchase
    bank tabs. The actual cost of a bank tab is determined by the game's configuration
    and may vary based on server settings or expansion content.
  warnings: Ensure that the tabId parameter is validated before calling this method,
    as invalid indices can cause undefined behavior or crashes in the client-side
    UI. Also, verify that the guild has sufficient funds to cover the tab cost before
    invoking this method.
  related:
  - Guild::GetBankTabCost
  - Guild::HasBankTab
  - Guild::AddBankTab
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T00:39:04.961378'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
