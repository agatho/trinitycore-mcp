api:
  class: MovementValidator
  method: CalculateUnstuckPosition
  signature: bool MovementValidator::CalculateUnstuckPosition(Player * bot, int &
    unstuckPos) const
documentation:
  brief: Calculates and returns an unstuck position for a player bot when it becomes
    trapped in terrain or obstacles.
  description: The CalculateUnstuckPosition method attempts to determine a valid,
    unstuck location for a Player bot that has become immobilized due to collision
    with environment geometry or other entities. It evaluates the current position
    of the bot and calculates an alternative position that avoids solid obstacles.
    The method modifies the provided 'unstuckPos' parameter to indicate the calculated
    safe position index. This functionality is crucial for AI-driven bots to maintain
    mobility and prevent them from getting stuck in corners, walls, or other impassable
    areas during movement operations. The method returns true if a valid unstuck position
    was successfully calculated, false otherwise.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that needs to be
      unstuck. Must not be null.
  - name: unstuckPos
    description: Reference to an integer that will be updated with the calculated
      unstuck position index. This value represents a valid movement point in the
      bot's pathfinding system.
  returns: True if a valid unstuck position was successfully calculated and stored
    in 'unstuckPos', false if no suitable position could be determined or if the input
    parameters are invalid.
  examples:
  - title: Basic usage of CalculateUnstuckPosition
    code: "Player* bot = ...; // Get reference to bot\nint unstuckPos = 0;\nif (movementValidator.CalculateUnstuckPosition(bot,\
      \ unstuckPos)) {\n    // Use the calculated unstuck position for movement\n\
      \    bot->MoveTo(unstuckPos);\n} else {\n    // Handle case where no unstuck\
      \ position was found\n    LOG_ERROR(\"ai\", \"Failed to calculate unstuck position\
      \ for bot {}\");\n}"
    language: cpp
  notes: This method relies on the underlying movement system's ability to detect
    collisions and find valid positions. It may be computationally expensive if multiple
    iterations are required to find a suitable location. The method assumes that the
    bot's current position is accessible for collision checking.
  warnings: The method modifies the 'unstuckPos' parameter directly, so ensure this
    variable is initialized or cleared before calling. If the bot is in an extremely
    confined space with no valid unstuck positions, the method will return false without
    modifying the parameter.
  related:
  - MovementValidator::ValidatePosition
  - MovementValidator::CalculatePath
  - Player::MoveTo
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T23:29:18.199893'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
