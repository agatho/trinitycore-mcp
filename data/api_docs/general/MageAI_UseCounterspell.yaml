api:
  class: MageAI
  method: UseCounterspell
  signature: void MageAI::UseCounterspell(::Unit * target)
documentation:
  brief: Initiates a counterspell ability on the specified target unit.
  description: The UseCounterspell method is used by MageAI to cast the Counterspell
    spell on a given target unit. This ability interrupts enemy spellcasting and prevents
    the target from completing their current spell. The method typically checks if
    the mage has sufficient mana and if the target is casting a spell before attempting
    to counterspell. It's an essential part of the mage's defensive combat strategy,
    particularly against spellcasters who rely on sustained magical attacks.
  parameters:
  - name: target
    description: Pointer to the Unit object that is currently casting a spell and
      will be targeted by the counterspell ability. Must not be null.
  returns: null
  examples:
  - title: Basic Counterspell Usage
    code: "void MageAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \    {\n        if (target->IsNonMeleeSpellCasted())\n        {\n          \
      \  UseCounterspell(target);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called within the AI update loop when a target is
    detected casting a spell. It assumes that the MageAI instance has access to the
    necessary spell data and that the target unit is valid. The actual spell execution
    logic is likely handled by the core TrinityCore spell system.
  warnings: Ensure that the target unit is actually casting a spell before calling
    this method, otherwise the counterspell may fail or cause unexpected behavior.
    Also verify that the mage has sufficient mana to cast the spell.
  related:
  - CastSpell
  - IsCasting
  - SelectTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T00:39:11.530276'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
