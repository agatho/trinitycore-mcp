api:
  class: LoSUtils
  method: IsBelowGround
  signature: bool LoSUtils::IsBelowGround(const int & pos, Map * map, float threshold)
documentation:
  brief: Determines whether a given position is below ground level within a specified
    map.
  description: 'The IsBelowGround method checks if a specific position, defined by
    its coordinates, lies beneath the ground surface in the context of a given map.
    This utility function is commonly used in pathfinding, line-of-sight calculations,
    and terrain validation logic within TrinityCore''s game engine. The method uses
    a threshold value to determine how far below the surface the point must be to
    qualify as ''below ground''. It relies on the map''s height data to perform this
    check. Precondition: The provided map pointer must be valid and initialized. Postcondition:
    Returns true if the position is below the ground level according to the threshold,
    false otherwise.'
  parameters:
  - name: pos
    description: Reference to an integer representing the position coordinate. In
      TrinityCore, this typically refers to a coordinate value in the map's local
      space or a packed coordinate identifier.
  - name: map
    description: Pointer to the Map object where the position is evaluated. Must be
      a valid and initialized map instance for accurate results.
  - name: threshold
    description: A float value defining how far below the ground level the point must
      be to be considered 'below ground'. Higher values mean a greater distance below
      surface is required for a true return value.
  returns: Returns true if the specified position is below the ground level according
    to the provided threshold; otherwise, returns false.
  examples:
  - title: Basic usage of IsBelowGround
    code: "Map* myMap = ...; // Assume valid map\nint position = 12345;\nfloat threshold\
      \ = 0.5f;\nbool isBelow = LoSUtils::IsBelowGround(position, myMap, threshold);\n\
      if (isBelow)\n    std::cout << \"Position is below ground.\" << std::endl;"
    language: cpp
  notes: This method depends on accurate heightmap data being loaded for the given
    map. If the map's height data is not properly initialized or available, the behavior
    may be undefined. Performance can vary based on how efficiently the map's height
    lookup is implemented.
  warnings: Ensure that the 'map' parameter is not null before calling this function.
    Using an invalid or uninitialized map pointer will likely cause a crash or incorrect
    result. Also, the 'pos' parameter should represent valid coordinates within the
    map's bounds for meaningful results.
  related:
  - IsAboveGround
  - GetHeightAtPosition
  - LineOfSightCheck
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T01:08:57.853486'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
