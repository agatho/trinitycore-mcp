api:
  class: TankPositioning
  method: HandleThreatPositioning
  signature: void TankPositioning::HandleThreatPositioning(Player * tank, Unit * target)
documentation:
  brief: Calculates and applies optimal positioning for a tank unit relative to its
    threat target.
  description: The HandleThreatPositioning method is responsible for determining the
    appropriate positioning strategy for a tank player in relation to their current
    threat target. This method evaluates the tank's current location, the target's
    position, and relevant combat mechanics to ensure optimal threat management and
    avoidance of aggro loss. It typically adjusts the tank's movement or stance to
    maintain proper distance and orientation while keeping the target within melee
    range. The method is part of the TankPositioning class which handles all positioning
    logic for tank characters in combat situations.
  parameters:
  - name: tank
    description: Pointer to the Player object representing the tank character that
      requires positioning adjustment. Must be a valid player instance with a valid
      unit reference.
  - name: target
    description: Pointer to the Unit object representing the threat target that the
      tank is engaging. Must be a valid unit instance and should be within combat
      range of the tank.
  returns: null
  examples:
  - title: Basic Tank Positioning Usage
    code: "void ApplyTankPositioning(Player* player, Unit* target)\n{\n    TankPositioning\
      \ positioning;\n    positioning.HandleThreatPositioning(player, target);\n}"
    language: cpp
  - title: Advanced Threat Positioning with Combat State Check
    code: "void AdvancedTankPositioning(Player* tank, Unit* target)\n{\n    if (!tank\
      \ || !target || !tank->IsInCombat() || !target->IsInCombat())\n        return;\n\
      \    \n    TankPositioning positioning;\n    positioning.HandleThreatPositioning(tank,\
      \ target);\n    \n    // Additional logic to handle positioning effects\n  \
      \  tank->SetFacingToObject(target);\n}"
    language: cpp
  notes: This method should only be called during active combat situations where both
    the tank and target are valid units. The method internally handles all positioning
    calculations including distance checks, angle adjustments, and movement commands.
    It assumes that the tank has sufficient mana or resources to perform positioning
    actions. This method is typically invoked by the AI system or threat management
    subsystem in TrinityCore.
  warnings: Calling this method with null pointers will result in undefined behavior
    or crashes. Ensure both parameters are valid before invocation. The method modifies
    the tank's position and facing, so it should not be called during critical animations
    or movement sequences that might conflict with positioning changes.
  related:
  - GetThreatPositioning
  - CalculateOptimalDistance
  - AdjustTankFacing
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T01:30:17.314443'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
