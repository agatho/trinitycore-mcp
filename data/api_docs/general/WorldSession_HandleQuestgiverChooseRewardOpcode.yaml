api:
  class: WorldSession
  method: HandleQuestgiverChooseRewardOpcode
  signature: void WorldSession::HandleQuestgiverChooseRewardOpcode(WorldPackets::Quest::QuestGiverChooseReward
    & packet)
documentation:
  brief: Processes the client's selection of a quest reward from a questgiver.
  description: The HandleQuestgiverChooseRewardOpcode method handles the opcode sent
    by the client when a player selects a reward for completing a quest. This method
    is part of the WorldSession class and is responsible for validating the quest
    completion, applying the selected reward (such as experience, gold, items, or
    reputation), and updating the player's quest state accordingly. It typically follows
    a sequence where the player has already accepted the quest, completed the required
    objectives, and now chooses which reward to receive from the questgiver. The method
    ensures that the chosen reward is valid for the current quest state and applies
    it to the player's character.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in quest reward selection
    code: "void WorldSession::HandleQuestgiverChooseRewardOpcode(WorldPackets::Quest::QuestGiverChooseReward&\
      \ packet)\n{\n    // Validate quest and player state\n    if (!player || !packet.QuestID)\n\
      \        return;\n\n    // Apply selected reward\n    player->RewardQuest(packet.QuestID,\
      \ packet.RewardIndex);\n}"
    language: cpp
  notes: This method is typically invoked after a player has completed quest objectives
    and is presented with available rewards. The method assumes that the client has
    already validated the quest state and that the reward index is valid. It's important
    to note that this method does not directly send any packets back to the client;
    it processes the request and updates internal state, which may trigger subsequent
    packet sends for UI updates.
  warnings: Improper handling of this opcode can lead to quest reward exploits or
    incorrect quest progression. Ensure all validations are performed before applying
    rewards, especially when dealing with item rewards that might have inventory space
    constraints.
  related:
  - HandleQuestgiverHelloOpcode
  - HandleQuestgiverAcceptQuestOpcode
  - HandleQuestgiverCompleteQuestOpcode
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:59:28.842509'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
