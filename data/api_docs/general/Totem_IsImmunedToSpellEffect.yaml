api:
  class: Totem
  method: IsImmunedToSpellEffect
  signature: bool Totem::IsImmunedToSpellEffect(const int * spellInfo, const int &
    spellEffectInfo, const int * caster, bool requireImmunityPurgesEffectAttribute)
    const
documentation:
  brief: Determines whether a totem is immuned to a specific spell effect based on
    its attributes and the caster's status.
  description: The IsImmunedToSpellEffect method evaluates if a totem is immune to
    a given spell effect. It checks various conditions including the totem's immunity
    attributes, the spell's properties, and whether the caster has effects that might
    purge immunities. This method plays a crucial role in determining how totems interact
    with spells, particularly in scenarios involving damage absorption or status effects.
    The function considers both direct immunity flags and conditional logic based
    on the caster's state and the spell effect being applied.
  parameters:
  - name: spellInfo
    description: Pointer to the SpellInfo structure containing details about the spell
      being cast. This includes spell attributes, effects, and other relevant properties
      that determine immunity behavior.
  - name: spellEffectInfo
    description: Reference to an integer representing the specific spell effect index
      or identifier. Used to determine which effect of a multi-effect spell is being
      evaluated for immunity.
  - name: caster
    description: Pointer to the unit that cast the spell. This parameter is used to
      check the caster's status, such as whether they have immunity-purging effects
      active.
  - name: requireImmunityPurgesEffectAttribute
    description: Boolean flag indicating whether the method should require the spell
      to have a specific immunity purge attribute for the immunity check to be bypassed.
      When true, the spell must explicitly have this attribute to override normal
      immunity rules.
  returns: Returns true if the totem is immuned to the specified spell effect; otherwise
    returns false. The result depends on the totem's immunity flags, the spell's properties,
    and the caster's status.
  examples:
  - title: Basic Immunity Check
    code: "if (totem->IsImmunedToSpellEffect(spellInfo, effectIndex, caster, false))\
      \ {\n    // Totem is immune to this spell effect\n    return true;\n}"
    language: cpp
  - title: Immunity Check with Purge Attribute Requirement
    code: "bool isImmune = totem->IsImmunedToSpellEffect(spellInfo, effectIndex, caster,\
      \ true);\nif (isImmune) {\n    // Totem is immune due to either standard immunity\
      \ or purge attribute\n    SendImmunityMessage();\n}"
    language: cpp
  notes: This method is typically used during spell application logic to determine
    if a totem should be affected by a spell. The implementation likely involves checking
    the totem's SpellImmuneMask, checking for immunity-purging effects on the caster,
    and evaluating the spell's specific attributes. Performance-wise, this check should
    be lightweight but may involve multiple conditional evaluations depending on the
    totem's state.
  warnings: Be careful when using requireImmunityPurgesEffectAttribute as true, since
    it might bypass expected immunity behavior in certain game mechanics. Also ensure
    that all parameters are properly validated before calling to avoid undefined behavior
    or crashes.
  related:
  - Totem::IsImmunedToSpell
  - Totem::GetSpellImmuneMask
  - Unit::HasAuraType
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T16:15:51.226647'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
