api:
  class: GameObjectModel
  method: IntersectRay
  signature: bool GameObjectModel::IntersectRay(const int & ray, float & maxDist,
    bool stopAtFirstHit, const PhaseShift & phaseShift, VMAP::ModelIgnoreFlags ignoreFlags)
    const
documentation:
  brief: Tests if a ray intersects with the game object's model and returns true if
    an intersection occurs.
  description: The IntersectRay method performs a ray-casting operation against the
    GameObjectModel's collision geometry to determine whether a given ray intersects
    with the model. It is commonly used in physics and collision detection systems
    within TrinityCore to check for obstructions or interactions between objects and
    rays, such as determining if a line of sight is blocked by a game object. The
    method supports optional parameters like stopping at the first hit, phase shift
    handling, and ignore flags for specialized collision filtering. This functionality
    is crucial for gameplay mechanics involving visibility checks, spell targeting,
    and movement pathfinding.
  parameters:
  - name: ray
    description: A reference to an integer identifier representing the ray being tested.
      Typically corresponds to a unique ray index or handle used internally by the
      VMap system.
  - name: maxDist
    description: A reference to a float value that specifies the maximum distance
      to check for intersections. On return, it may be updated to reflect the actual
      intersection distance if an intersection occurs.
  - name: stopAtFirstHit
    description: A boolean flag indicating whether to stop at the first intersection
      found (true) or continue checking all intersections (false).
  - name: phaseShift
    description: A reference to a PhaseShift object used to determine which phases
      of the game world should be considered during the ray test. This allows for
      phase-based collision detection.
  - name: ignoreFlags
    description: A bitmask of ModelIgnoreFlags that specifies which types of model
      elements should be ignored during the intersection test, such as certain collision
      types or areas.
  returns: Returns true if the ray intersects with the GameObjectModel's geometry
    within the specified maximum distance and conditions; otherwise returns false.
  examples:
  - title: Basic Ray Intersection Test
    code: "float maxDist = 50.0f;\nbool hit = gameObjectModel->IntersectRay(rayId,\
      \ maxDist, true, phaseShift, VMAP::IGNORE_NONE);\nif (hit)\n{\n    // Process\
      \ intersection at distance 'maxDist'\n}"
    language: cpp
  - title: Advanced Ray Test with Ignore Flags
    code: "float maxDist = 100.0f;\nVMAP::ModelIgnoreFlags ignoreFlags = VMAP::IGNORE_WATER\
      \ | VMAP::IGNORE_SPELLS;\nbool hit = gameObjectModel->IntersectRay(rayId, maxDist,\
      \ false, phaseShift, ignoreFlags);\nif (hit)\n{\n    // Handle multiple intersections\
      \ or special case logic\n}"
    language: cpp
  notes: This method is part of the VMap (Virtual Map) system used in TrinityCore
    for efficient collision detection. It relies on precomputed model data and should
    only be called when the GameObjectModel has valid geometry loaded. Performance
    can be impacted by complex models or large numbers of ray tests, especially with
    stopAtFirstHit set to false.
  warnings: Incorrectly setting maxDist can lead to inaccurate results or performance
    degradation. Ensure that phaseShift is properly initialized to avoid unexpected
    behavior in phased environments. The ignoreFlags parameter should be used carefully
    as incorrect usage may bypass important collision checks.
  related:
  - GameObjectModel::GetBoundingBox
  - GameObjectModel::IsInBounds
  - GameObjectModel::ContainsPoint
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T13:50:20.302736'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
