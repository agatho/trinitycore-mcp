api:
  class: MechanicAwareness
  method: DetectMechanics
  signature: int MechanicAwareness::DetectMechanics(Player * bot, Unit * target)
documentation:
  brief: Detects and returns the mechanic type of a target unit for the specified
    bot player.
  description: The DetectMechanics method is used within the TrinityCore AI framework
    to identify and return the mechanic type associated with a given target unit as
    perceived by a specific bot player. This functionality is commonly employed in
    AI decision-making processes where understanding the nature of an enemy's abilities
    or status effects is crucial for strategic behavior. The method evaluates the
    target unit's current state, including any active mechanics such as stuns, roots,
    silences, or other debuffs, and returns an integer identifier representing that
    mechanic type. It requires valid pointers to both the bot player and the target
    unit, and will return a default value if either parameter is invalid or no applicable
    mechanic is detected.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the AI-controlled bot that
      is performing the detection. Must be a valid pointer to an active player instance.
  - name: target
    description: Pointer to the Unit object representing the target whose mechanic
      type is being detected. Must be a valid pointer to an existing unit in the game
      world.
  returns: An integer value representing the detected mechanic type. A return value
    of 0 typically indicates no applicable mechanic was found, while positive integers
    correspond to specific mechanic types defined within the TrinityCore mechanics
    system.
  examples:
  - title: Basic usage in AI logic
    code: "int mechanicType = awareness.DetectMechanics(botPlayer, targetUnit);\n\
      if (mechanicType > 0) {\n    // Handle specific mechanic type\n    switch (mechanicType)\
      \ {\n        case MECHANIC_STUN:\n            botPlayer->CastSpell(targetUnit,\
      \ SPELL_STUN_RESISTANCE, true);\n            break;\n        default:\n    \
      \        break;\n    }\n}"
    language: cpp
  - title: Checking for root mechanics before movement
    code: "int rootMechanic = awareness.DetectMechanics(playerBot, enemyTarget);\n\
      if (rootMechanic == MECHANIC_ROOT) {\n    // Avoid moving towards the target\n\
      \    playerBot->GetMotionMaster()->Clear();\n    playerBot->CastSpell(playerBot,\
      \ SPELL_FLEE, true);\n}"
    language: cpp
  notes: This method is part of the MechanicAwareness class and relies on internal
    game state tracking for mechanics. It should only be called when both bot and
    target are valid and in the same map instance. The return value mapping to specific
    mechanic types must align with TrinityCore's defined constants such as MECHANIC_STUN,
    MECHANIC_ROOT, etc.
  warnings: Ensure that both 'bot' and 'target' parameters are non-null before calling
    this method to prevent undefined behavior or crashes. Also note that the returned
    mechanic type may not reflect all possible mechanics if the target is under multiple
    effects simultaneously; it typically returns the primary or most significant one.
  related:
  - GetMechanicType
  - IsUnitAffectedByMechanic
  - CheckMechanicImmunity
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T08:44:45.601764'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
