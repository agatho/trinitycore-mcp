api:
  class: PathfindingManager
  method: FindEscapePath
  signature: PathResult PathfindingManager::FindEscapePath(const int & threats, float
    minDistance)
documentation:
  brief: Calculates and returns a path that moves the unit away from the nearest threat
    within the specified minimum distance.
  description: The FindEscapePath method is designed to determine a safe escape route
    for a unit by calculating a path that moves it away from the closest threat source.
    It evaluates the current position of the unit and identifies nearby threats, then
    computes a path that ensures the unit maintains at least the specified minimum
    distance from the nearest threat. This functionality is commonly used in AI behavior
    for units that need to avoid danger or retreat when under attack. The method returns
    a PathResult object containing the calculated path data, which can be used by
    the calling code to move the unit along the escape route.
  parameters:
  - name: threats
    description: An integer representing the number of threat sources in the vicinity
      that the unit should avoid. This value determines how many nearby enemies or
      dangerous entities are considered when calculating the escape path.
  - name: minDistance
    description: A floating-point value specifying the minimum distance the unit should
      maintain from the nearest threat source. The calculated path will ensure this
      distance is maintained during movement.
  returns: Returns a PathResult object containing the computed escape path data. This
    includes information about whether the path was successfully calculated, the actual
    path points, and any relevant metadata for navigation purposes.
  examples:
  - title: Basic Escape Path Calculation
    code: "PathResult result = pathfindingManager->FindEscapePath(3, 10.0f);\nif (result.IsSuccess())\
      \ {\n    // Move the unit along the escape path\n    MoveAlongPath(result.GetPathPoints());\n\
      }"
    language: cpp
  - title: Using Escape Path with Threat Detection
    code: "int threatCount = GetNearbyThreats();\nfloat minDistance = 15.0f;\nPathResult\
      \ escapePath = pathfindingManager->FindEscapePath(threatCount, minDistance);\n\
      if (escapePath.IsSuccess()) {\n    // Execute the escape movement\n    unit->MoveAlongPath(escapePath.GetPathPoints());\n\
      } else {\n    // Fallback behavior if no escape path is found\n    unit->SetState(UnitState::FLEEING);\n\
      }"
    language: cpp
  notes: This method relies on the underlying pathfinding system to compute valid
    paths. Performance may vary depending on the complexity of the environment and
    number of threats detected. The method assumes that threat sources are properly
    defined in the AI context and that the unit's current position is accurately known.
  warnings: The method may return an invalid path if no safe escape route can be computed
    within the given constraints. It's important to always check the success status
    of the returned PathResult before attempting to use the path data. Additionally,
    this method should not be called in high-frequency loops without proper caching
    or optimization.
  related:
  - FindPath
  - CalculatePath
  - GetNearbyThreats
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T02:00:43.158326'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
