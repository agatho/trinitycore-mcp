api:
  class: MistweaverMonkRefactored
  method: UpdateRotation
  signature: void MistweaverMonkRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the Mistweaver Monk's rotation logic based on current target and
    combat state
  description: The UpdateRotation method is responsible for determining and executing
    the appropriate ability sequence for a Mistweaver Monk during combat. This method
    evaluates the current target, player resources (such as mana and chi), and combat
    conditions to decide which healing or damage abilities should be cast next. It
    integrates with the core TrinityCore AI system to ensure proper spell selection
    and timing according to the Mistweaver's spec-specific rotation. The method typically
    runs during each AI update cycle and modifies the monk's action queue accordingly.
  parameters:
  - name: target
    description: Pointer to the current target entity that the monk should focus on.
      This parameter determines which unit the rotation logic will prioritize for
      healing or damage output.
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void MistweaverMonkAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target =\
      \ SelectTarget(SELECT_TARGET_TOPAGGRO))\n    {\n        _me->GetAI()->SetReactState(REACT_AGGRESSIVE);\n\
      \        UpdateRotation(&target);\n    }\n}"
    language: cpp
  - title: Integration with Custom Rotation Logic
    code: "void MistweaverMonkRefactored::UpdateRotation(int* target)\n{\n    if (!target\
      \ || *target <= 0)\n        return;\n\n    Unit* unitTarget = ObjectAccessor::GetUnit(*_me,\
      \ *target);\n    if (!unitTarget)\n        return;\n\n    // Core rotation logic\
      \ here\n    // e.g., check for healing needs, mana levels, etc.\n    // Execute\
      \ appropriate abilities based on rotation\n}"
    language: cpp
  notes: This method is typically called from within the AI update loop and should
    not be invoked directly unless you are implementing custom AI behavior. The target
    parameter must point to a valid GameObject or Unit ID, otherwise the method will
    silently return without performing any actions. Performance-wise, this method
    should execute quickly as it's called frequently during combat.
  warnings: Do not call UpdateRotation with an invalid or null target pointer, as
    this may lead to undefined behavior. Ensure that the target is a valid unit before
    passing it to this method. The method assumes proper initialization of the AI
    system and may fail if called before the AI has been fully set up.
  related:
  - GetNextSpell
  - CanCastSpell
  - SelectTarget
  - ExecuteRotation
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T00:07:35.065044'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
