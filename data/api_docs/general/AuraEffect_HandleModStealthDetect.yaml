api:
  class: AuraEffect
  method: HandleModStealthDetect
  signature: void AuraEffect::HandleModStealthDetect(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Modifies the stealth detection capability of a unit based on aura application
    and mode.
  description: The HandleModStealthDetect method is responsible for adjusting how
    well a unit can detect stealthed targets. It is invoked during aura application
    or removal to modify the stealth detection mechanics of the affected unit. This
    method operates based on the provided AuraApplication context, the mode of operation
    (typically indicating whether the effect is being applied or removed), and a boolean
    flag that determines if the effect should be activated or deactivated. The implementation
    likely modifies internal detection flags or thresholds within the unit's state
    to reflect changes in stealth detection ability.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This contains information about the aura's properties, target,
      and application context.
  - name: mode
    description: The mode of operation indicating how the effect should be handled
      (e.g., application or removal). Values are typically defined by the AuraApplication::Mode
      enum, such as AURA_MODE_CASTER or AURA_MODE_TARGET.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the stealth detection effect. This determines the direction of the modification
      being performed.
  returns: null
  examples:
  - title: Applying Stealth Detection Aura
    code: 'AuraEffect* auraEffect = new AuraEffect();

      AuraApplication* app = new AuraApplication();

      auraEffect->HandleModStealthDetect(app, AURA_MODE_CASTER, true);'
    language: cpp
  - title: Removing Stealth Detection Aura
    code: 'AuraEffect* auraEffect = new AuraEffect();

      AuraApplication* app = new AuraApplication();

      auraEffect->HandleModStealthDetect(app, AURA_MODE_TARGET, false);'
    language: cpp
  notes: This method is part of the internal aura handling system in TrinityCore and
    should not be called directly by external modules unless implementing custom aura
    effects. The method modifies unit stealth detection state which affects gameplay
    mechanics such as PvP stealth detection, NPC behavior towards stealthed players,
    and combat interactions.
  warnings: Improper usage of this method can lead to incorrect stealth detection
    behavior, potentially causing game balance issues or unexpected player interactions.
    Ensure that the AuraApplication context is valid before calling this method.
  related:
  - AuraEffect::HandleModStealth
  - AuraEffect::HandleModDetectStealth
  - AuraApplication::GetTarget
  - AuraEffect::Apply
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T12:20:11.914938'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
