api:
  class: LoSUtils
  method: IsAboveGround
  signature: bool LoSUtils::IsAboveGround(const int & pos, Map * map, float threshold)
documentation:
  brief: Determines whether a given position is above ground level on the specified
    map.
  description: The IsAboveGround method evaluates whether a specified position, represented
    by a coordinate value, is located above the ground surface within the context
    of a World of Warcraft map. This utility function is commonly used in pathfinding,
    line-of-sight calculations, and AI behavior to ensure entities are not considered
    as being 'below ground' when performing actions or movement. It uses a threshold
    parameter to define what constitutes being 'above ground', allowing for tolerance
    in height differences due to terrain variations or object placement. The method
    requires a valid map reference to perform the necessary spatial checks.
  parameters:
  - name: pos
    description: An integer representing a position coordinate, likely a serialized
      value combining X and Y coordinates or a unique identifier for a location within
      the map.
  - name: map
    description: A pointer to the Map object where the position is located. This parameter
      is required to access terrain data and perform spatial calculations.
  - name: threshold
    description: A floating-point value that defines the minimum height difference
      required for a position to be considered 'above ground'. Higher values allow
      for more tolerance in terrain variations.
  returns: Returns true if the specified position is above ground level according
    to the defined threshold; otherwise, returns false.
  examples:
  - title: Basic usage of IsAboveGround
    code: "int position = 12345;\nMap* map = player->GetMap();\nfloat threshold =\
      \ 0.5f;\nbool isAbove = LoSUtils::IsAboveGround(position, map, threshold);\n\
      if (isAbove) {\n    // Proceed with ground-based action\n}"
    language: cpp
  - title: Using IsAboveGround in AI decision making
    code: "void AIUpdate(Unit* unit) {\n    Position pos = unit->GetPosition();\n\
      \    Map* map = unit->GetMap();\n    int serializedPos = (int)(pos.GetX() *\
      \ 1000 + pos.GetY() * 1000);\n    if (LoSUtils::IsAboveGround(serializedPos,\
      \ map, 1.0f)) {\n        // Perform actions that require being above ground\n\
      \        unit->CastSpell(unit, SPELL_FLYING_AURA, true);\n    }\n}"
    language: cpp
  notes: The method relies on the internal structure of the Map class to determine
    ground level at a given position. The 'pos' parameter is expected to be in a format
    compatible with the map's coordinate system. Performance may be impacted when
    checking many positions, especially if the map has complex terrain or numerous
    objects.
  warnings: Ensure that the provided map pointer is valid and not null before calling
    this method; otherwise, it will likely result in undefined behavior or crashes.
    The threshold value should be chosen carefully to avoid false positives or negatives
    based on the specific game environment and object sizes.
  related:
  - IsInLineOfSight
  - GetHeightAtPosition
  - CheckTerrainCollision
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T01:10:35.896858'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
