api:
  class: PhasingHandler
  method: AddPhase
  signature: void PhasingHandler::AddPhase(WorldObject * object, uint32 phaseId, bool
    updateVisibility)
documentation:
  brief: Adds a phase to the specified object's phasing context, optionally updating
    visibility.
  description: The AddPhase method integrates a new phase into the phasing system
    for a given WorldObject. This allows the object to participate in phase-based
    visibility and gameplay mechanics, where certain content is only visible or accessible
    during specific phases. The method can optionally trigger an immediate visibility
    update for nearby players, ensuring that changes take effect without delay. Phases
    are typically used in World of Warcraft to control which areas, events, or objects
    are visible to players based on quest progress, world states, or other game conditions.
  parameters:
  - name: object
    description: Pointer to the WorldObject (such as a player, creature, or game object)
      that will have the phase added. Must not be null.
  - name: phaseId
    description: Unique identifier of the phase to add. This ID must correspond to
      a valid phase defined in the game's phase system. Typically sourced from phase
      definitions in database tables or phase-related scripts.
  - name: updateVisibility
    description: Boolean flag indicating whether to immediately update visibility
      for nearby players. If true, the object's phasing changes will be propagated
      to surrounding players instantly. If false, visibility updates must be handled
      separately.
  returns: null
  examples:
  - title: Add a phase to a player and update visibility
    code: 'Player* player = ...;

      PhasingHandler::AddPhase(player, 12345, true);'
    language: cpp
  - title: Add a phase to a creature without immediate visibility update
    code: 'Creature* creature = ...;

      PhasingHandler::AddPhase(creature, 67890, false);'
    language: cpp
  notes: This method is part of TrinityCore's phasing system which enables dynamic
    visibility control. It should be used carefully to avoid performance issues when
    adding many phases or frequent updates. The phase ID must be valid and registered
    in the server's phase database.
  warnings: Passing a null pointer for 'object' will result in undefined behavior
    or crashes. Ensure that the phaseId is valid before calling this method, as invalid
    IDs may cause silent failures or unexpected visibility behavior.
  related:
  - RemovePhase
  - HasPhase
  - GetPhases
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T01:45:55.271703'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
