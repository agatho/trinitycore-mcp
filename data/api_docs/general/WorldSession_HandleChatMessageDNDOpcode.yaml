api:
  class: WorldSession
  method: HandleChatMessageDNDOpcode
  signature: void WorldSession::HandleChatMessageDNDOpcode(WorldPackets::Chat::ChatMessageDND
    & chatMessageDND)
documentation:
  brief: Processes incoming do-not-disturb (DND) chat message opcodes from clients
  description: The HandleChatMessageDNDOpcode method handles the client's request
    to set or update their do-not-disturb status for chat messages. This method is
    part of the WorldSession class and processes the ChatMessageDND packet sent by
    the client, which typically contains information about whether the player wishes
    to receive chat messages while in DND mode. The method validates the incoming
    data and updates the session's internal DND state accordingly. It ensures that
    the player's chat preferences are properly synchronized with the server state
    and may affect how subsequent chat messages are handled or delivered to the player.
  parameters:
  - name: chatMessageDND
    description: The incoming ChatMessageDND packet containing DND status information
      from the client. This packet typically includes flags or states indicating whether
      the player is in DND mode and how chat messages should be handled.
  returns: null
  examples:
  - title: Processing a DND status update
    code: "void WorldSession::HandleChatMessageDNDOpcode(WorldPackets::Chat::ChatMessageDND\
      \ & chatMessageDND)\n{\n    // Update player's DND status based on packet data\n\
      \    SetPlayerDNDStatus(chatMessageDND.IsDND);\n    // Log the change for debugging\
      \ purposes\n    sLog->outDebug(LOG_FILTER_NETWORKIO, \"Player %s updated DND\
      \ status to: %s\",\n        GetPlayer()->GetName().c_str(), chatMessageDND.IsDND\
      \ ? \"Enabled\" : \"Disabled\");\n}"
    language: cpp
  notes: This method is typically called as part of the network packet handling pipeline
    in TrinityCore. The DND status affects how chat messages are delivered to players,
    particularly in scenarios where players may not wish to receive notifications
    during certain activities. It's important that this method properly validates
    incoming data to prevent exploitation.
  warnings: Improper handling of DND status updates could lead to inconsistent player
    experience or potential abuse by clients sending malformed packets. Ensure proper
    validation and error handling for the incoming packet data.
  related:
  - SetPlayerDNDStatus
  - GetPlayerDNDStatus
  - HandleChatMessageOpcode
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T22:29:33.742620'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
