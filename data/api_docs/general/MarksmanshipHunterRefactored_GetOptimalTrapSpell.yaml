api:
  class: MarksmanshipHunterRefactored
  method: GetOptimalTrapSpell
  signature: uint32 MarksmanshipHunterRefactored::GetOptimalTrapSpell() const
documentation:
  brief: Returns the spell ID of the optimal trap spell available to the marksmanship
    hunter.
  description: This method determines and returns the most effective trap spell that
    the marksmanship hunter can currently cast based on their current state, available
    spells, and game mechanics. It evaluates factors such as cooldowns, resource requirements,
    and tactical situation to select the best available trap. The returned value represents
    a SpellID from the World of Warcraft spell database, which uniquely identifies
    the specific trap spell. This method is typically used in AI decision-making processes
    for hunter pets or player-controlled marksmanship hunters to optimize trap placement
    and usage during combat.
  parameters: []
  returns: A uint32 value representing the SpellID of the optimal trap spell. Returns
    0 if no valid trap spell is available or if the hunter cannot cast any traps at
    the current moment.
  examples:
  - title: Basic Usage in AI Logic
    code: "uint32 trapSpellId = hunter.GetOptimalTrapSpell();\nif (trapSpellId !=\
      \ 0)\n{\n    // Cast the optimal trap spell\n    caster.CastSpell(target, trapSpellId,\
      \ true);\n}"
    language: cpp
  - title: Integration with Combat Decision Making
    code: "void MarksmanshipHunterAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n\
      \    {\n        uint32 trapSpell = me->GetOptimalTrapSpell();\n        if (trapSpell\
      \ && !me->HasAura(trapSpell))\n        {\n            // Use the optimal trap\
      \ when not already active\n            DoCast(trapSpell);\n        }\n    }\n\
      }"
    language: cpp
  notes: The method considers hunter specialization, available trap spells in the
    spellbook, cooldown status of each trap, and current combat situation. It may
    return different values depending on whether the hunter is in a stealthed state,
    has sufficient resources, or if certain buff/debuff conditions are met. The returned
    SpellID should be validated against the spell database before casting to ensure
    it's a valid trap spell.
  warnings: This method assumes that the hunter object is properly initialized and
    has access to its spellbook and current combat state. Calling this method outside
    of a valid combat context may return unexpected results. Also, note that trap
    spells in World of Warcraft have specific requirements like line-of-sight and
    positioning, which are not handled by this method but must be considered when
    using the returned SpellID.
  related:
  - GetSpellCooldown
  - HasSpell
  - CanCastSpell
  - GetTrapSpellList
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T08:36:41.076799'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
