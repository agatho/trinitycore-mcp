api:
  class: CombatEventBus
  method: CleanupExpiredEvents
  signature: uint32 CombatEventBus::CleanupExpiredEvents()
documentation:
  brief: Removes all expired combat events from the event bus and returns the count
    of removed events.
  description: The CleanupExpiredEvents method iterates through all registered combat
    events in the CombatEventBus, identifies those that have exceeded their valid
    time window, and removes them from the internal event storage. This method is
    typically invoked periodically by the game engine to prevent memory leaks and
    ensure that outdated combat data does not interfere with ongoing or future combat
    calculations. The method performs no operations on active events and only affects
    events whose expiration timestamps have passed. It is designed to be efficient
    and safe for use in performance-critical game loops.
  parameters: []
  returns: Returns a uint32 value representing the number of expired combat events
    that were successfully removed from the event bus during this execution.
  examples:
  - title: Basic Usage in Combat System Update
    code: "void CombatSystem::Update()\n{\n    // Perform regular combat logic\n \
      \   \n    // Clean up expired events\n    uint32 expiredCount = sCombatEventBus->CleanupExpiredEvents();\n\
      \    \n    if (expiredCount > 0)\n    {\n        TC_LOG_DEBUG(\"combat\", \"\
      Cleaned up {} expired combat events\", expiredCount);\n    }\n}"
    language: cpp
  notes: This method should be called regularly, typically during game tick updates
    or at fixed intervals, to maintain optimal performance. The event bus internally
    tracks event expiration times using a time-based system that aligns with the server's
    global timekeeping mechanism.
  warnings: null
  related:
  - AddEvent
  - GetActiveEvents
  - IsEventExpired
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T07:01:52.501597'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
