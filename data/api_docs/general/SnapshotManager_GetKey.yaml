api:
  class: SnapshotManager
  method: GetKey
  signature: uint64 SnapshotManager::GetKey(uint32 spellId, int * target) const
documentation:
  brief: Generates and returns a unique snapshot key based on spell ID and target
    information for tracking spell effects.
  description: The GetKey method constructs a unique 64-bit identifier (key) used
    to track and manage spell snapshots within the SnapshotManager. This key combines
    a spell identifier with target-specific data to ensure uniqueness across different
    spell applications and targets. The method is typically used internally by the
    system to retrieve or identify specific snapshot states during spell processing,
    particularly in scenarios involving periodic effects, aura management, or combat
    state tracking. It requires valid spell ID and target parameters to generate meaningful
    keys.
  parameters:
  - name: spellId
    description: The unique identifier of the spell for which the snapshot key is
      being generated. Must be a valid spell entry ID from the game's spell database.
  - name: target
    description: Pointer to an integer representing the target index or identifier.
      This value is used in combination with spellId to create the unique key. Should
      point to a valid target reference or NULL if targeting self.
  returns: A uint64 value representing the unique snapshot key constructed from the
    provided spell ID and target information. This key can be used to retrieve or
    identify specific snapshot data in the manager's internal storage.
  examples:
  - title: Basic Usage Example
    code: 'uint32 spellId = 12345;

      int targetIndex = 0;

      uint64 key = snapshotManager.GetKey(spellId, &targetIndex);

      // Key can now be used to access or store snapshot data'
    language: cpp
  - title: Usage with NULL Target Pointer
    code: 'uint32 spellId = 12345;

      uint64 key = snapshotManager.GetKey(spellId, nullptr);

      // Generates key for self-targeting or default target case'
    language: cpp
  notes: The method assumes that the target parameter points to a valid memory location.
    If NULL is passed, the implementation may treat it as a special case (e.g., self-targeting).
    The returned key is designed for internal use within the snapshot management system
    and should not be directly interpreted by external modules without understanding
    the key structure.
  warnings: Passing an invalid spellId or uninitialized target pointer may result
    in undefined behavior. Ensure that all inputs are validated before calling this
    method, especially when dealing with dynamic spell effects or variable targets.
  related:
  - SetKey
  - GetSnapshot
  - RemoveSnapshot
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T21:59:22.971382'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
