api:
  class: WheatyExceptionReport
  method: GetSymbolFromAddress
  signature: BOOL WheatyExceptionReport::GetSymbolFromAddress(HANDLE hProcess, DWORD64
    Address, ULONG InlineContext, PDWORD64 Displacement, PSYMBOL_INFO Symbol)
documentation:
  brief: Retrieves symbol information for a given address within a specified process.
  description: The GetSymbolFromAddress method is used to resolve memory addresses
    to symbolic names, such as function or variable names, within a target process.
    This functionality is typically employed in debugging and crash reporting systems
    to provide meaningful context about where an exception occurred. The method leverages
    the Windows Debugging API to perform symbol resolution using the specified process
    handle and address. It supports inline context resolution for more accurate symbol
    information in optimized code. This method is essential for generating detailed
    stack traces and exception reports in TrinityCore's crash handling mechanisms.
  parameters:
  - name: hProcess
    description: Handle to the process for which symbol information is being retrieved.
      This handle must have appropriate permissions to access the target process's
      memory and symbols.
  - name: Address
    description: The virtual address within the process for which symbol information
      is requested. This should be a valid memory address in the context of the specified
      process.
  - name: InlineContext
    description: Specifies the inline context for symbol resolution. This parameter
      determines how inline functions are handled during symbol lookup and can affect
      the accuracy of the returned symbol information.
  - name: Displacement
    description: Pointer to a variable that receives the displacement value, which
      indicates how far the address is from the beginning of the symbol. This value
      is typically used to calculate offsets within functions or variables.
  - name: Symbol
    description: Pointer to a SYMBOL_INFO structure that will receive the symbol information.
      This structure must be properly initialized with sufficient buffer space before
      calling this method.
  returns: Returns TRUE if the symbol information was successfully retrieved, or FALSE
    if the operation failed. Failure can occur due to invalid parameters, insufficient
    buffer size, or inability to resolve symbols for the specified address.
  examples:
  - title: Basic Symbol Resolution
    code: "#include <windows.h>\n#include <dbghelp.h>\n\nBOOL ResolveAddressSymbol(HANDLE\
      \ hProcess, DWORD64 address) {\n    SYMBOL_INFO* symbol = (SYMBOL_INFO*)malloc(sizeof(SYMBOL_INFO)\
      \ + 256 * sizeof(TCHAR));\n    symbol->SizeOfStruct = sizeof(SYMBOL_INFO);\n\
      \    symbol->MaxNameLen = 255;\n    \n    DWORD64 displacement;\n    BOOL result\
      \ = GetSymbolFromAddress(hProcess, address, 0, &displacement, symbol);\n   \
      \ \n    if (result) {\n        printf(\"Symbol: %s, Displacement: 0x%I64X\\\
      n\", symbol->Name, displacement);\n    }\n    \n    free(symbol);\n    return\
      \ result;\n}"
    language: cpp
  notes: This method requires the process to be properly attached and debugged. The
    SYMBOL_INFO structure must be initialized with correct size information before
    use. Performance may be impacted when resolving symbols in large applications
    or during high-frequency operations.
  warnings: Ensure that the process handle has sufficient privileges to access symbol
    information. Improper buffer sizing for the SYMBOL_INFO structure can lead to
    memory corruption. This method should not be called from within a signal handler
    or critical section as it might block or cause deadlocks.
  related:
  - GetModuleBaseAddress
  - StackWalk64
  - SymFromAddr
  - SymInitialize
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T08:43:19.754235'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
