api:
  class: WorldSession
  method: HandleRepopRequest
  signature: void WorldSession::HandleRepopRequest(WorldPackets::Misc::RepopRequest
    & packet)
documentation:
  brief: Handles the client's request to respawn at the nearest graveyard or inn.
  description: The HandleRepopRequest method processes a player's request to be respawned
    after death. When a player dies in World of Warcraft, they must either respawn
    at their corpse location or at a nearby graveyard or inn. This method is invoked
    when the client sends a repop request packet, typically triggered by the player
    clicking the 'Repop' button or automatically upon death if no other respawn options
    are available. The method validates the player's state and initiates the respawn
    process, which includes updating the player's position to the appropriate respawn
    location and resetting their health and mana. It ensures that players cannot respawn
    while in combat or under certain conditions such as being in a battleground or
    arena.
  parameters: []
  returns: null
  examples:
  - title: Basic repop request handling
    code: "void WorldSession::HandleRepopRequest(WorldPackets::Misc::RepopRequest&\
      \ packet)\n{\n    if (!GetPlayer())\n        return;\n\n    Player* player =\
      \ GetPlayer();\n    if (player->IsAlive())\n        return;\n\n    // Process\
      \ the repop request\n    player->ResurrectPlayer(0.0f);\n    player->SpawnCorpseBones();\n\
      }"
    language: cpp
  notes: This method is part of the core gameplay loop and should be called only when
    a valid repop request is received from the client. The method assumes that the
    player object exists and is in a valid state for respawning. It does not handle
    all edge cases such as players in instances or special zones where respawning
    may be restricted.
  warnings: Improper handling of this method can lead to players being unable to respawn,
    potentially causing game crashes or exploits. Ensure that the player's current
    zone and state are properly validated before initiating any respawn logic. Do
    not call this method directly without verifying the packet contents and player
    state.
  related:
  - Player::ResurrectPlayer
  - Player::SpawnCorpseBones
  - WorldSession::HandleAreaTrigger
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:50:29.233796'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
