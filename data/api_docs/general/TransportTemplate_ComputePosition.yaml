api:
  class: TransportTemplate
  method: ComputePosition
  signature: int TransportTemplate::ComputePosition(int time, TransportMovementState
    * moveState, size_t * legIndex) const
documentation:
  brief: Computes the transport's position at a given time based on its movement state
    and leg index.
  description: The ComputePosition method calculates the current position of a transport
    vehicle at a specified time by using the provided movement state and updating
    the leg index. This method is typically used in the context of dynamic transports
    such as boats or elevators within World of Warcraft's TrinityCore server implementation.
    It interpolates between known waypoints to determine the exact location of the
    transport at any given moment, which is essential for proper passenger positioning
    and collision detection. The method updates the leg index to track progress through
    the movement path and returns an integer status code indicating success or failure
    of the computation.
  parameters:
  - name: time
    description: The time value in milliseconds at which to compute the transport's
      position.
  - name: moveState
    description: Pointer to a TransportMovementState structure containing movement
      data for the transport, including waypoints and timing information.
  - name: legIndex
    description: Pointer to a size_t variable that will be updated with the current
      leg index in the movement path after computation.
  returns: 'Returns an integer status code: 0 for success, negative values for errors
    (e.g., invalid input parameters or out-of-bounds time).'
  examples:
  - title: Basic usage example
    code: "TransportMovementState moveState;\nsize_t legIndex = 0;\nint result = transportTemplate->ComputePosition(5000,\
      \ &moveState, &legIndex);\nif (result == 0) {\n    // Position computed successfully\n\
      \    printf(\"Leg index updated to: %zu\\n\", legIndex);\n}"
    language: cpp
  - title: Usage with error checking
    code: "TransportMovementState moveState;\nsize_t legIndex = 0;\nint result = transportTemplate->ComputePosition(12000,\
      \ &moveState, &legIndex);\nif (result < 0) {\n    // Handle error\n    printf(\"\
      Failed to compute position: error code %d\\n\", result);\n} else if (result\
      \ == 0) {\n    // Successfully computed position\n    printf(\"Transport at\
      \ leg index %zu at time 12000ms\\n\", legIndex);\n}"
    language: cpp
  notes: This method assumes that the TransportMovementState structure has been properly
    initialized with valid waypoints and timing data. The legIndex parameter is modified
    in-place, so callers should ensure it's initialized before calling this function.
    Performance-wise, this method performs interpolation calculations which may be
    computationally intensive if called frequently.
  warnings: Do not pass null pointers for moveState or legIndex parameters; doing
    so will likely cause a crash. Ensure that the time parameter is within valid bounds
    of the transport's movement cycle to avoid incorrect positioning results.
  related:
  - GetTransportPosition
  - UpdateTransportPosition
  - GetMovementState
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T21:07:32.166762'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
