api:
  class: DeathRecoveryManager
  method: FindNearestSpiritHealer
  signature: Creature * DeathRecoveryManager::FindNearestSpiritHealer() const
documentation:
  brief: Finds and returns the nearest spirit healer creature within the player's
    current map.
  description: The FindNearestSpiritHealer method searches for the closest creature
    that serves as a spirit healer, typically found in cities or areas where players
    can resurrect after death. This method is used primarily during the death recovery
    process to locate available resurrection points. It iterates through all creatures
    on the current map and identifies those with the appropriate NPC flags or entry
    IDs associated with spirit healers. The search considers proximity and validity
    of the creature's location, ensuring it is accessible to the player. If no valid
    spirit healer is found within the current map, the method returns a null pointer.
  parameters: []
  returns: A pointer to the Creature object representing the nearest spirit healer,
    or nullptr if none is found on the current map.
  examples:
  - title: Basic usage in death recovery logic
    code: "Creature* spiritHealer = deathRecoveryManager->FindNearestSpiritHealer();\n\
      if (spiritHealer)\n{\n    // Proceed with resurrection logic\n    player->TeleportTo(spiritHealer->GetMapId(),\
      \ spiritHealer->GetPositionX(), spiritHealer->GetPositionY(), spiritHealer->GetPositionZ(),\
      \ 0);\n}\nelse\n{\n    // Handle case where no spirit healer is found\n    player->SendAreaTriggerMessage(\"\
      No spirit healer found nearby.\");\n}"
    language: cpp
  notes: This method only searches within the current map and does not consider creatures
    on other maps or instances. Spirit healers are typically identified by specific
    creature entries or NPC flags such as NPC_FLAG_SPIRITHEALER. The implementation
    may cache results for performance optimization in some cases.
  warnings: Do not assume that a returned Creature pointer is always valid; always
    check for null before using the result. This method does not account for player's
    line of sight or movement restrictions, so the returned creature might not be
    reachable by the player.
  related:
  - FindNearestCorpse
  - FindNearestGraveyard
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T08:47:09.029774'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
