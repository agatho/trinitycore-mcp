api:
  class: PlayerScript
  method: OnMapChanged
  signature: void PlayerScript::OnMapChanged(Player * player)
documentation:
  brief: Called when a player changes maps within the game world
  description: The OnMapChanged method is invoked whenever a Player object transitions
    from one map to another within the TrinityCore emulator. This event occurs during
    gameplay when players move between different zones, instances, or realms. The
    method serves as a notification mechanism for scripts and modules that need to
    respond to map transitions, such as updating player state, triggering quest events,
    or managing aura effects that are map-specific. It is part of the PlayerScript
    system which allows custom behavior extension for player-related events in the
    game engine.
  parameters:
  - name: player
    description: Pointer to the Player object whose map has changed. This parameter
      provides access to all player properties and methods for performing actions
      or checks related to the map transition.
  returns: null
  examples:
  - title: Basic Map Change Handler
    code: "class MyPlayerScript : public PlayerScript\n{\npublic:\n    void OnMapChanged(Player*\
      \ player) override\n    {\n        // Log the map change event\n        sLog->outString(\"\
      Player %s has changed maps.\", player->GetName().c_str());\n        \n     \
      \   // Perform actions based on new map ID\n        uint32 newMapId = player->GetMapId();\n\
      \        if (newMapId == 1234)\n        {\n            // Special handling for\
      \ specific map\n            player->CastSpell(player, 56789, true);\n      \
      \  }\n    }\n};"
    language: cpp
  notes: This method is called after the player's map has been successfully changed
    and all related systems have processed the transition. It should not be used to
    prevent map changes as it is a notification-only event. The player object passed
    in will already reflect the new map information.
  warnings: Do not attempt to modify the player's position or force map transitions
    within this method, as doing so may cause undefined behavior or client desynchronization.
    Avoid heavy computations in this handler as it can impact performance during frequent
    map changes.
  related:
  - OnPlayerEnterWorld
  - OnPlayerLeaveWorld
  - OnMapChanged
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T01:17:16.337185'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
