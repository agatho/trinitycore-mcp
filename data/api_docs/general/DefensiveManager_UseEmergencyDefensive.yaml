api:
  class: DefensiveManager
  method: UseEmergencyDefensive
  signature: uint32 DefensiveManager::UseEmergencyDefensive()
documentation:
  brief: Activates the emergency defensive ability and returns the cooldown time in
    milliseconds.
  description: The UseEmergencyDefensive method is responsible for triggering a character's
    emergency defensive mechanism, typically used during high-risk combat situations.
    This method handles the activation logic, including checking if the ability is
    available (not on cooldown), consuming necessary resources such as mana or rage,
    and applying the defensive effects to the unit. The method returns the cooldown
    time in milliseconds that the ability will be unavailable after use. This functionality
    is commonly found in classes like Paladins, Warriors, or Death Knights who have
    emergency defensive abilities such as Divine Shield, Shield Wall, or Ice Block.
  parameters: []
  returns: Returns a uint32 value representing the cooldown time in milliseconds for
    the emergency defensive ability after it has been used. A return value of 0 typically
    indicates that the ability was not activated due to being on cooldown or insufficient
    resources.
  examples:
  - title: Basic Usage in Combat
    code: "if (player->GetHealth() < player->GetMaxHealth() * 0.2f)\n{\n    uint32\
      \ cooldown = defensiveManager->UseEmergencyDefensive();\n    if (cooldown >\
      \ 0)\n    {\n        // Apply visual effect or send cooldown message\n     \
      \   player->SendCooldownEvent(SPELL_ID_EMERGENCY_DEFENSIVE, cooldown);\n   \
      \ }\n}"
    language: cpp
  - title: Checking Availability Before Use
    code: "Unit* target = player->GetVictim();\nif (target && target->IsInCombat())\n\
      {\n    if (defensiveManager->CanUseEmergencyDefensive())\n    {\n        uint32\
      \ cooldown = defensiveManager->UseEmergencyDefensive();\n        // Handle cooldown\
      \ and effects\n    }\n}"
    language: cpp
  notes: This method is typically called during combat when the unit's health drops
    below a certain threshold. It is important to note that this method may have side
    effects such as interrupting current actions or applying temporary immunity effects.
    The cooldown value returned should be used to prevent further use of the ability
    until the specified time has elapsed.
  warnings: Improper handling of the return value can lead to incorrect cooldown application,
    potentially allowing players to spam emergency defensive abilities. Always check
    for a non-zero return value before assuming the ability was successfully activated.
  related:
  - CanUseEmergencyDefensive
  - IsEmergencyDefensiveOnCooldown
  - GetEmergencyDefensiveCooldown
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T06:33:01.743986'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
