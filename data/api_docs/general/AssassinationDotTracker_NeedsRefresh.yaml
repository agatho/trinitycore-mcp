api:
  class: AssassinationDotTracker
  method: NeedsRefresh
  signature: bool AssassinationDotTracker::NeedsRefresh(uint32 spellId) const
documentation:
  brief: Determines whether a dot spell requires refreshing based on current tracker
    state
  description: The NeedsRefresh method evaluates if a specific dot spell tracked by
    the AssassinationDotTracker needs to be refreshed or reapplied. This is typically
    used in assassination rogue gameplay to manage DoT (Damage over Time) spells like
    Garrote, Rupture, or Deadly Poison. The method checks the current state of the
    tracker against the spell's duration and refresh mechanics to determine if reapplication
    is necessary. It considers factors such as existing dot uptime, remaining duration,
    and refresh thresholds defined by the rogue's specialization and talents.
  parameters: []
  returns: Returns true if the tracked dot spell requires a refresh based on current
    conditions; returns false if the dot is still active and within its refresh window
    or if no refresh is needed at this time
  examples:
  - title: Basic usage in rogue combat logic
    code: "if (rogue->GetAssassinationDotTracker()->NeedsRefresh(SPELL_ID_GAROTE))\
      \ {\n    // Refresh the Garrote dot\n    caster->CastSpell(target, SPELL_ID_GAROTE_REFRESH,\
      \ true);\n}"
    language: cpp
  - title: Integration with spell casting system
    code: "void RogueAI::UpdateDoTManagement() {\n    if (assassinationTracker &&\
      \ assassinationTracker->NeedsRefresh(SPELL_ID_RUPTURE)) {\n        // Check\
      \ if player has sufficient energy and target is valid\n        if (player->GetPower(POWER_ENERGY)\
      \ >= 35 && target->IsAlive()) {\n            player->CastSpell(target, SPELL_ID_RUPTURE,\
      \ true);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called during combat updates or spell casting logic
    to determine optimal timing for dot refreshes. The implementation likely considers
    the rogue's talents such as Improved Rupture or Master of subtlety which affect
    DoT refresh mechanics. The tracker maintains internal state about active dots
    and their durations.
  warnings: This method should not be called outside of combat context without proper
    validation, as it may return unexpected results if dot states are not properly
    initialized. Be cautious when using this in non-combat scenarios where the tracker
    might not have accurate state information.
  related:
  - GetDotDuration
  - IsDotActive
  - RefreshDot
  - UpdateDotState
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T04:08:26.921237'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
