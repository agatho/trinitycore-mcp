api:
  class: BotThreatManager
  method: AnalyzeTargetThreat
  signature: void BotThreatManager::AnalyzeTargetThreat(Unit * target, ThreatTarget
    & threatTarget)
documentation:
  brief: Analyzes the threat level of a target unit and updates the threat target
    data structure accordingly.
  description: The AnalyzeTargetThreat method evaluates the current threat situation
    between a bot and a specified target unit. It calculates and updates the threat
    metrics within the provided ThreatTarget structure, which includes information
    such as threat percentage, threat level, and whether the target is currently being
    aggroed by the bot. This method is typically invoked during AI decision-making
    processes to determine appropriate combat actions based on threat levels. The
    method ensures that threat data remains synchronized with the current state of
    the unit's engagement with the target.
  parameters:
  - name: target
    description: Pointer to the Unit object representing the target whose threat level
      is being analyzed. Must not be null.
  - name: threatTarget
    description: Reference to a ThreatTarget structure that will be updated with the
      analyzed threat data for the specified target.
  returns: null
  examples:
  - title: Basic threat analysis example
    code: 'Unit* target = bot->GetVictim();

      ThreatTarget threatData;

      botThreatManager->AnalyzeTargetThreat(target, threatData);

      // Use threatData to make AI decisions'
    language: cpp
  - title: Threat analysis with conditional logic
    code: "if (Unit* target = bot->GetVictim()) {\n    ThreatTarget threatData;\n\
      \    botThreatManager->AnalyzeTargetThreat(target, threatData);\n    if (threatData.threatPercentage\
      \ > 80) {\n        // Execute high-threat action\n        bot->DoAction(BOT_ACTION_FLEE);\n\
      \    }\n}"
    language: cpp
  notes: This method should only be called when the bot has an active target. The
    ThreatTarget structure is updated in-place and contains data that may be used
    by other systems for decision making. Performance-wise, this method involves calculations
    related to threat generation and comparison, so it should not be called excessively
    during high-frequency AI loops.
  warnings: Ensure that the target parameter is valid and not null before calling
    this method, as passing a null pointer will likely result in undefined behavior
    or crashes. The ThreatTarget structure should be properly initialized before being
    passed to avoid unexpected results.
  related:
  - GetThreatList
  - UpdateThreat
  - CalculateThreat
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T05:06:26.119038'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
