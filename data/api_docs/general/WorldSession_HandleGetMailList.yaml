api:
  class: WorldSession
  method: HandleGetMailList
  signature: void WorldSession::HandleGetMailList(WorldPackets::Mail::MailGetList
    & getList)
documentation:
  brief: Retrieves and processes the list of mails for the player's mailbox.
  description: The HandleGetMailList method is responsible for processing a client
    request to fetch the list of mails in the player's mailbox. It handles the incoming
    packet from the WorldPackets::Mail::MailGetList structure, validates the player's
    session, and prepares the mail list data to be sent back to the client. This method
    typically involves checking if the player has access to their mailbox, retrieving
    stored mail information from the database or in-memory structures, and formatting
    it into a response packet that includes mail headers such as subject, sender,
    money amount, item count, and read status. The method is part of the core mail
    system functionality within TrinityCore's WorldSession handling.
  parameters:
  - name: getList
    description: The incoming packet containing the client's request to retrieve the
      mail list. This parameter specifies which mails should be fetched and how they
      should be filtered or sorted by the server.
  returns: null
  examples:
  - title: Basic usage in a WorldSession context
    code: "void WorldSession::HandleGetMailList(WorldPackets::Mail::MailGetList& getList)\n\
      {\n    if (!GetPlayer())\n        return;\n\n    // Process the mail list request\n\
      \    SendMailList();\n}"
    language: cpp
  notes: This method is typically invoked when a player opens their mailbox interface
    in-game. It may involve database queries to fetch mail data, and it's important
    that the session is valid before proceeding. The method should not be called directly
    from outside the WorldSession context without proper session validation.
  warnings: Improper handling of this method can lead to security vulnerabilities
    or incorrect mail display. Ensure all incoming packet data is validated and sanitized
    before processing. Also, make sure to check for player state (e.g., if they are
    logged in) before attempting to retrieve mail data.
  related:
  - SendMailList
  - HandleMailGetList
  - HandleSendMail
  - HandleMailDelete
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:33:47.161771'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
