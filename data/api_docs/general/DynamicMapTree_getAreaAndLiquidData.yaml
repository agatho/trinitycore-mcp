api:
  class: DynamicMapTree
  method: getAreaAndLiquidData
  signature: bool DynamicMapTree::getAreaAndLiquidData(float x, float y, float z,
    const PhaseShift & phaseShift, int reqLiquidType, VMAP::AreaAndLiquidData & data)
    const
documentation:
  brief: Retrieves area and liquid data for a given position within a phase shift
    context.
  description: The getAreaAndLiquidData method queries the dynamic map tree to retrieve
    area information and liquid data at a specified 3D coordinate. It takes into account
    the provided PhaseShift to determine which phase of the world is relevant for
    the query. The method supports filtering by required liquid type, allowing clients
    to request specific liquid types such as water or lava. This functionality is
    essential for determining terrain properties, collision detection, and gameplay
    mechanics that depend on area and liquid data in World of Warcraft's 3D environment.
  parameters:
  - name: x
    description: The X coordinate of the position to query
  - name: y
    description: The Y coordinate of the position to query
  - name: z
    description: The Z coordinate of the position to query
  - name: phaseShift
    description: The phase shift context that determines which phase of the world
      is relevant for the query
  - name: reqLiquidType
    description: The required liquid type to filter results. A value of -1 indicates
      no filtering.
  - name: data
    description: Reference to a VMAP::AreaAndLiquidData structure where the retrieved
      area and liquid data will be stored
  returns: True if the area and liquid data were successfully retrieved for the given
    position, false otherwise.
  examples:
  - title: Basic usage of getAreaAndLiquidData
    code: "float x = 100.0f, y = 200.0f, z = 50.0f;\nPhaseShift phase;\nVMAP::AreaAndLiquidData\
      \ data;\nbool success = dynamicMapTree->getAreaAndLiquidData(x, y, z, phase,\
      \ -1, data);\nif (success)\n{\n    // Process retrieved area and liquid data\n\
      }"
    language: cpp
  - title: Querying for specific liquid type
    code: "float x = 100.0f, y = 200.0f, z = 50.0f;\nPhaseShift phase;\nVMAP::AreaAndLiquidData\
      \ data;\nint waterType = 1; // Example liquid type for water\nbool success =\
      \ dynamicMapTree->getAreaAndLiquidData(x, y, z, phase, waterType, data);\nif\
      \ (success)\n{\n    // Process retrieved area and liquid data specifically for\
      \ water\n}"
    language: cpp
  notes: This method is part of the dynamic map tree system used in TrinityCore to
    efficiently query area and liquid information. It leverages spatial partitioning
    techniques to quickly locate relevant data without full world traversal. The method
    assumes that the provided coordinates are valid for the current map instance.
  warnings: Ensure that the PhaseShift parameter correctly represents the active phase
    context, as incorrect phase information may lead to retrieving stale or invalid
    data. The method will return false if the position is outside of valid map boundaries
    or if no area/liquid data exists at the specified coordinates.
  related:
  - getAreaData
  - getLiquidData
  - getIntersectionPosition
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T15:11:04.850831'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
