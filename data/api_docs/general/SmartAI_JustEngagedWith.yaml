api:
  class: SmartAI
  method: JustEngagedWith
  signature: void SmartAI::JustEngagedWith(Unit * enemy)
documentation:
  brief: Called when the creature enters combat with a target unit in SmartAI.
  description: The JustEngagedWith method is invoked by the SmartAI system when a
    creature transitions into combat mode and begins engaging with a specific enemy
    unit. This method serves as a hook for custom AI behavior during the initial engagement
    phase, allowing developers to implement actions such as casting spells, initiating
    movement patterns, or triggering quest events upon entering combat. The method
    is part of the standard SmartAI event handling mechanism and is automatically
    called by the core engine when an enemy is detected within the creature's aggro
    range.
  parameters:
  - name: enemy
    description: Pointer to the Unit object that the creature has just engaged in
      combat with. This represents the target unit that triggered the engagement,
      typically a player or another creature.
  returns: null
  examples:
  - title: Basic implementation of JustEngagedWith
    code: "void SmartAI::JustEngagedWith(Unit* enemy)\n{\n    if (enemy && enemy->IsPlayer())\n\
      \    {\n        // Cast a spell on engagement\n        me->CastSpell(enemy,\
      \ SPELL_ENGAGEMENT_AURA, true);\n        \n        // Say something when engaging\
      \ a player\n        Talk(SAY_ENGAGED_PLAYER);\n    }\n}"
    language: cpp
  - title: Advanced usage with conditional logic
    code: "void SmartAI::JustEngagedWith(Unit* enemy)\n{\n    if (!enemy)\n      \
      \  return;\n\n    // Check if enemy is a player and has specific quest\n   \
      \ if (enemy->IsPlayer() && enemy->ToPlayer()->HasQuestForItem(ITEM_ENGAGEMENT_TOKEN))\n\
      \    {\n        // Trigger special event\n        DoCast(SPELL_SPECIAL_ENGAGEMENT);\n\
      \        Talk(SAY_SPECIAL_ENGAGEMENT);\n    }\n    else\n    {\n        // Default\
      \ engagement behavior\n        DoCast(SPELL_MELEE_STRIKE);\n    }\n}"
    language: cpp
  notes: This method is called only once per combat engagement. It's important to
    note that the enemy parameter may be null in rare cases, so proper null checking
    should always be performed. The method executes within the context of the creature's
    AI thread and should not perform long-running operations that could block the
    game loop.
  warnings: Avoid performing heavy computations or database operations directly in
    this method as it can cause performance issues. Also, be cautious when modifying
    the enemy unit's state or the creature's state during this call, as it might lead
    to unexpected behavior or infinite loops if not handled carefully.
  related:
  - EnterCombat
  - JustDied
  - UpdateAI
  - AttackStart
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T02:54:07.316268'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
