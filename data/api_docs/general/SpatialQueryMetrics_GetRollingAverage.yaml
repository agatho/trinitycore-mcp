api:
  class: SpatialQueryMetrics
  method: GetRollingAverage
  signature: FrameMetrics SpatialQueryMetrics::GetRollingAverage() const
documentation:
  brief: Calculates and returns the rolling average of frame metrics for spatial queries.
  description: The GetRollingAverage method computes the average frame metrics over
    a defined window of time or frames, providing insight into the performance characteristics
    of spatial query operations within the TrinityCore server. This is particularly
    useful for monitoring and optimizing the efficiency of area-of-effect spells,
    object visibility checks, and other systems that rely on spatial queries. The
    returned FrameMetrics object contains aggregated statistics such as average execution
    time, frame count, and potentially other relevant performance indicators. This
    method does not modify internal state and can be called safely from any thread
    context where the SpatialQueryMetrics instance is accessible.
  parameters: []
  returns: A FrameMetrics object representing the computed rolling average of spatial
    query frame metrics. The structure typically includes fields like average execution
    time, total frame count, and possibly variance or maximum values within the rolling
    window.
  examples:
  - title: Basic Usage to Monitor Spatial Query Performance
    code: 'SpatialQueryMetrics metrics;

      // ... populate metrics with data ...

      FrameMetrics avg = metrics.GetRollingAverage();

      std::cout << "Average frame time: " << avg.averageTime << " ms" << std::endl;'
    language: cpp
  notes: This method is designed for performance monitoring and should not be called
    excessively in performance-critical code paths. The rolling average window size
    may be configurable or fixed depending on the implementation details of SpatialQueryMetrics.
  warnings: null
  related:
  - SetRollingWindowSize
  - AddFrameMetric
  - GetFrameMetrics
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T14:45:50.822221'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
