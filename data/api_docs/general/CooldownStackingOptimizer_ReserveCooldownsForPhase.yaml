api:
  class: CooldownStackingOptimizer
  method: ReserveCooldownsForPhase
  signature: void CooldownStackingOptimizer::ReserveCooldownsForPhase(BossPhase phase,
    uint32 timeUntilMs)
documentation:
  brief: Reserves cooldowns for a specified boss phase to prevent overlapping abilities
    during combat transitions.
  description: The ReserveCooldownsForPhase method is used in TrinityCore's CooldownStackingOptimizer
    class to manage ability cooldowns during boss encounters. It ensures that specific
    cooldowns are reserved for a given boss phase, preventing them from being triggered
    prematurely or overlapping with other abilities during critical combat transitions.
    This mechanism helps maintain proper encounter flow and prevents unintended behavior
    such as abilities firing too early or conflicting with each other. The method
    takes a BossPhase enum value and a time duration in milliseconds to determine
    when the cooldowns should be reserved.
  parameters:
  - name: phase
    description: The boss phase for which cooldowns should be reserved. This determines
      the specific set of abilities and their cooldown behavior during that phase.
  - name: timeUntilMs
    description: The time duration in milliseconds until the cooldowns should be reserved.
      This specifies how long the cooldowns remain reserved before they can be used
      again.
  returns: null
  examples:
  - title: Basic Usage for Phase Transition
    code: 'CooldownStackingOptimizer optimizer;

      BossPhase currentPhase = BossPhase::PHASE_1;

      optimizer.ReserveCooldownsForPhase(currentPhase, 5000); // Reserve cooldowns
      for 5 seconds'
    language: cpp
  - title: Using with Dynamic Phase Changes
    code: "void OnBossPhaseChange(BossPhase newPhase) {\n    CooldownStackingOptimizer\
      \ optimizer;\n    uint32 transitionTime = GetPhaseTransitionDuration(newPhase);\n\
      \    optimizer.ReserveCooldownsForPhase(newPhase, transitionTime);\n}"
    language: cpp
  notes: This method is typically called during boss encounter logic when transitioning
    between phases. It's important to note that the actual cooldown reservation mechanism
    may involve internal tracking of ability states and timing. The timeUntilMs parameter
    should be carefully calculated based on the expected duration of the phase transition
    or ability cooldowns.
  warnings: Improper usage of this method can lead to abilities not firing at the
    correct times during boss encounters, potentially causing encounter failures or
    unintended gameplay behavior. Ensure that the BossPhase enum values match those
    defined in the encounter system and that timeUntilMs accurately reflects the intended
    cooldown duration.
  related:
  - GetCooldownsForPhase
  - ReleaseReservedCooldowns
  - IsCooldownReserved
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T16:37:33.135547'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
