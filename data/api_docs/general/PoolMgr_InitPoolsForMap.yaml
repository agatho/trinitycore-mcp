api:
  class: PoolMgr
  method: InitPoolsForMap
  signature: int PoolMgr::InitPoolsForMap(Map * map)
documentation:
  brief: Initializes all active object pools for the specified map
  description: The InitPoolsForMap method initializes and prepares all active object
    pools associated with a given map. This includes setting up internal data structures,
    loading pool configurations, and ensuring that all pooled objects are properly
    registered and ready for use. The method is typically called during map loading
    or initialization phases to ensure that dynamic object spawning (such as creatures,
    game objects, or loot) functions correctly. It handles the setup of pool managers
    and their associated data structures for the specified map instance.
  parameters: []
  returns: Returns an integer value indicating the success or failure of the initialization
    process. A return value of 0 typically indicates successful initialization, while
    non-zero values may indicate various error conditions such as invalid map references
    or resource allocation failures.
  examples:
  - title: Basic usage in map loading context
    code: "Map* myMap = sMapMgr->FindMap(1, 0);\nint result = sPoolMgr->InitPoolsForMap(myMap);\n\
      if (result == 0) {\n    // Pool initialization successful\n    sLog->outString(\"\
      Pools initialized successfully for map %u\", myMap->GetId());\n} else {\n  \
      \  // Handle initialization failure\n    sLog->outError(\"Failed to initialize\
      \ pools for map %u\", myMap->GetId());\n}"
    language: cpp
  notes: This method is typically invoked automatically during map loading, but may
    also be called manually in special circumstances. The method assumes that the
    provided Map pointer is valid and represents an active map instance. Performance-wise,
    this operation can be costly on maps with many pools, as it iterates through all
    pool configurations for the given map.
  warnings: Calling this method on a null or invalid Map pointer will likely result
    in undefined behavior or crashes. Ensure that the Map object is properly initialized
    and valid before calling this method. Also, avoid calling this method multiple
    times on the same map without proper cleanup between calls.
  related:
  - GetPoolForMap
  - LoadPools
  - UpdatePools
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T00:42:38.432147'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
