api:
  class: AuraEffect
  method: HandleModVersatilityByPct
  signature: void AuraEffect::HandleModVersatilityByPct(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Applies or removes a percentage-based versatility buff or debuff effect from
    an aura application.
  description: The HandleModVersatilityByPct method is responsible for modifying the
    versatility stat of a unit by a specified percentage when an aura effect is applied
    or removed. This method is typically invoked during aura application or removal
    events to adjust the target's versatility, which affects both damage dealt and
    healing received. The versatility stat influences how much additional damage or
    healing is generated from critical strikes and other effects. This method operates
    on the AuraApplication object passed in, applying or reverting the percentage-based
    versatility change depending on whether the aura is being applied or removed.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This contains information about the aura's target, duration,
      and effects.
  - name: mode
    description: The mode of operation indicating how the effect should be handled.
      Values typically represent different application states such as 'apply' (1)
      or 'remove' (0), though exact values depend on internal TrinityCore implementation.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the versatility effect. When true, the percentage modifier is added to the unit's
      versatility; when false, it is subtracted.
  returns: null
  examples:
  - title: Applying a Versatility Buff
    code: 'AuraEffect* auraEffect = ...;

      // Apply a 10% versatility buff

      auraEffect->HandleModVersatilityByPct(auraApp, 1, true);'
    language: cpp
  - title: Removing a Versatility Debuff
    code: 'AuraEffect* auraEffect = ...;

      // Remove a 5% versatility debuff

      auraEffect->HandleModVersatilityByPct(auraApp, 0, false);'
    language: cpp
  notes: This method is part of the aura handling system in TrinityCore and should
    only be called from within the core aura application logic. The actual percentage
    value for versatility modification is determined by the aura's properties and
    not directly passed as a parameter to this function.
  warnings: Improper usage of this method can lead to incorrect stat calculations
    or unexpected behavior in combat mechanics. Ensure that the AuraApplication object
    passed is valid and properly initialized before calling this method.
  related:
  - AuraEffect::HandleModVersatility
  - AuraEffect::ApplyEffect
  - AuraEffect::RemoveEffect
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T12:16:29.137014'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
