api:
  class: PriestAI
  method: CountUnbuffedGroupMembers
  signature: int PriestAI::CountUnbuffedGroupMembers(int spellId)
documentation:
  brief: Counts the number of unbuffed group members who are eligible for a specified
    priest spell buff.
  description: 'The CountUnbuffedGroupMembers method iterates through all group members
    within the priest''s range and determines how many do not currently have the specified
    spell buff applied to them. This is commonly used in AI logic to identify targets
    for buffs like Power Word: Fortitude or Prayer of Fortitude. The method checks
    both the player''s own buff status and the buff status of group members, ensuring
    that only those who are not already affected by the spell are counted. It returns
    zero if no eligible targets are found or if the spell ID is invalid.'
  parameters:
  - name: spellId
    description: 'The unique identifier of the spell to check for buff status. This
      should correspond to a valid priest spell such as Power Word: Fortitude (465),
      Prayer of Fortitude (21562), or similar group buff spells.'
  returns: An integer representing the number of group members who do not currently
    have the specified spell buff applied. Returns 0 if no eligible targets are found,
    or if the spell ID is invalid.
  examples:
  - title: 'Basic usage to count unbuffed group members for Power Word: Fortitude'
    code: "int count = priestAI->CountUnbuffedGroupMembers(465); // Spell ID for Power\
      \ Word: Fortitude\nif (count > 0)\n{\n    // Proceed with casting the buff on\
      \ eligible targets\n}"
    language: cpp
  - title: Advanced usage with conditional logic based on unbuffed count
    code: "int fortitudeCount = priestAI->CountUnbuffedGroupMembers(465);\nint prayerCount\
      \ = priestAI->CountUnbuffedGroupMembers(21562);\n\nif (fortitudeCount > 0)\n\
      {\n    // Cast Power Word: Fortitude if needed\n}\nelse if (prayerCount > 0)\n\
      {\n    // Cast Prayer of Fortitude as alternative\n}"
    language: cpp
  notes: This method assumes that the PriestAI instance has access to a valid group
    and that the spell ID provided corresponds to an actual buff spell. Performance
    may be impacted in large groups due to iteration over all members, though typical
    group sizes are small (1-5 players). The method does not perform any checks for
    whether the priest can cast the spell or if targets are within range; these should
    be handled by calling code.
  warnings: Ensure that the spell ID passed is valid and corresponds to a group buff
    spell. Passing an invalid spell ID may result in unexpected behavior or zero counts
    even when targets exist. This method does not account for raid versus party groups,
    so use with caution in raid environments where different logic might be required.
  related:
  - GetGroupMembers
  - HasAura
  - CastSpell
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T21:59:53.749108'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
