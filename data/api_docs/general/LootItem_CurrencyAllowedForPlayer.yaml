api:
  class: LootItem
  method: CurrencyAllowedForPlayer
  signature: bool LootItem::CurrencyAllowedForPlayer(const Player * player, uint32
    currencyId, bool needs_quest, const int & conditions)
documentation:
  brief: Checks if a player is allowed to receive a specific currency item from loot.
  description: The CurrencyAllowedForPlayer method determines whether a given player
    can receive a specific currency item based on various conditions such as quest
    requirements, player level, and currency restrictions. This method is typically
    used during loot distribution to ensure that players only receive currencies they
    are eligible for. The method evaluates the currency ID against the player's current
    state and any associated quest flags or conditions.
  parameters:
  - name: player
    description: Pointer to the Player object for whom the currency allowance is being
      checked. Must not be null.
  - name: currencyId
    description: The unique identifier of the currency item being checked. This corresponds
      to entries in the CurrencyTypes.dbc file.
  - name: needs_quest
    description: Boolean flag indicating whether the currency requires a specific
      quest to be completed before it can be obtained.
  - name: conditions
    description: Reference to an integer representing additional conditions or modifiers
      that may affect currency allowance. Value is typically used for internal logic
      and condition checking.
  returns: Returns true if the player is allowed to receive the specified currency
    item, false otherwise.
  examples:
  - title: Basic usage of CurrencyAllowedForPlayer
    code: "if (lootItem->CurrencyAllowedForPlayer(player, 285, false, 0)) {\n    //\
      \ Player can receive this currency\n    player->AddItem(285, 1);\n}"
    language: cpp
  - title: Using CurrencyAllowedForPlayer with quest requirement
    code: "if (lootItem->CurrencyAllowedForPlayer(player, 392, true, 1)) {\n    //\
      \ Player must have completed the required quest\n    player->AddItem(392, 5);\n\
      } else {\n    // Currency not allowed due to missing quest or other conditions\n\
      \    player->SendNotification(\"You are not eligible for this currency.\");\n\
      }"
    language: cpp
  notes: This method is part of the loot system and integrates with the World of Warcraft
    currency system. It may perform database lookups or internal checks depending
    on how the currency is defined in the game's configuration files.
  warnings: Ensure that the player pointer is valid before calling this method to
    avoid crashes. The conditions parameter should be carefully managed as it can
    affect the outcome of the check.
  related:
  - LootItem::IsAllowedForPlayer
  - LootItem::CanLootItem
  - Player::HasCurrency
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:19:51.394938'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
