api:
  class: DisciplinePriestRefactored
  method: UpdateRotation
  signature: void DisciplinePriestRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the discipline priest's spell rotation based on current target and
    combat state
  description: The UpdateRotation method manages the core decision-making logic for
    a Discipline Priest's spell casting sequence. It evaluates the current target's
    health, player mana levels, and combat conditions to determine the optimal spell
    to cast next. This method typically integrates with the AI system to provide automated
    spell selection and execution for the priest character during encounters. The
    method modifies internal state variables related to spell priorities and cooldowns,
    and may trigger additional actions such as movement adjustments or target switching
    based on tactical requirements.
  parameters:
  - name: target
    description: Pointer to an integer representing the current target's ID or index
      in the combat system. This parameter is used to determine which enemy to prioritize
      for healing or damage spells.
  returns: null
  examples:
  - title: Basic usage in AI loop
    code: "void DisciplinePriestAI::Update()\n{\n    int targetId = GetTargetId();\n\
      \    UpdateRotation(&targetId);\n}"
    language: cpp
  - title: Integration with combat state management
    code: "void DisciplinePriestRefactored::UpdateRotation(int* target)\n{\n    if\
      \ (*target == 0) return;\n    \n    // Evaluate target health\n    float targetHealth\
      \ = GetTargetHealthPercent(*target);\n    \n    // Determine rotation priority\
      \ based on conditions\n    if (targetHealth < 30.0f && HasManaForFlashHeal())\n\
      \        CastSpell(SPELL_FLASH_HEAL);\n    else if (HasManaForPenance())\n \
      \       CastSpell(SPELL_PENANCE);\n    else\n        CastSpell(SPELL_SMITE);\n\
      }"
    language: cpp
  notes: This method is typically called within the AI update loop at regular intervals.
    The target parameter should be validated before use to prevent null pointer dereferences.
    Performance considerations include minimizing expensive calculations during high-frequency
    updates.
  warnings: The method assumes valid target data and may crash if passed an invalid
    target ID. Ensure proper initialization of the priest's spell cooldowns and mana
    state before calling this method.
  related:
  - CastSpell
  - GetTargetHealthPercent
  - HasManaForSpell
  - IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T06:11:49.886256'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
