api:
  class: SpellPctModByLabel
  method: WriteUpdate
  signature: void SpellPctModByLabel::WriteUpdate(ByteBuffer & data, bool ignoreChangesMask,
    const Player * owner, const Player * receiver) const
documentation:
  brief: Serializes spell percentage modifier data for a specific label into a network
    packet buffer for transmission to a client.
  description: The WriteUpdate method of the SpellPctModByLabel class prepares and
    writes the current state of a spell percentage modifier associated with a specific
    label into a ByteBuffer, which is typically used for sending updates to players
    in the game world. This method handles serialization of the modifier's properties
    including its value, label identifier, and any relevant flags or masks. The data
    is written in a format suitable for network transmission, ensuring that the client
    receives accurate information about active spell modifiers. The method respects
    the ignoreChangesMask flag which can bypass change tracking logic if needed, and
    takes into account the owner of the modifier and the receiving player to determine
    appropriate data visibility and filtering.
  parameters:
  - name: data
    description: Reference to a ByteBuffer object where the serialized spell percentage
      modifier data will be written. This buffer is typically used for constructing
      network packets sent to clients.
  - name: ignoreChangesMask
    description: Boolean flag indicating whether change tracking should be ignored
      when writing update data. If true, all data fields are written regardless of
      their change status.
  - name: owner
    description: Pointer to the Player object that owns this spell percentage modifier.
      Used to determine ownership context and access permissions for the modifier
      data.
  - name: receiver
    description: Pointer to the Player object who will receive this update packet.
      Used to apply appropriate filtering or visibility rules based on player relationships
      or game state.
  returns: null
  examples:
  - title: Basic usage in spell update context
    code: 'ByteBuffer data;

      SpellPctModByLabel modifier;

      Player* owner = ...; // Get owner player

      Player* receiver = ...; // Get receiving player

      modifier.WriteUpdate(data, false, owner, receiver);

      // Send data to client via packet system'
    language: cpp
  - title: Forcing update with ignore flag
    code: 'ByteBuffer data;

      SpellPctModByLabel modifier;

      Player* owner = ...;

      Player* receiver = ...;

      // Force write all fields regardless of change status

      modifier.WriteUpdate(data, true, owner, receiver);

      // Construct and send full update packet'
    language: cpp
  notes: This method is typically called during spell update cycles or when sending
    periodic updates to players. The ByteBuffer parameter should be properly initialized
    before calling this method. The owner and receiver parameters are crucial for
    determining data visibility and may affect which fields are included in the serialized
    output.
  warnings: Improper use of the ignoreChangesMask flag can result in unnecessary network
    traffic or incorrect state synchronization. Ensure that owner and receiver pointers
    are valid to prevent access violations. This method assumes proper initialization
    of the ByteBuffer before writing.
  related:
  - SpellPctModByLabel::ReadUpdate
  - SpellPctModByLabel::GetModifierValue
  - SpellPctModByLabel::SetModifierValue
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T18:48:00.448660'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
