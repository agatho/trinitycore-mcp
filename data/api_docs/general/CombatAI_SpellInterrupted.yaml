api:
  class: CombatAI
  method: SpellInterrupted
  signature: void CombatAI::SpellInterrupted(int spellId, int unTimeMs)
documentation:
  brief: Handles the interruption of a spell during combat by the CombatAI system.
  description: The SpellInterrupted method is invoked when a spell cast by an AI-controlled
    creature is interrupted, typically due to damage taken or other combat events.
    This method allows the CombatAI implementation to respond appropriately to spell
    interruptions, potentially resetting the spell casting state, adjusting combat
    behavior, or triggering alternative actions. It serves as a callback mechanism
    for managing dynamic combat scenarios where spell casts may be disrupted by external
    factors such as incoming attacks or environmental changes.
  parameters:
  - name: spellId
    description: The unique identifier of the spell that was interrupted. This value
      is used to determine which specific spell was affected and may influence how
      the AI responds to the interruption.
  - name: unTimeMs
    description: The time in milliseconds when the spell interruption occurred. This
      timestamp can be used for logging, timing calculations, or determining cooldown
      periods following the interruption.
  returns: null
  examples:
  - title: Basic usage of SpellInterrupted
    code: "void MyCombatAI::SpellInterrupted(int spellId, int unTimeMs)\n{\n    //\
      \ Log the spell interruption\n    sLog->outInfo(LOG_FILTER_GENERAL, \"Spell\
      \ %d interrupted at time %d ms\", spellId, unTimeMs);\n    \n    // Reset spell\
      \ casting state if necessary\n    m_spellInterrupted = true;\n}"
    language: cpp
  - title: Advanced usage with cooldown handling
    code: "void MyCombatAI::SpellInterrupted(int spellId, int unTimeMs)\n{\n    //\
      \ Store interruption time for cooldown tracking\n    m_lastSpellInterruptTime\
      \ = unTimeMs;\n    \n    // Adjust AI behavior based on the interrupted spell\n\
      \    switch (spellId)\n    {\n        case SPELL_FIREBALL:\n            // Trigger\
      \ a defensive action\n            DoCast(SPELL_SHIELD);\n            break;\n\
      \        default:\n            break;\n    }\n}"
    language: cpp
  notes: This method is typically called from within the core AI update loop or during
    combat state changes. It's important to ensure that any logic implemented here
    does not introduce performance bottlenecks, especially if called frequently during
    active combat. The spellId parameter should be validated against known spell definitions
    to avoid unexpected behavior.
  warnings: Improper handling of spell interruptions may lead to inconsistent AI behavior
    or incorrect spell state management. Avoid performing heavy computations or blocking
    operations within this method as it can impact real-time combat responsiveness.
  related:
  - SpellCast
  - SpellFinished
  - UpdateAI
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T17:16:23.325743'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
