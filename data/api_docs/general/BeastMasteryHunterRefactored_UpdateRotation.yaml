api:
  class: BeastMasteryHunterRefactored
  method: UpdateRotation
  signature: void BeastMasteryHunterRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the hunter's beast mastery rotation based on current target and combat
    state
  description: The UpdateRotation method manages the core logic for a Beast Mastery
    hunter's ability usage during combat. It evaluates the current target, available
    abilities, resource levels (focus/rage), and tactical situation to determine the
    optimal sequence of actions. This includes selecting appropriate pet abilities,
    managing beastial wrath usage, and coordinating with main hand attacks. The method
    integrates with the hunter's AI state machine to ensure proper rotation execution
    while respecting cooldowns and resource constraints.
  parameters:
  - name: target
    description: Pointer to the current target entity. This parameter determines which
      enemy the hunter will focus their rotation on, including targeting priority,
      threat management, and ability selection based on target type and health percentage.
  returns: null
  examples:
  - title: Basic Usage in Combat
    code: "void MyHunterAI::Update()\n{\n    Unit* target = GetVictim();\n    if (target)\n\
      \        m_hunter->UpdateRotation(&target);\n}"
    language: cpp
  - title: Integration with Custom Targeting Logic
    code: "void BeastMasteryHunterRefactored::UpdateRotation(int* target)\n{\n   \
      \ if (!target || *target == 0) return;\n    \n    // Check if we have a valid\
      \ target\n    Unit* unitTarget = ObjectAccessor::GetUnit(*m_owner, *target);\n\
      \    if (!unitTarget || !unitTarget->IsAlive())\n        return;\n    \n   \
      \ // Execute rotation logic here\n    // ... implementation details ...\n}"
    language: cpp
  notes: This method is typically called during the AI update cycle and should not
    be invoked directly from combat actions. The target parameter must point to a
    valid Unit object or the behavior will be undefined. Performance considerations
    include avoiding expensive operations within this method as it's called frequently
    during combat.
  warnings: Passing an invalid or null pointer for target can lead to crashes or undefined
    behavior. Ensure that the target is properly validated before calling this method.
    The method assumes the hunter has a valid pet and that all necessary resources
    are available for rotation execution.
  related:
  - GetPet
  - HasPet
  - IsCasting
  - GetNextSpell
  - CheckCooldowns
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T08:42:35.172056'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
