api:
  class: MageSpellCalculator
  method: CalculateResistance
  signature: float MageSpellCalculator::CalculateResistance(uint32 spellId, Player
    * caster, ::Unit * target)
documentation:
  brief: Calculates the resistance value for a mage spell against a target player.
  description: The CalculateResistance method computes the magical resistance percentage
    that a target player has against a specific mage spell. This calculation takes
    into account the caster's spell ID, the target unit, and various game mechanics
    such as spell school resistance, target's resistance stats, and any applicable
    buffs or debuffs. The result is returned as a float value representing the percentage
    of damage reduction due to resistance (e.g., 0.5 means 50% resistance). This method
    is typically used in spell damage calculations within the Mage class's spell system.
  parameters:
  - name: spellId
    description: The unique identifier of the mage spell being cast. This determines
      which spell properties and resistance types are considered during calculation.
  - name: caster
    description: Pointer to the Player object who is casting the spell. Required for
      accessing caster's stats, level, and other relevant properties.
  - name: target
    description: Pointer to the Unit object that is being targeted by the spell. This
      can be a player or creature and is used to determine target's resistance values.
  returns: A float value between 0.0 and 1.0 representing the resistance percentage.
    A value of 0.0 indicates no resistance, while 1.0 indicates full immunity (100%
    resistance). Values in between represent partial resistance effects.
  examples:
  - title: Basic Usage Example
    code: "float resistance = calculator.CalculateResistance(12345, playerCaster,\
      \ targetUnit);\nif (resistance > 0.0f) {\n    // Apply resistance to damage\
      \ calculation\n    float finalDamage = baseDamage * (1.0f - resistance);\n}"
    language: cpp
  - title: Advanced Usage with Spell School
    code: 'uint32 fireSpellId = 12345;

      Player* caster = player;

      Unit* target = unitTarget;

      float resistance = calculator.CalculateResistance(fireSpellId, caster, target);

      // Adjust damage based on resistance

      float damageReduction = resistance * 100.0f;

      TC_LOG_DEBUG("spell", "Fire spell resistance: %.2f%%", damageReduction);'
    language: cpp
  notes: This method likely uses internal TrinityCore spell resistance calculations
    that consider base resistance stats, caster level differences, and any temporary
    modifiers. The implementation may also factor in target's armor penetration or
    spell penetration abilities if applicable.
  warnings: Ensure that both caster and target pointers are valid before calling this
    method to avoid crashes. Be aware that the returned value represents a percentage
    of damage reduction, not an absolute resistance amount.
  related:
  - CalculateSpellDamage
  - GetSpellResistance
  - ApplySpellEffects
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T08:58:02.873206'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
