api:
  class: InteractionManager
  method: LearnSpell
  signature: bool InteractionManager::LearnSpell(Player * bot, Creature * trainer,
    uint32 spellId)
documentation:
  brief: Attempts to teach a player a spell from a trainer creature.
  description: The LearnSpell method facilitates the process of a player learning
    a new spell from a trainer NPC. It validates whether the player can learn the
    specified spell, checks if the trainer is capable of teaching it, and handles
    the necessary data updates including spell removal from the player's spell book
    and updating the trainer's available spells. This method is typically used in
    AI behavior scripts to automate spell learning for bot characters within the TrinityCore
    framework.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the character that will
      learn the spell.
  - name: trainer
    description: Pointer to the Creature object representing the NPC trainer from
      which the spell is being learned.
  - name: spellId
    description: The unique identifier of the spell to be learned. Must correspond
      to a valid spell in the game database.
  returns: Returns true if the spell was successfully learned by the player, false
    otherwise. Failure may occur due to invalid parameters, insufficient prerequisites,
    or trainer not offering the specified spell.
  examples:
  - title: Basic Spell Learning
    code: "if (interactionManager->LearnSpell(playerBot, npcTrainer, 12345)) {\n \
      \   ChatHandler(playerBot->GetSession()).SendSysMessage(\"Spell learned successfully!\"\
      );\n} else {\n    ChatHandler(playerBot->GetSession()).SendSysMessage(\"Failed\
      \ to learn spell.\");\n}"
    language: cpp
  - title: Conditional Spell Learning
    code: "if (playerBot->HasSpell(12345)) {\n    // Skip if already known\n    return;\n\
      }\n\nif (interactionManager->LearnSpell(playerBot, npcTrainer, 12345)) {\n \
      \   playerBot->UpdateSkill(12345, 1);\n    playerBot->SendSpellLearned(12345);\n\
      }"
    language: cpp
  notes: This method assumes that the player and trainer are within valid interaction
    range. The spell ID must exist in the game's spell database and be compatible
    with the player's class or specialization. It does not perform any checks on the
    player's level or skill requirements beyond what is defined in the spell's prerequisites.
  warnings: Calling this method without verifying that the trainer actually offers
    the spell can lead to inconsistent state. Ensure that the spell ID corresponds
    to a valid spell and that the trainer supports learning it before invoking this
    function.
  related:
  - Player::LearnSpell
  - Creature::IsTrainerOf
  - Player::HasSpell
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T02:23:03.929034'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
