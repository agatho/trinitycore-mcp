api:
  class: SmartAI
  method: OnSpellClick
  signature: void SmartAI::OnSpellClick(Unit * clicker, bool spellClickHandled)
documentation:
  brief: Handles spell click events for SmartAI units, allowing custom behavior when
    a unit is clicked by another unit with a spell.
  description: The OnSpellClick method is a virtual callback function in the SmartAI
    class that is invoked when a unit equipped with SmartAI is interacted with via
    a spell click mechanism. This typically occurs when a player or creature clicks
    on the AI-controlled unit using an applicable spell, such as mounting or interacting
    with quest objects. The method allows developers to define custom logic for handling
    these interactions, including triggering specific actions, modifying the unit's
    state, or performing conditional behaviors based on the clicking unit and whether
    the spell click has been handled already. This function is part of the SmartAI
    framework which provides advanced AI scripting capabilities within TrinityCore.
  parameters:
  - name: clicker
    description: Pointer to the Unit that initiated the spell click interaction. This
      can be a player or another creature that triggered the spell click event.
  - name: spellClickHandled
    description: Boolean flag indicating whether the spell click interaction has already
      been processed by other systems. If true, custom logic may choose to skip certain
      actions or modify behavior accordingly.
  returns: null
  examples:
  - title: Basic Spell Click Handler
    code: "void MySmartAI::OnSpellClick(Unit* clicker, bool spellClickHandled)\n{\n\
      \    if (!spellClickHandled)\n    {\n        // Perform custom action when clicked\n\
      \        DoAction(ACTION_SPELL_CLICK);\n    }\n}"
    language: cpp
  - title: Conditional Spell Click Based on Clicker Type
    code: "void MySmartAI::OnSpellClick(Unit* clicker, bool spellClickHandled)\n{\n\
      \    if (clicker->GetTypeId() == TYPEID_PLAYER)\n    {\n        Player* player\
      \ = static_cast<Player*>(clicker);\n        if (player->HasQuest(QUEST_ID))\n\
      \        {\n            // Handle quest-related spell click\n            player->PlayerTalkClass->SendGossipMenu(12345,\
      \ GetGUID());\n        }\n    }\n}"
    language: cpp
  notes: This method is part of the SmartAI system and should be overridden in custom
    AI implementations. The spellClickHandled flag allows for coordination with other
    systems that might have already processed the click event, preventing duplicate
    actions. Ensure proper type checking on the clicker parameter before casting to
    specific unit types.
  warnings: Avoid performing heavy operations or blocking calls inside this method
    as it may be called frequently during gameplay. Be cautious when modifying the
    state of the clicker or clicked unit directly, as this can lead to unexpected
    behavior or infinite loops if not handled carefully.
  related:
  - SmartAI::OnGossipHello
  - SmartAI::OnQuestAccept
  - SmartAI::DoAction
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T02:45:12.253570'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
