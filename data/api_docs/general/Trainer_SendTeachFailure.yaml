api:
  class: Trainer
  method: SendTeachFailure
  signature: void Trainer::SendTeachFailure(const Creature * npc, const Player * player,
    uint32 spellId, FailReason reason) const
documentation:
  brief: Sends a teach failure message to the player when they attempt to learn a
    spell from a trainer that fails for a specific reason.
  description: The SendTeachFailure method is used by the Trainer class to notify
    a player that their attempt to learn a spell from a trainer has failed. This method
    constructs and sends an appropriate error message based on the failure reason,
    such as insufficient gold, missing prerequisites, or the player already knowing
    the spell. The method takes into account the creature (trainer) and player involved
    in the interaction, along with the specific spell ID that failed to be learned
    and the reason for the failure. This ensures proper game flow and user feedback
    when spell learning attempts are unsuccessful.
  parameters:
  - name: npc
    description: Pointer to the Creature object representing the trainer NPC attempting
      to teach the spell. Must not be null.
  - name: player
    description: Pointer to the Player object who attempted to learn the spell. Must
      not be null.
  - name: spellId
    description: The unique identifier of the spell that failed to be learned. Used
      to display proper error messages related to the specific spell.
  - name: reason
    description: The FailReason enum value indicating why the spell learning attempt
      failed. This determines the specific error message sent to the player.
  returns: null
  examples:
  - title: Basic Usage in Spell Learning Logic
    code: "void HandlePlayerSpellLearn(Player* player, Creature* trainer, uint32 spellId)\
      \ {\n    // Check if player can learn the spell\n    if (!CanPlayerLearnSpell(player,\
      \ spellId)) {\n        Trainer::SendTeachFailure(trainer, player, spellId, FailReason::NOT_ENOUGH_MONEY);\n\
      \        return;\n    }\n    // Proceed with learning the spell\n}"
    language: cpp
  notes: This method is typically called internally by the trainer system when a spell
    learning attempt fails. It's important to ensure that all parameters are valid
    before calling this method, as invalid pointers may cause crashes or undefined
    behavior. The method does not perform any validation on its own.
  warnings: Do not call this method with null pointers for npc or player; doing so
    will likely result in a crash or undefined behavior. Make sure the spellId corresponds
    to an actual spell that exists in the game database.
  related:
  - Trainer::SendTeachSuccess
  - Trainer::SendTrainerList
metadata:
  confidence: 0.95
  generated_at: '2025-11-09T10:56:36.261225'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
