api:
  class: InventoryManager
  method: BuyFromVendor
  signature: bool InventoryManager::BuyFromVendor(Creature * vendor, uint32 itemId,
    uint32 count)
documentation:
  brief: Attempts to purchase an item from a vendor creature.
  description: The BuyFromVendor method facilitates the process of purchasing items
    from NPC vendors within the World of Warcraft game world. It handles the validation
    of the transaction, checks if the player has sufficient currency, and manages
    the item transfer from the vendor's inventory to the player's inventory. This
    method is typically invoked when a player interacts with a vendor and selects
    an item to buy. The method ensures proper game mechanics such as item availability,
    pricing, and inventory space limitations are respected during the transaction.
  parameters:
  - name: vendor
    description: Pointer to the Creature object representing the vendor from whom
      the item is being purchased. Must be a valid vendor NPC.
  - name: itemId
    description: The unique identifier of the item to purchase. This corresponds to
      the ItemTemplate entry in the database.
  - name: count
    description: The number of items to purchase. Must be a positive integer, typically
      1 for single purchases.
  returns: Returns true if the purchase was successful and the item was added to the
    player's inventory. Returns false if the transaction failed due to insufficient
    funds, lack of inventory space, invalid item ID, or other game constraints.
  examples:
  - title: Basic Purchase from Vendor
    code: "if (player->GetInventory()->BuyFromVendor(vendor, 12345, 1)) {\n    //\
      \ Item purchased successfully\n    player->SendNotification(\"Item purchased\
      \ successfully.\");\n} else {\n    // Purchase failed\n    player->SendNotification(\"\
      Purchase failed.\");\n}"
    language: cpp
  - title: Purchase Multiple Items
    code: "uint32 itemCount = 5;\nif (player->GetInventory()->BuyFromVendor(vendor,\
      \ 67890, itemCount)) {\n    // Successfully purchased multiple items\n    player->SendNotification(\"\
      Successfully purchased %u items.\", itemCount);\n} else {\n    player->SendNotification(\"\
      Failed to purchase items.\");\n}"
    language: cpp
  notes: This method internally checks for sufficient currency, available inventory
    space, and item availability. It may also trigger quest-related events or vendor-specific
    conditions. The method assumes the player has already initiated interaction with
    the vendor and that the vendor is in a valid state to sell items.
  warnings: Ensure that the vendor pointer is valid before calling this method, as
    passing a null pointer will likely cause a crash. Also, be aware that purchasing
    items may trigger additional game logic such as quest updates or reputation changes
    depending on the vendor type and item purchased.
  related:
  - SellToVendor
  - CanAffordItem
  - HasInventorySpace
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T04:49:43.807356'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
