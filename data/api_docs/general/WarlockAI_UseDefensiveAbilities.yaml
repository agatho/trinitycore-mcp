api:
  class: WarlockAI
  method: UseDefensiveAbilities
  signature: void WarlockAI::UseDefensiveAbilities()
documentation:
  brief: Evaluates and applies defensive abilities for a warlock AI unit based on
    current combat state and health conditions.
  description: The UseDefensiveAbilities method is responsible for determining when
    and how a WarlockAI unit should utilize its defensive spells or abilities. This
    includes checking the unit's current health percentage, threat level, and available
    mana to decide whether to cast protective spells such as Healthstone, Unending
    Breath, or other defensive mechanisms. The method integrates with the AI's decision-making
    process to ensure optimal use of defensive resources during combat situations.
    It is typically called during the AI update cycle to continuously assess and respond
    to changing battlefield conditions.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void WarlockAI::UpdateAI(const uint32 diff)\n{\n    if (!UpdateVictim())\n\
      \        return;\n\n    UseDefensiveAbilities();\n    // Other AI logic...\n\
      }"
    language: cpp
  - title: Integration with Custom Defensive Logic
    code: "void WarlockAI::UseDefensiveAbilities()\n{\n    if (me->GetHealthPct()\
      \ < 30.0f && !me->HasAura(SPELL_HEALTHSTONE))\n    {\n        DoCast(me, SPELL_HEALTHSTONE);\n\
      \    }\n    else if (me->GetHealthPct() < 50.0f && !me->HasAura(SPELL_UNENDING_BREATH))\n\
      \    {\n        DoCast(me, SPELL_UNENDING_BREATH);\n    }\n}"
    language: cpp
  notes: This method should be called regularly during the AI update cycle to ensure
    timely defensive action. It is recommended that this method only be invoked when
    the AI unit is in combat or under threat. The implementation may vary between
    different versions of TrinityCore, but generally follows a priority-based system
    for spell selection.
  warnings: Ensure that the AI unit has sufficient mana before casting defensive spells
    to avoid wasting resources. This method does not handle all possible defensive
    scenarios and should be extended with custom logic if specific warlock abilities
    need special handling.
  related:
  - WarlockAI::UpdateAI
  - WarlockAI::DoCast
  - WarlockAI::HasAura
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T17:16:07.442425'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
