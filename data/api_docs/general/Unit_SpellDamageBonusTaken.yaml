api:
  class: Unit
  method: SpellDamageBonusTaken
  signature: int32 Unit::SpellDamageBonusTaken(Unit * caster, const SpellInfo * spellProto,
    int32 pdamage, DamageEffectType damagetype) const
documentation:
  brief: Calculates the total damage reduction for spell attacks based on caster and
    damage type.
  description: This method computes the total damage reduction applied to spell attacks,
    considering both the caster's influence and the specific damage type. It is used
    in calculating damage modifiers for spells that are subject to damage reduction
    effects. The method takes into account the caster's level, the spell's properties,
    and the damage type to determine the final reduction amount. This function is
    essential for determining how much damage is reduced when a spell is cast against
    an enemy.
  parameters:
  - name: caster
    description: Pointer to the Unit that is casting the spell. This parameter determines
      the caster's influence on the damage reduction calculation.
  - name: spellProto
    description: Pointer to the SpellInfo structure defining the spell properties.
      This includes information about the spell's effects, damage type, and other
      relevant attributes.
  - name: pdamage
    description: The base damage amount before reduction is applied. This parameter
      represents the original damage value that will be modified by the reduction.
  - name: damagetype
    description: The type of damage being calculated (e.g., fire, frost, nature).
      This determines which damage reduction factors are applied to the spell attack.
  returns: Returns an integer value representing the total damage reduction applied
    to the spell attack. A negative value indicates increased damage, while positive
    values indicate reduced damage.
  examples:
  - title: Basic usage example
    code: int32 damage = unit->SpellDamageBonusTaken(caster, spellInfo, baseDamage,
      damageType);
    language: cpp
  - title: Advanced usage example
    code: int32 damage = unit->SpellDamageBonusTaken(caster, spellInfo, baseDamage,
      SPELL_DAMAGE_TYPE_FIRE);
    language: cpp
  notes: This method is used in conjunction with other damage calculation methods
    to determine the final damage output of spells. It should be called during spell
    processing and requires proper handling of caster and spell information.
  warnings: Care must be taken when using this method as incorrect usage can lead
    to inaccurate damage calculations. Ensure that the caster and spellProto parameters
    are properly initialized before calling this method.
  related:
  - SpellDamageBonus
  - SpellDamageBonusDone
  - SpellDamageBonusTaken
metadata:
  confidence: 0.95
  generated_at: '2025-10-30T20:13:49.848527'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
