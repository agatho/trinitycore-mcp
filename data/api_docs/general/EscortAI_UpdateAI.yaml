api:
  class: EscortAI
  method: UpdateAI
  signature: void EscortAI::UpdateAI(int diff)
documentation:
  brief: Updates the escort AI behavior based on elapsed time and current quest state
  description: The UpdateAI method is a core component of the EscortAI class that
    handles the artificial intelligence logic for NPC escorts in World of Warcraft.
    This method is called regularly by the game engine to process escort-related behaviors
    such as path following, quest progression, player interaction, and combat response.
    It evaluates the current state of the escort quest, manages the NPC's movement
    along predefined waypoints, handles dialogue with players, and ensures proper
    quest completion mechanics. The method takes a time delta parameter to accurately
    calculate movement timing and behavior updates based on real-time game progression.
  parameters:
  - name: diff
    description: Time elapsed since last update in milliseconds. Used to calculate
      precise movement timing and behavior updates for the escort AI.
  returns: null
  examples:
  - title: Basic Escort AI Update Usage
    code: "void npc_escortAI::UpdateAI(int diff)\n{\n    if (!HasEscortState(STATE_ESCORT_ESCORTING))\n\
      \        return;\n\n    // Update escort behavior with time delta\n    EscortAI::UpdateAI(diff);\n\
      \n    // Additional custom logic can be added here\n}"
    language: cpp
  - title: Complete Escort AI Implementation
    code: "void npc_escortAI::UpdateAI(int diff)\n{\n    if (!HasEscortState(STATE_ESCORT_ESCORTING))\n\
      \        return;\n\n    // Handle waypoint movement and quest progression\n\
      \    EscortAI::UpdateAI(diff);\n\n    // Check for player interaction\n    if\
      \ (Player* player = GetPlayerForEscort())\n    {\n        if (player->GetDistance(GetUnit())\
      \ < 5.0f)\n        {\n            // Handle dialogue or quest updates\n    \
      \        if (HasEscortState(STATE_ESCORT_RETURNING))\n                FinishEscort();\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method is automatically called by the TrinityCore framework at regular
    intervals. Developers should not call this method directly unless implementing
    custom escort AI behavior. The 'diff' parameter represents actual game time elapsed
    and must be used for accurate timing calculations. The method handles all core
    escort behaviors including waypoint navigation, quest state management, and player
    interaction detection.
  warnings: Do not override or modify the base EscortAI::UpdateAI implementation without
    understanding its core functionality. Improper handling of the 'diff' parameter
    can cause erratic movement behavior. This method should only be called from within
    the AI update loop and never in interrupt contexts.
  related:
  - StartEscort
  - AddWaypoint
  - SetCurrentWaypoint
  - HasEscortState
  - GetPlayerForEscort
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T07:53:26.070469'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
