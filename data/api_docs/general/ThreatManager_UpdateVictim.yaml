api:
  class: ThreatManager
  method: UpdateVictim
  signature: void ThreatManager::UpdateVictim()
documentation:
  brief: Updates the threat manager's current victim target based on threat calculations
    and AI behavior.
  description: The UpdateVictim method is responsible for determining and setting
    the current target for a creature's threat list. It evaluates the threat levels
    of all possible targets within the creature's aggro range, selects the highest
    threat target (typically the player who caused the most damage or threat), and
    assigns this target as the current victim. This method is typically called during
    AI update cycles to ensure that the creature's target remains consistent with
    its threat table. The method respects various game mechanics such as threat reduction,
    taunt effects, and target switching rules based on the creature's AI type.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in AI update loop
    code: "void CreatureAI::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n \
      \       return;\n\n    // Proceed with combat logic using the updated victim\n\
      \    DoMeleeAttackIfReady();\n}"
    language: cpp
  notes: This method is usually invoked automatically by the core's AI system during
    each update cycle. It does not directly perform combat actions but rather manages
    the target selection state. The method may be overridden in custom AI implementations
    to provide specialized threat management behavior.
  warnings: null
  related:
  - AddThreat
  - GetVictim
  - ResetSheath
  - AttackStart
metadata:
  confidence: 0.95
  generated_at: '2025-10-31T14:43:09.044831'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
