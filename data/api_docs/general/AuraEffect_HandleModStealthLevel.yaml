api:
  class: AuraEffect
  method: HandleModStealthLevel
  signature: void AuraEffect::HandleModStealthLevel(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Modifies the stealth level of a unit based on aura application and mode.
  description: The HandleModStealthLevel method is responsible for adjusting a unit's
    stealth level when an aura effect is applied or removed. This method is typically
    invoked during aura application or removal events to update the unit's stealth
    state, which affects visibility and combat behavior in World of Warcraft. The
    method uses the provided AuraApplication context to determine how to modify the
    stealth level, with the mode parameter indicating whether the effect is being
    applied or removed. It ensures that units properly transition between stealthed
    and non-stealthed states according to the aura's configuration.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This contains context about how the aura affects the target
      unit.
  - name: mode
    description: The mode of operation, typically indicating whether the aura is being
      applied (1) or removed (0). Used to determine the direction of stealth level
      modification.
  - name: apply
    description: Boolean flag indicating whether the aura effect should be applied
      (true) or removed (false). Controls the actual behavior based on the aura state.
  returns: null
  examples:
  - title: Basic Stealth Level Adjustment
    code: "void ApplyStealthAura(Unit* target)\n{\n    AuraApplication* app = new\
      \ AuraApplication(target, target, SpellInfo);\n    auraEffect->HandleModStealthLevel(app,\
      \ 1, true);\n}"
    language: cpp
  - title: Removing Stealth Effect
    code: "void RemoveStealthAura(Unit* target)\n{\n    AuraApplication* app = new\
      \ AuraApplication(target, target, SpellInfo);\n    auraEffect->HandleModStealthLevel(app,\
      \ 0, false);\n}"
    language: cpp
  notes: This method is part of the aura handling system and should only be called
    during proper aura application or removal sequences. It interacts with unit stealth
    mechanics and may affect combat state transitions.
  warnings: Improper use of this method without valid AuraApplication context can
    lead to incorrect stealth behavior or crashes. Ensure that the aura application
    object is properly initialized before calling this method.
  related:
  - AuraEffect::HandleApply
  - AuraEffect::HandleRemove
  - Unit::SetStealthLevel
  - Unit::GetStealthLevel
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T12:19:42.016405'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
