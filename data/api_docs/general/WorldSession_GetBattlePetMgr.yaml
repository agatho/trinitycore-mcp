api:
  class: WorldSession
  method: GetBattlePetMgr
  signature: BattlePets::BattlePetMgr * WorldSession::GetBattlePetMgr() const
documentation:
  brief: Returns the BattlePetMgr instance associated with this session for managing
    battle pet data.
  description: The GetBattlePetMgr method retrieves the BattlePets::BattlePetMgr object
    linked to the current WorldSession. This manager handles all battle pet related
    operations and data for the player, including pet collections, battle states,
    and pet-related packets. The method is typically used by subsystems that need
    to interact with a player's battle pets, such as pet battles, pet collection displays,
    or pet-related game mechanics. The returned pointer is guaranteed to be valid
    during active session lifetime but should not be stored long-term as the manager
    may be destroyed when the session ends.
  parameters: []
  returns: A pointer to the BattlePets::BattlePetMgr instance associated with this
    session. Returns nullptr if the session does not have a battle pet manager initialized,
    which can occur during early session setup or in cases where battle pets are not
    supported for that player.
  examples:
  - title: Accessing Battle Pet Manager
    code: "BattlePets::BattlePetMgr* petMgr = session->GetBattlePetMgr();\nif (petMgr)\n\
      {\n    // Use pet manager to access battle pet data\n    petMgr->SendPetList();\n\
      }"
    language: cpp
  - title: Checking Pet Battle Status
    code: "WorldSession* session = player->GetSession();\nBattlePets::BattlePetMgr*\
      \ petMgr = session->GetBattlePetMgr();\nif (petMgr && petMgr->IsInBattle())\n\
      {\n    // Handle ongoing battle\n    petMgr->UpdateBattle();\n}"
    language: cpp
  notes: This method is part of the Battle Pet system introduced in World of Warcraft's
    Battle for Azeroth expansion. The BattlePetMgr instance is lazily initialized
    when first requested, meaning it may not exist until battle pet functionality
    is actually used. The returned pointer should be checked for null before use,
    especially during session initialization phases.
  warnings: Do not store the returned pointer beyond the lifetime of the session,
    as the BattlePetMgr may be destroyed when the session ends. Avoid calling this
    method from contexts where the session might already be invalid or in an inconsistent
    state.
  related:
  - GetPlayer
  - GetAccountId
  - IsConnected
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T20:02:18.200411'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
