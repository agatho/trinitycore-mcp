api:
  class: FormationManager
  method: HandleMemberDisconnection
  signature: void FormationManager::HandleMemberDisconnection(Player * disconnectedMember)
documentation:
  brief: Handles the disconnection of a formation member by removing them from their
    current formation and updating group state.
  description: The HandleMemberDisconnection method is responsible for managing the
    removal of a disconnected player from their formation within the TrinityCore framework.
    When a player disconnects from the game, this method ensures that the formation
    they were part of is properly updated to reflect the loss of that member. It typically
    removes the disconnected member from the formation's internal tracking structures
    and may trigger updates to the group's formation state or leader assignments.
    This method plays a crucial role in maintaining formation integrity during player
    disconnections and helps prevent stale references or invalid formation states.
  parameters:
  - name: disconnectedMember
    description: A pointer to the Player object representing the member who has disconnected
      from the game. This parameter must be a valid, non-null pointer to a Player
      instance that was previously part of a formation.
  returns: null
  examples:
  - title: Basic usage in player logout handler
    code: "void Player::OnLogout()\n{\n    // ... other cleanup code ...\n    sFormationManager->HandleMemberDisconnection(this);\n\
      \    // ... continue with logout process ...\n}"
    language: cpp
  - title: Integration with group management system
    code: "void Group::HandleMemberDisconnect(Player* member)\n{\n    if (member &&\
      \ IsInFormation())\n    {\n        sFormationManager->HandleMemberDisconnection(member);\n\
      \        UpdateFormationState();\n    }\n}"
    language: cpp
  notes: This method assumes that the disconnected member is already removed from
    the game world and that all related session cleanup has been performed. It's designed
    to be called during the player disconnection sequence, typically after the player's
    session has been invalidated but before final memory cleanup occurs.
  warnings: Ensure that the Player pointer passed to this method is valid and not
    null, as passing an invalid pointer may lead to undefined behavior or crashes.
    The method does not perform explicit null checks internally, so callers should
    verify validity before invocation.
  related:
  - FormationManager::AddMember
  - FormationManager::RemoveMember
  - FormationManager::UpdateFormation
  - Player::IsInFormation
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T07:33:24.504678'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
