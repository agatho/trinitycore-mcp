api:
  class: TerrainInfo
  method: GetBitsetIndex
  signature: int32 TerrainInfo::GetBitsetIndex(int32 gx, int32 gy)
documentation:
  brief: Calculates and returns the bitset index for a given grid coordinate in the
    terrain system.
  description: The GetBitsetIndex method computes a unique bitset index based on the
    provided grid coordinates (gx, gy) within the terrain system. This index is used
    internally by TrinityCore to manage and access terrain data efficiently, particularly
    when dealing with height maps, area triggers, or other grid-based systems. The
    method performs coordinate validation and ensures that the returned index correctly
    maps to a specific bit in a pre-allocated bitset structure. It is typically invoked
    during terrain initialization or when processing grid-related operations such
    as collision detection or zone boundary checks.
  parameters:
  - name: gx
    description: The X coordinate of the grid cell, representing the horizontal position
      in the terrain grid system.
  - name: gy
    description: The Y coordinate of the grid cell, representing the vertical position
      in the terrain grid system.
  returns: An int32 value representing the calculated bitset index for the given grid
    coordinates. Returns a negative value if the input coordinates are out of valid
    range or invalid.
  examples:
  - title: Basic usage to get bitset index
    code: int32 index = terrainInfo->GetBitsetIndex(5, 10);
    language: cpp
  - title: Using returned index for bit manipulation
    code: "int32 gx = 3;\nint32 gy = 7;\nint32 index = terrainInfo->GetBitsetIndex(gx,\
      \ gy);\nif (index >= 0)\n{\n    // Use index to set or check a specific bit\
      \ in a bitset\n    std::bitset<1024> terrainBits;\n    terrainBits.set(index);\n\
      }"
    language: cpp
  notes: The method assumes that grid coordinates are within valid bounds. The internal
    implementation likely uses a fixed-size bitset structure where each index corresponds
    to a unique grid cell. This function is performance-critical in large-scale world
    environments and should be used carefully in tight loops.
  warnings: Do not pass invalid or out-of-bounds grid coordinates; doing so may result
    in undefined behavior or incorrect bitset indices. Ensure that gx and gy are within
    expected ranges before calling this method.
  related:
  - GetHeight
  - IsInLineOfSight
  - GetAreaId
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T16:58:21.041657'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
