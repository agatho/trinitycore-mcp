api:
  class: AuraScript
  method: CalcMaxCharges
  signature: int AuraScript::CalcMaxCharges() const
documentation:
  brief: Calculates and returns the maximum number of charges an aura can have.
  description: The CalcMaxCharges method determines the maximum number of charges
    that an aura instance can accumulate. This value is typically calculated based
    on aura properties, spell effects, and potential modifiers from various sources
    such as buffs, debuffs, or player stats. The method is invoked during aura application
    or recalculation phases to ensure accurate charge tracking for auras that support
    stacking or limited-use mechanics. It serves as a core part of the aura's lifecycle
    management within TrinityCore's combat system.
  parameters: []
  returns: An integer representing the maximum number of charges the aura can possess.
    A value of 0 or less typically indicates no charges are allowed, while positive
    values denote the charge limit.
  examples:
  - title: Basic Usage in AuraScript
    code: "class MyAuraScript : public AuraScript\n{\npublic:\n    int CalcMaxCharges()\
      \ const override\n    {\n        // Custom logic to determine max charges\n\
      \        return 3;\n    }\n};"
    language: cpp
  - title: Dynamic Charge Calculation Based on Player Level
    code: "class LevelDependentAuraScript : public AuraScript\n{\npublic:\n    int\
      \ CalcMaxCharges() const override\n    {\n        Unit* owner = GetOwner();\n\
      \        if (!owner)\n            return 0;\n        \n        uint8 level =\
      \ owner->GetLevel();\n        return std::max(1, static_cast<int>(level / 5));\n\
      \    }\n};"
    language: cpp
  notes: This method is called during aura initialization and recalculation. It's
    important to ensure that the logic within this function does not introduce performance
    bottlenecks or infinite loops. The returned value directly affects how many times
    an aura can be consumed or refreshed before expiring.
  warnings: Do not modify aura state or perform actions that could alter the aura's
    behavior within this method, as it may lead to inconsistent charge tracking or
    unexpected behavior during combat.
  related:
  - GetMaxCharges
  - SetMaxCharges
  - GetCharges
  - SetCharges
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T13:23:14.593691'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
