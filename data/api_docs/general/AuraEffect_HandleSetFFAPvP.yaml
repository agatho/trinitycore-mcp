api:
  class: AuraEffect
  method: HandleSetFFAPvP
  signature: void AuraEffect::HandleSetFFAPvP(const AuraApplication * aurApp, uint8
    mode, bool apply) const
documentation:
  brief: Sets the FFA PvP flag for an aura application.
  description: The HandleSetFFAPvP method is responsible for managing the Friendly
    Fire Arena (FFA) PvP state of an aura application. It modifies the PvP flag settings
    on the target unit based on whether the aura is being applied or removed. This
    functionality is typically used in scenarios where specific auras should enable
    or disable friendly fire mechanics, such as during certain battlegrounds or arena
    modes. The method operates on the provided AuraApplication object and adjusts
    the PvP state accordingly.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object that represents the aura being
      applied or removed. This parameter defines which aura's PvP flag will be modified.
  - name: mode
    description: The mode of operation, indicating how the FFA PvP state should be
      handled. The exact meaning depends on implementation but typically controls
      whether to enable or disable the flag.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the FFA PvP effect. When true, the aura enables FFA PvP; when false, it disables
      it.
  returns: null
  examples:
  - title: Enable FFA PvP for an Aura
    code: 'AuraApplication* app = ...;

      HandleSetFFAPvP(app, 1, true); // Enable FFA PvP'
    language: cpp
  - title: Disable FFA PvP for an Aura
    code: 'AuraApplication* app = ...;

      HandleSetFFAPvP(app, 0, false); // Disable FFA PvP'
    language: cpp
  notes: This method is part of the aura handling system in TrinityCore and interacts
    directly with unit PvP flags. It's important to ensure that the AuraApplication
    object passed is valid and properly initialized before calling this method. The
    mode parameter may have specific values depending on the context in which it's
    used.
  warnings: Incorrect usage of the mode or apply parameters can lead to unexpected
    PvP behavior for players. Ensure proper validation of the AuraApplication pointer
    to prevent null pointer dereferences.
  related:
  - AuraEffect::HandleApply
  - AuraEffect::HandleRemove
  - Unit::SetPvPFlag
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T08:58:39.829108'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
