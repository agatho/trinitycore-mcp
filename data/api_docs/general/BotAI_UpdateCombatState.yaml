api:
  class: BotAI
  method: UpdateCombatState
  signature: void BotAI::UpdateCombatState(uint32 diff)
documentation:
  brief: Updates the combat state of the bot based on elapsed time and current battle
    conditions.
  description: The UpdateCombatState method is responsible for managing and updating
    the artificial intelligence behavior of a bot character during active combat situations.
    It processes the bot's actions, decision-making, and state transitions based on
    the time elapsed since the last update (diff parameter). This method typically
    handles targeting logic, spell casting, movement adjustments, and other combat-related
    behaviors that occur while the bot is engaged in battle. The method integrates
    with the core TrinityCore AI system to ensure consistent behavior across different
    types of bots and combat scenarios.
  parameters:
  - name: diff
    description: The time elapsed (in milliseconds) since the last update call. This
      value is used to determine how much time has passed for timing-based actions
      such as spell cooldowns, attack timing, and behavior updates during combat.
  returns: null
  examples:
  - title: Basic usage in AI update loop
    code: "void BotAI::Update()\n{\n    uint32 diff = getMSTimeDiff(m_lastUpdate,\
      \ getMSTime());\n    UpdateCombatState(diff);\n    // Other AI updates...\n}"
    language: cpp
  - title: Integration with combat state management
    code: "void BotAI::UpdateCombatState(uint32 diff)\n{\n    if (!IsInCombat())\n\
      \        return;\n\n    // Update combat-specific behaviors\n    UpdateTargeting(diff);\n\
      \    UpdateSpellCasting(diff);\n    UpdateMovement(diff);\n}"
    language: cpp
  notes: This method should be called regularly during combat to maintain proper bot
    behavior. It is typically invoked from the main AI update loop and relies on accurate
    timing information for proper execution of time-sensitive actions like spell cooldowns
    or attack timing.
  warnings: Improper handling of the diff parameter can lead to incorrect timing of
    bot actions, potentially causing spells to be cast too frequently or not at all.
    Ensure that the diff value accurately reflects the actual elapsed time between
    updates.
  related:
  - UpdateTargeting
  - UpdateSpellCasting
  - UpdateMovement
  - IsInCombat
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T19:29:22.683368'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
