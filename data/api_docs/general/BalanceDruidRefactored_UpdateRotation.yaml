api:
  class: BalanceDruidRefactored
  method: UpdateRotation
  signature: void BalanceDruidRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the balance druid's spell rotation based on current combat state
    and target conditions
  description: The UpdateRotation method is responsible for determining and executing
    the optimal sequence of spells for a balance druid during combat. It evaluates
    the current target's health, distance, and status effects to decide whether to
    cast Wrath, Starfire, Moonfire, or other applicable abilities. The method considers
    factors such as mana levels, spell cooldowns, and debuff durations to maximize
    damage output while maintaining efficient resource management. This method is
    typically called during the AI update cycle and integrates with the broader combat
    logic system to ensure optimal gameplay performance.
  parameters:
  - name: target
    description: Pointer to the target object that the druid will cast spells against.
      The target must be a valid GameObject or Unit pointer representing an enemy
      creature or player.
  returns: null
  examples:
  - title: Basic usage in combat AI
    code: "void MyBalanceDruidAI::Update()\n{\n    Unit* target = GetTarget();\n \
      \   if (target && target->IsAlive())\n    {\n        m_druid.UpdateRotation(&target);\n\
      \    }\n}"
    language: cpp
  - title: Integration with custom rotation logic
    code: "void BalanceDruidRefactored::UpdateRotation(int* target)\n{\n    if (!target\
      \ || *target == 0) return;\n    \n    Unit* unitTarget = ObjectAccessor::GetUnit(*m_owner,\
      \ *target);\n    if (!unitTarget || !unitTarget->IsAlive()) return;\n    \n\
      \    // Core rotation logic here\n    // ... spell selection and casting ...\n\
      }"
    language: cpp
  notes: This method assumes that the druid's current target is valid and alive. The
    parameter 'target' should point to an integer value representing the target's
    GUID. The implementation relies on TrinityCore's internal combat state tracking,
    so it must be called within a proper AI context where combat state information
    is available.
  warnings: Calling this method with a null or invalid target pointer may result in
    undefined behavior. Ensure that the target object remains valid throughout the
    execution of this method. This method modifies internal spell casting state and
    should not be called outside of combat update cycles to avoid disrupting the AI's
    normal operation.
  related:
  - GetTarget
  - CastSpell
  - IsSpellReady
  - HasDebuff
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T08:49:18.575438'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
