api:
  class: LeaderFollowBehavior
  method: AdaptToTerrain
  signature: void LeaderFollowBehavior::AdaptToTerrain(Player * bot, int & targetPos)
documentation:
  brief: Adjusts the target position based on terrain height and obstacles for a bot
    following a leader.
  description: The AdaptToTerrain method modifies the target position of a bot to
    ensure proper navigation when following a leader. It evaluates the terrain height
    and potential obstacles in the path between the bot and its target, adjusting
    the position coordinates to maintain realistic movement behavior. This method
    is crucial for preventing bots from walking through walls or floating above ground.
    The adjustment considers both the current position of the bot and the target location,
    ensuring that the bot's movement aligns with the game world's physical constraints.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that needs terrain
      adaptation. Must not be null.
  - name: targetPos
    description: Reference to an integer value representing the target position coordinate
      that will be modified by terrain adjustments.
  returns: null
  examples:
  - title: Basic usage in leader-follow behavior
    code: "void LeaderFollowBehavior::Update(Player* bot)\n{\n    int targetPosition\
      \ = GetTargetPosition();\n    AdaptToTerrain(bot, targetPosition);\n    MoveToPosition(bot,\
      \ targetPosition);\n}"
    language: cpp
  - title: Using with terrain height checking
    code: "void LeaderFollowBehavior::AdaptToTerrain(Player* bot, int& targetPos)\n\
      {\n    float botX, botY, botZ;\n    bot->GetPosition(botX, botY, botZ);\n  \
      \  \n    float targetX, targetY, targetZ;\n    GetTargetPosition(targetX, targetY,\
      \ targetZ);\n    \n    // Adjust Z coordinate based on terrain\n    if (bot->GetMap()->GetHeight(botX,\
      \ botY, botZ) > targetZ)\n        targetPos = static_cast<int>(bot->GetMap()->GetHeight(botX,\
      \ botY, botZ));\n}"
    language: cpp
  notes: This method is typically called during AI update cycles when bots are following
    a leader. It's important to note that the targetPos parameter is modified in-place
    and should be used immediately after calling this function. The method relies
    on the underlying map data and terrain height information, so it requires a valid
    map context.
  warnings: Ensure that the bot pointer is valid before calling this method, as passing
    a null pointer will result in undefined behavior. Also, be aware that modifying
    targetPos directly may affect other parts of the AI logic that depend on the original
    position value.
  related:
  - GetTargetPosition
  - MoveToPosition
  - Update
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T10:39:14.212307'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
