api:
  class: AchievementScript
  method: OnCompleted
  signature: void AchievementScript::OnCompleted(Player * player, const AchievementEntry
    * achievement)
documentation:
  brief: Called when a player completes an achievement, allowing custom logic to be
    executed.
  description: The OnCompleted method is a virtual callback function in the AchievementScript
    class that is invoked whenever a player successfully completes a specific achievement.
    This method provides developers with the ability to implement custom behavior
    such as rewarding players with items, modifying their stats, triggering events,
    or logging completion data. The method receives references to both the player
    who achieved the milestone and the achievement entry itself, enabling fine-grained
    control over how achievements are handled within a custom script. It is typically
    used in custom achievement scripts to extend or modify default achievement behavior.
  parameters:
  - name: player
    description: Pointer to the Player object who completed the achievement. This
      parameter provides access to player-specific data and methods for manipulating
      their state.
  - name: achievement
    description: Pointer to the AchievementEntry structure representing the completed
      achievement. Contains metadata about the achievement such as ID, criteria, and
      rewards.
  returns: null
  examples:
  - title: Basic Achievement Completion Handler
    code: "class MyAchievementScript : public AchievementScript\n{\npublic:\n    void\
      \ OnCompleted(Player* player, const AchievementEntry* achievement) override\n\
      \    {\n        // Log the completion\n        sLog->outString(\"Player %s completed\
      \ achievement %u\", player->GetName().c_str(), achievement->ID);\n        \n\
      \        // Give a custom reward\n        if (achievement->ID == 1234)\n   \
      \     {\n            player->AddItem(ITEM_ID_CUSTOM_REWARD, 1);\n        }\n\
      \    }\n};"
    language: cpp
  notes: This method is part of the scriptable achievement system in TrinityCore.
    It's important to note that this function runs on the main game thread and should
    avoid long-running operations or blocking calls to maintain server performance.
    The AchievementEntry pointer passed may be used to access various properties including
    ID, criteria count, and flags.
  warnings: Avoid performing heavy computations or database operations directly in
    this method as it can impact server responsiveness. Also, ensure that any modifications
    made to the player's state are consistent with the game's intended progression
    mechanics.
  related:
  - OnUpdate
  - OnStart
  - OnFail
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T14:28:15.958177'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
