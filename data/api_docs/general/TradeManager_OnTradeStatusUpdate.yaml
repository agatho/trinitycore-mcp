api:
  class: TradeManager
  method: OnTradeStatusUpdate
  signature: void TradeManager::OnTradeStatusUpdate(TradeData * myTrade, TradeData
    * theirTrade)
documentation:
  brief: Updates the trade status between two players during a trading session.
  description: The OnTradeStatusUpdate method is responsible for handling updates
    to the trade status between two players in World of Warcraft. It is typically
    called when either player accepts or cancels a trade, or when items are added
    or removed from the trade window. This method ensures that both parties' trade
    states are synchronized and reflects the current state of the trading process.
    The method operates on two TradeData objects representing the local player's trade
    and the other player's trade data. It is part of the core trade management system
    in TrinityCore and integrates with the game's networking and state synchronization
    mechanisms.
  parameters:
  - name: myTrade
    description: Pointer to the TradeData object representing the local player's current
      trade state. This contains information about items offered by the local player
      and their trade status.
  - name: theirTrade
    description: Pointer to the TradeData object representing the other player's current
      trade state. This contains information about items offered by the remote player
      and their trade status.
  returns: null
  examples:
  - title: Basic Trade Status Update
    code: "void HandleTradeUpdate(Player* player, Player* target)\n{\n    TradeData*\
      \ myTrade = player->GetTradeData();\n    TradeData* theirTrade = target->GetTradeData();\n\
      \    sTradeMgr->OnTradeStatusUpdate(myTrade, theirTrade);\n}"
    language: cpp
  - title: Trade Status Update with Validation
    code: "void ProcessTradeStatus(Player* player, Player* target)\n{\n    if (!player\
      \ || !target) return;\n    \n    TradeData* myTrade = player->GetTradeData();\n\
      \    TradeData* theirTrade = target->GetTradeData();\n    \n    if (myTrade\
      \ && theirTrade)\n    {\n        sTradeMgr->OnTradeStatusUpdate(myTrade, theirTrade);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically invoked from within the trade processing pipeline
    and should only be called when both TradeData objects are valid. The method may
    trigger additional network messages to synchronize trade states across clients.
    It's important that this function is called in a thread-safe context, as it may
    interact with shared trade data structures.
  warnings: Calling this method with null pointers can lead to undefined behavior
    or crashes. Ensure both TradeData objects are properly initialized before calling
    this method. This method modifies the internal state of the trade system and should
    not be used to directly manipulate trade items outside of normal trade flow.
  related:
  - TradeManager::StartTrade
  - TradeManager::CancelTrade
  - TradeManager::AcceptTrade
  - Player::GetTradeData
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T17:44:21.744314'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
