api:
  class: LOSCache
  method: HasLOS
  signature: bool LOSCache::HasLOS(const int & pos1, const int & pos2, const int &
    phaseShift)
documentation:
  brief: Checks if there is a line of sight between two positions within a specified
    phase shift.
  description: The HasLOS method determines whether a direct line of sight exists
    between two given positions in the game world, taking into account the current
    phase shift. This functionality is essential for determining visibility, spell
    casting, and NPC behavior in World of Warcraft. The method evaluates obstacles
    such as walls, terrain, and other environmental elements to ensure accurate line-of-sight
    calculations. It uses cached data to improve performance during frequent checks.
    The phase shift parameter allows for checking visibility across different game
    phases or zones.
  parameters:
  - name: pos1
    description: The starting position coordinate (typically X, Y, Z) represented
      as an integer value
  - name: pos2
    description: The ending position coordinate (typically X, Y, Z) represented as
      an integer value
  - name: phaseShift
    description: The phase shift identifier used to determine which game phase or
      zone visibility should be checked against
  returns: Returns true if a clear line of sight exists between pos1 and pos2 within
    the specified phase shift, false otherwise.
  examples:
  - title: Basic Line-of-Sight Check
    code: "LOSCache losCache;\nint start = 1000;\nint end = 2000;\nint phase = 1;\n\
      bool hasLos = losCache.HasLOS(start, end, phase);\nif (hasLos) {\n    // Process\
      \ visibility logic\n}"
    language: cpp
  - title: Checking Visibility for Spell Casting
    code: "LOSCache losCache;\nint playerPos = player->GetPositionX();\nint targetPos\
      \ = target->GetPositionX();\nint phase = player->GetPhaseShift();\nif (losCache.HasLOS(playerPos,\
      \ targetPos, phase)) {\n    // Cast spell normally\n} else {\n    // Handle\
      \ line-of-sight blocked case\n}"
    language: cpp
  notes: This method relies on precomputed LOS data stored in the cache for performance
    optimization. The integer parameters likely represent coordinates or indices within
    a spatial grid system used by TrinityCore's world management. The phase shift
    parameter is crucial for handling phased environments where visibility may vary
    between different game states or zones.
  warnings: Ensure that the position values passed are valid and within expected ranges
    to avoid incorrect results. The cache should be properly maintained to prevent
    stale data from affecting visibility calculations.
  related:
  - GetLOS
  - UpdateLOSCache
  - ClearLOSCache
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T01:47:34.413147'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
