api:
  class: AreaTrigger
  method: SearchUnitInPolygon
  signature: void AreaTrigger::SearchUnitInPolygon(const int & polygon, int & targetList)
documentation:
  brief: Searches for units within a specified polygon area trigger and populates
    a target list with matching units.
  description: 'The SearchUnitInPolygon method performs a spatial search within an
    AreaTrigger''s defined polygonal boundary to identify and collect all valid units
    (such as players or creatures) that are currently inside the trigger zone. This
    function is typically used in conjunction with area-based spells, traps, or environmental
    effects where certain actions need to be applied to units located within a specific
    geometric shape. The method modifies the provided targetList parameter by adding
    references to qualifying units. It relies on the AreaTrigger''s internal polygon
    definition and unit positioning data to determine inclusion. Precondition: The
    AreaTrigger must have a valid polygon defined, and the targetList should be initialized
    before calling this method.'
  parameters:
  - name: polygon
    description: An integer identifier representing the specific polygon within the
      AreaTrigger's configuration that defines the search boundary.
  - name: targetList
    description: A reference to an integer list that will be populated with GUIDs
      or identifiers of units found within the specified polygon area.
  returns: null
  examples:
  - title: Basic Usage in AreaTrigger Event Handler
    code: "void MyAreaTrigger::OnTrigger()\n{\n    int targetList[100];\n    int polygonId\
      \ = 0;\n    SearchUnitInPolygon(polygonId, targetList);\n    // Process units\
      \ in targetList\n}"
    language: cpp
  - title: Processing Found Units After Polygon Search
    code: "void AreaTrigger::OnUpdate()\n{\n    int targets[50];\n    SearchUnitInPolygon(1,\
      \ targets);\n    for (int i = 0; i < 50 && targets[i] != 0; ++i)\n    {\n  \
      \      if (Player* player = sObjectAccessor->GetPlayer(targets[i]))\n      \
      \  {\n            // Apply effect to player\n            player->CastSpell(player,\
      \ 12345, true);\n        }\n    }\n}"
    language: cpp
  notes: This method assumes that the AreaTrigger's polygon data is properly initialized
    and that unit positions are updated regularly. Performance may be impacted when
    large numbers of units are present in the area. The targetList must be pre-allocated
    with sufficient capacity to avoid buffer overflows.
  warnings: Ensure that the polygon index passed is valid; otherwise, undefined behavior
    may occur. Be cautious about modifying the list during iteration, as it could
    lead to memory corruption or incorrect targeting results.
  related:
  - GetPolygon
  - SetPolygon
  - IsUnitInPolygon
  - ClearTargetList
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T16:03:15.264547'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
