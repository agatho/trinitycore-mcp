api:
  class: TransportBase
  method: UpdatePassengerPosition
  signature: void TransportBase::UpdatePassengerPosition(Map * map, WorldObject *
    passenger, const int & position, bool setHomePosition)
documentation:
  brief: Updates the position of a passenger on a transport vehicle.
  description: The UpdatePassengerPosition method is responsible for synchronizing
    the world position of a passenger object (such as a player or creature) with the
    current location and orientation of a transport vehicle. This ensures that passengers
    remain correctly positioned relative to the transport as it moves through the
    game world. The method handles both the physical positioning and, optionally,
    the home position update for the passenger. It is typically invoked during transport
    movement updates or when passengers board/leave transports.
  parameters:
  - name: map
    description: Pointer to the Map object where the transport and passenger are located.
      Used to ensure proper positioning within the correct map context.
  - name: passenger
    description: Pointer to the WorldObject representing the passenger (e.g., Player
      or Creature) whose position needs to be updated relative to the transport.
  - name: position
    description: Integer value indicating the specific position index of the passenger
      on the transport. This typically corresponds to a seat or mounting point on
      the transport vehicle.
  - name: setHomePosition
    description: Boolean flag that determines whether the passenger's home position
      should also be updated. If true, the passenger's home position is set to match
      their current transport-relative location.
  returns: null
  examples:
  - title: Basic usage of UpdatePassengerPosition
    code: 'TransportBase* transport = ...;

      Map* map = transport->GetMap();

      WorldObject* passenger = ...;

      int position = 0;

      transport->UpdatePassengerPosition(map, passenger, position, true);'
    language: cpp
  - title: Updating passenger position without setting home position
    code: 'TransportBase* transport = ...;

      Map* map = transport->GetMap();

      WorldObject* passenger = ...;

      int position = 2;

      transport->UpdatePassengerPosition(map, passenger, position, false);'
    language: cpp
  notes: This method is part of the transport system in TrinityCore and is crucial
    for maintaining correct passenger positioning during transport movement. It interacts
    with the Map's object tracking systems to ensure passengers are properly updated
    in the world. The method should only be called when the transport has moved or
    changed orientation.
  warnings: Calling this method with an invalid map pointer or null passenger object
    may result in undefined behavior or crashes. Ensure that the passenger is actually
    on the transport before calling this method. Incorrect position indices can cause
    passengers to appear in wrong locations on the transport.
  related:
  - GetPassenger
  - AddPassenger
  - RemovePassenger
  - UpdateTransportPosition
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T18:03:21.857980'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
