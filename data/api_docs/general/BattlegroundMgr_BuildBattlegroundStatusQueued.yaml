api:
  class: BattlegroundMgr
  method: BuildBattlegroundStatusQueued
  signature: void BattlegroundMgr::BuildBattlegroundStatusQueued(WorldPackets::Battleground::BattlefieldStatusQueued
    * battlefieldStatus, const Player * player, uint32 ticketId, uint32 joinTime,
    int queueId, uint32 avgWaitTime, bool asGroup)
documentation:
  brief: Populates a BattlefieldStatusQueued packet with queue information for a player.
  description: The BuildBattlegroundStatusQueued method constructs and fills a BattlefieldStatusQueued
    packet that is sent to the client to inform the player about their current battleground
    queue status. This includes details such as the ticket ID, join time, queue position,
    average wait time, and whether the player is part of a group. The method is typically
    invoked when a player joins a battleground queue and needs to receive updated
    queue information. It ensures that the client UI accurately reflects the player's
    standing in the queue.
  parameters:
  - name: battlefieldStatus
    description: Pointer to a BattlefieldStatusQueued packet object that will be populated
      with queue details.
  - name: player
    description: Pointer to the Player object for whom the queue status is being built.
  - name: ticketId
    description: Unique identifier for the player's queue ticket, used to track their
      position in the queue.
  - name: joinTime
    description: Timestamp indicating when the player joined the queue, used to calculate
      wait time.
  - name: queueId
    description: Identifier for the specific battleground queue the player is in.
  - name: avgWaitTime
    description: Average time (in seconds) that players have waited in this queue,
      used to estimate remaining wait time.
  - name: asGroup
    description: Boolean flag indicating whether the player is queued as part of a
      group.
  returns: null
  examples:
  - title: Basic usage in queue status update
    code: 'WorldPackets::Battleground::BattlefieldStatusQueued status;

      uint32 ticketId = 12345;

      uint32 joinTime = time(nullptr);

      int queueId = 0;

      uint32 avgWaitTime = 60;

      bool asGroup = false;


      BattlegroundMgr::instance()->BuildBattlegroundStatusQueued(&status, player,
      ticketId, joinTime, queueId, avgWaitTime, asGroup);

      player->SendDirectMessage(status.Write());'
    language: cpp
  notes: This method is part of the battleground queue management system and should
    only be called when a player is actively queued for a battleground. The packet
    structure is designed to match the client's expectations for displaying queue
    information.
  warnings: null
  related:
  - BattlegroundMgr::AddPlayerToBattleground
  - BattlegroundMgr::RemovePlayerFromBattlegroundQueue
  - BattlegroundMgr::BuildBattlegroundStatusNone
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T12:36:06.715110'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
