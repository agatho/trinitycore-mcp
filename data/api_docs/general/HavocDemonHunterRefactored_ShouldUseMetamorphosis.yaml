api:
  class: HavocDemonHunterRefactored
  method: ShouldUseMetamorphosis
  signature: bool HavocDemonHunterRefactored::ShouldUseMetamorphosis()
documentation:
  brief: Determines whether the Havoc Demon Hunter should activate Metamorphosis based
    on current combat state and resource management.
  description: This method evaluates various conditions to decide if the Havoc Demon
    Hunter should use the Metamorphosis ability. It considers factors such as available
    Fury, current target threat level, time since last use of Metamorphosis, and overall
    combat situation. The decision-making process is designed to optimize damage output
    while maintaining resource efficiency. This method is typically called during
    the AI's decision-making cycle to determine optimal ability usage.
  parameters: []
  returns: Returns true if Metamorphosis should be used; false otherwise. A return
    value of true indicates that the current conditions meet or exceed the thresholds
    for optimal use of the ability.
  examples:
  - title: Basic Usage in AI Logic
    code: "if (player->GetAI()->ShouldUseMetamorphosis()) {\n    player->CastSpell(target,\
      \ METAMORPHOSIS_SPELL_ID, true);\n}"
    language: cpp
  - title: Integration with Custom Combat Routine
    code: "void HavocDemonHunterAI::DoNextAction() {\n    if (ShouldUseMetamorphosis())\
      \ {\n        // Apply Metamorphosis buff\n        me->AddAura(METAMORPHOSIS_AURA_ID,\
      \ me);\n        // Reset cooldown tracking\n        lastMetamorphosisTime =\
      \ getMSTime();\n    }\n}"
    language: cpp
  notes: The method likely incorporates internal state tracking for Fury levels, recent
    ability usage, and combat duration. It may also consider target-specific factors
    like health percentage or threat generation rate. The implementation should be
    thread-safe as it's called from the AI update loop.
  warnings: This method assumes that all necessary preconditions for using Metamorphosis
    are met (e.g., not in combat with a non-elite mob, not under certain debuffs).
    Calling this method without proper context may result in inappropriate ability
    usage decisions.
  related:
  - GetFury
  - IsInCombat
  - GetTargetThreat
  - GetLastMetamorphosisTime
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T09:17:50.720462'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
