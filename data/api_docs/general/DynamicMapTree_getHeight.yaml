api:
  class: DynamicMapTree
  method: getHeight
  signature: float DynamicMapTree::getHeight(float x, float y, float z, float maxSearchDist,
    const PhaseShift & phaseShift) const
documentation:
  brief: Retrieves the height value at a specified location within the dynamic map
    tree, considering phase shifts.
  description: The getHeight method calculates and returns the ground height at the
    given coordinates (x, y, z) within the dynamic map tree structure. It uses a maximum
    search distance to determine the height, which is particularly useful for terrain-based
    calculations in World of Warcraft environments. The method takes into account
    phase shifts, allowing it to correctly handle different phases or instances of
    the same map. This functionality is essential for accurate character positioning,
    movement validation, and collision detection in complex 3D environments.
  parameters:
  - name: x
    description: The X coordinate of the location to query for height
  - name: y
    description: The Y coordinate of the location to query for height
  - name: z
    description: The Z coordinate of the location to query for height (used as initial
      reference point)
  - name: maxSearchDist
    description: Maximum distance to search for valid height data; determines how
      far the method will look for terrain
  - name: phaseShift
    description: Phase shift information that affects which version of the map is
      considered during height calculation
  returns: Returns a float value representing the calculated height at the specified
    coordinates. If no valid height can be determined within the maximum search distance,
    it may return an invalid or default value (typically z-coordinate if no terrain
    found).
  examples:
  - title: Basic Height Retrieval
    code: float height = dynamicMapTree.getHeight(100.0f, 200.0f, 50.0f, 5.0f, phaseShift);
    language: cpp
  - title: Using Height for Character Positioning
    code: 'float playerHeight = dynamicMapTree.getHeight(playerX, playerY, playerZ,
      10.0f, player->GetPhaseShift());

      player->SetPosition(playerX, playerY, playerHeight, player->GetOrientation());'
    language: cpp
  notes: This method relies on the internal structure of DynamicMapTree which stores
    spatial data for terrain and obstacles. Performance can be affected by large maxSearchDist
    values or complex phase configurations. The method is typically used in conjunction
    with other spatial queries to ensure accurate positioning within the game world.
  warnings: Using excessively large maxSearchDist values may lead to performance degradation.
    Ensure that phaseShift parameter accurately reflects the current map state to
    avoid incorrect height calculations. The method does not validate input coordinates,
    so invalid inputs might produce unexpected results.
  related:
  - getAreaHeight
  - getHeightForPosition
  - isInLineOfSight
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T15:10:38.041054'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
