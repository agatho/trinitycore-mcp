api:
  class: ThreatCalculator
  method: DetermineThreatPriority
  signature: ThreatPriority ThreatCalculator::DetermineThreatPriority(Unit * target)
documentation:
  brief: Determines the threat priority level for a given target unit based on combat
    state and aggro mechanics.
  description: The DetermineThreatPriority method evaluates the current threat level
    of a target unit within the context of AI-driven combat behavior. It analyzes
    factors such as the unit's health, distance from the attacker, threat modifiers,
    and combat status to assign a priority classification. This priority influences
    how NPCs prioritize targets during combat, affecting which enemies they will attack
    or focus on next. The method is typically invoked by AI systems when determining
    target selection logic in hostile encounters.
  parameters: []
  returns: Returns a ThreatPriority enum value indicating the calculated threat level
    for the target. Possible values may include LOW, MEDIUM, HIGH, or CRITICAL depending
    on the internal threat calculation algorithm used by the game's AI system.
  examples:
  - title: Basic usage in combat AI
    code: "ThreatPriority priority = threatCalculator->DetermineThreatPriority(targetUnit);\n\
      if (priority >= ThreatPriority::HIGH)\n{\n    // Initiate aggressive action\
      \ against target\n}"
    language: cpp
  notes: This method relies on internal threat tracking systems and may be influenced
    by various buffs, debuffs, and combat modifiers. It is designed to integrate seamlessly
    with TrinityCore's existing threat management framework and should not be called
    outside of appropriate combat contexts.
  warnings: Calling this method without a valid target unit may result in undefined
    behavior or incorrect threat calculations. Ensure that the target pointer is properly
    validated before invocation.
  related:
  - GetThreatList
  - AddThreat
  - UpdateThreat
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T01:00:53.069711'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
