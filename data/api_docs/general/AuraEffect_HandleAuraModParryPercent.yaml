api:
  class: AuraEffect
  method: HandleAuraModParryPercent
  signature: void AuraEffect::HandleAuraModParryPercent(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Modifies the parry percentage of the target based on aura application.
  description: The HandleAuraModParryPercent method is responsible for adjusting a
    unit's parry chance when an aura that modifies parry percentage is applied or
    removed. This method is part of the aura effect handling system in TrinityCore
    and is invoked during aura application or removal events. It directly influences
    combat mechanics by altering how often a unit can successfully parry incoming
    attacks. The method takes into account the aura's application state, mode, and
    whether it's being applied or removed to correctly update the target's parry percentage.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This contains information about which unit is affected and
      the aura properties.
  - name: mode
    description: The mode of the aura application, indicating how the effect should
      be processed. Values typically represent different application states like initial
      application, periodic updates, or removal.
  - name: apply
    description: Boolean flag indicating whether the aura is being applied (true)
      or removed (false). This determines the direction of the parry percentage modification.
  returns: null
  examples:
  - title: Basic usage in aura effect handler
    code: "void AuraEffect::HandleAuraModParryPercent(const AuraApplication* aurApp,\
      \ uint8 mode, bool apply) const\n{\n    if (!aurApp || !aurApp->GetTarget())\n\
      \        return;\n    \n    Unit* target = aurApp->GetTarget();\n    float parryMod\
      \ = GetAmount(); // Get the modifier amount from aura\n    \n    if (apply)\n\
      \        target->AddParryPercentage(parryMod);\n    else\n        target->RemoveParryPercentage(parryMod);\n\
      }"
    language: cpp
  notes: This method is typically called internally by the aura system during aura
    application or removal. Developers should ensure that any modifications to parry
    percentage are properly synchronized with combat calculations and do not conflict
    with other effects. The method assumes that the target unit exists and has a valid
    parry percentage tracking mechanism.
  warnings: Improper handling of this method can lead to incorrect combat behavior,
    including unrealistic parry rates or crashes if the target unit is invalid. Ensure
    that all aura applications are properly validated before calling this method.
  related:
  - AuraEffect::HandleAuraModDodgePercent
  - AuraEffect::HandleAuraModBlockPercent
  - AuraApplication::GetTarget
  - Unit::AddParryPercentage
  - Unit::RemoveParryPercentage
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T13:12:51.834103'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
