api:
  class: Map
  method: isInLineOfSight
  signature: bool Map::isInLineOfSight(const PhaseShift & phaseShift, float x1, float
    y1, float z1, float x2, float y2, float z2, int checks, VMAP::ModelIgnoreFlags
    ignoreFlags) const
documentation:
  brief: Checks if there is a clear line of sight between two points in the map, considering
    phase and ignore flags.
  description: The isInLineOfSight method determines whether a direct line can be
    drawn from one point to another within the game world without any blocking geometry
    or objects. It takes into account the current phase shift for proper visibility
    checks and allows specifying which types of models should be ignored during the
    raycast. This is commonly used for spell targeting, NPC vision checks, and determining
    if an object is visible to a player or creature. The method performs a 3D raycast
    from point (x1,y1,z1) to point (x2,y2,z2), returning true if no obstacles are
    found in the path.
  parameters:
  - name: phaseShift
    description: The phase shift information used to determine which objects are currently
      visible in the player's view. This affects what geometry is considered during
      the line of sight check.
  - name: x1
    description: The X coordinate of the starting point for the line of sight test.
  - name: y1
    description: The Y coordinate of the starting point for the line of sight test.
  - name: z1
    description: The Z coordinate of the starting point for the line of sight test.
  - name: x2
    description: The X coordinate of the ending point for the line of sight test.
  - name: y2
    description: The Y coordinate of the ending point for the line of sight test.
  - name: z2
    description: The Z coordinate of the ending point for the line of sight test.
  - name: checks
    description: An integer value that controls how many checks or iterations are
      performed during the raycast. Higher values may increase accuracy but decrease
      performance.
  - name: ignoreFlags
    description: A bitmask of VMAP::ModelIgnoreFlags that specifies which types of
      models should be ignored during the line of sight check. For example, ignoring
      doors or certain interactive objects.
  returns: Returns true if a clear line of sight exists between the two specified
    points, considering all parameters including phase and ignore flags. Returns false
    if any obstacle blocks the direct path between the points.
  examples:
  - title: Basic Line of Sight Check
    code: "if (map->isInLineOfSight(phaseShift, x1, y1, z1, x2, y2, z2, 5, VMAP::IGNORE_NONE))\
      \ {\n    // Player can see the target\n}"
    language: cpp
  - title: Checking Line of Sight with Ignore Flags
    code: "VMAP::ModelIgnoreFlags ignoreFlags = VMAP::IGNORE_DOORS | VMAP::IGNORE_SPELLS;\n\
      if (map->isInLineOfSight(phaseShift, x1, y1, z1, x2, y2, z2, 10, ignoreFlags))\
      \ {\n    // Line of sight is clear, ignoring doors and spells\n}"
    language: cpp
  notes: This method uses the VMap system internally for collision detection. Performance
    can be impacted by high check counts or complex terrain. The phaseShift parameter
    ensures accurate visibility checks across different phases in phased environments.
  warnings: Incorrect use of ignoreFlags may lead to unexpected behavior where objects
    that should block line of sight are ignored. Always validate coordinates before
    calling this method as invalid positions might cause undefined behavior.
  related:
  - Map::GetHeight
  - Map::IsInLineOfSight
  - WorldObject::IsInMap
metadata:
  confidence: 0.95
  generated_at: '2025-10-31T10:47:47.033989'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
