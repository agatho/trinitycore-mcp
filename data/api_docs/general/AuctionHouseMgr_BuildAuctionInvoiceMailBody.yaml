api:
  class: AuctionHouseMgr
  method: BuildAuctionInvoiceMailBody
  signature: int AuctionHouseMgr::BuildAuctionInvoiceMailBody(int guid, uint64 bid,
    uint64 buyout, uint32 deposit, uint64 consignment, uint32 moneyDelay, uint32 eta)
documentation:
  brief: Creates and sends an auction invoice mail to the bidder with details of the
    transaction.
  description: The BuildAuctionInvoiceMailBody method constructs a detailed auction
    invoice message that is sent to the winning bidder's mailbox. This method handles
    formatting of bid amount, buyout price, deposit, consignment fees, and time delays
    for payment processing. It integrates with the World of Warcraft mail system to
    ensure proper communication of auction outcomes to players. The method is typically
    invoked after an auction concludes and a player wins the item.
  parameters:
  - name: guid
    description: The unique identifier (GUID) of the winning bidder player
  - name: bid
    description: The final bid amount paid by the winning bidder in copper coins
  - name: buyout
    description: The buyout price of the item, or 0 if no buyout was used
  - name: deposit
    description: The auction house deposit amount paid by the seller in copper coins
  - name: consignment
    description: The consignment fee charged by the auction house in copper coins
  - name: moneyDelay
    description: Time delay in seconds before the money is transferred to the seller
  - name: eta
    description: Estimated time of arrival (ETA) for the item delivery in seconds
  returns: Returns 0 on success, or a non-zero error code if the mail could not be
    constructed or sent. The exact error codes are implementation-specific and typically
    relate to mail system failures or invalid input parameters.
  examples:
  - title: Basic Auction Invoice Generation
    code: int result = sAuctionHouseMgr->BuildAuctionInvoiceMailBody(12345, 1000000,
      0, 50000, 25000, 3600, 7200);
    language: cpp
  - title: Auction with Buyout and Delayed Payment
    code: int result = sAuctionHouseMgr->BuildAuctionInvoiceMailBody(54321, 2500000,
      3000000, 75000, 37500, 1800, 14400);
    language: cpp
  notes: This method is part of the auction house system's internal mail handling
    and should only be called after verifying that an auction has concluded successfully.
    The returned value indicates success or failure of the mail creation process,
    not necessarily the payment status. It assumes valid GUIDs and monetary values
    are passed in.
  warnings: Do not call this method with invalid player GUIDs as it may cause crashes
    or undefined behavior. Ensure all monetary values are properly validated before
    passing them to avoid incorrect mail content. The method does not validate that
    the bid exceeds the minimum requirements; this validation must occur beforehand.
  related:
  - AuctionHouseMgr::SendAuctionWonMail
  - AuctionHouseMgr::SendAuctionOutbidMail
  - AuctionHouseMgr::SendAuctionSalePendingMail
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T13:46:45.583706'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
