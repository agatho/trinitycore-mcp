api:
  class: LootRoll
  method: Finish
  signature: void LootRoll::Finish(int winnerItr)
documentation:
  brief: Completes a loot roll by awarding the item to the winning player and updating
    the loot state.
  description: The Finish method finalizes a loot roll process by distributing the
    rolled item to the winning player identified by the winnerItr parameter. This
    method is typically called when a player has won a loot roll through the bidding
    system, and it handles the necessary updates to the loot container, removes the
    item from the available loot pool, and sends appropriate messages or updates to
    the involved players. The method ensures that only one player receives the item
    and that the loot state transitions correctly from active to completed. It also
    handles cleanup of the roll data and may trigger additional events related to
    loot distribution.
  parameters:
  - name: winnerItr
    description: The index or iterator identifying which player won the loot roll.
      This parameter determines which player in the loot roll will receive the item,
      typically representing a position in the list of players who participated in
      the roll.
  returns: null
  examples:
  - title: Basic usage of Finish method
    code: 'LootRoll* roll = new LootRoll();

      // ... initialize roll with players and item ...

      roll->Finish(2); // Award item to player at index 2'
    language: cpp
  - title: Using Finish after determining winner
    code: "LootRoll* roll = GetLootRollForItem(itemGuid);\nif (roll)\n{\n    int winnerIndex\
      \ = roll->GetWinnerIndex();\n    if (winnerIndex >= 0)\n        roll->Finish(winnerIndex);\n\
      }"
    language: cpp
  notes: This method should only be called after all players have had a chance to
    bid or pass on the item. The winnerItr parameter must be within valid bounds of
    the player list that participated in the roll, otherwise behavior is undefined.
    The method internally handles synchronization and ensures thread safety for concurrent
    loot operations.
  warnings: Calling Finish with an invalid winnerItr index may result in undefined
    behavior or crashes. Always validate that the index corresponds to a valid player
    who participated in the roll before calling this method. Do not call Finish multiple
    times on the same roll object as it will lead to inconsistent loot state.
  related:
  - LootRoll::Start
  - LootRoll::Roll
  - LootRoll::Pass
  - LootRoll::GetWinnerIndex
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T11:39:34.906955'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
