api:
  class: WorldSession
  method: HandleTogglePvP
  signature: void WorldSession::HandleTogglePvP(WorldPackets::Misc::TogglePvP & packet)
documentation:
  brief: Toggles the player's PvP flag status
  description: The HandleTogglePvP method processes a client request to switch the
    player's PvP (Player versus Player) flag state. When invoked, it checks the current
    PvP status of the player and toggles it accordingly. This functionality allows
    players to enable or disable their PvP flag, which affects various game mechanics
    such as combat behavior, faction interactions, and zone restrictions. The method
    typically responds to a packet sent from the client when a player uses the PvP
    toggle UI element or command.
  parameters: []
  returns: null
  examples:
  - title: Basic PvP Toggle Usage
    code: "void WorldSession::HandleTogglePvP(WorldPackets::Misc::TogglePvP& packet)\n\
      {\n    Player* player = GetPlayer();\n    if (player)\n    {\n        player->TogglePvPFlag();\n\
      \    }\n}"
    language: cpp
  notes: This method relies on the underlying Player::TogglePvPFlag() implementation
    to perform the actual state change. The toggle operation respects server PvP settings
    and may be restricted in certain zones or scenarios (e.g., during combat, in sanctuaries).
  warnings: null
  related:
  - Player::TogglePvPFlag
  - Player::HasPvPFlag
  - Player::SetPvPFlag
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T20:13:21.763086'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
