api:
  class: ObstacleAvoidanceManager
  method: CalculateAvoidanceAngle
  signature: float ObstacleAvoidanceManager::CalculateAvoidanceAngle(const int & bot,
    const int & obstacle, const int & goal)
documentation:
  brief: Calculates the optimal avoidance angle for a bot to navigate around an obstacle
    toward a goal position.
  description: The CalculateAvoidanceAngle method determines the best angular direction
    a bot should take to avoid an obstacle while still moving toward its intended
    goal. This method is typically used in pathfinding and AI navigation systems within
    TrinityCore's AI framework. It evaluates the relative positions of the bot, the
    obstacle, and the goal to compute an avoidance angle that minimizes collision
    risk while maintaining navigational efficiency. The result is a float value representing
    the angle (in radians) that the bot should adjust its heading by to safely navigate
    around the obstacle.
  parameters:
  - name: bot
    description: The identifier of the bot entity for which the avoidance angle is
      being calculated. This typically corresponds to a GameObject or Unit ID within
      the TrinityCore environment.
  - name: obstacle
    description: The identifier of the obstacle entity that the bot needs to avoid.
      This could be another GameObject, unit, or environmental object blocking the
      path.
  - name: goal
    description: The identifier of the goal position or target entity that the bot
      is trying to reach. This defines the destination toward which the bot should
      navigate while avoiding obstacles.
  returns: A float value representing the calculated avoidance angle in radians. Positive
    values indicate a counterclockwise adjustment from the current heading, while
    negative values indicate a clockwise adjustment. The magnitude of the angle reflects
    how much deviation is needed to safely avoid the obstacle.
  examples:
  - title: Basic Usage Example
    code: 'float angle = avoidanceManager.CalculateAvoidanceAngle(botGuid, obstacleGuid,
      goalGuid);

      // Use the calculated angle to adjust bot''s movement direction

      bot->SetOrientation(bot->GetOrientation() + angle);'
    language: cpp
  - title: Integration with Pathfinding Logic
    code: "float avoidanceAngle = avoidanceManager.CalculateAvoidanceAngle(botGuid,\
      \ obstacleGuid, goalGuid);\nif (abs(avoidanceAngle) > 0.1f) {\n    // Adjust\
      \ bot's heading to avoid obstacle\n    float newOrientation = bot->GetOrientation()\
      \ + avoidanceAngle;\n    bot->SetOrientation(newOrientation);\n}\nelse {\n \
      \   // Proceed normally toward goal\n    bot->MoveTowards(goalPosition);\n}"
    language: cpp
  notes: This method assumes that all entity identifiers are valid and exist within
    the current game world. The calculation may involve complex geometric computations
    to determine optimal avoidance paths, potentially including distance checks, angle
    calculations, and obstacle shape approximations. Performance can be impacted if
    called frequently during high-frequency AI updates.
  warnings: Ensure that bot, obstacle, and goal identifiers are properly validated
    before calling this method to prevent undefined behavior or crashes. The method
    may return unexpected values if entities are not in the same map or if their positions
    are invalid. Avoid calling this method in tight loops without proper throttling
    as it might impact performance.
  related:
  - GetObstaclePosition
  - IsPathClear
  - CalculateSafePath
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T01:25:11.029494'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
