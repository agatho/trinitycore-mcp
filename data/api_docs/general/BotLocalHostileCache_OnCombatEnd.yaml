api:
  class: BotLocalHostileCache
  method: OnCombatEnd
  signature: void BotLocalHostileCache::OnCombatEnd()
documentation:
  brief: Clears cached hostile targets when combat ends for a bot
  description: The OnCombatEnd method is responsible for cleaning up and clearing
    any cached hostile target information when a bot's combat state transitions from
    active combat to non-combat. This method ensures that the bot's local cache of
    hostile entities is properly reset, preventing stale data from persisting in memory.
    The method typically gets invoked automatically by the game's combat system when
    a bot's combat timer expires or when all hostile targets are defeated or removed
    from the bot's threat list. It helps maintain accurate targeting behavior and
    prevents potential issues with stale target references during subsequent combat
    encounters.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in combat management
    code: "void BotAI::UpdateAI(uint32 diff)\n{\n    if (m_bot->IsInCombat() && !m_bot->getVictim())\n\
      \    {\n        m_bot->GetBotLocalHostileCache()->OnCombatEnd();\n    }\n}"
    language: cpp
  notes: This method is typically called internally by the TrinityCore framework when
    combat state changes, but may also be invoked manually in custom bot AI implementations.
    The cache clearing operation is lightweight and should not impact performance
    significantly.
  warnings: null
  related:
  - BotLocalHostileCache::OnCombatStart
  - BotLocalHostileCache::AddHostile
  - BotLocalHostileCache::GetHostiles
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T03:28:42.176392'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
