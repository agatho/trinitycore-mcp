api:
  class: ClassAI
  method: OnCombatEnd
  signature: void ClassAI::OnCombatEnd()
documentation:
  brief: Handles cleanup and state reset when an AI entity exits combat mode
  description: The OnCombatEnd method is invoked when a ClassAI-controlled creature
    or unit transitions out of combat state. This method performs necessary cleanup
    operations such as resetting combat-related flags, clearing target references,
    stopping combat-specific actions, and potentially triggering post-combat events
    or animations. It ensures that the AI returns to its normal non-combat behavior
    and maintains proper game state consistency. The method is typically called automatically
    by the TrinityCore framework when combat ends, either through player logout, enemy
    death, or other combat termination conditions.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in custom AI implementation
    code: "class MyCustomAI : public ClassAI {\npublic:\n    void OnCombatEnd() override\
      \ {\n        // Reset custom combat flags\n        m_hasEngaged = false;\n \
      \       // Call parent implementation\n        ClassAI::OnCombatEnd();\n   \
      \ }\n};"
    language: cpp
  notes: This method is part of the AI lifecycle and should not be called manually
    unless implementing custom behavior. It's expected to be invoked by the core game
    loop when combat ends, ensuring proper synchronization with the game state.
  warnings: null
  related:
  - OnCombatStart
  - UpdateAI
  - IsInCombat
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T17:21:19.323373'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
