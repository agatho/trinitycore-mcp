api:
  class: WorldSession
  method: HandleWhoOpcode
  signature: void WorldSession::HandleWhoOpcode(WorldPackets::Who::WhoRequestPkt &
    whoRequest)
documentation:
  brief: Processes a who query request from a player and sends back matching player
    information.
  description: The HandleWhoOpcode method is responsible for processing the 'who'
    command sent by players in World of Warcraft. When a player uses the /who command
    or clicks the Who button, this method receives the request packet containing search
    parameters such as player name, guild name, level range, and zone information.
    It then searches through the active player sessions to find matches based on these
    criteria, constructs a response packet with the found players' information, and
    sends it back to the requesting client. This method supports various filtering
    options including character name, guild membership, level ranges, and zone-based
    searches.
  parameters:
  - name: whoRequest
    description: The incoming WhoRequestPkt packet containing search parameters such
      as player name, guild name, level range, and zone information used to filter
      matching players.
  returns: void
  examples:
  - title: Basic who query handling
    code: "void WorldSession::HandleWhoOpcode(WorldPackets::Who::WhoRequestPkt & whoRequest)\n\
      {\n    // Process the who request packet\n    // Search for players matching\
      \ the criteria\n    // Send back results to the client\n}"
    language: cpp
  notes: This method operates on the session's thread and directly interacts with
    player session data. It should be optimized for performance as it may be called
    frequently during gameplay. The method uses internal player tracking systems to
    efficiently search through online players.
  warnings: The method assumes that all input parameters from the client are properly
    validated before processing. Improper handling of malformed packets could lead
    to denial-of-service conditions or information disclosure. Ensure proper rate
    limiting is implemented to prevent abuse of the who command.
  related:
  - SendWhoQuery
  - BuildWhoResponse
  - HandleWhoPacket
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T20:02:42.639847'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
