api:
  class: VMapManager2
  method: getHeight
  signature: float VMapManager2::getHeight(unsigned int mapId, float x, float y, float
    z, float maxSearchDist)
documentation:
  brief: Retrieves the height value at a specified location within a given map.
  description: The getHeight method calculates and returns the ground height at the
    provided coordinates (x, y) on the specified map. It uses the VMapManager2's collision
    detection system to determine the height, taking into account terrain and object
    geometry. The method performs a vertical search from the given z-coordinate downward
    to find the first solid surface. If no surface is found within the maximum search
    distance, it returns the original z-coordinate. This functionality is crucial
    for ensuring proper character positioning, movement, and interaction with the
    game world's environment.
  parameters:
  - name: mapId
    description: Unique identifier of the map where the height is to be calculated.
      Must correspond to a valid map in the game world.
  - name: x
    description: X coordinate of the location for which to retrieve the height value.
  - name: y
    description: Y coordinate of the location for which to retrieve the height value.
  - name: z
    description: Initial Z (vertical) coordinate from which to begin searching downward
      for a surface.
  - name: maxSearchDist
    description: Maximum vertical distance to search for a ground surface. If no surface
      is found within this range, the original z-coordinate is returned.
  returns: Returns the calculated height value (Z coordinate) at the specified location.
    If no valid surface is found within maxSearchDist, it returns the input z-value.
  examples:
  - title: Basic Height Retrieval
    code: float height = vmapManager->getHeight(0, 100.0f, 200.0f, 50.0f, 50.0f);
      // Get height at map 0, coordinates (100,200), starting from z=50 with max search
      of 50 units
    language: cpp
  - title: Character Positioning
    code: 'float groundHeight = vmapManager->getHeight(player->GetMapId(), player->GetPositionX(),
      player->GetPositionY(), player->GetPositionZ(), 100.0f);

      player->SetPosition(player->GetPositionX(), player->GetPositionY(), groundHeight);
      // Align character to ground'
    language: cpp
  notes: This method relies on the VMap (Virtual Map) system which handles collision
    detection and height calculations for terrain and objects. It is optimized for
    performance but may be slower in areas with dense object placement. The method
    assumes that map data has been properly loaded and initialized.
  warnings: Be cautious when using large maxSearchDist values as they can impact performance.
    Also, if the coordinates are outside of valid map boundaries, behavior is undefined
    and may result in incorrect height values or crashes.
  related:
  - getAreaHeight
  - isInLineOfSight
  - getHeightForPoint
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T19:57:13.321925'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
