api:
  class: LootDistribution
  method: HandleInvalidLootRoll
  signature: void LootDistribution::HandleInvalidLootRoll(uint32 rollId, uint32 playerGuid)
documentation:
  brief: Handles invalid loot roll by removing the roll from the distribution process
    and notifying players.
  description: The HandleInvalidLootRoll method processes an invalid loot roll within
    the TrinityCore loot distribution system. When a player attempts to roll on loot
    that is no longer available or has already been distributed, this method removes
    the invalid roll from the active distribution queue. It ensures that the loot
    distribution remains consistent and prevents duplicate or erroneous rolls from
    affecting the final outcome. The method typically gets invoked when a player's
    roll becomes invalid due to time constraints, item unavailability, or other game
    state changes during the rolling process.
  parameters:
  - name: rollId
    description: The unique identifier of the loot roll that is being invalidated.
      This ID corresponds to a specific roll entry in the loot distribution system.
  - name: playerGuid
    description: The global unique identifier of the player whose roll is being invalidated.
      This identifies which player's roll should be removed from the distribution
      process.
  returns: null
  examples:
  - title: Basic usage example
    code: 'LootDistribution* lootDist = sObjectMgr->GetLootDistribution(12345);

      lootDist->HandleInvalidLootRoll(67890, 54321);'
    language: cpp
  notes: This method is typically called internally by the loot distribution system
    when a roll becomes invalid. It does not directly modify any database entries
    but rather updates in-memory structures to reflect the invalidation of the specific
    roll. The method assumes that the rollId and playerGuid are valid and exist within
    the current loot distribution context.
  warnings: Calling this method with an invalid rollId or playerGuid may lead to undefined
    behavior or inconsistencies in the loot distribution system. Always ensure that
    the provided identifiers correspond to actual active rolls before invoking this
    method.
  related:
  - LootDistribution::AddPlayerRoll
  - LootDistribution::ProcessLootRoll
  - LootDistribution::DistributeLoot
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T09:30:41.835880'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
