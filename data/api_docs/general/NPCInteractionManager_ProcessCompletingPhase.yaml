api:
  class: NPCInteractionManager
  method: ProcessCompletingPhase
  signature: void NPCInteractionManager::ProcessCompletingPhase()
documentation:
  brief: Processes the completion phase of an NPC interaction, handling quest progression
    and reward distribution.
  description: The ProcessCompletingPhase method manages the final stage of an NPC
    interaction within the TrinityCore framework. It is responsible for evaluating
    whether a player's current quest status allows for quest completion, distributing
    rewards to the player, updating quest progress in the database, and potentially
    triggering subsequent quest events or objectives. This method typically gets invoked
    when a player has fulfilled all prerequisites for completing a quest and interacts
    with an NPC to finalize the quest. The method ensures that all necessary game
    state changes are properly applied and synchronized with the client.
  parameters: []
  returns: null
  examples:
  - title: Basic Quest Completion
    code: "void MyQuestHandler::OnPlayerCompleteQuest(Player* player)\n{\n    NPCInteractionManager*\
      \ interactionMgr = player->GetNPCInteractionManager();\n    if (interactionMgr)\n\
      \    {\n        interactionMgr->ProcessCompletingPhase();\n    }\n}"
    language: cpp
  notes: This method assumes that all preconditions for quest completion have already
    been validated by the calling code. It should only be invoked after verifying
    that the player has met all required objectives and items. The method may internally
    perform database writes, so it's recommended to call it from a context where such
    operations are safe.
  warnings: Calling this method without ensuring that the quest can actually be completed
    may lead to inconsistent game state or client-side errors. Ensure that all prerequisites
    for quest completion have been verified before invoking this function.
  related:
  - ProcessStartingPhase
  - ProcessInProgressPhase
  - ValidateQuestCompletion
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T05:16:15.106631'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
