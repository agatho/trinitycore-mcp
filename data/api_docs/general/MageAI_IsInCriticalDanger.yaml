api:
  class: MageAI
  method: IsInCriticalDanger
  signature: bool MageAI::IsInCriticalDanger()
documentation:
  brief: Determines if the Mage AI is currently in a critical danger state based on
    health and threat levels.
  description: The IsInCriticalDanger method evaluates whether the Mage AI character
    is in immediate peril by checking current health percentage, incoming threat level,
    and proximity to hostile targets. This method is typically used within the AI
    decision-making loop to trigger defensive behaviors such as casting protective
    spells, fleeing, or seeking assistance. The evaluation considers both direct damage
    threats and overall combat situation to determine if immediate action is required
    for survival.
  parameters: []
  returns: Returns true if the Mage AI character is in critical danger (low health,
    high threat, or imminent danger), otherwise returns false.
  examples:
  - title: Basic Usage in AI Decision Logic
    code: "if (mageAI->IsInCriticalDanger()) {\n    // Trigger defensive spell casting\n\
      \    mageAI->CastDefensiveSpell();\n    // Or initiate retreat behavior\n  \
      \  mageAI->Flee();\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void MageAI::UpdateAI() {\n    if (IsInCriticalDanger()) {\n        //\
      \ Prioritize survival over damage output\n        if (CanCastSpell(SPELL_BLINK))\
      \ {\n            CastSpell(SPELL_BLINK);\n        }\n        return;\n    }\n\
      \    // Normal AI behavior continues here\n}"
    language: cpp
  notes: This method likely uses internal health thresholds and threat calculations
    that are specific to the Mage class AI implementation. The exact danger criteria
    may vary based on difficulty settings or encounter-specific configurations.
  warnings: The method should not be called excessively in tight loops as it may involve
    multiple internal checks and calculations that could impact performance. Ensure
    proper state management before relying on this method for critical combat decisions.
  related:
  - IsInDanger
  - GetHealthPercentage
  - GetThreatLevel
  - ShouldFlee
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T12:40:36.870334'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
