api:
  class: WorldSession
  method: SendBlackMarketOpenResult
  signature: void WorldSession::SendBlackMarketOpenResult(int guid, Creature * auctioneer)
documentation:
  brief: Sends a black market open result message to the player's client when interacting
    with a black market auctioneer.
  description: The SendBlackMarketOpenResult method is responsible for transmitting
    a packet to the connected client that indicates whether the player can successfully
    interact with a black market auctioneer. This method is typically invoked when
    a player attempts to open the black market interface, and it determines whether
    the interaction should proceed based on game rules such as quest requirements,
    faction standing, or other conditions. The method takes a GUID representing the
    auctioneer and a pointer to the Creature object itself, which are used to construct
    and send the appropriate network message to the client. This functionality is
    part of the Black Market Auction House system introduced in World of Warcraft's
    Legion expansion.
  parameters:
  - name: guid
    description: The unique identifier (GUID) of the black market auctioneer creature
      that the player is attempting to interact with.
  - name: auctioneer
    description: A pointer to the Creature object representing the black market auctioneer.
      This parameter is used to validate the auctioneer's state and ensure proper
      interaction handling.
  returns: null
  examples:
  - title: Basic Usage in Player Interaction
    code: "void HandleBlackMarketOpen(WorldSession* session, Creature* auctioneer)\n\
      {\n    if (auctioneer && auctioneer->IsBlackMarket())\n    {\n        session->SendBlackMarketOpenResult(auctioneer->GetGUID().GetCounter(),\
      \ auctioneer);\n    }\n}"
    language: cpp
  notes: This method is typically called internally by the core when a player interacts
    with a black market NPC. It does not perform any validation on its own but relies
    on the calling code to ensure that the auctioneer is valid and accessible. The
    actual packet sent to the client contains information about whether the interaction
    was successful or if there were restrictions preventing access.
  warnings: Improper use of this method without proper checks on the auctioneer's
    validity may result in client-side errors or unexpected behavior. Ensure that
    the Creature pointer is not null and that the auctioneer is indeed a black market
    NPC before calling this function.
  related:
  - SendBlackMarketHello
  - SendBlackMarketBidResult
  - SendBlackMarketAuctionHouseList
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T19:41:03.450980'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
