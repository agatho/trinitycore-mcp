api:
  class: CombatBehaviorIntegration
  method: GetNextAction
  signature: RecommendedAction CombatBehaviorIntegration::GetNextAction()
documentation:
  brief: Determines and returns the next recommended combat action for the AI-controlled
    unit based on current game state and behavior rules.
  description: The GetNextAction method is a core component of the CombatBehaviorIntegration
    class, responsible for evaluating the current combat situation and determining
    the most appropriate next action for an AI-controlled unit. It considers various
    factors such as target proximity, available abilities, health status, and predefined
    combat behaviors to select an optimal course of action. This method integrates
    with the broader TrinityCore AI system to ensure coherent and strategic decision-making
    during combat encounters. The returned RecommendedAction encapsulates both the
    type of action to perform and any relevant parameters needed for execution.
  parameters: []
  returns: A RecommendedAction object that specifies the next combat action to be
    executed by the AI unit, including the action type (e.g., attack, cast spell,
    move) and associated data such as target information or ability identifiers.
  examples:
  - title: Basic usage in combat AI loop
    code: "void MyCombatAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = me->GetVictim())\n\
      \    {\n        RecommendedAction action = combatBehavior->GetNextAction();\n\
      \        if (action.IsValid())\n        {\n            ExecuteRecommendedAction(action);\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method is typically called within the AI update loop and should be invoked
    frequently to ensure responsive combat behavior. The implementation may cache
    certain evaluations for performance reasons, but it will re-evaluate conditions
    when necessary based on game state changes.
  warnings: The method assumes that the AI unit has a valid combat context (e.g.,
    a target exists). Calling this method without proper setup may result in undefined
    behavior or invalid action recommendations. Ensure that the AI system is properly
    initialized before invoking this method.
  related:
  - SetCombatBehavior
  - ExecuteRecommendedAction
  - IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T19:24:17.336340'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
