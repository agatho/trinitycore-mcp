api:
  class: DemonHunterAI
  method: ShouldUseMetamorphosis
  signature: bool DemonHunterAI::ShouldUseMetamorphosis()
documentation:
  brief: Determines whether the Demon Hunter should activate Metamorphosis based on
    current combat state and resource levels.
  description: The ShouldUseMetamorphosis method evaluates various conditions to decide
    if the Demon Hunter AI should trigger the Metamorphosis ability. This includes
    checking the player's current health percentage, available Fury resources, and
    combat situation. The method considers factors such as incoming damage, enemy
    proximity, and whether the ability is currently on cooldown. It returns true when
    the AI determines that activating Metamorphosis will provide a tactical advantage,
    such as increased damage output or survivability. This method is typically called
    during the AI's decision-making cycle to optimize ability usage for maximum effectiveness.
  parameters: []
  returns: Returns true if the Demon Hunter should use Metamorphosis at this moment;
    otherwise returns false. The decision is based on combat state, resource availability,
    and tactical positioning.
  examples:
  - title: Basic Usage in AI Decision Logic
    code: "if (ai->ShouldUseMetamorphosis())\n{\n    ai->DoAction(ACTION_USE_METAMORPHOSIS);\n\
      }"
    language: cpp
  - title: Integration with Combat State Check
    code: "void DemonHunterAI::UpdateAI(uint32 diff)\n{\n    if (ShouldUseMetamorphosis()\
      \ && !me->HasAura(METAMORPHOSIS_AURA))\n    {\n        DoCast(me, METAMORPHOSIS_SPELL);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the Demon Hunter's core AI logic and should be called
    frequently during combat updates. The decision-making process considers multiple
    factors including player health, Fury cost of Metamorphosis, and current threat
    level. The method does not directly cast the spell but rather evaluates when it
    would be beneficial to do so.
  warnings: Ensure that this method is only called in appropriate combat contexts
    where the Demon Hunter has valid targets and resources. Calling it outside of
    combat may lead to incorrect behavior or unnecessary resource expenditure.
  related:
  - DoCast
  - HasAura
  - GetHealthPct
  - GetPower
  - IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T14:44:57.768126'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
