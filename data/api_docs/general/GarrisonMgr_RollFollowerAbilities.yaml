api:
  class: GarrisonMgr
  method: RollFollowerAbilities
  signature: int GarrisonMgr::RollFollowerAbilities(uint32 garrFollowerId, const GarrFollowerEntry
    * follower, uint32 quality, uint32 faction, bool initial) const
documentation:
  brief: Rolls and returns the abilities for a garrison follower based on specified
    parameters.
  description: The RollFollowerAbilities method generates and assigns random abilities
    to a garrison follower based on the provided quality, faction, and initial state.
    This method is typically used during follower recruitment or upgrades within the
    Garrison system. It utilizes internal game mechanics to determine which abilities
    are rolled and applied to the specified follower. The method respects the follower's
    quality level and faction alignment when determining valid ability combinations.
    The result represents the number of abilities successfully assigned to the follower.
  parameters:
  - name: garrFollowerId
    description: The unique identifier for the garrison follower being processed.
      This ID corresponds to entries in the garrison follower database.
  - name: follower
    description: Pointer to the GarrFollowerEntry structure containing detailed information
      about the follower, including stats and base abilities.
  - name: quality
    description: The quality level of the follower (e.g., 1 for common, 2 for rare,
      etc.). Determines which abilities can be rolled based on game progression rules.
  - name: faction
    description: The faction identifier (Alliance or Horde) that affects ability selection
      and compatibility with the player's faction.
  - name: initial
    description: Boolean flag indicating whether this is an initial roll for a new
      follower (true) or a subsequent roll during upgrades (false).
  returns: Returns an integer representing the number of abilities successfully rolled
    and assigned to the follower. A negative value may indicate an error condition,
    while zero indicates no abilities were rolled.
  examples:
  - title: Rolling abilities for a new follower
    code: "GarrisonMgr* garrisonMgr = sGarrisonMgr;\nuint32 followerId = 12345;\n\
      const GarrFollowerEntry* followerEntry = sGarrFollowerStore.LookupEntry(followerId);\n\
      int result = garrisonMgr->RollFollowerAbilities(followerId, followerEntry, 3,\
      \ 1, true);\nif (result > 0)\n{\n    // Successfully rolled abilities\n    printf(\"\
      Rolled %d abilities for follower %u\\n\", result, followerId);\n}"
    language: cpp
  - title: Rolling abilities during follower upgrade
    code: "GarrisonMgr* garrisonMgr = sGarrisonMgr;\nuint32 followerId = 12345;\n\
      const GarrFollowerEntry* followerEntry = sGarrFollowerStore.LookupEntry(followerId);\n\
      int result = garrisonMgr->RollFollowerAbilities(followerId, followerEntry, 4,\
      \ 0, false);\nif (result >= 0)\n{\n    // Successfully rolled abilities for\
      \ upgrade\n    printf(\"Upgraded follower %u with %d new abilities\\n\", followerId,\
      \ result);\n}\nelse\n{\n    // Handle error case\n    printf(\"Failed to roll\
      \ abilities for follower %u\\n\", followerId);\n}"
    language: cpp
  notes: This method is part of the internal garrison system and may be called during
    follower recruitment, level-ups, or upgrades. The actual ability selection process
    uses weighted randomization based on quality levels and faction constraints. The
    method assumes valid input parameters and does not perform extensive validation.
  warnings: Calling this method with invalid garrFollowerId or null follower pointer
    can lead to undefined behavior. Ensure that all inputs are validated before calling
    this function, especially in multiplayer environments where synchronization is
    critical.
  related:
  - GetFollowerAbilities
  - AddFollowerAbility
  - UpdateFollowerAbilities
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T07:09:44.329171'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
