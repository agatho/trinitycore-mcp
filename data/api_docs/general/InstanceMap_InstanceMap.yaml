api:
  class: InstanceMap
  method: InstanceMap
  signature: void InstanceMap::InstanceMap(uint32 id, time_t param1, uint32 InstanceId,
    Difficulty SpawnMode, int InstanceTeam, InstanceLock * instanceLock, int lfgDungeonsId)
documentation:
  brief: Initializes a new instance map with specified parameters including difficulty,
    team, and lock information.
  description: The InstanceMap constructor initializes a new instance map object for
    a specific dungeon or raid. It sets up internal state based on provided parameters
    such as instance ID, difficulty mode, player team, and locking information. This
    method is typically called when creating a new instance of a world map that represents
    a dungeon or raid encounter. The instance lock parameter controls access permissions
    and synchronization for players entering the instance. The LFG dungeons ID helps
    track which group finder dungeon this instance corresponds to.
  parameters:
  - name: id
    description: Unique identifier for the map type (e.g., dungeon or raid ID). This
      value determines which map template is used for the instance.
  - name: param1
    description: Time-based parameter, likely used for instance expiration or reset
      timing. Value represents a timestamp or time interval.
  - name: InstanceId
    description: Unique identifier for this specific instance of the map. Each new
      dungeon/raid run gets a unique instance ID.
  - name: SpawnMode
    description: Difficulty level for spawning creatures and objects. Values typically
      include Normal, Heroic, and other difficulty modes.
  - name: InstanceTeam
    description: Player team identifier (ALLIANCE or HORDE) that determines faction-specific
      content and mechanics within the instance.
  - name: instanceLock
    description: Pointer to an InstanceLock object managing access permissions and
      synchronization for players entering this instance.
  - name: lfgDungeonsId
    description: ID of the LFG (Looking For Group) dungeon that this instance corresponds
      to. Used for group matching and tracking.
  returns: null
  examples:
  - title: Creating a new instance map with specific parameters
    code: 'InstanceMap* map = new InstanceMap(1234, time(nullptr), 5678, DIFFICULTY_NORMAL,
      ALLIANCE, &lock, 90);

      // Creates a new instance map for dungeon ID 1234 with normal difficulty

      // and sets up proper locking and LFG tracking.'
    language: cpp
  notes: This constructor is part of the internal map management system in TrinityCore.
    The instance lock mechanism ensures that players cannot enter instances they are
    not authorized to access, and helps maintain synchronization between multiple
    players in the same instance. The param1 parameter should typically be set to
    current time when creating new instances.
  warnings: Improper initialization of instance locks can lead to security vulnerabilities
    or incorrect instance access. Always ensure that InstanceLock objects are properly
    initialized before passing them to this constructor. Incorrect difficulty mode
    values may cause unexpected creature spawning behavior.
  related:
  - InstanceMap::~InstanceMap
  - InstanceMap::LoadGrid
  - InstanceMap::RemovePlayer
  - InstanceMap::GetDifficulty
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T16:56:23.438829'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
