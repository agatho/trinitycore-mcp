api:
  class: WorldSession
  method: HandleGuildBankTextQuery
  signature: void WorldSession::HandleGuildBankTextQuery(WorldPackets::Guild::GuildBankTextQuery
    & packet)
documentation:
  brief: Retrieves and sends the guild bank text content for a specified guild bank
    tab.
  description: The HandleGuildBankTextQuery method processes incoming client requests
    to retrieve the text content associated with a specific guild bank tab. This functionality
    allows players to view notes or descriptions that have been set on individual
    tabs within their guild's bank interface. The method typically handles packet
    validation, checks player permissions for accessing the guild bank, and then retrieves
    the corresponding text data from the database or in-memory structures before sending
    it back to the client. It is part of the core guild bank management system in
    TrinityCore.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage
    code: "void WorldSession::HandleGuildBankTextQuery(WorldPackets::Guild::GuildBankTextQuery&\
      \ packet)\n{\n    // Validate packet data\n    if (!packet.GuildId || !packet.TabId)\n\
      \        return;\n\n    // Retrieve guild bank tab text from database\n    std::string\
      \ text = sGuildBankMgr->GetGuildBankTabText(packet.GuildId, packet.TabId);\n\
      \n    // Send response back to client\n    WorldPackets::Guild::GuildBankTextResponse\
      \ response;\n    response.GuildId = packet.GuildId;\n    response.TabId = packet.TabId;\n\
      \    response.Text = text;\n    SendPacket(response.Write());\n}"
    language: cpp
  notes: This method is typically invoked when a player clicks on a guild bank tab
    to view its associated text. The implementation assumes that proper authentication
    and authorization checks are already performed before this method is called. Performance
    considerations include efficient database queries for retrieving tab text data,
    especially in high-traffic guild environments.
  warnings: Improper handling of packet data can lead to security vulnerabilities
    or crashes. Ensure that all incoming GuildId and TabId values are validated against
    existing guilds and tabs to prevent unauthorized access or data corruption.
  related:
  - HandleGuildBankQueryTab
  - HandleGuildBankUpdateTab
  - HandleGuildBankDepositItem
  - HandleGuildBankWithdrawItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T22:03:08.701185'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
