api:
  class: MageSpellCalculator
  method: CalculateCastTime
  signature: uint32 MageSpellCalculator::CalculateCastTime(uint32 spellId, Player
    * caster)
documentation:
  brief: Calculates the cast time of a mage spell based on spell ID and caster properties.
  description: The CalculateCastTime method determines the casting duration for a
    specified mage spell, taking into account the caster's current state and spell-specific
    attributes. This calculation is essential for proper spell execution timing within
    the TrinityCore framework. The method considers various factors such as spell
    base cast time, caster's haste modifiers, and any applicable aura effects that
    might alter the casting speed. It returns the final cast time in milliseconds,
    which is used by the game engine to manage spell casting animations and cooldowns.
  parameters:
  - name: spellId
    description: The unique identifier of the mage spell for which to calculate the
      cast time. Must correspond to a valid spell entry in the database.
  - name: caster
    description: Pointer to the Player object representing the mage casting the spell.
      The caster's properties, such as haste rating and auras, are used in the calculation.
  returns: Returns the calculated cast time of the spell in milliseconds. A value
    of 0 typically indicates an instant cast or an error in spell lookup.
  examples:
  - title: Basic Usage Example
    code: 'uint32 castTime = mageSpellCalculator.CalculateCastTime(133, player);

      // Returns the cast time for Fireball (spell ID 133) for the given player'
    language: cpp
  - title: Advanced Usage with Haste Calculation
    code: 'uint32 baseCastTime = 2000; // 2 seconds

      uint32 hasteModifier = player->GetFloatValue(PLAYER_FIELD_MOD_HASTE);

      uint32 finalCastTime = baseCastTime / (1.0f + hasteModifier);

      // This demonstrates how haste affects the final cast time calculation'
    language: cpp
  notes: The method relies on internal spell data and player statistics, so it should
    only be called when both parameters are valid. The implementation may cache certain
    values for performance reasons but will recalculate based on current caster state.
    Ensure that the spell ID corresponds to a valid mage spell in the database.
  warnings: Passing a null pointer for the caster parameter will likely result in
    undefined behavior or crashes. Always validate spell IDs against the database
    before calling this method. Incorrect handling of haste modifiers can lead to
    inaccurate cast times, affecting gameplay balance.
  related:
  - GetSpellCastTime
  - CalculateDamage
  - GetSpellInfo
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:01:37.325871'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
