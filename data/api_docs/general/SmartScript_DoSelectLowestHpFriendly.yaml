api:
  class: SmartScript
  method: DoSelectLowestHpFriendly
  signature: Unit * SmartScript::DoSelectLowestHpFriendly(float range, uint32 MinHPDiff)
    const
documentation:
  brief: Selects the lowest health friendly unit within a specified range, considering
    a minimum HP difference threshold.
  description: The DoSelectLowestHpFriendly method identifies and returns the Unit
    with the lowest current health value among all friendly units within the given
    range. It filters out units that do not meet the minimum HP difference requirement
    (MinHPDiff), which ensures that only units whose health is significantly lower
    than others are considered. This function is commonly used in AI scripts to prioritize
    healing or support actions towards the most critically injured allies. The method
    operates within the context of SmartAI, where it's typically invoked during creature
    behavior execution to determine target selection for various actions such as casting
    spells or moving toward a target.
  parameters:
  - name: range
    description: The maximum distance in yards within which friendly units are considered
      for selection. A value of 0 indicates no range restriction.
  - name: MinHPDiff
    description: Minimum health difference threshold (in hit points) that a selected
      unit must have compared to others in the vicinity. Units with less than this
      HP difference from other friendly units will be excluded from consideration.
  returns: A pointer to the Unit object representing the lowest health friendly target
    within range and meeting the minimum HP difference criteria, or NULL if no suitable
    unit is found.
  examples:
  - title: Basic usage in SmartAI script
    code: Unit* target = DoSelectLowestHpFriendly(30.0f, 10); // Selects lowest HP
      friendly within 30 yards with at least 10 HP difference
    language: cpp
  - title: Using result in a healing action
    code: Unit* target = DoSelectLowestHpFriendly(25.0f, 5); if (target) { DoCast(target,
      SPELL_HEALING_TOUCH); }
    language: cpp
  notes: This method does not perform any direct action on the returned unit; it only
    selects and returns a pointer to it. The actual behavior of targeting or acting
    upon the selected unit must be implemented separately in the AI script logic.
    Performance-wise, this function iterates through nearby friendly units, so using
    large ranges or frequent calls may impact performance.
  warnings: Ensure that MinHPDiff is not set too low (e.g., 0) as it might cause unintended
    behavior when multiple units have nearly identical HP values. Also, be cautious
    about calling this method in high-frequency loops without proper caching or state
    management.
  related:
  - DoSelectNearestTarget
  - DoSelectLowestHp
  - DoSelectRandomFriendly
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T21:27:52.735183'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
