api:
  class: Player
  method: RefundItem
  signature: void Player::RefundItem(Item * item)
documentation:
  brief: Refunds an item to the player's inventory, restoring its original state and
    updating relevant statistics.
  description: The RefundItem method is used to return a purchased or acquired item
    back to the player's inventory, effectively reversing the transaction. This function
    handles the logic for refunding items such as those bought from vendors, obtained
    through quests, or acquired via other means within the game. It ensures that the
    item is properly restored to the player's possession and any associated currency
    or reputation changes are reversed. The method also updates internal tracking
    systems to reflect the refund operation.
  parameters:
  - name: item
    description: Pointer to the Item object that should be refunded to the player.
      Must be a valid item pointer; passing nullptr will result in undefined behavior
      or potential crash.
  returns: null
  examples:
  - title: Basic refund of a purchased item
    code: "Item* purchasedItem = player->GetItemByGuid(itemGuid);\nif (purchasedItem)\n\
      {\n    player->RefundItem(purchasedItem);\n}"
    language: cpp
  - title: Refunding an item after quest completion failure
    code: "if (questFailed)\n{\n    Item* questItem = player->GetItemByEntry(questItemEntry);\n\
      \    if (questItem)\n    {\n        player->RefundItem(questItem);\n    }\n}"
    language: cpp
  notes: This method assumes that the item being refunded is valid and owned by the
    player. It internally handles currency refunds, inventory space management, and
    updates related game state variables. The refund process may also trigger additional
    events or callbacks depending on how the item was originally acquired.
  warnings: Passing an invalid or null Item pointer to this method can cause crashes
    or undefined behavior. Ensure that the item exists and belongs to the player before
    calling RefundItem. Also, be aware that some items might not be refundable under
    certain conditions (e.g., items used in crafting or those with special restrictions).
  related:
  - Player::AddItem
  - Player::RemoveItem
  - Player::GetItemByGuid
  - Player::GetItemByEntry
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T14:46:52.371599'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
