api:
  class: FeralDruidRefactored
  method: ExecuteSingleTargetRotation
  signature: void FeralDruidRefactored::ExecuteSingleTargetRotation(int * target)
documentation:
  brief: Executes the single-target rotation logic for a Feral Druid AI, determining
    and applying the appropriate abilities based on current combat state and resource
    levels.
  description: The ExecuteSingleTargetRotation method implements the core decision-making
    logic for a Feral Druid's single-target combat rotation. This method evaluates
    the current game state including target health, player's energy or combo points,
    available abilities, and cooldowns to determine the optimal sequence of actions.
    It typically involves checking for conditions such as whether to use Mangle, Shred,
    Rake, or other abilities based on their readiness and effectiveness. The method
    is designed to be called during the AI's update cycle and integrates with the
    broader TrinityCore combat system to ensure proper ability usage and resource
    management.
  parameters:
  - name: target
    description: Pointer to an integer representing the target's identifier or index
      within the game world. This parameter is used to determine which enemy unit
      the rotation should focus on for applying damage-dealing abilities.
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void FeralDruidAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \    {\n        int targetId = target->GetGUID().GetRawValue();\n        ExecuteSingleTargetRotation(&targetId);\n\
      \    }\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void FeralDruidRefactored::ExecuteSingleTargetRotation(int* target)\n{\n\
      \    if (!target || *target <= 0) return;\n    \n    Unit* unitTarget = ObjectAccessor::GetUnit(*m_creature,\
      \ ObjectGuid(HighGuid::Player, *target));\n    if (!unitTarget || !unitTarget->IsAlive())\
      \ return;\n    \n    // Core rotation logic would go here\n    // e.g., check\
      \ for Mangle, Shred, Rake, etc.\n}"
    language: cpp
  notes: This method is part of a larger AI framework and assumes that the underlying
    combat state (energy, combo points, cooldowns) has already been updated. The target
    parameter should be validated before use to prevent invalid memory access or incorrect
    behavior.
  warnings: Improper handling of the target pointer can lead to crashes or undefined
    behavior. Ensure that the target value corresponds to a valid unit in the game
    world and that it remains alive during execution.
  related:
  - ExecuteAOERotation
  - CheckAndUseAbility
  - UpdateCombatState
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:17:40.797169'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
