api:
  class: TradeSystem
  method: ProcessEquipmentRepair
  signature: void TradeSystem::ProcessEquipmentRepair(Player * player, uint32 vendorGuid)
documentation:
  brief: Repairs all equipment for a player at a vendor.
  description: The ProcessEquipmentRepair method handles the repair of all currently
    equipped items for a specified player at a given vendor. It calculates the total
    cost of repairing all items in the player's inventory that are eligible for repair,
    deducts the funds from the player's account, and updates the durability of each
    repaired item. This method is typically invoked when a player interacts with a
    vendor to repair their gear, ensuring that all equipment is restored to full durability
    according to the vendor's repair rates. The method requires the player to have
    sufficient gold to cover the total repair costs.
  parameters:
  - name: player
    description: Pointer to the Player object whose equipment will be repaired. Must
      not be null and must represent a valid online player character.
  - name: vendorGuid
    description: The unique identifier (GUID) of the vendor who will perform the repairs.
      This value is used to determine the repair rates and costs applied to the items
      being repaired.
  returns: null
  examples:
  - title: Basic Equipment Repair
    code: 'Player* player = ...; // Valid player pointer

      uint32 vendorGuid = 12345;

      TradeSystem::ProcessEquipmentRepair(player, vendorGuid);'
    language: cpp
  - title: Repair with Error Handling
    code: "if (player && vendorGuid)\n{\n    TradeSystem::ProcessEquipmentRepair(player,\
      \ vendorGuid);\n}\nelse\n{\n    // Handle invalid player or vendor GUID\n}"
    language: cpp
  notes: This method assumes that the vendor is valid and accessible. It does not
    perform checks for whether the player is within range of the vendor or if the
    vendor accepts repairs from the player. The repair costs are calculated based
    on the vendor's repair rates, which may vary depending on the vendor type and
    reputation level.
  warnings: Ensure that the player pointer is valid before calling this method to
    avoid segmentation faults. Also, verify that the vendorGuid corresponds to an
    actual vendor in the game world; otherwise, unexpected behavior may occur during
    cost calculation or item durability restoration.
  related:
  - GetRepairCost
  - CanAffordRepair
  - UpdatePlayerDurability
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:29:40.520089'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
