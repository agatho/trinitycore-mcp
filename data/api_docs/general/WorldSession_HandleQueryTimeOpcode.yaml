api:
  class: WorldSession
  method: HandleQueryTimeOpcode
  signature: void WorldSession::HandleQueryTimeOpcode(WorldPackets::Query::QueryTime
    & queryTime)
documentation:
  brief: Sends the current server time to the client in response to a time query opcode.
  description: The HandleQueryTimeOpcode method is responsible for processing incoming
    time query requests from players. When a client sends a query time request, this
    method retrieves the current server time and sends it back to the player using
    a QueryTime packet. This functionality ensures that clients have access to accurate
    server time information, which is important for various game mechanics such as
    event timing, cooldowns, and synchronization. The method does not require any
    specific preconditions beyond a valid WorldSession and properly initialized network
    connection.
  parameters: []
  returns: null
  examples:
  - title: Basic usage example
    code: "void WorldSession::HandleQueryTimeOpcode(WorldPackets::Query::QueryTime&\
      \ queryTime)\n{\n    WorldPacket data(SMSG_QUERY_TIME_RESPONSE, 4);\n    data\
      \ << uint32(time(nullptr));\n    SendPacket(&data);\n}"
    language: cpp
  notes: This method is typically invoked automatically by the TrinityCore opcode
    handler system when a client sends a SMSG_QUERY_TIME_REQUEST packet. It's important
    to note that the time sent is in Unix timestamp format (seconds since epoch),
    which is standard across most game clients and servers.
  warnings: null
  related:
  - SendPacket
  - HandleQueryTimeOpcode
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T21:02:40.792034'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
