api:
  class: CharmInfo
  method: AddSpellToActionBar
  signature: bool CharmInfo::AddSpellToActionBar(const SpellInfo * spellInfo, ActiveStates
    newstate, uint8 preferredSlot)
documentation:
  brief: Adds a spell to the charm's action bar, assigning it to a specific slot with
    given activation state.
  description: The AddSpellToActionBar method integrates a specified spell into the
    action bar of a charm (such as a pet or controlled unit) within World of Warcraft.
    It allows developers to dynamically assign spells to predefined slots on the charm's
    action bar, setting their active state and optionally specifying a preferred slot
    index. This is commonly used when creating or modifying AI behavior for summoned
    creatures or player-controlled pets. The method returns true if the spell was
    successfully added to the action bar; otherwise, it returns false, typically due
    to invalid parameters or full action bar capacity.
  parameters:
  - name: spellInfo
    description: Pointer to the SpellInfo structure representing the spell to be added.
      Must not be null and must correspond to a valid spell entry in the game's spell
      database.
  - name: newstate
    description: The active state to assign to the spell on the action bar, such as
      whether it is enabled or disabled. This affects how the spell behaves when triggered
      by the charm.
  - name: preferredSlot
    description: The desired slot index (0-119) where the spell should be placed on
      the action bar. If the slot is already occupied, the method may attempt to find
      an alternative or fail depending on implementation logic.
  returns: True if the spell was successfully added to the action bar at the specified
    or nearest available slot; false otherwise, which can occur due to invalid inputs,
    full action bar, or other internal constraints.
  examples:
  - title: Basic usage of AddSpellToActionBar
    code: "if (charmInfo->AddSpellToActionBar(spellInfo, ACTIVE_ENABLED, 0)) {\n \
      \   // Spell successfully added to slot 0\n} else {\n    // Failed to add spell\n\
      }"
    language: cpp
  - title: Adding a spell with specific activation state
    code: "SpellInfo* fireball = sSpellMgr->GetSpellInfo(133);\nif (fireball && charmInfo->AddSpellToActionBar(fireball,\
      \ ACTIVE_DISABLED, 5)) {\n    // Fireball spell added to slot 5 but disabled\n\
      }"
    language: cpp
  notes: This method is part of the CharmInfo class which manages the behavior and
    UI state of player-controlled creatures. The action bar slots range from 0 to
    119, matching standard WoW action bar layout. Implementation may vary based on
    whether the charm is a pet, guardian, or another type of controlled unit.
  warnings: Ensure that spellInfo points to a valid spell entry; passing null will
    likely result in undefined behavior or crashes. Also, be cautious about exceeding
    the maximum number of spells allowed per action bar, as this may lead to silent
    failures or inconsistent UI states.
  related:
  - RemoveSpellFromActionBar
  - GetSpellFromActionBar
  - SetActionBarSlotState
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T17:26:31.098501'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
