api:
  class: WorldSession
  method: HandleLootMoneyOpcode
  signature: void WorldSession::HandleLootMoneyOpcode(WorldPackets::Loot::LootMoney
    & packet)
documentation:
  brief: Processes the client's request to loot money from a corpse or container
  description: The HandleLootMoneyOpcode method handles the packet sent by the client
    when a player attempts to loot gold from a looting object such as a corpse or
    a locked container. This method verifies that the player has permission to loot
    the money, updates the player's inventory with the gold amount, and sends appropriate
    responses back to the client. It ensures proper game mechanics are followed, including
    checking for valid loot sources, player proximity, and loot ownership. The method
    is part of the core loot system in TrinityCore and integrates with the broader
    WorldSession handling infrastructure.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleLootMoneyOpcode(WorldPackets::Loot::LootMoney&\
      \ packet)\n{\n    // Process the loot money request\n    if (Player* player\
      \ = GetPlayer())\n    {\n        // Validate loot source and permissions\n \
      \       // Add gold to player's inventory\n        // Send loot update packets\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called from the main packet processing loop within
    WorldSession. It assumes that the packet has already been validated for basic
    structure and that the player is in a valid state to perform looting operations.
    The method may trigger additional network packets to update the client's UI with
    the new gold amount.
  warnings: Improper handling of this method can lead to gold duplication bugs or
    unauthorized loot access. Ensure that all loot source validation checks are properly
    implemented before adding gold to a player's inventory.
  related:
  - HandleLootOpcode
  - HandleLootReleaseOpcode
  - SendLootUpdate
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:43:19.301625'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
