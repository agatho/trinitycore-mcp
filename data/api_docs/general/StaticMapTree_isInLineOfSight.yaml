api:
  class: StaticMapTree
  method: isInLineOfSight
  signature: bool StaticMapTree::isInLineOfSight(const int & pos1, const int & pos2,
    ModelIgnoreFlags ignoreFlags) const
documentation:
  brief: Checks if there is a clear line of sight between two points in the static
    map tree, considering model ignore flags.
  description: The isInLineOfSight method determines whether a direct line can be
    drawn from one point to another within the static map tree without intersecting
    any obstructing geometry. This method is commonly used in World of Warcraft's
    TrinityCore to check visibility for spells, abilities, or NPC interactions. It
    evaluates the spatial relationship between two positions using precomputed static
    collision data. The method respects model ignore flags which allow certain models
    (like doors or interactive objects) to be ignored during the line-of-sight calculation.
    This is essential for accurate game mechanics such as spell targeting and AI behavior.
  parameters:
  - name: pos1
    description: The starting position coordinates represented as an integer identifier,
      typically referencing a specific point in the static map tree's spatial structure.
  - name: pos2
    description: The ending position coordinates represented as an integer identifier,
      typically referencing a specific point in the static map tree's spatial structure.
  - name: ignoreFlags
    description: A bitmask of ModelIgnoreFlags that specifies which types of models
      should be ignored during the line-of-sight check. This allows for selective
      exclusion of certain geometry like doors or interactive objects from obstruction
      calculations.
  returns: Returns true if a clear line of sight exists between pos1 and pos2, considering
    the specified ignore flags; otherwise returns false if an obstruction is detected.
  examples:
  - title: Basic Line-of-Sight Check
    code: "bool hasLOS = mapTree.isInLineOfSight(1001, 1005, MODEL_IGNORE_NONE);\n\
      if (hasLOS) {\n    // Perform action that requires line of sight\n}"
    language: cpp
  - title: Line-of-Sight Check with Door Ignored
    code: "ModelIgnoreFlags ignoreFlags = MODEL_IGNORE_DOOR;\nbool hasLOS = mapTree.isInLineOfSight(2001,\
      \ 2003, ignoreFlags);\nif (hasLOS) {\n    // Spell or ability can be cast through\
      \ door\n}"
    language: cpp
  notes: This method relies on precomputed static collision data stored in the StaticMapTree.
    It is optimized for performance by using spatial partitioning and bounding volume
    hierarchies. The integer identifiers (pos1, pos2) are typically internal indices
    used by the map tree structure rather than direct world coordinates.
  warnings: The method assumes that the position identifiers passed are valid and
    exist within the static map tree's data structure. Invalid identifiers may result
    in undefined behavior or incorrect results. Performance degrades if many ignore
    flags are set, as more complex intersection tests are required.
  related:
  - getArea
  - getHeight
  - isInLineOfSight
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T01:44:10.997783'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
