api:
  class: EscortAI
  method: SetDespawnAtEnd
  signature: void EscortAI::SetDespawnAtEnd(bool despawn)
documentation:
  brief: Sets whether the escort AI should despawn when reaching the end of the path.
  description: The SetDespawnAtEnd method configures the behavior of an EscortAI instance
    regarding its destruction upon completing the assigned escort path. When enabled
    (despawn = true), the AI will automatically remove itself from the game world
    once it reaches the final point of the escort route. This is commonly used for
    quest-related NPCs that are meant to disappear after guiding the player to a destination.
    The method does not immediately despawn the AI; instead, it sets an internal flag
    that is checked during the AI's update cycle. If disabled (despawn = false), the
    NPC will remain in the world even after completing the escort path.
  parameters:
  - name: despawn
    description: Boolean value indicating whether to despawn the AI upon reaching
      the end of the escort path. True enables despawning, false disables it.
  returns: null
  examples:
  - title: Enable Despawning at End
    code: "void OnQuestAccept(Player* player, Quest const* quest) override\n{\n  \
      \  if (quest->GetQuestId() == 12345)\n    {\n        // Start escorting the\
      \ player\n        Start(false, true, player->GetGUID());\n        // Enable\
      \ despawning at end\n        SetDespawnAtEnd(true);\n    }\n}"
    language: cpp
  - title: Disable Despawning at End
    code: "void OnQuestAccept(Player* player, Quest const* quest) override\n{\n  \
      \  if (quest->GetQuestId() == 12346)\n    {\n        // Start escorting the\
      \ player\n        Start(false, true, player->GetGUID());\n        // Disable\
      \ despawning at end\n        SetDespawnAtEnd(false);\n    }\n}"
    language: cpp
  notes: This method only affects the behavior of the EscortAI when it reaches the
    final point in its assigned path. It does not influence other aspects of the AI's
    functionality such as combat or movement logic. The flag set by this method is
    typically checked during the AI's UpdateAI() function, so changes take effect
    on the next update cycle.
  warnings: Setting despawn to true will cause the NPC to be removed from the world
    immediately upon reaching the end of the path, which may prevent further interaction
    or quest progression if not handled properly. Ensure that all necessary actions
    are completed before enabling this behavior.
  related:
  - SetDespawnAtFar
  - SetDespawnAtHome
  - Start
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T07:54:19.790447'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
