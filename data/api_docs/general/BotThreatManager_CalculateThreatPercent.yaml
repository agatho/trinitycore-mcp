api:
  class: BotThreatManager
  method: CalculateThreatPercent
  signature: float BotThreatManager::CalculateThreatPercent(Unit * target) const
documentation:
  brief: Calculates and returns the threat percentage of the bot relative to the specified
    target unit.
  description: The CalculateThreatPercent method determines the level of threat that
    a bot has generated against a specific target unit. This value represents how
    much threat the bot has accumulated compared to the maximum possible threat in
    the current combat situation, typically expressed as a percentage. The method
    is used internally by the bot's AI system to make decisions about targeting, threat
    management, and overall combat behavior. It considers factors such as the bot's
    damage output, healing done, and other threat-generating actions towards the target.
    This calculation is crucial for maintaining proper aggro management and ensuring
    that the bot behaves realistically within the game's threat mechanics.
  parameters: []
  returns: A float value representing the threat percentage of the bot relative to
    the specified target. The value typically ranges from 0.0 (no threat) to 100.0
    (maximum threat). A value of 0.0 indicates that the bot has no threat against
    the target, while 100.0 means the bot holds maximum threat and is likely the primary
    target of the mob.
  examples:
  - title: Basic Usage
    code: "float threatPercent = botThreatManager->CalculateThreatPercent(targetUnit);\n\
      if (threatPercent > 80.0f)\n{\n    // Bot has high threat, consider switching\
      \ targets\n}"
    language: cpp
  - title: Using Threat Percentage for AI Decision Making
    code: "Unit* target = bot->GetVictim();\nif (target)\n{\n    float threatPercent\
      \ = botThreatManager->CalculateThreatPercent(target);\n    if (threatPercent\
      \ < 30.0f && bot->GetHealthPct() > 20.0f)\n    {\n        // Low threat and\
      \ healthy, consider attacking another target\n        bot->AttackStart(otherTarget);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called during combat updates to dynamically assess
    the bot's threat level. The calculation may take into account various factors
    such as damage dealt, healing performed, and the current threat table for the
    target. The method is const, meaning it does not modify any internal state of
    the BotThreatManager object.
  warnings: The method assumes that a valid target unit exists and that combat is
    active. Calling this method outside of combat or with a null target may lead to
    undefined behavior or incorrect results. Additionally, threat percentages can
    fluctuate rapidly during combat, so frequent calls should be made with consideration
    for performance impact.
  related:
  - GetThreat
  - AddThreat
  - ClearThreat
  - IsTargetThreatening
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T10:34:34.427234'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
