api:
  class: Battlefield
  method: OnBattleEnd
  signature: void Battlefield::OnBattleEnd(bool param0)
documentation:
  brief: Handles the end of a battlefield battle, processing rewards and cleanup
  description: The OnBattleEnd method is called when a Battlefield battle concludes.
    This method processes the finalization of the battle including awarding rewards
    to victorious players, updating player statistics, cleaning up battlefield resources,
    and transitioning the battlefield state. The method takes a boolean parameter
    indicating whether the battle was won by the alliance or horde, which determines
    reward distribution and victory conditions. This method is typically invoked internally
    by the TrinityCore framework when a battlefield reaches its conclusion based on
    game rules such as capturing objectives or defeating all opponents.
  parameters:
  - name: param0
    description: Boolean flag indicating if the battle was won (true) or lost (false).
      This determines which faction receives rewards and how victory conditions are
      processed.
  returns: null
  examples:
  - title: Basic Usage in Battlefield Implementation
    code: "void MyBattlefield::OnBattleEnd(bool won)\n{\n    if (won)\n    {\n   \
      \     // Process alliance victory rewards\n        ProcessVictoryRewards(ALLIANCE);\n\
      \    }\n    else\n    {\n        // Process horde victory rewards\n        ProcessVictoryRewards(HORDE);\n\
      \    }\n    // Cleanup battlefield resources\n    CleanupBattlefield();\n}"
    language: cpp
  - title: Override in Custom Battlefield Class
    code: "class WintergraspBattlefield : public Battlefield\n{\npublic:\n    void\
      \ OnBattleEnd(bool victory) override\n    {\n        // Call base implementation\n\
      \        Battlefield::OnBattleEnd(victory);\n        \n        // Additional\
      \ Wintergrasp-specific logic\n        if (victory)\n        {\n            //\
      \ Award Wintergrasp specific rewards\n            AwardWintergraspRewards();\n\
      \            // Update world state for victory\n            UpdateWorldState(WORLDSTATE_WINTERGRASP_VICTORY,\
      \ 1);\n        }\n        else\n        {\n            // Handle defeat logic\n\
      \            UpdateWorldState(WORLDSTATE_WINTERGRASP_DEFEAT, 1);\n        }\n\
      \    }\n};"
    language: cpp
  notes: This method is typically invoked by the battlefield system when battle conditions
    are met. Developers should ensure that any custom implementations properly call
    the base class implementation to maintain core functionality. The method may be
    called from different threads depending on how the battlefield system handles
    concurrent operations.
  warnings: Do not call this method directly unless you understand the complete battlefield
    state management system. Improper use can lead to inconsistent game states, reward
    distribution errors, or resource leaks. Ensure that all cleanup operations are
    performed before calling this method to prevent memory corruption.
  related:
  - OnBattleStart
  - UpdateBattlefield
  - ProcessVictoryRewards
  - CleanupBattlefield
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T20:38:19.302989'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
