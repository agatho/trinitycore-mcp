api:
  class: MarksmanshipHunterRefactored
  method: GetOptimalAspect
  signature: uint32 MarksmanshipHunterRefactored::GetOptimalAspect() const
documentation:
  brief: Determines and returns the optimal aspect for a marksmanship hunter based
    on current combat state and abilities.
  description: The GetOptimalAspect method evaluates the current state of a marksmanship
    hunter, including their active buffs, debuffs, target conditions, and available
    aspects, to determine which aspect provides the greatest benefit in the given
    situation. This method is typically used by AI logic or decision-making systems
    within the TrinityCore framework to dynamically select the most effective aspect
    for a hunter's current combat scenario. The method does not modify any internal
    state but rather computes and returns a value representing the best aspect to
    apply. It considers factors such as target type, threat level, duration of existing
    effects, and the hunter's current resource availability.
  parameters: []
  returns: Returns a uint32 value representing the spell ID of the optimal aspect
    to apply. Common return values include the IDs for aspects like Aspect of the
    Viper (spell ID 19506), Aspect of the Hawk (spell ID 13165), or other applicable
    hunter aspects. A return value of 0 may indicate no suitable aspect is available
    or that the hunter is in a state where applying an aspect would be counterproductive.
  examples:
  - title: Basic usage in AI decision logic
    code: "uint32 optimalAspect = hunter->GetOptimalAspect();\nif (optimalAspect !=\
      \ 0)\n{\n    // Apply the optimal aspect to the hunter\n    hunter->CastSpell(hunter,\
      \ optimalAspect, true);\n}"
    language: cpp
  - title: Using return value for logging or debugging
    code: 'uint32 aspect = hunter->GetOptimalAspect();

      TC_LOG_DEBUG("entities.hunter", "Optimal aspect for hunter {} is spell ID {}",
      hunter->GetGUID().ToString(), aspect);'
    language: cpp
  notes: This method should only be called during combat or when the hunter's state
    is fully initialized. The result may vary depending on the current target, environmental
    factors, and the hunter's current buffs/debuffs. This function is typically part
    of a larger AI system that evaluates multiple factors before making decisions.
  warnings: Do not assume the returned aspect ID will always be valid or applicable;
    ensure proper checks are in place to handle edge cases where no optimal aspect
    exists. The method may return 0 if no suitable aspect can be determined, which
    should be handled gracefully by calling code.
  related:
  - GetHunterPet
  - HasAura
  - CastSpell
  - GetTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T08:37:52.310241'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
