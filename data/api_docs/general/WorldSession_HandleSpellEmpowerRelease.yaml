api:
  class: WorldSession
  method: HandleSpellEmpowerRelease
  signature: void WorldSession::HandleSpellEmpowerRelease(const WorldPackets::Spells::SpellEmpowerRelease
    & spellEmpowerRelease)
documentation:
  brief: Handles the client's request to release an empowered spell, typically used
    when a player cancels or finishes casting an empowered spell.
  description: The HandleSpellEmpowerRelease method processes incoming packets from
    the client indicating that a player has released or canceled an empowered spell.
    This function is part of the spell handling system in TrinityCore and is responsible
    for managing the state transitions of empowered spells, such as those used by
    classes like Shadow Priests or other abilities that can be enhanced through empowerment
    mechanics. The method likely updates the player's spell state, removes any temporary
    effects associated with the empowered spell, and ensures proper synchronization
    between client and server states. It may also trigger cleanup routines for resources
    consumed during the empowerment process.
  parameters:
  - name: spellEmpowerRelease
    description: A packet containing information about the spell empowerment release
      request, including the spell ID and target data.
  returns: null
  examples:
  - title: Basic usage in WorldSession handler
    code: "void WorldSession::HandleSpellEmpowerRelease(const WorldPackets::Spells::SpellEmpowerRelease\
      \ & spellEmpowerRelease)\n{\n    // Process the release of an empowered spell\n\
      \    Player* player = GetPlayer();\n    if (!player)\n        return;\n\n  \
      \  uint32 spellId = spellEmpowerRelease.SpellID;\n    // Logic to handle spell\
      \ empowerment release\n    // e.g., remove empowerment effects, reset cooldowns\n\
      }"
    language: cpp
  notes: This method is typically invoked as part of the WorldSession's packet handling
    mechanism. It should be called only when a valid player session exists and the
    spell being released is currently in an empowered state. The implementation may
    involve interaction with the SpellMgr and Player::RemoveAura methods to properly
    clean up empowered effects.
  warnings: Improper handling of this method can lead to client-server desynchronization,
    especially if empowerment effects are not correctly removed or if cooldowns are
    not properly reset. Ensure that all related spell effects are cleaned up to prevent
    lingering buffs or visual artifacts.
  related:
  - HandleSpellCastRequest
  - HandleSpellCancel
  - Player::RemoveAura
  - SpellMgr::GetSpellInfo
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T20:29:10.576240'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
