api:
  class: VendorInteraction
  method: BuyItem
  signature: InteractionResult VendorInteraction::BuyItem(Player * bot, Creature *
    vendor, uint32 itemId, uint32 count)
documentation:
  brief: Attempts to purchase an item from a vendor creature using the specified player
    and item details.
  description: The BuyItem method facilitates the process of purchasing items from
    NPC vendors within the TrinityCore framework. It handles the interaction between
    a player character and a vendor creature, validating the transaction based on
    available currency, item availability, and player requirements. The method ensures
    proper inventory management and updates the player's gold balance upon successful
    purchase. This function is typically used in AI scripts or automated systems where
    bots or NPCs need to interact with vendors programmatically.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the character attempting
      to make the purchase.
  - name: vendor
    description: Pointer to the Creature object representing the vendor from whom
      the item is being purchased.
  - name: itemId
    description: Unique identifier of the item to be purchased from the vendor's inventory.
  - name: count
    description: Number of items to purchase (default is 1 if not specified).
  returns: Returns an InteractionResult enum indicating whether the transaction was
    successful or failed, along with any relevant status information such as insufficient
    funds or item unavailability.
  examples:
  - title: Basic Item Purchase
    code: "Player* player = ...;\nCreature* vendor = ...;\nInteractionResult result\
      \ = VendorInteraction::BuyItem(player, vendor, 12345, 1);\nif (result == InteractionResult::SUCCESS)\
      \ {\n    // Handle successful purchase\n}"
    language: cpp
  - title: Bulk Purchase with Error Handling
    code: "Player* player = ...;\nCreature* vendor = ...;\nuint32 itemId = 67890;\n\
      uint32 quantity = 5;\nInteractionResult result = VendorInteraction::BuyItem(player,\
      \ vendor, itemId, quantity);\nswitch (result) {\n    case InteractionResult::SUCCESS:\n\
      \        // Item purchased successfully\n        break;\n    case InteractionResult::INSUFFICIENT_FUNDS:\n\
      \        // Handle insufficient gold\n        break;\n    case InteractionResult::ITEM_NOT_FOUND:\n\
      \        // Handle invalid item ID\n        break;\n    default:\n        //\
      \ Other failure cases\n        break;\n}"
    language: cpp
  notes: This method internally checks for player level requirements, item availability
    in vendor's inventory, and sufficient gold balance before proceeding with the
    transaction. It also manages the update of both player's inventory and currency.
  warnings: Ensure that the provided Player and Creature pointers are valid and not
    null to prevent runtime errors. Also, be aware that this method does not perform
    any checks for item stacking or maximum inventory capacity beyond basic validation.
  related:
  - SellItem
  - GetVendorItem
  - CheckItemAvailability
metadata:
  confidence: 0.92
  generated_at: '2025-11-08T20:55:58.898619'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
