api:
  class: WorldSession
  method: HandleSetPartyAssignment
  signature: void WorldSession::HandleSetPartyAssignment(WorldPackets::Party::SetPartyAssignment
    & packet)
documentation:
  brief: Processes a packet to assign or remove a role within a party
  description: The HandleSetPartyAssignment method handles incoming packets from players
    that request to set or clear their party assignment, typically used for designating
    roles such as main tank, main healer, or loot master. This method is part of the
    party management system in TrinityCore and ensures that party leader permissions
    are properly enforced when assigning roles. The packet contains information about
    which player is making the request and what role they want to assign or remove
    from themselves or another party member.
  parameters: []
  returns: null
  examples:
  - title: Basic Party Assignment
    code: "void WorldSession::HandleSetPartyAssignment(WorldPackets::Party::SetPartyAssignment&\
      \ packet)\n{\n    // Process the assignment request\n    if (packet.Role ==\
      \ PARTY_ROLE_MAIN_TANK)\n        player->SetRole(PARTY_ROLE_MAIN_TANK);\n  \
      \  else if (packet.Role == PARTY_ROLE_MAIN_HEALER)\n        player->SetRole(PARTY_ROLE_MAIN_HEALER);\n\
      }"
    language: cpp
  notes: This method is typically invoked when a player clicks on the 'Assign Role'
    button in the party interface. It validates that the requesting player has sufficient
    permissions (i.e., is the party leader or assistant) before allowing role assignment
    changes.
  warnings: Improper validation of party leadership status can lead to unauthorized
    role assignments, potentially causing gameplay imbalance or exploits. Ensure all
    permission checks are enforced properly.
  related:
  - HandlePartyCommand
  - SendPartyAssignment
  - IsPartyLeader
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T19:17:07.760334'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
