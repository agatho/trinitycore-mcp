api:
  class: ProtectionWarriorRefactored
  method: ShouldUseAvatar
  signature: bool ProtectionWarriorRefactored::ShouldUseAvatar() const
documentation:
  brief: Determines whether the Protection Warrior should activate the Avatar ability
    based on current combat state and resource management.
  description: This method evaluates various conditions to decide if the Protection
    Warrior should use the Avatar ability. It considers factors such as threat level,
    available rage, target health percentage, and other relevant combat mechanics.
    The method is typically used within the AI decision-making process to optimize
    ability usage for maximum defensive effectiveness and threat generation. This
    check ensures that Avatar is only used when it provides meaningful benefit in
    the current situation, avoiding unnecessary resource expenditure.
  parameters: []
  returns: Returns true if the conditions are met to justify using Avatar; otherwise
    returns false. The decision is based on combat state analysis including rage levels,
    threat generation needs, and target vulnerability.
  examples:
  - title: Basic Usage in AI Logic
    code: "if (player->GetAI()->ShouldUseAvatar()) {\n    player->CastSpell(target,\
      \ AVATAR_SPELL_ID, true);\n}"
    language: cpp
  - title: Integration with Combat Decision Making
    code: "class MyProtectionWarriorAI : public ScriptedAI {\npublic:\n    void UpdateAI(uint32\
      \ diff) override {\n        if (me->GetVictim() && ShouldUseAvatar()) {\n  \
      \          DoCast(SPELL_AVATAR);\n        }\n        // ... other AI logic\n\
      \    }\n};"
    language: cpp
  notes: This method likely incorporates game-specific mechanics such as rage thresholds,
    threat requirements, and target health states. It's designed to be called frequently
    during combat updates to make real-time decisions about ability usage. The implementation
    may vary based on the specific version of TrinityCore and patch level.
  warnings: The method should only be called when the warrior is in combat and has
    a valid target. Calling this outside of combat scenarios may produce undefined
    behavior or incorrect results. Ensure proper state validation before using the
    return value for spell casting decisions.
  related:
  - GetRage
  - GetThreat
  - GetVictim
  - IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T05:03:30.805438'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
