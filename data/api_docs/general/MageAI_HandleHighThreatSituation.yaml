api:
  class: MageAI
  method: HandleHighThreatSituation
  signature: void MageAI::HandleHighThreatSituation()
documentation:
  brief: Manages high threat situations for Mage AI by adjusting spell casting and
    movement behavior to reduce aggro.
  description: The HandleHighThreatSituation method is designed to manage when a Mage
    AI unit finds itself in a high threat state, typically triggered when the unit's
    threat level exceeds a certain threshold. This method modifies the AI's behavior
    to mitigate incoming damage and reduce threat accumulation. It may involve switching
    to defensive spells, moving away from the target, or using abilities that lower
    threat. The implementation likely includes checks for spell availability, mana
    levels, and positioning relative to the threat source. This method is part of
    the MageAI class's core threat management system and is called automatically when
    threat conditions are met.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void MageAI::UpdateAI(const uint32 diff)\n{\n    if (me->GetThreatManager().GetThreat(me->GetVictim())\
      \ > HIGH_THREAT_THRESHOLD)\n    {\n        HandleHighThreatSituation();\n  \
      \  }\n}"
    language: cpp
  notes: This method is typically invoked internally by the AI system when threat
    levels are detected. It assumes that the MageAI instance has a valid target and
    that threat management logic is enabled. The method may perform movement adjustments,
    spell selection, and cooldown checks to ensure optimal threat reduction.
  warnings: Improper implementation of this method could lead to unexpected behavior
    such as casting spells out of range or failing to reduce threat effectively. Ensure
    that all spell checks are performed before execution to avoid errors.
  related:
  - HandleLowThreatSituation
  - UpdateAI
  - CastSpellOnTarget
  - MoveAwayFromTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T00:53:43.064087'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
