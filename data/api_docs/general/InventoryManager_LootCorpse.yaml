api:
  class: InventoryManager
  method: LootCorpse
  signature: bool InventoryManager::LootCorpse(Creature * creature)
documentation:
  brief: Initiates the looting process for a creature corpse, distributing loot to
    eligible players.
  description: The LootCorpse method handles the core logic of distributing loot from
    a defeated creature to nearby players. It evaluates the creature's loot template,
    checks player eligibility based on proximity and group membership, and distributes
    items according to the loot rules defined in the game. This method is typically
    invoked when a creature dies and its corpse becomes available for looting. The
    method ensures that only valid players within the appropriate loot distance can
    receive items, and respects group looting rules such as round-robin or free-for-all
    distribution depending on the loot mode.
  parameters: []
  returns: Returns true if the looting process was successfully initiated and loot
    was distributed to at least one player; returns false if no loot could be distributed
    or if the creature's corpse is invalid.
  examples:
  - title: Basic usage in creature death handler
    code: "void Creature::OnDeath()\n{\n    if (GetLoot())\n    {\n        // Ensure\
      \ loot is properly initialized\n        GetLoot()->Clear();\n        // Begin\
      \ looting process for the corpse\n        if (GetMap()->GetPlayerLootManager().LootCorpse(this))\n\
      \        {\n            // Loot successfully distributed\n        }\n    }\n\
      }"
    language: cpp
  notes: This method relies on the creature's loot template being properly initialized
    and the map's player loot manager being active. It does not directly handle item
    spawning or database updates; those are managed by the underlying loot system.
    The method assumes that the creature's corpse is already created and accessible.
  warnings: Do not call this method on creatures without valid loot templates, as
    it may lead to undefined behavior. Ensure that the map's player loot manager is
    properly initialized before calling this method, especially in custom scripts
    or modules.
  related:
  - GetLoot
  - Player::AddItemToLoot
  - LootManager::FillLoot
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T04:46:14.925482'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
