api:
  class: ActionPriorityHelper
  method: CreateEmergencyDefensive
  signature: PrioritizedAction ActionPriorityHelper::CreateEmergencyDefensive(uint32
    spellId, float threatLevel)
documentation:
  brief: Creates a prioritized defensive action for emergency situations based on
    spell ID and threat level.
  description: The CreateEmergencyDefensive method generates a PrioritizedAction object
    designed to handle urgent defensive scenarios in World of Warcraft's AI system.
    This method is typically used by NPCs or player-controlled characters when immediate
    defensive measures are required, such as casting a protective spell or activating
    a defensive ability. The action's priority is determined by the provided threat
    level, ensuring that higher threats trigger more urgent defensive responses. The
    method leverages the specified spell ID to define which defensive ability should
    be executed, making it flexible for various defensive mechanics within the TrinityCore
    framework.
  parameters:
  - name: spellId
    description: The unique identifier of the defensive spell or ability to be used
      in the emergency situation. This value must correspond to a valid spell entry
      in the game's database.
  - name: threatLevel
    description: A float value representing the current threat level that determines
      the urgency and priority of the defensive action. Higher values typically result
      in higher-priority actions.
  returns: Returns a PrioritizedAction object containing the configured defensive
    action with appropriate priority settings based on the provided spell ID and threat
    level.
  examples:
  - title: Basic Usage
    code: PrioritizedAction action = helper.CreateEmergencyDefensive(47509, 10.0f);
      // Cast Divine Shield with high threat
    language: cpp
  - title: Dynamic Threat Handling
    code: 'uint32 spellId = 642; // Divine Shield

      float threat = player->GetThreatManager().GetHighestThreat();

      PrioritizedAction action = helper.CreateEmergencyDefensive(spellId, threat);'
    language: cpp
  notes: This method is part of the ActionPriorityHelper class and should be used
    within the context of AI decision-making loops. The spell ID must reference a
    valid defensive ability that can be cast immediately without requiring complex
    preconditions. Performance considerations include avoiding frequent calls during
    high-frequency AI updates, as each call may involve database lookups or internal
    state checks.
  warnings: Ensure that the provided spellId corresponds to a defensive spell that
    is appropriate for the character's class and level. Using an invalid spell ID
    may result in undefined behavior or failed action execution. This method does
    not validate whether the spell can actually be cast at the current moment, so
    additional checks should be performed before executing the returned action.
  related:
  - CreateOffensiveAction
  - CreateUtilityAction
  - GetActionPriority
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T14:24:30.421923'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
