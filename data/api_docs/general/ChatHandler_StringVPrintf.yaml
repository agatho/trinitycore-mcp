api:
  class: ChatHandler
  method: StringVPrintf
  signature: int ChatHandler::StringVPrintf(int messageFormat, int messageFormatArgs)
documentation:
  brief: Formats a message string using a format identifier and arguments, returning
    the number of characters written.
  description: The StringVPrintf method in the ChatHandler class is used to format
    a message string according to a specified format identifier and a set of arguments.
    It performs variable argument formatting similar to printf-style functions but
    within the context of TrinityCore's chat system. This method is typically used
    internally by the server to generate localized or parameterized messages for players,
    such as in-game notifications, command responses, or system messages. The method
    takes a format identifier (messageFormat) which refers to a predefined message
    template and an argument list (messageFormatArgs) that provides values to fill
    into the placeholders within the format string. It returns the number of characters
    written to the output buffer, allowing for efficient string handling and potential
    overflow checking.
  parameters:
  - name: messageFormat
    description: An integer identifier representing a predefined message format template
      stored in the server's localization system. This typically corresponds to an
      index or key in a message table that defines how the final string should be
      structured with placeholders for arguments.
  - name: messageFormatArgs
    description: An integer argument list used as parameters to fill into the placeholders
      defined in the message format template. These arguments are typically values
      such as player names, item IDs, or numerical data that will be inserted into
      the formatted string.
  returns: Returns an integer representing the number of characters successfully written
    to the output buffer during formatting. A negative value may indicate an error
    in formatting or invalid input parameters.
  examples:
  - title: Basic usage for formatting a chat message
    code: 'int charsWritten = handler->StringVPrintf(1005, 42); // Format message
      with ID 1005 using argument 42

      printf("Formatted message length: %d\n", charsWritten);'
    language: cpp
  - title: Using StringVPrintf to generate a player-specific notification
    code: "uint32 playerId = player->GetGUID().GetCounter();\nint result = handler->StringVPrintf(2010,\
      \ playerId);\nif (result > 0)\n{\n    // Send the formatted message to the player\n\
      \    handler->PSendSysMessage(\"Player with ID %u has logged in.\", playerId);\n\
      }"
    language: cpp
  notes: This method is part of TrinityCore's internal chat handling system and relies
    on localization tables for message formatting. Developers should be aware that
    the format identifiers must correspond to valid entries in the server's message
    database or localization files. The method may perform internal buffer management,
    so it's important not to rely on fixed-size buffers when using this function.
  warnings: Incorrect use of messageFormat or messageFormatArgs can lead to undefined
    behavior or crashes. Ensure that all format identifiers are valid and that arguments
    match the expected types defined in the corresponding message templates. Do not
    pass invalid or uninitialized values as parameters.
  related:
  - PSendSysMessage
  - SendSysMessage
  - SendGlobalSysMessage
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T10:01:36.252407'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
