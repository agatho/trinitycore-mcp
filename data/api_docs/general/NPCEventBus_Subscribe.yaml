api:
  class: NPCEventBus
  method: Subscribe
  signature: void NPCEventBus::Subscribe(BotAI * subscriber, const int & types)
documentation:
  brief: Registers a BotAI subscriber to receive notifications for specified NPC event
    types.
  description: The Subscribe method allows a BotAI instance to register itself with
    the NPCEventBus to receive notifications about specific types of NPC events. This
    mechanism enables AI scripts to react to various in-game events such as creature
    spawns, deaths, combat states, or other relevant occurrences. The method takes
    a pointer to the BotAI subscriber and a bitmask representing the event types the
    subscriber wishes to listen for. Once subscribed, the BotAI will be notified whenever
    matching events occur within the NPCEventBus system. This is essential for implementing
    dynamic AI behaviors that respond to environmental changes in the game world.
  parameters:
  - name: subscriber
    description: Pointer to the BotAI instance that wants to subscribe to NPC events.
      Must be a valid, initialized BotAI object. The subscriber will receive event
      notifications through its callback methods.
  - name: types
    description: Integer bitmask specifying which types of NPC events the subscriber
      wishes to receive. Each bit represents a different event type (e.g., spawn,
      death, combat). Valid values are defined by event type constants in the NPCEventBus
      system. Multiple event types can be combined using bitwise OR operations.
  returns: null
  examples:
  - title: Basic Subscription Example
    code: 'BotAI* myBot = new BotAI();

      int eventTypes = NPC_EVENT_SPAWN | NPC_EVENT_DEATH;

      NPCEventBus::Instance()->Subscribe(myBot, eventTypes);'
    language: cpp
  - title: Advanced Subscription with All Event Types
    code: 'BotAI* advancedBot = GetPlayerBot();

      int allEvents = NPC_EVENT_SPAWN | NPC_EVENT_DEATH | NPC_EVENT_COMBAT | NPC_EVENT_LOOT;

      NPCEventBus::Instance()->Subscribe(advancedBot, allEvents);'
    language: cpp
  notes: The subscription is persistent until explicitly unsubscribed or the subscriber
    is destroyed. The NPCEventBus maintains a list of active subscribers and their
    event type masks. Event delivery is handled asynchronously to prevent blocking
    the main game loop. Ensure that BotAI instances properly implement event handling
    callbacks to avoid missing notifications.
  warnings: Do not subscribe to events without implementing corresponding handler
    methods in your BotAI class, as this may result in missed events or undefined
    behavior. Be cautious with high-frequency event types as they can impact performance
    if not handled efficiently. Avoid subscribing multiple times with the same subscriber
    and event mask, as this may cause duplicate notifications.
  related:
  - Unsubscribe
  - Publish
  - GetInstance
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T08:03:37.612686'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
