api:
  class: FollowMovementGenerator
  method: Finalize
  signature: void FollowMovementGenerator::Finalize(Unit * param0, bool param1, bool
    param2)
documentation:
  brief: Completes the follow movement behavior for a unit, cleaning up any associated
    resources or states.
  description: The Finalize method in FollowMovementGenerator is responsible for completing
    the follow movement behavior of a unit. It ensures that all necessary cleanup
    operations are performed when the movement generator is no longer active or has
    been interrupted. This typically involves releasing references to the target unit,
    resetting internal state variables, and notifying the AI system that the follow
    movement has ended. The method may also handle any finalization tasks related
    to pathfinding or positioning adjustments required for the unit's current state.
  parameters:
  - name: param0
    description: Pointer to the Unit object whose follow movement is being finalized.
      This represents the unit that was following another target.
  - name: param1
    description: Boolean flag indicating whether the movement should be stopped immediately.
      If true, any ongoing path calculations or movement updates are cancelled.
  - name: param2
    description: Boolean flag indicating if the finalization should also reset the
      unit's movement state. When true, the unit's movement flags and AI state are
      restored to their pre-follow conditions.
  returns: null
  examples:
  - title: Basic Finalize Usage
    code: "void example() {\n    Unit* targetUnit = ...; // Some unit that was being\
      \ followed\n    FollowMovementGenerator* movementGen = new FollowMovementGenerator(targetUnit,\
      \ 5.0f);\n    // ... movement logic here ...\n    movementGen->Finalize(targetUnit,\
      \ true, true);\n    delete movementGen;\n}"
    language: cpp
  - title: Advanced Finalize with Conditional Logic
    code: "void finalizeFollowMovement(Unit* follower, bool immediateStop, bool resetState)\
      \ {\n    if (!follower || !follower->GetMotionMaster())\n        return;\n \
      \   \n    MovementGenerator* currentGen = follower->GetMotionMaster()->GetCurrentMovementGenerator();\n\
      \    if (currentGen && currentGen->GetMovementGeneratorType() == FOLLOW_MOTION_TYPE)\
      \ {\n        FollowMovementGenerator* followGen = static_cast<FollowMovementGenerator*>(currentGen);\n\
      \        followGen->Finalize(follower, immediateStop, resetState);\n    }\n}"
    language: cpp
  notes: This method is typically called internally by the TrinityCore AI system when
    a unit's follow movement needs to be terminated. Developers should not call this
    directly unless implementing custom movement logic. The method assumes that the
    target unit and its motion master are valid and accessible.
  warnings: Calling Finalize on a unit that has already been finalized or is in an
    invalid state may lead to undefined behavior. Always ensure that the unit pointer
    is valid before calling this method, especially when dealing with units that might
    be destroyed during movement.
  related:
  - Initialize
  - Update
  - GetMovementGeneratorType
  - DoMove
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T04:37:32.054051'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
