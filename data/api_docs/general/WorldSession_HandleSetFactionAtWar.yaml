api:
  class: WorldSession
  method: HandleSetFactionAtWar
  signature: void WorldSession::HandleSetFactionAtWar(WorldPackets::Character::SetFactionAtWar
    & packet)
documentation:
  brief: Sets the at-war status for a specified faction in the player's reputation
    list.
  description: The HandleSetFactionAtWar method processes a client packet to set or
    unset the at-war status for a specific faction. This functionality allows players
    to toggle whether they consider a particular faction as hostile, which affects
    how the game treats interactions with members of that faction. The method updates
    the player's reputation state internally and ensures that the change is properly
    synchronized with the client. It typically follows a packet received from the
    client indicating the player's intent to modify their factional relationship status.
  parameters: []
  returns: null
  examples:
  - title: Basic usage of HandleSetFactionAtWar
    code: "void WorldSession::HandleSetFactionAtWar(WorldPackets::Character::SetFactionAtWar&\
      \ packet)\n{\n    // Process faction at war status change\n    Player* player\
      \ = GetPlayer();\n    if (!player)\n        return;\n    \n    FactionEntry\
      \ const* faction = sFactionStore.LookupEntry(packet.FactionID);\n    if (!faction)\n\
      \        return;\n    \n    player->SetFactionAtWar(faction->Index, packet.AtWar);\n\
      }"
    language: cpp
  notes: This method is part of the character reputation system and directly impacts
    how faction relationships are handled in-game. It should only be called after
    verifying that the player has permission to modify the specified faction's at-war
    status.
  warnings: Improper handling of faction changes may lead to incorrect behavior in
    quest interactions or NPC dialogues. Ensure proper validation of faction IDs before
    applying changes.
  related:
  - GetPlayer
  - SetFactionAtWar
  - SendSetFactionAtWar
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:18:52.175367'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
