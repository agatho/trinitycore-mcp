api:
  class: WorldSession
  method: GetCollectionMgr
  signature: CollectionMgr * WorldSession::GetCollectionMgr() const
documentation:
  brief: Returns the CollectionMgr instance associated with this session for managing
    player collections.
  description: The GetCollectionMgr method retrieves the CollectionMgr object linked
    to the current WorldSession. This manager handles all aspects of player collections,
    including achievements, toys, mounts, and other collectible items within the game.
    The returned pointer is valid for the lifetime of the session and should not be
    deleted by the caller. This method is typically used when accessing or modifying
    a player's collection data, such as checking if they have obtained a specific
    toy or mount.
  parameters: []
  returns: A pointer to the CollectionMgr instance associated with this WorldSession.
    Returns nullptr if the session has not been properly initialized or if there is
    no collection manager assigned to it.
  examples:
  - title: Check if player has a specific toy
    code: "if (WorldSession* session = player->GetSession()) {\n    CollectionMgr*\
      \ collectionMgr = session->GetCollectionMgr();\n    if (collectionMgr && collectionMgr->HasToy(12345))\
      \ {\n        // Player has the toy with entry ID 12345\n    }\n}"
    language: cpp
  - title: Access collection data for achievement tracking
    code: "WorldSession* session = player->GetSession();\nif (session) {\n    CollectionMgr*\
      \ mgr = session->GetCollectionMgr();\n    if (mgr) {\n        // Use mgr to\
      \ check achievements, mounts, etc.\n        uint32 collectedMounts = mgr->GetNumCollectedMounts();\n\
      \        // Process collected mounts\n    }\n}"
    language: cpp
  notes: The CollectionMgr instance returned by this method is tied to the session's
    lifetime and should be accessed only when the session is valid. It is thread-safe
    for read operations but modifications should be done carefully in the context
    of the game's main thread or appropriate synchronization mechanisms.
  warnings: Do not delete or modify the returned CollectionMgr pointer. Accessing
    this method on a null session may return a null pointer, so always validate the
    result before using it.
  related:
  - GetPlayer
  - GetAccountId
  - GetSecurity
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T19:59:46.737258'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
