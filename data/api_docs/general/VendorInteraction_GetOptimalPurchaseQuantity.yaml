api:
  class: VendorInteraction
  method: GetOptimalPurchaseQuantity
  signature: uint32 VendorInteraction::GetOptimalPurchaseQuantity(Player * bot, uint32
    itemId) const
documentation:
  brief: Calculates the optimal quantity of an item a bot should purchase from a vendor
    based on inventory space and item requirements.
  description: The GetOptimalPurchaseQuantity method determines how many units of
    a specific item a player bot can realistically buy from a vendor. It considers
    the player's current inventory capacity, the item's stack size limit, and any
    existing quantities of that item in the inventory. This method is essential for
    automated purchasing logic in bot scripts to avoid over-buying or under-buying
    items. The calculation ensures that bots make efficient purchases without wasting
    resources or exceeding inventory limits.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that will be purchasing
      the item. Must not be null.
  - name: itemId
    description: The unique identifier of the item to calculate purchase quantity
      for. Must correspond to a valid item in the game database.
  returns: Returns a uint32 value representing the maximum number of items that can
    be purchased. Returns 0 if the item cannot be purchased or if there is insufficient
    space.
  examples:
  - title: Basic Usage Example
    code: "uint32 quantity = vendorInteraction.GetOptimalPurchaseQuantity(bot, 12345);\n\
      if (quantity > 0)\n{\n    // Proceed with purchase\n    bot->BuyItemFromVendor(vendorGuid,\
      \ 12345, quantity);\n}"
    language: cpp
  - title: Advanced Usage with Multiple Items
    code: "std::vector<uint32> itemIds = {12345, 67890, 54321};\nfor (uint32 itemId\
      \ : itemIds)\n{\n    uint32 optimalQuantity = vendorInteraction.GetOptimalPurchaseQuantity(bot,\
      \ itemId);\n    if (optimalQuantity > 0)\n    {\n        bot->BuyItemFromVendor(vendorGuid,\
      \ itemId, optimalQuantity);\n    }\n}"
    language: cpp
  notes: This method internally checks the player's inventory capacity and item stack
    limits. It accounts for items that may already be present in the inventory to
    prevent over-stacking. The calculation is performed dynamically each time it's
    called, so performance should be considered when using it in loops or frequent
    calls.
  warnings: Ensure that the bot pointer and itemId are valid before calling this method.
    Passing a null bot pointer or an invalid item ID may result in undefined behavior.
    This method does not perform any validation on the vendor itself, so calling it
    with an invalid vendor context might lead to incorrect results.
  related:
  - BuyItemFromVendor
  - GetItemCount
  - CanAffordItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T14:02:16.009711'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
