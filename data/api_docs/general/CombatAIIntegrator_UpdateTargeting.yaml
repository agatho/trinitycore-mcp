api:
  class: CombatAIIntegrator
  method: UpdateTargeting
  signature: void CombatAIIntegrator::UpdateTargeting(uint32 diff)
documentation:
  brief: Updates the combat AI's target selection based on current threat and available
    targets.
  description: The UpdateTargeting method is responsible for managing the target selection
    logic within the CombatAIIntegrator class. It evaluates the current state of the
    AI's target, including threat levels, target validity, and combat conditions.
    This method is typically called during each AI update cycle to ensure that the
    creature maintains appropriate targeting behavior. The method considers factors
    such as target distance, threat generated by the AI, and whether the current target
    is still valid for engagement. It may also handle switching targets when a higher-priority
    target becomes available or when the current target is no longer viable.
  parameters:
  - name: diff
    description: The time elapsed since the last update in milliseconds. This value
      is used to determine how much time has passed for timing-based decisions such
      as target switching or threat recalculations.
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void CreatureAI::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n \
      \       return;\n    \n    m_combatAIIntegrator->UpdateTargeting(diff);\n  \
      \  \n    // Other AI logic...\n}"
    language: cpp
  - title: Integration with Custom Targeting Logic
    code: "void CombatAIIntegrator::UpdateTargeting(uint32 diff)\n{\n    if (!me->GetVictim())\n\
      \        return;\n    \n    // Check if current target is still valid\n    if\
      \ (!me->GetVictim()->IsAlive() || me->GetVictim()->HasUnitState(UNIT_STATE_UNATTACKABLE))\n\
      \    {\n        me->SelectNearestTarget();\n        return;\n    }\n    \n \
      \   // Update threat-based targeting logic here\n    // Implementation details\
      \ depend on specific AI requirements\n}"
    language: cpp
  notes: This method is typically invoked from within the creature's main AI update
    loop. It should not be called directly unless you're implementing custom AI behavior
    that requires explicit target management. The 'diff' parameter is crucial for
    time-based calculations and must accurately reflect the elapsed time since the
    last call.
  warnings: Improper handling of the 'diff' parameter can lead to incorrect timing
    in threat calculations or target switching behavior. Ensure that this method is
    only called when the AI is actually active and engaged in combat, as calling it
    during idle states may cause unexpected behavior.
  related:
  - UpdateVictim
  - SelectNearestTarget
  - GetVictim
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T04:39:06.331982'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
