api:
  class: CriteriaHandler
  method: UpdateCriteria
  signature: void CriteriaHandler::UpdateCriteria(const Criteria * criteria, uint64
    miscValue1, uint64 miscValue2, uint64 miscValue3, const WorldObject * ref, Player
    * referencePlayer)
documentation:
  brief: Updates a criteria entry based on provided miscellaneous values and reference
    objects.
  description: The UpdateCriteria method is responsible for updating player achievement
    criteria within the TrinityCore framework. It processes a given criteria object
    along with three miscellaneous values and a reference to either a WorldObject
    or Player, which are used to determine if the criteria should be progressed or
    completed. This method typically gets invoked when certain in-game events occur
    that may contribute to fulfilling criteria requirements such as killing creatures,
    collecting items, or reaching specific locations. The method does not return any
    value but modifies internal player data structures related to achievements and
    criteria tracking.
  parameters:
  - name: criteria
    description: Pointer to the Criteria object that defines what needs to be tracked
      and updated. This object contains information about the type of criterion being
      evaluated, required amounts, and associated quest or achievement IDs.
  - name: miscValue1
    description: First miscellaneous value used in evaluating the criteria. Its meaning
      depends on the specific criteria type; for example, it might represent a creature
      entry ID when tracking kills, or an item ID when tracking collections.
  - name: miscValue2
    description: Second miscellaneous value used in evaluating the criteria. Often
      represents additional context such as a zone ID, faction ID, or another identifier
      needed for complex criterion checks.
  - name: miscValue3
    description: Third miscellaneous value used in evaluating the criteria. Typically
      used for more advanced criterion types where multiple parameters are required
      to define completion conditions.
  - name: ref
    description: Pointer to a WorldObject that serves as a reference point or context
      for the criteria update. This could be a creature, game object, item, or any
      other world entity relevant to the criterion being updated.
  - name: referencePlayer
    description: Pointer to the Player who is associated with this criteria update.
      This player's progress will be modified according to the provided criteria and
      values. May be null if the update is not directly tied to a specific player.
  returns: null
  examples:
  - title: Updating Kill Criteria for a Specific Creature
    code: 'Criteria* crit = sObjectMgr->GetCriteria(12345);

      Player* player = ...;

      WorldObject* target = ...;

      uint64 creatureEntry = 1234;

      CriteriaHandler::UpdateCriteria(crit, creatureEntry, 0, 0, target, player);'
    language: cpp
  - title: Updating a Collection Criteria with Multiple Parameters
    code: 'Criteria* crit = sObjectMgr->GetCriteria(54321);

      Player* player = ...;

      WorldObject* item = ...;

      uint64 itemId = 9876;

      uint64 zoneId = 456;

      CriteriaHandler::UpdateCriteria(crit, itemId, zoneId, 0, item, player);'
    language: cpp
  notes: This method is part of the internal achievement and criterion tracking system
    in TrinityCore. It's commonly called from event handlers or other systems that
    detect progress towards criteria completion. The method internally checks if the
    provided values match the expected pattern for the given criteria type, and may
    trigger updates to player progress, achievements, and related notifications.
  warnings: Incorrect parameter values can lead to incorrect criterion progression
    or even invalid data states. Ensure that miscValue parameters are correctly set
    according to the criteria definition. Passing null pointers for ref or referencePlayer
    may cause undefined behavior or errors depending on how the criteria is defined.
  related:
  - GetCriteria
  - CheckCriteriaProgress
  - CompleteCriteria
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T08:57:30.706096'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
