api:
  class: CriteriaHandler
  method: UpdateCriteria
  signature: void CriteriaHandler::UpdateCriteria(int type, uint64 miscValue1, uint64
    miscValue2, uint64 miscValue3, const WorldObject * ref, Player * referencePlayer)
documentation:
  brief: Updates player criteria based on specified type and miscellaneous values.
  description: The UpdateCriteria method is responsible for advancing or modifying
    player achievement criteria within the TrinityCore framework. It takes a criteria
    type and associated miscellaneous values to determine how to update the player's
    progress toward specific achievements. The method may be invoked when certain
    in-game events occur, such as killing a creature, collecting items, or completing
    quests. This function interacts with the player's criteria data stored in their
    database record and updates it accordingly. It requires a reference object and
    potentially a player reference for context-dependent criteria evaluation.
  parameters:
  - name: type
    description: The type of criteria to update, typically representing an achievement
      criterion category (e.g., kill creature, collect item). Valid values are defined
      by the game's criteria system.
  - name: miscValue1
    description: First miscellaneous value used for criteria evaluation. Its meaning
      depends on the criteria type; may represent creature entry ID, item ID, or other
      relevant data.
  - name: miscValue2
    description: Second miscellaneous value used for criteria evaluation. Often used
      in conjunction with miscValue1 to provide additional context for the criterion
      check.
  - name: miscValue3
    description: Third miscellaneous value used for criteria evaluation. May be used
      for more complex criteria involving multiple parameters or thresholds.
  - name: ref
    description: Pointer to a WorldObject that provides context for the criteria update.
      Can be nullptr if no specific object is involved in the event triggering the
      update.
  - name: referencePlayer
    description: Pointer to the Player who triggered or is associated with this criteria
      update. May be nullptr if not directly related to a player action.
  returns: null
  examples:
  - title: Update criteria for killing a specific creature
    code: 'Player* player = ...;

      WorldObject* target = ...;

      CriteriaHandler::UpdateCriteria(CRITERIA_TYPE_KILL_CREATURE, 12345, 0, 0, target,
      player);'
    language: cpp
  - title: Update criteria for collecting a specific item
    code: 'Player* player = ...;

      WorldObject* item = ...;

      CriteriaHandler::UpdateCriteria(CRITERIA_TYPE_GET_ITEM, 67890, 0, 0, item, player);'
    language: cpp
  notes: This method is part of the internal achievement tracking system and should
    generally be called through appropriate event handlers rather than directly. The
    criteria type must match predefined constants in the codebase. Performance-wise,
    this function may trigger database writes if progress changes significantly.
  warnings: Ensure that all parameters are valid before calling to avoid unexpected
    behavior or crashes. Passing invalid WorldObject pointers can lead to undefined
    behavior. This method modifies player data and should not be called outside of
    appropriate game logic contexts.
  related:
  - GetCriteriaProgress
  - CompleteCriteria
  - ResetCriteria
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T01:15:57.535381'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
