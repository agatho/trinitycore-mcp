api:
  class: TradeManager
  method: GetCurrentSession
  signature: const TradeSession & TradeManager::GetCurrentSession() const
documentation:
  brief: Returns the currently active trade session for the player.
  description: The GetCurrentSession method retrieves a constant reference to the
    active TradeSession object associated with the current player. This session represents
    the ongoing trade interaction between two players, including the items being traded
    and the state of the trade negotiation. The returned reference is guaranteed to
    be valid only during the lifetime of the active trade session, and attempting
    to use it after the trade has been completed or cancelled will result in undefined
    behavior. This method is typically used by trade-related systems to access the
    current trade state without modifying it.
  parameters: []
  returns: A constant reference to the active TradeSession object representing the
    current trade interaction. The reference remains valid only while the trade session
    is active and should not be stored for later use.
  examples:
  - title: Accessing Current Trade Session
    code: 'const TradeSession& session = tradeManager.GetCurrentSession();

      uint32 item1Count = session.GetItem(0)->GetCount(); // Get count of first item
      in trade'
    language: cpp
  - title: Checking Trade Status
    code: "const TradeSession& session = tradeManager.GetCurrentSession();\nif (session.IsAccepted())\
      \ {\n    // Proceed with completing the trade\n}"
    language: cpp
  notes: This method assumes that a trade session is currently active. Calling this
    method when no trade is in progress may result in accessing invalid memory or
    undefined behavior. The returned reference should only be used for reading data,
    not modifying the session state.
  warnings: Do not store the returned reference beyond the lifetime of the current
    trade session. Using the reference after the trade has been completed or cancelled
    will lead to memory corruption or crashes. Always verify that a trade is active
    before calling this method.
  related:
  - GetTradeSession
  - HasActiveTrade
  - CancelTrade
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T05:12:59.242031'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
