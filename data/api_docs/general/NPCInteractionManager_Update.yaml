api:
  class: NPCInteractionManager
  method: Update
  signature: void NPCInteractionManager::Update(uint32 diff)
documentation:
  brief: Updates the NPC interaction manager's internal state based on elapsed time.
  description: The Update method is responsible for processing and managing NPC interactions
    within the game world. It handles the timing-based logic for active dialogues,
    quest progress updates, and interaction cooldowns. This method is typically called
    every game tick by the core update loop to ensure that all NPC-related interactions
    are processed in a timely manner. The method uses the provided time delta (diff)
    parameter to determine how much time has passed since the last update, which is
    crucial for maintaining consistent timing across different server loads and frame
    rates.
  parameters:
  - name: diff
    description: The time elapsed in milliseconds since the last update call. This
      value is used to calculate time-based interactions and ensure proper timing
      of NPC responses and events.
  returns: null
  examples:
  - title: Basic Update Call
    code: "void GameWorld::Update(uint32 diff)\n{\n    // ... other update logic ...\n\
      \    npcInteractionManager.Update(diff);\n    // ... more update logic ...\n\
      }"
    language: cpp
  - title: Integration with Core Update Loop
    code: "void World::Update(uint32 diff)\n{\n    // Process world updates\n    UpdateSessions(diff);\n\
      \    \n    // Update NPC interactions\n    sNPCInteractionManager->Update(diff);\n\
      \    \n    // Process other systems\n    UpdateGameObjects(diff);\n    UpdateDynamicObjects(diff);\n\
      }"
    language: cpp
  notes: This method should only be called from the main game thread to maintain thread
    safety. The diff parameter is critical for accurate timing of interactions, so
    it must represent actual elapsed time. This method may internally trigger various
    callbacks or event handlers related to NPC dialogue and quest progression.
  warnings: Do not call this method from multiple threads simultaneously as it may
    cause race conditions in interaction state management. Ensure that the diff parameter
    accurately reflects real elapsed time for proper behavior of timed interactions.
  related:
  - NPCInteractionManager::AddPlayer
  - NPCInteractionManager::RemovePlayer
  - NPCInteractionManager::HandlePlayerDialog
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T01:33:47.122485'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
