api:
  class: GuardianDruidRefactored
  method: ExecuteSingleTargetThreatRotation
  signature: void GuardianDruidRefactored::ExecuteSingleTargetThreatRotation(int *
    target)
documentation:
  brief: Executes the single-target threat rotation for a Guardian Druid, prioritizing
    threat generation against a specified target.
  description: The ExecuteSingleTargetThreatRotation method implements the core combat
    logic for a Guardian Druid AI in single-target scenarios. It evaluates the current
    threat situation and selects appropriate abilities to maintain or increase aggro
    on the designated target. This method typically involves using abilities like
    Mangle, Swipe, and other threat-generating spells while managing defensive cooldowns
    such as Survival Instincts or Barkskin. The method assumes a valid target is provided
    through the parameter and operates within the context of the Druid's current resource
    levels and combat state. It may also include logic for handling special conditions
    such as being out of melee range or when specific threat thresholds are met.
  parameters:
  - name: target
    description: Pointer to an integer representing the target's unique identifier
      (GUID) in the game world. This parameter specifies which unit the Druid should
      focus threat generation on.
  returns: null
  examples:
  - title: Basic Usage Example
    code: "int targetGuid = player->GetTarget();\nif (targetGuid != 0)\n{\n    ExecuteSingleTargetThreatRotation(&targetGuid);\n\
      }"
    language: cpp
  - title: Integration with AI State Machine
    code: "void GuardianDruidRefactored::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n\
      \    {\n        int targetGuid = me->GetVictim() ? me->GetVictim()->GetGUID().GetRawValue()\
      \ : 0;\n        if (targetGuid != 0)\n        {\n            ExecuteSingleTargetThreatRotation(&targetGuid);\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method is typically called from within the AI update loop and should
    only be invoked when a valid target exists. The implementation may include checks
    for ability cooldowns, mana requirements, and positional constraints. Performance-wise,
    this method should execute quickly to avoid blocking the AI thread.
  warnings: Ensure that the target pointer passed to this method points to a valid
    unit in the game world; otherwise, undefined behavior may occur. Also, be aware
    that this method does not handle target switching or movement logic, which must
    be managed separately by the calling code.
  related:
  - ExecuteMultiTargetThreatRotation
  - GetThreatLevel
  - IsInMeleeRange
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:04:08.383160'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
