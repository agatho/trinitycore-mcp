api:
  class: WorldSession
  method: HandleTotemDestroyed
  signature: void WorldSession::HandleTotemDestroyed(WorldPackets::Totem::TotemDestroyed
    & totemDestroyed)
documentation:
  brief: Processes the client's notification that a totem has been destroyed
  description: The HandleTotemDestroyed method is invoked when the client sends a
    packet indicating that a totem has been destroyed, typically due to environmental
    effects, player actions, or spell interactions. This method handles the server-side
    logic for removing the totem from the world and updating relevant game state.
    The method ensures proper cleanup of totem-related data structures and may trigger
    additional effects such as aura removal or cooldown resets. It is part of the
    WorldSession's packet handling system for totem-related gameplay mechanics.
  parameters:
  - name: totemDestroyed
    description: A reference to a WorldPackets::Totem::TotemDestroyed packet containing
      information about which totem was destroyed and its associated data
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleTotemDestroyed(WorldPackets::Totem::TotemDestroyed&\
      \ totemDestroyed)\n{\n    if (Player* player = GetPlayer())\n    {\n       \
      \ // Remove the totem from the world\n        player->RemoveTotem(totemDestroyed.TotemGuid);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called as part of the packet handling chain in WorldSession.
    It assumes that the totem GUID provided in the packet corresponds to a valid totem
    currently active in the player's session. The method does not validate the existence
    of the totem before attempting removal, so proper error handling should be implemented
    by calling code.
  warnings: Improper handling of totem destruction can lead to client-server desynchronization
    or dangling references. Ensure that all related auras and effects are properly
    cleaned up when a totem is destroyed. This method should not be called directly
    without verifying the packet data integrity.
  related:
  - WorldSession::HandleTotemCreated
  - Player::RemoveTotem
  - Player::AddTotem
metadata:
  confidence: 0.85
  generated_at: '2025-11-01T19:16:54.808084'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
