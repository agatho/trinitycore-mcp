api:
  class: InteractionManager
  method: CanAffordItem
  signature: bool InteractionManager::CanAffordItem(Player * bot, uint32 itemId, uint32
    count) const
documentation:
  brief: Checks whether a player has sufficient funds to purchase a specified item.
  description: The CanAffordItem method determines if a given player possesses enough
    money to buy a specific item in the required quantity. It evaluates the player's
    current gold amount against the item's cost, taking into account any applicable
    discounts or taxes that might affect the final price. This method is commonly
    used in NPC interaction systems and vendor transactions to validate whether a
    purchase can be completed before proceeding with the transaction.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the character attempting
      to make the purchase.
  - name: itemId
    description: Unique identifier of the item to be purchased. Must correspond to
      a valid item in the game database.
  - name: count
    description: Number of items the player wishes to buy. Must be a positive integer
      greater than zero.
  returns: Returns true if the player has sufficient funds to complete the purchase;
    otherwise, returns false.
  examples:
  - title: Basic Usage Check
    code: "if (interactionManager.CanAffordItem(player, 12345, 1)) {\n    // Proceed\
      \ with item purchase\n    player->BuyItemFromVendor(12345, 1);\n} else {\n \
      \   player->SendBuyError(BUY_ERR_NOT_ENOUGHT_MONEY, 12345, 0, 0);\n}"
    language: cpp
  - title: Bulk Purchase Validation
    code: "uint32 itemCount = 5;\nif (interactionManager.CanAffordItem(player, 67890,\
      \ itemCount)) {\n    for (uint32 i = 0; i < itemCount; ++i) {\n        player->BuyItemFromVendor(67890,\
      \ 1);\n    }\n} else {\n    player->SendBuyError(BUY_ERR_NOT_ENOUGHT_MONEY,\
      \ 67890, itemCount, 0);\n}"
    language: cpp
  notes: This method performs a direct comparison of the player's gold against the
    item's price without considering any temporary modifiers such as buffs or debuffs
    that might alter the actual cost. The method does not modify the player's inventory
    or gold balance; it only evaluates affordability.
  warnings: Ensure that the itemId corresponds to an existing item in the database,
    otherwise behavior is undefined. Also note that this function does not account
    for currency conversion or special pricing rules such as faction-based discounts.
  related:
  - Player::GetMoney
  - Player::BuyItemFromVendor
  - Player::SendBuyError
metadata:
  confidence: 0.95
  generated_at: '2025-11-07T13:43:18.056880'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
