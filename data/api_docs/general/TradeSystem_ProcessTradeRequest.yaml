api:
  class: TradeSystem
  method: ProcessTradeRequest
  signature: void TradeSystem::ProcessTradeRequest(Player * player, uint32 sessionId,
    TradeDecision decision)
documentation:
  brief: Processes a trade request from a player with a specified decision.
  description: The ProcessTradeRequest method handles the response to a pending trade
    request initiated by a player. It takes the requesting player, a session identifier
    for the trade, and a TradeDecision enum indicating whether the trade is accepted
    or declined. This method is typically invoked when a player responds to a trade
    invitation, and it manages the trade state transitions accordingly. The method
    ensures that both parties in the trade are properly notified of the decision and
    updates internal trade systems to reflect the outcome. It also handles cleanup
    of trade sessions and may trigger additional game mechanics such as item validation
    or currency adjustments.
  parameters:
  - name: player
    description: Pointer to the Player object who is responding to the trade request.
      This must be a valid player instance that has initiated or received a trade
      invitation.
  - name: sessionId
    description: Unique identifier for the trade session. This value corresponds to
      the session ID used during trade initialization and helps identify which specific
      trade request is being processed.
  - name: decision
    description: TradeDecision enum indicating the player's response to the trade
      request. Valid values are typically TRADE_DECISION_ACCEPT or TRADE_DECISION_DECLINE,
      determining whether the trade proceeds or is canceled.
  returns: null
  examples:
  - title: Accepting a Trade Request
    code: 'Player* player = ...; // Get player instance

      uint32 sessionId = 12345;

      TradeDecision decision = TRADE_DECISION_ACCEPT;

      TradeSystem::ProcessTradeRequest(player, sessionId, decision);'
    language: cpp
  - title: Declining a Trade Request
    code: 'Player* player = ...; // Get player instance

      uint32 sessionId = 12345;

      TradeDecision decision = TRADE_DECISION_DECLINE;

      TradeSystem::ProcessTradeRequest(player, sessionId, decision);'
    language: cpp
  notes: This method assumes that the trade session is already initialized and valid.
    It does not perform any validation on the player or session ID beyond basic existence
    checks. The method may internally call other system functions to handle item transfers
    or currency adjustments depending on the game's implementation.
  warnings: Calling this method with an invalid player pointer or an incorrect session
    ID can lead to undefined behavior or crashes. Ensure that the player is in a valid
    state and the trade session exists before invoking this function.
  related:
  - InitializeTrade
  - CancelTrade
  - ValidateTradeItems
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:28:27.629129'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
