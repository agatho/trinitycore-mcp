api:
  class: EnhancementShamanRefactored
  method: UpdateRotation
  signature: void EnhancementShamanRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the enhancement shaman's combat rotation based on current target
    and spell availability
  description: The UpdateRotation method manages the core decision-making logic for
    an enhancement shaman's combat rotation. It evaluates the current target, available
    spells, mana levels, and combat state to determine the optimal sequence of abilities
    to execute. This method typically integrates with the AI system to ensure proper
    spell prioritization and timing. The method does not directly perform actions
    but rather updates internal state or prepares commands for execution in the next
    game tick. It is designed to work within the TrinityCore framework's AI architecture
    and may interact with other systems such as threat management and resource tracking.
  parameters:
  - name: target
    description: Pointer to the target object that the shaman should consider for
      rotation decisions. This parameter allows the method to access target properties
      such as health, distance, and status effects that influence spell selection
      and timing.
  returns: null
  examples:
  - title: Basic Usage in AI Context
    code: "void EnhancementShamanAI::Update()\n{\n    Unit* target = GetVictim();\n\
      \    if (target)\n        m_shaman.UpdateRotation(&target);\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void EnhancementShamanRefactored::UpdateRotation(int* target)\n{\n    if\
      \ (!target || !*target)\n        return;\n    \n    // Logic for determining\
      \ next spell based on current state\n    if (HasMaelstrom() && CanCastLightningBolt())\n\
      \        CastLightningBolt();\n    else if (CanCastStormstrike())\n        CastStormstrike();\n\
      \    else\n        CastFeralSpirit();\n}"
    language: cpp
  notes: This method is expected to be called regularly within the AI update loop.
    It assumes that the target parameter points to a valid Unit object. The method
    should not be called directly from outside the AI system without proper context
    setup. Performance considerations include minimizing expensive operations like
    spell availability checks and target evaluation.
  warnings: Calling this method with a null or invalid target pointer may lead to
    undefined behavior. Ensure that the target is valid and alive before passing it
    to this function. The method does not perform any direct combat actions; it only
    prepares the rotation logic for execution in subsequent frames.
  related:
  - CastLightningBolt
  - CastStormstrike
  - CastFeralSpirit
  - HasMaelstrom
  - CanCastLightningBolt
  - CanCastStormstrike
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T05:22:51.535061'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
