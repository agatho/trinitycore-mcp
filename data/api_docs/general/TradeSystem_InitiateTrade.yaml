api:
  class: TradeSystem
  method: InitiateTrade
  signature: bool TradeSystem::InitiateTrade(Player * initiator, Player * target)
documentation:
  brief: Initiates a trade session between two players in the game.
  description: The InitiateTrade method starts a trading interaction between a player
    who initiates the trade and a target player. It validates that both players are
    within trading range, not in combat, and that neither is already engaged in another
    trade. If all conditions are met, it sends trade request packets to both players
    and sets up the necessary state for the trade session. This method is typically
    called when a player uses the /trade command or clicks the trade button on another
    player's interface.
  parameters:
  - name: initiator
    description: Pointer to the Player object who is initiating the trade request.
      Must be a valid player instance with proper session and state.
  - name: target
    description: Pointer to the Player object who is being invited to trade. Must
      be a valid player instance within trading range of the initiator.
  returns: Returns true if the trade initiation was successful and both players received
    the trade request; returns false if any validation failed, such as players being
    too far apart, in combat, or already trading with another player.
  examples:
  - title: Basic Trade Initiation
    code: "Player* player1 = ...;\nPlayer* player2 = ...;\nTradeSystem tradeSystem;\n\
      bool success = tradeSystem.InitiateTrade(player1, player2);\nif (success)\n\
      {\n    // Trade request sent successfully\n    sLog->outString(\"Trade initiated\
      \ between %s and %s.\", player1->GetName().c_str(), player2->GetName().c_str());\n\
      }\nelse\n{\n    // Trade initiation failed\n    sLog->outString(\"Failed to\
      \ initiate trade between %s and %s.\", player1->GetName().c_str(), player2->GetName().c_str());\n\
      }"
    language: cpp
  notes: This method relies on the underlying TrinityCore networking and player state
    management systems. It does not directly handle the trade window UI or item exchange
    logic; it only sets up the initial trade request and validation. The actual trade
    process involves several other methods in the TradeSystem class including AcceptTrade,
    CancelTrade, and UpdateTrade.
  warnings: This method should not be called with null pointers for either player
    argument, as this will likely cause a crash or undefined behavior. Additionally,
    calling this method while either player is already in a trade session may result
    in unexpected behavior or state corruption.
  related:
  - AcceptTrade
  - CancelTrade
  - UpdateTrade
  - SendTradeStatus
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:33:14.075823'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
