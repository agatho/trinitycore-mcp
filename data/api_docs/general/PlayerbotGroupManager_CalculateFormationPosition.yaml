api:
  class: PlayerbotGroupManager
  method: CalculateFormationPosition
  signature: int PlayerbotGroupManager::CalculateFormationPosition(const PlayerbotGroup
    & group, const GroupMemberInfo & member)
documentation:
  brief: Calculates and returns the formation position index for a group member within
    the player bot group.
  description: The CalculateFormationPosition method determines the appropriate positional
    index for a given group member within a player bot group's formation layout. This
    method is typically used in player bot AI systems to maintain organized group
    positioning during combat or movement scenarios. The returned index represents
    where in the formation sequence the specified member should be placed, based on
    factors such as role assignment, distance from leader, and group configuration
    settings. The method ensures that bots maintain proper spacing and positioning
    relative to each other for optimal tactical performance.
  parameters:
  - name: group
    description: Reference to the PlayerbotGroup object containing the formation data
      and member information
  - name: member
    description: Reference to the GroupMemberInfo structure representing the specific
      group member whose formation position is being calculated
  returns: Returns an integer index value indicating the position within the formation
    sequence. A negative return value typically indicates an error or invalid member,
    while positive values represent valid formation positions starting from zero.
    The exact mapping of position indices to physical locations depends on the group's
    formation type and configuration.
  examples:
  - title: Basic Usage Example
    code: "PlayerbotGroupManager* groupMgr = sPlayerbotAIConfig->GetGroupManager();\n\
      PlayerbotGroup group = groupMgr->GetGroup();\nGroupMemberInfo member = group.GetMemberByGuid(playerGuid);\n\
      int position = groupMgr->CalculateFormationPosition(group, member);\nif (position\
      \ >= 0) {\n    // Use calculated position for formation logic\n    LOG_DEBUG(\"\
      playerbots\", \"Member {} is at formation position {}\", member.name, position);\n\
      }"
    language: cpp
  - title: Formation Position Validation Example
    code: "PlayerbotGroupManager* groupMgr = sPlayerbotAIConfig->GetGroupManager();\n\
      PlayerbotGroup group = groupMgr->GetGroup();\nGroupMemberInfo member = group.GetMemberByGuid(playerGuid);\n\
      int position = groupMgr->CalculateFormationPosition(group, member);\nif (position\
      \ < 0) {\n    LOG_ERROR(\"playerbots\", \"Failed to calculate formation position\
      \ for member {}\");\n    // Handle error case - possibly reassign or skip formation\
      \ logic\n} else {\n    // Proceed with formation positioning\n    bot->SetFormationPosition(position);\n\
      }"
    language: cpp
  notes: This method is primarily used in player bot AI systems for maintaining tactical
    formations. The calculation may consider factors such as member roles (tank, healer,
    damage dealer), distance preferences, and group leader's positioning strategy.
    Performance is generally good as it operates on cached group data structures,
    but frequent calls during dynamic situations should be monitored for potential
    overhead.
  warnings: The method assumes valid input parameters; passing null or invalid references
    may lead to undefined behavior. The returned position index should not be used
    directly for movement without additional validation of formation constraints and
    available space. In multi-threaded environments, ensure proper synchronization
    when accessing group data structures.
  related:
  - GetGroup
  - GetMemberByGuid
  - SetFormationPosition
  - UpdateFormation
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T00:58:49.624645'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
