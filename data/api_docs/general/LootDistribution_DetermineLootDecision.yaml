api:
  class: LootDistribution
  method: DetermineLootDecision
  signature: LootRollType LootDistribution::DetermineLootDecision(Player * player,
    const LootItem & item)
documentation:
  brief: Determines the loot roll decision for a player and item in a loot distribution
    context.
  description: The DetermineLootDecision method evaluates the loot roll outcome for
    a specific player and item within the context of a loot distribution. This method
    is typically invoked during the loot rolling process to determine whether a player
    wins the right to loot an item, based on factors such as roll values, group composition,
    and loot rules. It ensures proper handling of loot distribution mechanics in World
    of Warcraft's TrinityCore framework, including support for different loot modes
    like round-robin, free-for-all, and master looting. The method considers the player's
    eligibility, the item's properties, and the current loot distribution state to
    make a decision.
  parameters:
  - name: player
    description: Pointer to the Player object for whom the loot decision is being
      determined. Must be a valid player instance within the game world.
  - name: item
    description: Reference to the LootItem structure representing the item for which
      the loot decision is made. Contains information about the item's properties
      and roll values.
  returns: Returns a LootRollType enum value indicating the outcome of the loot decision.
    Possible values include LOOT_ROLL_PASS, LOOT_ROLL_NEED, LOOT_ROLL_GREED, LOOT_ROLL_DISENCHANT,
    or LOOT_ROLL_NONE depending on the player's roll and item properties.
  examples:
  - title: Basic usage in loot distribution
    code: "LootRollType result = lootDistribution->DetermineLootDecision(player, item);\n\
      switch (result)\n{\n    case LOOT_ROLL_NEED:\n        // Player wins the item\n\
      \        break;\n    case LOOT_ROLL_PASS:\n        // Player passes on the item\n\
      \        break;\n    default:\n        // Handle other cases\n        break;\n\
      }"
    language: cpp
  - title: Using with loot roll processing
    code: "if (lootDistribution->IsLootRollActive())\n{\n    LootItem* item = lootDistribution->GetLootItem(0);\n\
      \    if (item)\n    {\n        LootRollType decision = lootDistribution->DetermineLootDecision(player,\
      \ *item);\n        lootDistribution->ProcessLootRoll(player, item->itemid, decision);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the core loot distribution system and should only
    be called during active loot rolling sessions. It assumes that the player and
    item parameters are valid and properly initialized. The method does not perform
    any validation on input parameters, so callers must ensure correctness before
    invocation.
  warnings: Calling this method outside of a proper loot distribution context may
    lead to undefined behavior or incorrect loot decisions. Ensure that the player
    is part of the correct group and that the item is eligible for rolling before
    invoking this method.
  related:
  - GetLootItem
  - IsLootRollActive
  - ProcessLootRoll
  - RollForLoot
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T09:34:44.391611'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
