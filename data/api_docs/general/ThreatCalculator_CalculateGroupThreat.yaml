api:
  class: ThreatCalculator
  method: CalculateGroupThreat
  signature: float ThreatCalculator::CalculateGroupThreat(const int & group, Unit
    * target)
documentation:
  brief: Calculates and returns the threat value generated by a group of players against
    a specified target unit.
  description: The CalculateGroupThreat method computes the total threat contribution
    of all members within a given group towards a specific target unit. This calculation
    is essential for determining which players are leading in aggro and potentially
    triggering mob targeting behavior. The method takes into account various factors
    such as player level, combat abilities, buffs, and damage dealt to the target.
    It is typically used internally by the threat system to manage mob targeting dynamics
    in World of Warcraft's TrinityCore emulation. The result represents a normalized
    threat value that can be compared across different groups and targets.
  parameters:
  - name: group
    description: The unique identifier of the group for which threat is being calculated.
      This corresponds to the Group's GUID and identifies the specific player group
      whose threat contribution will be evaluated.
  - name: target
    description: Pointer to the Unit object representing the target against which
      threat is calculated. This must be a valid unit (typically a mob or NPC) that
      can receive threat from players in the group.
  returns: A float value representing the total calculated threat generated by all
    members of the specified group against the given target. Higher values indicate
    greater threat and increased likelihood of the group's members being targeted
    by the mob.
  examples:
  - title: Basic Usage Example
    code: 'Group* playerGroup = player->GetGroup();

      Unit* mobTarget = unit;

      float threatValue = ThreatCalculator::CalculateGroupThreat(playerGroup->GetGUID(),
      mobTarget);

      // Use threatValue to determine targeting behavior'
    language: cpp
  - title: Advanced Usage with Threat Comparison
    code: "Group* group1 = player1->GetGroup();\nGroup* group2 = player2->GetGroup();\n\
      Unit* target = mob;\nfloat threat1 = ThreatCalculator::CalculateGroupThreat(group1->GetGUID(),\
      \ target);\nfloat threat2 = ThreatCalculator::CalculateGroupThreat(group2->GetGUID(),\
      \ target);\nif (threat1 > threat2) {\n    // Group 1 has higher threat and is\
      \ likely to be targeted\n}"
    language: cpp
  notes: This method is part of the core threat management system in TrinityCore.
    It's designed to be called frequently during combat situations, so performance
    considerations are important. The method internally handles group membership validation
    and ensures only active players contribute to the threat calculation.
  warnings: The target parameter must not be null; passing a null Unit pointer will
    likely cause undefined behavior or crashes. Additionally, this method assumes
    that the group members are within reasonable proximity to the target for threat
    calculations to be meaningful.
  related:
  - CalculateSingleThreat
  - UpdateThreat
  - GetThreatList
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T01:02:56.174111'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
