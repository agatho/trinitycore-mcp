api:
  class: CrowdControlManager
  method: Update
  signature: void CrowdControlManager::Update(uint32 diff, const CombatMetrics & metrics)
documentation:
  brief: Updates the crowd control manager with the latest combat metrics and time
    delta.
  description: The Update method is responsible for processing and applying any necessary
    updates to the crowd control state based on the provided combat metrics and elapsed
    time. This method typically handles the logic for managing player or creature
    abilities that impose crowd control effects such as stuns, fears, or snares. It
    integrates with the game's combat system to ensure that crowd control durations
    are accurately tracked and applied. The method is usually called from within the
    main game loop or update cycle, ensuring that all active crowd control effects
    are properly maintained and eventually removed when their duration expires.
  parameters:
  - name: diff
    description: The time delta in milliseconds since the last update call. This value
      is used to calculate how much time has passed for updating durations of active
      crowd control effects.
  - name: metrics
    description: A reference to the CombatMetrics structure containing current combat-related
      data such as damage dealt, received, and other relevant combat statistics that
      may influence crowd control behavior or application.
  returns: null
  examples:
  - title: Basic Update Call
    code: "void GameWorld::Update(uint32 diff)\n{\n    // ... other update logic ...\n\
      \    _crowdControlManager.Update(diff, _combatMetrics);\n    // ... more update\
      \ logic ...\n}"
    language: cpp
  - title: Integration with Combat System
    code: "void Unit::Update(uint32 diff)\n{\n    // ... combat processing ...\n \
      \   if (HasCrowdControlEffects())\n    {\n        CombatMetrics metrics = GetCombatMetrics();\n\
      \        _crowdControlManager.Update(diff, metrics);\n    }\n    // ... rest\
      \ of update logic ...\n}"
    language: cpp
  notes: This method should be called regularly in the game loop to ensure accurate
    tracking of crowd control durations. The diff parameter must accurately reflect
    the time passed since the last call to maintain proper effect timing. The CombatMetrics
    object should contain up-to-date combat data for correct behavior.
  warnings: Improper handling of the diff value can cause incorrect duration calculations
    for crowd control effects. Ensure that the metrics parameter is properly populated
    with current combat data before calling this method.
  related:
  - CrowdControlManager::AddEffect
  - CrowdControlManager::RemoveEffect
  - CrowdControlManager::HasActiveEffects
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T04:11:22.551102'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
