api:
  class: Unit
  method: SetImmuneToNPC
  signature: void Unit::SetImmuneToNPC(bool apply, bool keepCombat)
documentation:
  brief: Sets the unit's immune status to NPC targets, controlling whether the unit
    can engage in combat with NPCs.
  description: This method controls whether a Unit is immune to NPC targets, allowing
    or preventing the unit from entering combat with NPCs. The first parameter determines
    if immunity should be applied, while the second parameter controls whether combat
    state should be maintained when immunity is applied. This functionality is crucial
    for managing player behavior during quest events or special encounters where NPCs
    should not be able to engage the unit.
  parameters:
  - name: apply
    description: If true, the unit will become immune to NPC targets; if false, the
      unit will lose immunity and may enter combat with NPCs.
  - name: keepCombat
    description: If true, and apply is true, the unit will maintain its current combat
      state even when immunity is applied. If false, the unit will exit combat when
      immunity is applied.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'Unit* player = GetPlayer();

      player->SetImmuneToNPC(true, false);

      // Player becomes immune to NPC targets and exits combat'
    language: cpp
  - title: Advanced Usage Example
    code: 'Unit* player = GetPlayer();

      player->SetImmuneToNPC(true, true);

      // Player becomes immune to NPC targets and maintains combat state

      // This is useful for quest-related scenarios where player should remain in
      combat with NPCs but not attack them'
    language: cpp
  notes: This method affects the unit's behavior in combat and should be used carefully
    during quest events or special encounters. The implementation uses internal flags
    that control NPC engagement behavior, and may interact with other combat-related
    methods.
  warnings: Improper use of this method can cause unexpected behavior in player combat
    state, especially when combined with other combat management methods. It's important
    to understand that the unit will not be able to attack NPCs even if immunity is
    removed, unless explicitly allowed by other mechanisms.
  related:
  - Unit::SetImmuneToPlayer
  - Unit::GetCombatStatus
  - Unit::IsImmuneToNPC
  - Unit::SetInCombat
metadata:
  confidence: 0.95
  generated_at: '2025-10-30T01:10:35.254958'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
