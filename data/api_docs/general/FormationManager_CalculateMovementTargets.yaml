api:
  class: FormationManager
  method: CalculateMovementTargets
  signature: void FormationManager::CalculateMovementTargets()
documentation:
  brief: Calculates and updates the movement targets for units in a formation based
    on their leader's position and assigned formation offsets.
  description: The CalculateMovementTargets method is responsible for determining
    the appropriate movement coordinates for each unit within a formation. It evaluates
    the current position of the formation leader and applies predefined offset values
    to calculate where each follower should move. This method ensures that units maintain
    proper formation spacing and alignment during movement operations. The calculation
    takes into account the leader's orientation, speed, and any dynamic adjustments
    required for pathfinding or combat positioning. This method is typically invoked
    during movement updates to synchronize unit positions within a formation.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in movement update
    code: "void MovementHandler::UpdateFormation()\n{\n    if (m_formationManager)\n\
      \        m_formationManager->CalculateMovementTargets();\n}"
    language: cpp
  notes: This method is performance-critical during active formation movement and
    should be called sparingly to avoid excessive CPU overhead. The method assumes
    that the formation leader's position and orientation are already updated before
    execution. It may trigger additional pathfinding calculations for individual units
    if their calculated positions differ significantly from current positions.
  warnings: Calling this method without properly initialized formation data or leader
    position can result in incorrect target calculations. The method modifies internal
    movement targets which may conflict with other movement systems if not synchronized
    properly.
  related:
  - GetFormationLeader
  - SetFormationOffset
  - UpdateFormationPosition
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T03:21:58.937637'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
