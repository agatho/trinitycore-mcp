api:
  class: DungeonScriptMgr
  method: instance
  signature: DungeonScriptMgr * DungeonScriptMgr::instance()
documentation:
  brief: Returns the singleton instance of the DungeonScriptMgr class
  description: The instance() method implements the singleton pattern for the DungeonScriptMgr
    class, providing global access to the dungeon script management system. This manager
    handles loading, registering, and executing dungeon-specific scripts and events
    within the TrinityCore framework. The method ensures that only one instance of
    DungeonScriptMgr exists throughout the application lifecycle, making it thread-safe
    for concurrent access. It is commonly used by other subsystems that need to interact
    with dungeon scripting functionality, such as map loading processes, player entry
    detection, and scripted event triggers.
  parameters: []
  returns: A pointer to the singleton instance of DungeonScriptMgr. The method never
    returns NULL as it's implemented using a static local variable pattern which guarantees
    instantiation.
  examples:
  - title: Accessing the DungeonScript Manager
    code: "DungeonScriptMgr* dungeonMgr = DungeonScriptMgr::instance();\n// Use dungeonMgr\
      \ to register or retrieve dungeon scripts\nif (dungeonMgr)\n{\n    // Perform\
      \ operations with the dungeon script manager\n}"
    language: cpp
  - title: Using Instance in Map Loading Context
    code: "class MyDungeonMap : public Map\n{\npublic:\n    void OnPlayerEnter(Player*\
      \ player) override\n    {\n        DungeonScriptMgr* mgr = DungeonScriptMgr::instance();\n\
      \        // Register player with dungeon scripts if needed\n        mgr->RegisterDungeonScript(player->GetMapId(),\
      \ this);\n    }\n};"
    language: cpp
  notes: This method uses the Meyers singleton pattern with a static local variable,
    which is thread-safe in C++11 and later. The instance is created on first access
    and destroyed at program termination. This approach avoids the static initialization
    order fiasco that could occur with traditional global variables.
  warnings: While this is a thread-safe singleton implementation, developers should
    be cautious about storing references to the instance across different threads
    or contexts where the application might be shutting down. The singleton will remain
    valid throughout the application lifecycle but should not be relied upon for long-term
    object persistence.
  related:
  - GetDungeonScript
  - RegisterDungeonScript
  - LoadDungeonScripts
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T08:12:51.125639'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
