api:
  class: Spell
  method: CalculateDamage
  signature: int32 Spell::CalculateDamage(const SpellEffectInfo & spellEffectInfo,
    const Unit * target, float * var) const
documentation:
  brief: Calculates damage output for a spell effect based on target and variable
    parameters
  description: The CalculateDamage method computes the actual damage dealt by a spell
    effect, taking into account various factors such as target's resistance, spell
    power, and random variance. It is used primarily in spell calculations where precise
    damage values are needed for combat mechanics. This method serves as a core component
    in determining how much damage a spell will deal to targets during execution.
  parameters:
  - name: spellEffectInfo
    description: Contains information about the specific spell effect being calculated,
      including effect type, base damage values, and other relevant parameters that
      influence damage calculation.
  - name: target
    description: The unit object representing the target of the spell effect, which
      affects how damage is calculated based on their resistance levels and other
      defensive attributes.
  - name: var
    description: Pointer to a float variable that stores the calculated variance for
      the spell effect, allowing for dynamic adjustment of damage output based on
      random factors or modifiers.
  returns: Returns an integer value representing the calculated damage amount, which
    can be positive or negative depending on whether the spell is dealing damage or
    healing. The result may vary based on target resistance and other game mechanics.
  examples:
  - title: Basic Damage Calculation Example
    code: int32 damage = spell->CalculateDamage(spellEffectInfo, target, &var);
    language: cpp
  - title: Advanced Damage Calculation with Modifier
    code: 'float var = 0.1f; // variance

      int32 damage = spell->CalculateDamage(spellEffectInfo, target, &var);

      // Apply modifiers to damage based on target resistance'
    language: cpp
  notes: This method is typically used in combat calculations and requires accurate
    target information for proper damage computation. It may be called multiple times
    during spell execution depending on the effect type.
  warnings: Care must be taken when handling null pointers for target, as this can
    lead to invalid damage calculation results. Also, ensure that var is properly
    initialized before calling this method.
  related:
  - Spell::CalculateSpellDamage
  - Spell::GetSpellValue
  - Spell::CalculateHealing
  - Spell::CalculateEffect
metadata:
  confidence: 0.95
  generated_at: '2025-10-30T22:48:56.582035'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
