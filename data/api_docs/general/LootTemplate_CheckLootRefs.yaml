api:
  class: LootTemplate
  method: CheckLootRefs
  signature: void LootTemplate::CheckLootRefs(const LootTemplateMap & store, LootIdSet
    * ref_set) const
documentation:
  brief: Validates and checks loot references within a loot template against a provided
    reference set.
  description: The CheckLootRefs method performs validation on a LootTemplate to ensure
    that all referenced loot entries are properly accounted for in the given store.
    It iterates through the loot template's entries and verifies whether each entry's
    reference exists in the provided reference set. This method is typically used
    during loot system initialization or validation phases to prevent invalid references
    from being processed, which could lead to runtime errors or unexpected behavior
    in the game's loot distribution mechanics. The method does not modify any data
    but instead serves as a diagnostic tool for maintaining consistency within the
    loot system.
  parameters:
  - name: store
    description: A constant reference to a LootTemplateMap containing all available
      loot templates and their associated entries.
  - name: ref_set
    description: A pointer to a LootIdSet that holds the set of valid loot IDs referenced
      by this template. This parameter may be null if no validation is required.
  returns: null
  examples:
  - title: Basic usage for validating loot references
    code: 'LootTemplate template;

      LootTemplateMap store;

      LootIdSet ref_set;

      // Populate store and ref_set with valid data

      template.CheckLootRefs(store, &ref_set);'
    language: cpp
  - title: Using CheckLootRefs in a loot validation routine
    code: "void ValidateLootTemplates(const LootTemplateMap& store) {\n    LootIdSet\
      \ ref_set;\n    // Fill ref_set with all valid loot IDs\n    for (const auto&\
      \ pair : store) {\n        pair.second->CheckLootRefs(store, &ref_set);\n  \
      \  }\n}"
    language: cpp
  notes: This method is primarily used internally by the TrinityCore loot system to
    maintain data integrity. It's important to note that the ref_set parameter can
    be null, which effectively disables reference checking for that call. The method
    assumes that both store and ref_set are properly initialized before invocation.
  warnings: Calling this method with an uninitialized or improperly populated ref_set
    may lead to false positives in validation results. Additionally, passing a null
    pointer for ref_set will skip all reference checks, potentially allowing invalid
    references to pass through undetected.
  related:
  - LootTemplate::AddEntry
  - LootTemplate::Clear
  - LootTemplate::GetLootMode
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:12:30.139542'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
