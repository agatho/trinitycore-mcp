api:
  class: VehicleScript
  method: OnReset
  signature: void VehicleScript::OnReset(Vehicle * veh)
documentation:
  brief: Resets the vehicle's state and removes all passengers.
  description: The OnReset method is called when a vehicle needs to be reset to its
    initial state. This typically occurs when a vehicle is being reinitialized or
    when all passengers have been removed from the vehicle. The method handles cleanup
    operations such as removing any remaining passengers, resetting vehicle-specific
    flags, and preparing the vehicle for reuse. In World of Warcraft's TrinityCore
    implementation, this method ensures that vehicles properly reset their internal
    state to prevent issues with passenger management and vehicle behavior after use.
  parameters:
  - name: veh
    description: Pointer to the Vehicle object that is being reset. This parameter
      represents the specific vehicle instance whose state will be reset.
  returns: null
  examples:
  - title: Basic Vehicle Reset Implementation
    code: "class MyVehicleScript : public VehicleScript\n{\npublic:\n    void OnReset(Vehicle*\
      \ veh) override\n    {\n        // Remove all passengers from the vehicle\n\
      \        while (veh->HasPassenger())\n        {\n            if (Unit* passenger\
      \ = veh->GetPassenger(0))\n            {\n                veh->RemovePassenger(passenger);\n\
      \            }\n        }\n        \n        // Reset vehicle flags or state\
      \ here\n        veh->ResetVehicleFlags();\n    }\n};"
    language: cpp
  notes: This method is typically invoked by the core game engine when a vehicle's
    state needs to be cleared. It should not be called directly in most cases, as
    it is intended to be part of the internal vehicle lifecycle management system.
    Developers implementing custom vehicle behavior should ensure that any additional
    cleanup logic is properly integrated with this method.
  warnings: Improper handling of passenger removal or flag resetting in this method
    can lead to memory leaks or unexpected behavior when vehicles are reused. Always
    verify that all passengers are properly removed before performing any state reset
    operations.
  related:
  - OnInstall
  - OnUninstall
  - OnAddPassenger
  - OnRemovePassenger
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T19:46:04.035874'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
