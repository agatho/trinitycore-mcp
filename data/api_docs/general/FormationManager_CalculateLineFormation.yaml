api:
  class: FormationManager
  method: CalculateLineFormation
  signature: int FormationManager::CalculateLineFormation(const int & leaderPos, float
    orientation)
documentation:
  brief: Calculates and returns the formation position for a unit in a line formation
    based on leader position and orientation.
  description: The CalculateLineFormation method determines the appropriate position
    for a unit within a line-based formation. It takes into account the leader's position
    and the desired orientation of the formation to compute where the current unit
    should be placed. This method is typically used in group movement scenarios, such
    as when NPCs or players form lines during combat or quest events. The calculation
    considers the formation's geometry and spacing requirements to maintain proper
    positioning relative to the leader. The method assumes that the FormationManager
    has been properly initialized with relevant formation data and that the leader
    position is valid.
  parameters:
  - name: leaderPos
    description: The position of the formation leader, represented as an integer index
      or coordinate value. This parameter defines where the leader unit is located
      within the formation structure.
  - name: orientation
    description: The angular orientation of the formation in radians. This determines
      the direction the line formation faces and affects how individual units are
      positioned relative to each other.
  returns: Returns an integer representing the calculated position index or coordinate
    within the line formation. A positive value typically indicates a valid position,
    while negative values may indicate errors or invalid configurations.
  examples:
  - title: Basic Line Formation Calculation
    code: int pos = formationManager.CalculateLineFormation(0, 1.57f); // Calculate
      position for unit at 90-degree orientation
    language: cpp
  - title: Dynamic Formation Adjustment
    code: 'float angle = M_PI / 4; // 45 degrees

      int formationPos = formationManager.CalculateLineFormation(leaderIndex, angle);

      // Use formationPos to set unit''s position in the line'
    language: cpp
  notes: This method is likely used internally by the TrinityCore AI system for managing
    group positioning. It may be called repeatedly during movement updates to maintain
    formation integrity. Performance considerations include avoiding frequent recalculations
    when positions are stable.
  warnings: Ensure that leaderPos and orientation values are within valid ranges before
    calling this method, as invalid inputs could lead to incorrect formation calculations
    or undefined behavior.
  related:
  - CalculateCircleFormation
  - CalculateVFormation
  - GetFormationPosition
  - SetFormationOrientation
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T03:22:22.437867'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
