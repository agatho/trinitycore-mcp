api:
  class: SmartAreaTriggerAI
  method: OnUnitExit
  signature: void SmartAreaTriggerAI::OnUnitExit(Unit * unit, AreaTriggerExitReason
    reason)
documentation:
  brief: Handles the event when a unit exits an area trigger, processing associated
    AI behavior.
  description: The OnUnitExit method is invoked when a Unit (such as a player or creature)
    leaves an area trigger zone. This method serves as part of the SmartAI system
    in TrinityCore and allows for custom AI logic to be executed upon a unit's departure
    from an area trigger. It provides access to both the unit that exited and the
    reason for the exit, enabling conditional responses based on the event type. The
    method is typically used within smart scripts to trigger actions like quest updates,
    spell casts, or other scripted behaviors when a unit leaves a designated area.
  parameters:
  - name: unit
    description: Pointer to the Unit that has exited the area trigger. This can be
      a Player, Creature, or any other Unit type.
  - name: reason
    description: 'Enumeration value indicating why the unit exited the area trigger.
      Possible values include: AT_EXIT_REASON_PLAYER_LEAVE, AT_EXIT_REASON_DESPAWN,
      AT_EXIT_REASON_TELEPORTED, etc., depending on the implementation.'
  returns: null
  examples:
  - title: Basic usage in a custom AI script
    code: "void SmartAreaTriggerAI::OnUnitExit(Unit* unit, AreaTriggerExitReason reason)\n\
      {\n    if (unit->IsPlayer())\n    {\n        // Trigger quest update when player\
      \ leaves\n        if (reason == AT_EXIT_REASON_PLAYER_LEAVE)\n        {\n  \
      \          unit->ToPlayer()->KilledMonsterCredit(12345);\n        }\n    }\n\
      }"
    language: cpp
  - title: Advanced usage with multiple exit conditions
    code: "void SmartAreaTriggerAI::OnUnitExit(Unit* unit, AreaTriggerExitReason reason)\n\
      {\n    switch (reason)\n    {\n        case AT_EXIT_REASON_PLAYER_LEAVE:\n \
      \           // Player left the area\n            if (unit->IsPlayer())\n   \
      \             unit->ToPlayer()->SendNotification(\"You have left the zone.\"\
      );\n            break;\n        case AT_EXIT_REASON_DESPAWN:\n            //\
      \ Unit was despawned\n            sLog->outString(\"Unit %u despawned from area\
      \ trigger.\", unit->GetGUID().GetCounter());\n            break;\n        default:\n\
      \            break;\n    }\n}"
    language: cpp
  notes: This method is part of the SmartAI framework and integrates with the area
    trigger system in TrinityCore. It should be overridden in custom AI implementations
    to provide specific behavior when units exit an area trigger. The reason parameter
    allows for fine-grained control over how different types of exits are handled.
  warnings: Ensure that the unit pointer is valid before accessing its members, as
    it may be null or invalid if the unit has already been destroyed. Be cautious
    with memory management and avoid performing operations that could lead to dangling
    pointers or race conditions in multithreaded environments.
  related:
  - OnUnitEnter
  - OnAreaTrigger
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T02:27:07.366094'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
