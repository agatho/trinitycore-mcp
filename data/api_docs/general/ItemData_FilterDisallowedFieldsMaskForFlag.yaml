api:
  class: ItemData
  method: FilterDisallowedFieldsMaskForFlag
  signature: void ItemData::FilterDisallowedFieldsMaskForFlag(int & changesMask, int
    fieldVisibilityFlags)
documentation:
  brief: Filters a changes mask based on field visibility flags to ensure only allowed
    fields are marked as changed.
  description: The FilterDisallowedFieldsMaskForFlag method modifies an existing changes
    mask by removing bits that correspond to fields which are not allowed to be changed
    according to the provided field visibility flags. This is typically used in the
    context of item data synchronization within TrinityCore, where certain item fields
    may be restricted from modification depending on the player's permissions or game
    state. The method operates in-place on the changesMask parameter and does not
    return a value. It ensures that only valid and permitted field changes are propagated
    through the system.
  parameters:
  - name: changesMask
    description: A reference to an integer representing the bitmask of changed fields.
      This mask will be modified in-place by clearing bits for disallowed fields.
  - name: fieldVisibilityFlags
    description: An integer flag that defines which fields are visible or allowed
      to be modified. The specific bit values and their meanings depend on the internal
      field visibility system used by TrinityCore's item data handling.
  returns: null
  examples:
  - title: Basic usage of FilterDisallowedFieldsMaskForFlag
    code: 'int mask = 0x0F; // Example changes mask with several fields marked as
      changed

      int visibilityFlags = 0x03; // Example visibility flags allowing only first
      two fields

      itemData.FilterDisallowedFieldsMaskForFlag(mask, visibilityFlags);

      // After execution, mask will contain only bits allowed by visibilityFlags'
    language: cpp
  notes: This method is part of the internal item data synchronization logic in TrinityCore.
    It's crucial for maintaining data integrity when sending updates to clients, especially
    in scenarios involving item modifications or transfers between players. The implementation
    likely uses bitwise operations to compare and filter field masks against allowed
    visibility flags.
  warnings: null
  related: []
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T02:00:40.923072'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
