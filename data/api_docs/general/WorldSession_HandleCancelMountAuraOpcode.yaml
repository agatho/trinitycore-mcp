api:
  class: WorldSession
  method: HandleCancelMountAuraOpcode
  signature: void WorldSession::HandleCancelMountAuraOpcode(WorldPackets::Spells::CancelMountAura
    & cancelMountAura)
documentation:
  brief: Cancels the mount aura effect on the player
  description: This method handles the client request to cancel an active mount aura.
    When a player uses the 'Cancel Mount Aura' opcode, this function is invoked to
    remove any currently applied mount buff from the player. The method ensures that
    the player's mount state is properly reset and relevant game mechanics such as
    movement speed and visual effects are reverted. It typically occurs when players
    dismount manually or when certain conditions cause the mount to be automatically
    canceled.
  parameters:
  - name: cancelMountAura
    description: The packet containing the cancel mount aura request data, including
      any relevant flags or identifiers for the mount being canceled.
  returns: null
  examples:
  - title: Basic Usage in WorldSession Handler
    code: "void WorldSession::HandleCancelMountAuraOpcode(WorldPackets::Spells::CancelMountAura&\
      \ cancelMountAura)\n{\n    Player* player = GetPlayer();\n    if (!player)\n\
      \        return;\n\n    player->RemoveAurasByType(SPELL_AURA_MOUNTED);\n}"
    language: cpp
  notes: This method is part of the spell handling system and relies on the player's
    current aura state. It should be called only when a valid player session exists.
    The actual removal of mount auras may involve additional checks for player state,
    such as whether they are in combat or flying.
  warnings: null
  related:
  - HandleMountOpcode
  - Player::RemoveAurasByType
  - Player::SetMovementFlag
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T19:42:04.921782'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
