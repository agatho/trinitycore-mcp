api:
  class: WorldSession
  method: HandleSwapItem
  signature: void WorldSession::HandleSwapItem(WorldPackets::Item::SwapItem & swapItem)
documentation:
  brief: Handles swapping items between inventory slots in the player's inventory
  description: The HandleSwapItem method processes a client request to swap two items
    within the player's inventory. This method is invoked when a player attempts to
    rearrange their inventory by dragging and dropping items between different slots.
    The method validates the swap operation, ensuring both source and destination
    slots are valid and accessible. It performs necessary checks such as slot compatibility,
    item restrictions, and inventory limits before executing the swap. The method
    updates the player's inventory state and sends appropriate responses back to the
    client to reflect the successful or failed swap operation.
  parameters:
  - name: swapItem
    description: A reference to a WorldPackets::Item::SwapItem packet containing source
      and destination slot information for the item swap operation
  returns: null
  examples:
  - title: Basic item swap handling
    code: "void WorldSession::HandleSwapItem(WorldPackets::Item::SwapItem & swapItem)\n\
      {\n    // Validate source and destination slots\n    if (!IsValidInventorySlot(swapItem.FromSlot)\
      \ || !IsValidInventorySlot(swapItem.ToSlot))\n        return;\n    \n    //\
      \ Perform the actual swap logic\n    SwapItems(swapItem.FromSlot, swapItem.ToSlot);\n\
      \    \n    // Send confirmation to client\n    SendSwapItemResponse(true);\n\
      }"
    language: cpp
  notes: This method is part of the core inventory management system and should be
    called only when processing valid client requests. The implementation assumes
    proper packet validation has already occurred before this method is invoked. Performance
    considerations include minimizing database writes during swap operations and ensuring
    slot validation is efficient.
  warnings: Improper handling of slot indices can lead to inventory corruption or
    crashes. Always validate that both source and destination slots are within acceptable
    ranges before attempting any swap operation. This method should not be called
    directly from non-protocol handlers without proper packet validation.
  related:
  - HandleItemQuerySingle
  - HandleSwapInvItem
  - HandleAutoStoreBagItem
  - IsValidInventorySlot
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:19:22.259790'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
