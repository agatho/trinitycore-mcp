api:
  class: WorldSession
  method: SendAuctionClosedNotification
  signature: void WorldSession::SendAuctionClosedNotification(const AuctionPosting
    * auction, float mailDelay, bool sold)
documentation:
  brief: Sends an auction closed notification to the player's mailbox when an auction
    they posted or bid on has been concluded.
  description: The SendAuctionClosedNotification method is responsible for delivering
    a notification to a player's mailbox indicating that an auction they were involved
    with has been closed. This typically occurs when an auction expires without being
    sold, when it is successfully sold, or when the item is removed from the auction
    house by a GM. The method handles sending the appropriate mail message with details
    about the auction outcome and any refund or payment information. It takes into
    account whether the auction was sold, the delay before the mail is delivered,
    and the specific auction posting that triggered the notification.
  parameters:
  - name: auction
    description: Pointer to the AuctionPosting object representing the auction that
      has been closed. This contains all relevant information about the auction such
      as item details, bid amounts, and auction duration.
  - name: mailDelay
    description: Float value indicating the delay (in seconds) before the notification
      mail is delivered to the player's mailbox. This allows for proper timing of
      when the notification appears in the game interface.
  - name: sold
    description: Boolean flag indicating whether the auction was successfully sold.
      If true, the notification will indicate a successful sale; if false, it indicates
      the auction expired or was cancelled.
  returns: null
  examples:
  - title: Basic Usage for Successful Auction Sale
    code: "WorldSession* session = player->GetSession();\nAuctionPosting* auction\
      \ = sAuctionMgr->GetAuction(12345);\nif (auction)\n{\n    session->SendAuctionClosedNotification(auction,\
      \ 0.0f, true);\n}"
    language: cpp
  - title: Usage for Expired Auction
    code: "WorldSession* session = player->GetSession();\nAuctionPosting* auction\
      \ = sAuctionMgr->GetAuction(67890);\nif (auction)\n{\n    session->SendAuctionClosedNotification(auction,\
      \ 30.0f, false);\n}"
    language: cpp
  notes: This method directly interacts with the player's mailbox system and should
    only be called when an auction state change has occurred that requires notification.
    The mailDelay parameter allows for proper timing of notifications, which may be
    important for game flow and user experience. The method assumes that the AuctionPosting
    object passed is valid and properly initialized.
  warnings: Ensure that the auction pointer is not null before calling this method
    to avoid crashes. Be careful with the mailDelay value as very short delays might
    cause issues with client synchronization, while very long delays could make the
    game feel unresponsive. The sold parameter must accurately reflect the actual
    auction outcome to maintain game integrity.
  related:
  - SendAuctionOutbiddedNotification
  - SendAuctionWonNotification
  - SendAuctionSalePendingNotification
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T19:51:42.305024'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
