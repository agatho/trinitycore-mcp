api:
  class: CombatBehaviorIntegration
  method: EvaluateTargetSwitchPriority
  signature: ActionUrgency CombatBehaviorIntegration::EvaluateTargetSwitchPriority()
documentation:
  brief: Evaluates and returns the urgency level for switching targets during combat.
  description: The EvaluateTargetSwitchPriority method determines how urgently a creature
    or NPC should switch its current combat target based on various factors such as
    target threat, health status, distance, and threat distribution. This method is
    typically used by AI systems to make dynamic decisions about target selection
    and switching behavior in World of Warcraft's TrinityCore environment. The returned
    ActionUrgency value indicates whether the AI should immediately switch targets,
    consider switching soon, or maintain the current target. The evaluation considers
    both immediate tactical needs and long-term combat strategy to ensure optimal
    engagement.
  parameters: []
  returns: Returns an ActionUrgency enum value that represents the priority level
    for switching targets. Possible values include URGENCY_HIGH, URGENCY_MEDIUM, URGENCY_LOW,
    or URGENCY_NONE, indicating how urgently the AI should change its current target
    based on combat conditions and threat analysis.
  examples:
  - title: Basic usage in AI decision making
    code: "ActionUrgency urgency = combatBehavior->EvaluateTargetSwitchPriority();\n\
      if (urgency >= URGENCY_HIGH)\n{\n    // Switch to a more threatening target\n\
      \    creature->AttackStart(newTarget);\n}"
    language: cpp
  - title: Integrating with combat state management
    code: "void CreatureAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n\
      \    {\n        ActionUrgency priority = EvaluateTargetSwitchPriority();\n \
      \       switch (priority)\n        {\n            case URGENCY_HIGH:\n     \
      \           // Immediate target switch\n                DoTargetSwitch();\n\
      \                break;\n            case URGENCY_MEDIUM:\n                //\
      \ Schedule target switch\n                if (m_switchTimer <= 0)\n        \
      \            m_switchTimer = 1000; // 1 second delay\n                break;\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method is part of the core combat behavior system and should be called
    regularly during AI update cycles. The implementation considers multiple factors
    including target threat level, distance to current target, health percentage of
    targets, and overall threat distribution in the combat area. Performance is optimized
    for frequent calls but may vary based on the complexity of the combat situation
    being evaluated.
  warnings: Do not call this method outside of combat situations as it may return
    unexpected values or cause undefined behavior. The method assumes valid target
    data exists and may crash if targets are improperly initialized or removed during
    evaluation.
  related:
  - GetTargetThreat
  - IsTargetValid
  - SwitchTarget
  - EvaluateCombatPriority
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:49:16.457949'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
