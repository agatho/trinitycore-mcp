api:
  class: EnhancedBotAI
  method: OnPositionReached
  signature: void EnhancedBotAI::OnPositionReached(const int & pos)
documentation:
  brief: Handles the event when a bot reaches a specified position in its movement
    path.
  description: The OnPositionReached method is invoked by the EnhancedBotAI system
    when a bot character successfully arrives at a predetermined position during its
    movement sequence. This method serves as a callback mechanism for customizing
    bot behavior upon reaching specific waypoints or destinations. It allows developers
    to implement logic such as triggering actions, changing states, or initiating
    new behaviors once the bot has completed movement to a given location. The method
    is typically called from within the AI's pathfinding and movement execution loop.
  parameters:
  - name: pos
    description: An integer identifier representing the position index in the bot's
      movement path that was just reached. This value corresponds to the index of
      a waypoint or destination within the bot's current path.
  returns: null
  examples:
  - title: Basic Position Reached Handler
    code: "void EnhancedBotAI::OnPositionReached(const int& pos)\n{\n    switch (pos)\n\
      \    {\n        case 0:\n            // Bot reached first waypoint\n       \
      \     Talk(\"Moving to first point.\");\n            break;\n        case 1:\n\
      \            // Bot reached second waypoint\n            DoAction(ACTION_SECOND_WAYPOINT_REACHED);\n\
      \            break;\n        default:\n            // Default behavior for other\
      \ positions\n            break;\n    }\n}"
    language: cpp
  - title: Advanced Position Reached with State Transition
    code: "void EnhancedBotAI::OnPositionReached(const int& pos)\n{\n    if (pos ==\
      \ GetPathSize() - 1)\n    {\n        // Bot reached final destination\n    \
      \    SetCurrentState(BOT_STATE_COMBAT);\n        AttackStart(GetTarget());\n\
      \    }\n    else if (pos % 3 == 0)\n    {\n        // Every third position,\
      \ perform a special action\n        DoCast(SPELL_SPECIAL_ACTION);\n    }\n}"
    language: cpp
  notes: This method is part of the core AI event system and should be overridden
    in derived classes to provide custom behavior. The parameter 'pos' represents
    an internal index that may not directly correspond to user-defined waypoint numbers,
    but rather to the order in which waypoints were added to the path. Ensure that
    any logic within this method does not block or cause long-running operations as
    it is called synchronously during movement execution.
  warnings: Avoid performing heavy computations or blocking calls inside this method
    since it's executed frequently during bot movement. Do not modify the bot's movement
    path directly from this callback, as it may lead to undefined behavior or crashes.
    Be cautious of recursion if calling movement-related functions that might trigger
    another OnPositionReached event.
  related:
  - OnMovementUpdate
  - SetCurrentWaypoint
  - GetPathSize
  - MoveToPosition
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T14:43:19.974508'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
