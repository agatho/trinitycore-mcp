api:
  class: DPSPositioning
  method: IsInCleaveDanger
  signature: bool DPSPositioning::IsInCleaveDanger(const int & pos, Unit * target,
    float cleaveAngle)
documentation:
  brief: Determines whether a given position is within the cleave attack range of
    a target unit.
  description: The IsInCleaveDanger method evaluates if a specified position is located
    within the dangerous area of a cleave attack from a target unit. This functionality
    is typically used in AI behavior scripting to determine safe positioning for DPS
    characters, especially when avoiding area-of-effect attacks that sweep across
    multiple targets. The method calculates the angular relationship between the current
    position and the target's facing direction to determine if the position lies within
    the defined cleave angle. It is commonly employed in combat positioning logic
    to prevent players or NPCs from standing in harmful cleave zones.
  parameters:
  - name: pos
    description: An integer representing the position index or identifier used for
      calculating the cleave danger zone. This value typically corresponds to a specific
      location within the game world or a predefined set of positions.
  - name: target
    description: A pointer to the Unit object that represents the target unit whose
      cleave attack range is being evaluated. This parameter must not be null and
      should point to a valid game entity with proper positioning data.
  - name: cleaveAngle
    description: A floating-point value representing the angular width of the cleave
      attack in degrees. This defines how wide the cleave effect extends from the
      target's facing direction, typically ranging from 0 to 360 degrees.
  returns: Returns true if the specified position is within the cleave danger zone
    defined by the target and cleave angle; otherwise returns false.
  examples:
  - title: Basic usage in AI logic
    code: "if (DPSPositioning::IsInCleaveDanger(currentPosition, targetUnit, 90.0f))\
      \ {\n    // Move to a safer position\n    MoveToSafeZone();\n}"
    language: cpp
  - title: Using with dynamic cleave angle
    code: "float angle = GetCleaveAngleFromSpell();\nif (DPSPositioning::IsInCleaveDanger(playerPosition,\
      \ boss, angle)) {\n    // Adjust positioning based on spell-specific cleave\n\
      \    AdjustPositionForCleave();\n}"
    language: cpp
  notes: This method relies on accurate unit positioning and orientation data. The
    'pos' parameter should be interpreted consistently with the game's coordinate
    system and positioning logic. Performance may be impacted when called frequently
    in tight loops or during high-frequency AI updates.
  warnings: Ensure that the target pointer is valid before calling this method to
    avoid undefined behavior. The cleaveAngle parameter must be a positive value;
    negative angles could lead to unexpected results in angular calculations.
  related:
  - GetCleaveAngle
  - IsInMeleeRange
  - CalculatePositionSafeFromTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T09:53:12.276861'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
