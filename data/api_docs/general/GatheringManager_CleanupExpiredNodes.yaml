api:
  class: GatheringManager
  method: CleanupExpiredNodes
  signature: void GatheringManager::CleanupExpiredNodes()
documentation:
  brief: Removes expired gathering nodes from the world
  description: The CleanupExpiredNodes method iterates through all active gathering
    nodes in the game world and removes those that have exceeded their valid lifetime.
    This method is typically called periodically by the server to maintain clean state
    and prevent accumulation of stale node data. Gathering nodes represent resources
    like ore veins, herb patches, or mining nodes that are temporarily available for
    players to gather. When a node expires, it becomes unavailable for harvesting
    and is removed from the game world to free up memory and maintain performance.
    The cleanup process ensures that only valid, active nodes remain in the system.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in server tick
    code: "void World::Update(uint32 diff)\n{\n    // ... other updates ...\n    _gatheringManager.CleanupExpiredNodes();\n\
      \    // ... other updates ...\n}"
    language: cpp
  notes: This method is typically invoked during server maintenance ticks or periodic
    cleanup routines. It operates on all gathering nodes in the system, so performance
    may be impacted if there are many active nodes. The method should only be called
    from the main game thread to ensure thread safety.
  warnings: Calling this method outside of the main game thread may cause race conditions
    or undefined behavior. Ensure that no player interactions with gathering nodes
    occur during cleanup to avoid potential crashes or inconsistent state.
  related:
  - GatheringManager::AddNode
  - GatheringManager::FindNode
  - GatheringManager::IsNodeExpired
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T03:08:54.517279'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
