api:
  class: Strategy
  method: OnDeactivate
  signature: void Strategy::OnDeactivate(BotAI * ai)
documentation:
  brief: Called when a strategy is deactivated to perform cleanup or state reset operations.
  description: The OnDeactivate method is invoked when a strategy is no longer active
    in the AI system. This method allows strategies to perform necessary cleanup operations,
    reset internal state, or release resources that were allocated during activation.
    It ensures proper resource management and prevents memory leaks or stale data
    in the bot's AI behavior. The method is typically called by the BotAI framework
    when switching between different strategies or when a bot's AI system is shutting
    down.
  parameters:
  - name: ai
    description: Pointer to the BotAI instance that owns this strategy. Provides access
      to the bot's current state, behavior context, and other AI-related functionality
      during deactivation.
  returns: null
  examples:
  - title: Basic Strategy Deactivation
    code: "class MyStrategy : public Strategy {\npublic:\n    void OnDeactivate(BotAI*\
      \ ai) override {\n        // Reset any internal flags or counters\n        m_isActive\
      \ = false;\n        // Clean up allocated resources\n        if (m_target) {\n\
      \            m_target = nullptr;\n        }\n        // Log deactivation event\n\
      \        sLog->outString(\"MyStrategy deactivated for bot %u\", ai->GetBot()->GetGUID().GetCounter());\n\
      \    }\n};"
    language: cpp
  notes: This method is called from the BotAI framework's strategy management system.
    It should be implemented to ensure thread safety if the strategy might be accessed
    concurrently, and it must not perform operations that could block or cause deadlocks
    since it may be called in critical AI processing paths.
  warnings: Do not assume that the BotAI pointer remains valid after calling OnDeactivate,
    as the framework may destroy or reinitialize the AI context. Avoid performing
    heavy computations or blocking operations within this method to prevent performance
    degradation of the AI system.
  related:
  - Strategy::OnActivate
  - Strategy::Update
  - Strategy::GetPriority
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T01:40:29.407642'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
