api:
  class: AuraApplication
  method: UpdateApplyEffectMask
  signature: void AuraApplication::UpdateApplyEffectMask(uint32 newEffMask, bool canHandleNewEffects)
documentation:
  brief: Updates the aura application's effect mask with a new set of active effects.
  description: The UpdateApplyEffectMask method is responsible for updating the internal
    effect mask of an AuraApplication object, which tracks which effects of an aura
    are currently active on a target. This method is typically called when the state
    of aura effects changes, such as when an aura is refreshed or when certain conditions
    affect the application of specific effects. The canHandleNewEffects parameter
    controls whether new effects should be processed and applied to the target immediately.
    This functionality is crucial for maintaining accurate aura states in World of
    Warcraft's combat system, ensuring that only applicable effects are active and
    properly handled.
  parameters:
  - name: newEffMask
    description: A bitmask representing the new set of active effects for the aura
      application. Each bit corresponds to a specific aura effect index, where a set
      bit indicates that the corresponding effect is active.
  - name: canHandleNewEffects
    description: A boolean flag indicating whether newly activated effects should
      be processed and applied immediately. If true, new effects will be handled;
      if false, only existing effects are updated without processing new ones.
  returns: null
  examples:
  - title: Updating Aura Effect Mask
    code: 'AuraApplication* auraApp = player->GetAuraApplication(12345);

      uint32 newMask = 0x07; // Activate effects 0, 1, and 2

      auraApp->UpdateApplyEffectMask(newMask, true);'
    language: cpp
  - title: Conditional Effect Mask Update
    code: 'AuraApplication* auraApp = unit->GetAuraApplication(67890);

      uint32 currentMask = auraApp->GetEffectMask();

      uint32 newMask = currentMask & ~0x02; // Deactivate effect 1

      auraApp->UpdateApplyEffectMask(newMask, false);'
    language: cpp
  notes: This method directly affects the aura's application state and should be called
    carefully to avoid unintended side effects. The effect mask is used internally
    by TrinityCore to determine which aura effects are currently active on a unit.
    When canHandleNewEffects is true, this method may trigger additional processing
    such as applying or removing visual effects, modifying stats, or calling effect-specific
    handlers.
  warnings: Calling this method with incorrect effect masks can lead to inconsistent
    aura states and potentially break gameplay mechanics. Ensure that the newEffMask
    accurately reflects the intended active effects. Avoid frequent calls without
    proper state management, as it may cause performance degradation.
  related:
  - GetEffectMask
  - SetEffectMask
  - HasEffect
  - AddEffect
  - RemoveEffect
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T13:23:46.643245'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
