api:
  class: WorldSession
  method: HandleLootMasterGiveOpcode
  signature: void WorldSession::HandleLootMasterGiveOpcode(WorldPackets::Loot::MasterLootItem
    & masterLootItem)
documentation:
  brief: Processes a master loot item assignment packet from a player in a group loot
    scenario.
  description: The HandleLootMasterGiveOpcode method handles the MasterLootItem packet
    sent by a player when they are acting as the loot master and wish to assign a
    loot item to another group member. This method is part of the group loot system
    in World of Warcraft, where one player (the master looter) distributes loot among
    group members based on rules such as greed, need, or direct assignment. The method
    validates that the player has the appropriate permissions to act as master looter
    and ensures the target player is eligible for the item before processing the assignment.
  parameters:
  - name: masterLootItem
    description: The packet containing information about which item to assign and
      to which player. Includes the loot slot index, target player's GUID, and the
      item's properties.
  returns: null
  examples:
  - title: Basic usage in a group loot scenario
    code: "void WorldSession::HandleLootMasterGiveOpcode(WorldPackets::Loot::MasterLootItem\
      \ & masterLootItem)\n{\n    if (!player->GetGroup() || !player->GetGroup()->IsLootMaster(player))\n\
      \        return;\n\n    Player* targetPlayer = ObjectAccessor::FindPlayer(masterLootItem.PlayerGUID);\n\
      \    if (!targetPlayer)\n        return;\n\n    // Process the loot assignment\
      \ logic here\n    // e.g., call Loot::AddItemToPlayer(targetPlayer, masterLootItem.ItemID);\n\
      }"
    language: cpp
  notes: This method is typically invoked during group loot scenarios when a player
    with master looter permissions attempts to assign an item directly to another
    group member. It assumes that the session's player has already been validated
    as the master looter and that the target player is within the same group.
  warnings: Improper handling of this packet could lead to unauthorized loot assignment
    or exploit opportunities. Always validate that the calling player is indeed the
    master looter before processing any assignments.
  related:
  - HandleLootMasterRollOpcode
  - HandleLootRollOpcode
  - GetGroup
  - IsLootMaster
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:43:48.591457'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
