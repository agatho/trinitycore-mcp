api:
  class: TerrainInfo
  method: GetZoneAndAreaId
  signature: void TerrainInfo::GetZoneAndAreaId(const PhaseShift & phaseShift, uint32
    mapId, uint32 & zoneid, uint32 & areaid, const int & pos, const DynamicMapTree
    * dynamicMapTree)
documentation:
  brief: Retrieves the zone and area identifiers for a given map position using phase
    shift and dynamic map tree data.
  description: The GetZoneAndAreaId method determines the zone and area identifiers
    associated with a specific location on a map. It utilizes the provided PhaseShift
    to understand the current game phase, the map identifier to know which map is
    being queried, and optionally a DynamicMapTree for terrain-specific calculations.
    The position parameter indicates where on the map to check, and the method populates
    the zoneid and areaid references with the corresponding identifiers. This functionality
    is essential for determining player location context within the game world, such
    as for zone-based events, quest tracking, or area-specific mechanics.
  parameters:
  - name: phaseShift
    description: The PhaseShift object that defines the current game phase and visibility
      state for the player or entity.
  - name: mapId
    description: The unique identifier of the map on which to perform the zone/area
      lookup.
  - name: zoneid
    description: Reference to a uint32 that will be populated with the zone identifier
      for the specified position.
  - name: areaid
    description: Reference to a uint32 that will be populated with the area identifier
      for the specified position.
  - name: pos
    description: The index or offset within the phase shift data indicating which
      position to query for zone/area information.
  - name: dynamicMapTree
    description: Optional pointer to a DynamicMapTree object used for terrain-based
      zone and area calculations. Can be null if not required.
  returns: None. The method modifies the zoneid and areaid parameters directly.
  examples:
  - title: Basic Usage Example
    code: 'PhaseShift phase;

      uint32 mapId = 0;

      uint32 zoneId, areaId;

      const int pos = 0;

      DynamicMapTree* tree = nullptr;


      // Assume phase and other variables are initialized

      TerrainInfo::GetZoneAndAreaId(phase, mapId, zoneId, areaId, pos, tree);

      // zoneId and areaId now contain the identifiers for the given position'
    language: cpp
  notes: This method is typically used internally by the TrinityCore server to determine
    player location context. The dynamicMapTree parameter allows for more precise
    terrain-based zone detection, but it's optional and can be set to null if only
    basic zone/area data is needed.
  warnings: Ensure that the phaseShift object is valid and properly initialized before
    calling this method. Incorrect or uninitialized phase data may lead to invalid
    zone/area identifiers being returned.
  related:
  - GetZoneId
  - GetAreaId
  - GetPhaseShift
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T16:50:59.213994'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
