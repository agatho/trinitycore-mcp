api:
  class: ThreadSafeClassAI
  method: GetHighestThreatEnemy
  signature: Unit * ThreadSafeClassAI::GetHighestThreatEnemy() const
documentation:
  brief: Returns the Unit with the highest threat value in the AI's threat list.
  description: The GetHighestThreatEnemy method retrieves the Unit object that currently
    holds the highest threat level within the ThreadSafeClassAI's threat management
    system. This is commonly used by AI-controlled creatures to determine which target
    to attack next based on threat generated by damage dealt or aggro mechanics. The
    method operates in a thread-safe manner, ensuring consistent behavior across concurrent
    operations. It returns a pointer to the Unit with the highest threat, or nullptr
    if no valid targets exist in the threat list.
  parameters: []
  returns: A pointer to the Unit object with the highest threat level, or nullptr
    if no enemies are present in the threat list.
  examples:
  - title: Basic usage to get the primary target
    code: "Unit* target = ai->GetHighestThreatEnemy();\nif (target && target->IsAlive())\
      \ {\n    // Attack the highest threat enemy\n    ai->AttackStart(target);\n}"
    language: cpp
  - title: Check for valid target before engaging
    code: "Unit* highestThreat = ai->GetHighestThreatEnemy();\nif (highestThreat &&\
      \ highestThreat->IsAlive() && highestThreat->IsInWorld()) {\n    // Ensure the\
      \ target is still valid and in the world\n    if (ai->CanSeeOrDetect(highestThreat))\
      \ {\n        ai->AttackStart(highestThreat);\n    }\n}"
    language: cpp
  notes: This method is thread-safe and should be used within AI logic where threat
    management is critical. It relies on the internal threat list maintained by the
    AI system, which updates dynamically as damage is dealt or received.
  warnings: The returned Unit pointer may become invalid if the target dies or leaves
    the world before being used. Always validate the returned pointer and check if
    the target is still alive and in the world before attempting to attack or interact
    with it.
  related:
  - GetThreatList
  - AddThreat
  - RemoveThreat
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T04:41:20.784278'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
