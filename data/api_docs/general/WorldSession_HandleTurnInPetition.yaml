api:
  class: WorldSession
  method: HandleTurnInPetition
  signature: void WorldSession::HandleTurnInPetition(WorldPackets::Petition::TurnInPetition
    & packet)
documentation:
  brief: Processes the turn-in of a petition by a player, validating and completing
    the petition submission.
  description: The HandleTurnInPetition method handles the client-side packet sent
    when a player attempts to turn in a petition, typically used for guild creation
    or other in-game petition systems. This method validates that the petition is
    eligible for submission, checks if the player has the required items or conditions,
    and then processes the petition completion. It ensures that the petition's state
    is properly updated within the game world and sends appropriate responses back
    to the client. The method may also trigger related events such as guild creation
    or quest progression depending on the petition type.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage
    code: "void WorldSession::HandleTurnInPetition(WorldPackets::Petition::TurnInPetition&\
      \ packet)\n{\n    // Validate petition eligibility\n    if (!packet.PetitionId\
      \ || !CanTurnInPetition(packet.PetitionId))\n        return;\n    \n    // Process\
      \ petition submission\n    ProcessPetitionTurnIn(packet.PetitionId);\n    \n\
      \    // Send confirmation to client\n    SendPetitionTurnInResult(PETITION_TURN_IN_SUCCESS);\n\
      }"
    language: cpp
  notes: This method is typically invoked from the main packet handling loop when
    a WorldPackets::Petition::TurnInPetition packet is received. It assumes that the
    packet has already been validated by the network layer and contains valid petition
    data. The method should be called only when the player is in a valid state to
    submit petitions (e.g., not in combat, not in a taxi flight).
  warnings: Improper validation of petition data can lead to exploits such as duplicate
    petition submissions or invalid guild creation attempts. Always ensure that all
    preconditions are checked before processing the petition turn-in.
  related:
  - CanTurnInPetition
  - ProcessPetitionTurnIn
  - SendPetitionTurnInResult
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:09:47.914464'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
