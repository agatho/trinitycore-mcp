api:
  class: TradeSystem
  method: AutoRepairWhenNeeded
  signature: void TradeSystem::AutoRepairWhenNeeded(Player * player)
documentation:
  brief: Automatically repairs player's equipment when needed based on durability
    and available funds.
  description: The AutoRepairWhenNeeded method checks if a player's equipment is damaged
    and attempts to repair it using the player's available gold. This function is
    typically invoked during trade operations or when the player interacts with a
    repair NPC. It evaluates each item in the player's inventory for durability, and
    if an item is below maximum durability, it will attempt to repair it using the
    player's current gold balance. The method respects the game's repair cost calculations
    and will not attempt repairs that exceed the player's available funds. This functionality
    ensures players can maintain their gear without manual intervention during trading
    or other gameplay activities.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Trade Context
    code: "void HandleTradeComplete(Player* player)\n{\n    TradeSystem::AutoRepairWhenNeeded(player);\n\
      }"
    language: cpp
  - title: Integration with Repair NPC Interaction
    code: "void OnGossipHello(Player* player, Creature* creature)\n{\n    if (creature->GetEntry()\
      \ == 12345) // Repair NPC\n    {\n        TradeSystem::AutoRepairWhenNeeded(player);\n\
      \        // Continue with gossip logic\n    }\n}"
    language: cpp
  notes: This method only repairs items that are currently equipped or in the player's
    inventory. It does not repair items stored in banks or mail. The repair process
    respects the game's gold cost calculations and will not attempt repairs exceeding
    the player's available funds. Performance is optimized to avoid unnecessary checks
    on items with full durability.
  warnings: This method should only be called when a player has sufficient gold for
    repairs, as it may silently fail if funds are insufficient. Calling this function
    in rapid succession during high-frequency trading events could cause performance
    issues due to multiple inventory scans.
  related:
  - TradeSystem::RepairItem
  - Player::GetMoney
  - Player::GetItemCount
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:39:59.584069'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
