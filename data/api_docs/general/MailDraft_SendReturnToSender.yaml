api:
  class: MailDraft
  method: SendReturnToSender
  signature: void MailDraft::SendReturnToSender(uint32 sender_acc, int sender_guid,
    int receiver_guid, int trans)
documentation:
  brief: Sends a mail message back to its original sender using the provided account
    and GUID information.
  description: The SendReturnToSender method is used in TrinityCore's mail system
    to return a previously sent mail item back to its original sender. This functionality
    is typically invoked when a mail item cannot be delivered or needs to be reclaimed
    by the sender. The method requires the sender's account ID, sender GUID, receiver
    GUID, and transaction ID to properly route and process the return mail operation.
    It operates within the context of World of Warcraft's in-game mail system where
    all mail transactions are tracked through database entries and player GUIDs.
  parameters:
  - name: sender_acc
    description: The account ID of the sender who originally sent the mail item. This
      is used to identify which account the returned mail should be attributed to.
  - name: sender_guid
    description: The global unique identifier (GUID) of the player who originally
      sent the mail. This identifies the specific character that initiated the mail
      transaction.
  - name: receiver_guid
    description: The GUID of the recipient character who received the original mail
      item. This is used to verify the delivery and ensure proper return routing.
  - name: trans
    description: The transaction ID associated with the mail operation. This helps
      track the specific mail transaction being returned and ensures database consistency.
  returns: null
  examples:
  - title: Basic usage of SendReturnToSender
    code: 'MailDraft draft;

      draft.SendReturnToSender(12345, 67890, 54321, 98765);'
    language: cpp
  notes: This method is typically used internally by the mail system when handling
    failed deliveries or when a player requests to retrieve their sent mail. The method
    does not directly send any messages to players; instead, it prepares the database
    entries for returning the mail. Developers should ensure that all GUIDs and account
    IDs are valid before calling this method to prevent database corruption.
  warnings: Improper use of this method with invalid or mismatched GUIDs can result
    in corrupted mail data or inconsistent game state. This method should only be
    called when you have verified that the mail item is eligible for return, as improper
    usage may lead to unexpected behavior in the mail system.
  related:
  - MailDraft::SendMail
  - MailDraft::AddItem
  - MailDraft::SetSubject
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T08:55:16.107899'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
