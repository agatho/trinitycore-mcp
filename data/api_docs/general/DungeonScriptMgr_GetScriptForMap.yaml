api:
  class: DungeonScriptMgr
  method: GetScriptForMap
  signature: DungeonScript * DungeonScriptMgr::GetScriptForMap(uint32 mapId) const
documentation:
  brief: Retrieves the dungeon script associated with a specified map ID.
  description: The GetScriptForMap method is used to obtain a pointer to the DungeonScript
    instance that corresponds to a given map identifier. This functionality is essential
    for managing and executing custom dungeon behaviors, such as boss encounters,
    quest triggers, or map-specific events within the TrinityCore framework. The method
    performs a lookup in an internal registry of dungeon scripts and returns a valid
    script pointer if one exists for the specified map ID, otherwise it returns nullptr.
    It's commonly used during map loading, player entry, or event handling to ensure
    proper execution of scripted content.
  parameters: []
  returns: A pointer to the DungeonScript object associated with the given map ID,
    or nullptr if no script is registered for that map.
  examples:
  - title: Basic Usage
    code: "DungeonScript* script = sObjectMgr->GetScriptForMap(1234);\nif (script)\n\
      {\n    // Execute script logic\n    script->OnPlayerEnter(player);\n}"
    language: cpp
  - title: Checking for Script Existence
    code: "uint32 mapId = player->GetMapId();\nDungeonScript* dungeonScript = sObjectMgr->GetScriptForMap(mapId);\n\
      if (dungeonScript != nullptr)\n{\n    // Map has a custom dungeon script\n \
      \   dungeonScript->OnPlayerEnter(player);\n}\nelse\n{\n    // Use default map\
      \ behavior\n    player->SendNotification(\"No custom script for this map.\"\
      );\n}"
    language: cpp
  notes: This method performs a lookup operation in an internal registry. The performance
    impact is minimal as it uses optimized data structures, but frequent calls should
    still be considered in performance-critical sections. The returned pointer is
    valid only for the duration of the current execution context and should not be
    stored or used across different threads without proper synchronization.
  warnings: The method returns nullptr when no script is registered for a given map
    ID. Always check for null before using the returned pointer to avoid segmentation
    faults. Additionally, be aware that some maps may not have associated scripts,
    especially in vanilla or classic content where custom scripting is limited.
  related:
  - GetScriptByName
  - GetScriptForInstance
  - RegisterDungeonScript
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T14:08:07.011804'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
