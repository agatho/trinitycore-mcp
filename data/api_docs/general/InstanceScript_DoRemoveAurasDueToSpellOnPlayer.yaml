api:
  class: InstanceScript
  method: DoRemoveAurasDueToSpellOnPlayer
  signature: void InstanceScript::DoRemoveAurasDueToSpellOnPlayer(Player * player,
    uint32 spell, bool includePets, bool includeControlled)
documentation:
  brief: Removes auras caused by a specific spell from a player and optionally their
    pets or controlled units.
  description: The DoRemoveAurasDueToSpellOnPlayer method removes all auras applied
    to a specified player that were caused by a given spell. This functionality is
    commonly used in instance scripts to clean up effects when players leave combat,
    complete objectives, or trigger certain events. The method allows for optional
    inclusion of auras on the player's pets or controlled units (such as guardians
    or minions), making it flexible for various game mechanics. It operates directly
    on the player object and does not return any value. This method is typically called
    during instance event handling or scripted encounters to ensure proper state management.
  parameters:
  - name: player
    description: Pointer to the Player object from which auras will be removed. Must
      not be null.
  - name: spell
    description: The spell ID of the aura(s) to remove. Must correspond to a valid
      spell in the game database.
  - name: includePets
    description: If true, removes auras from the player's pets that were caused by
      the specified spell. If false, only removes auras from the player directly.
  - name: includeControlled
    description: If true, removes auras from units controlled by the player (e.g.,
      guardians, totems) that were caused by the specified spell. If false, only removes
      auras from the player and optionally their pets.
  returns: null
  examples:
  - title: Remove all auras from player due to spell ID 12345
    code: DoRemoveAurasDueToSpellOnPlayer(player, 12345, false, false);
    language: cpp
  - title: Remove auras and pet auras from player due to spell ID 67890
    code: DoRemoveAurasDueToSpellOnPlayer(player, 67890, true, false);
    language: cpp
  notes: This method is part of the InstanceScript base class and is intended for
    use within instance-specific scripts. The spell ID must exist in the game's spell
    database; otherwise, no auras will be removed. Performance-wise, this operation
    is relatively lightweight but should not be called excessively in tight loops.
    It is safe to call from any thread that has access to the player object.
  warnings: Ensure that the player pointer is valid and not null before calling this
    method to avoid crashes. Incorrect spell IDs may result in no action being taken,
    which can be misleading during debugging. Be cautious when using includePets or
    includeControlled flags with spells that have unintended side effects on pets
    or controlled units.
  related:
  - DoRemoveAurasDueToSpell
  - DoRemoveAurasDueToSpellOnPlayers
  - DoRemoveAurasDueToSpellOnUnit
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:29:27.320770'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
