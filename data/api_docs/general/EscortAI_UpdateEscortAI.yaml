api:
  class: EscortAI
  method: UpdateEscortAI
  signature: void EscortAI::UpdateEscortAI(int diff)
documentation:
  brief: Updates the escort AI behavior based on elapsed time and current quest state
  description: The UpdateEscortAI method is a core function of the EscortAI class
    that handles the artificial intelligence logic for NPC escorts in World of Warcraft.
    It processes the escort behavior including waypoint navigation, quest state management,
    and interaction with players during the escort mission. This method is typically
    called every game tick by the core AI system and manages the progression through
    waypoints, handling player interactions, and ensuring proper quest completion.
    The method evaluates the current state of the escort, updates NPC positioning,
    and triggers appropriate events based on the escort's progress.
  parameters:
  - name: diff
    description: The time elapsed since the last update in milliseconds. This value
      is used to calculate movement speed, timing for events, and ensure smooth animation
      transitions during the escort sequence.
  returns: null
  examples:
  - title: Basic UpdateEscortAI Usage
    code: "void MyEscortNPC::UpdateAI(uint32 diff)\n{\n    if (HasEscortState(STATE_ESCORT_MOVING))\n\
      \        EscortAI::UpdateEscortAI(diff);\n}"
    language: cpp
  - title: Advanced UpdateEscortAI with Custom Logic
    code: "void AdvancedEscortNPC::UpdateAI(uint32 diff)\n{\n    if (HasEscortState(STATE_ESCORT_MOVING))\n\
      \    {\n        // Handle custom escort events\n        if (m_uiEventTimer <=\
      \ diff)\n        {\n            HandleCustomEvent();\n            m_uiEventTimer\
      \ = 5000;\n        }\n        else\n            m_uiEventTimer -= diff;\n  \
      \      \n        // Update the escort AI\n        EscortAI::UpdateEscortAI(diff);\n\
      \    }\n}"
    language: cpp
  notes: This method should only be called when the NPC is actively escorting a player.
    The 'diff' parameter must represent actual game time elapsed since last update
    to ensure proper timing of events and movement. The method internally manages
    waypoint progression, player interaction handling, and quest state updates.
  warnings: Do not call this method on NPCs that are not in an active escort state
    as it may cause undefined behavior or incorrect quest progression. Ensure the
    'diff' parameter accurately reflects real game time for proper AI timing.
  related:
  - StartEscort
  - AddWaypoint
  - SetCurrentWaypoint
  - HasEscortState
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T07:52:54.537699'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
