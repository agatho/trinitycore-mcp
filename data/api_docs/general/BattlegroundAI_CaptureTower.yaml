api:
  class: BattlegroundAI
  method: CaptureTower
  signature: bool BattlegroundAI::CaptureTower(int * player)
documentation:
  brief: Captures a tower in a battleground by updating ownership and triggering related
    events.
  description: The CaptureTower method is responsible for handling the capture of
    defensive structures such as towers or flags within a battleground. It updates
    the control state of the tower, notifies players of the change, and may trigger
    additional game mechanics like scoring or quest progress. This method typically
    involves checking player eligibility, validating capture conditions, and updating
    internal battleground state variables. The method returns true if the capture
    was successful and false otherwise.
  parameters:
  - name: player
    description: Pointer to an integer representing the player's GUID or index who
      is attempting to capture the tower. This parameter is used to validate the capturing
      player and update ownership state.
  returns: Returns true if the tower was successfully captured by the specified player,
    false otherwise. Failure may occur due to invalid player state, incorrect capture
    conditions, or already controlled status.
  examples:
  - title: Basic Tower Capture Usage
    code: "if (bgAI->CaptureTower(&playerGUID)) {\n    // Tower captured successfully\n\
      \    SendPacketToAllPlayers(SMSG_TOWER_CAPTURED);\n} else {\n    // Capture\
      \ failed\n    SendPacketToPlayer(player, SMSG_CAPTURE_FAILED);\n}"
    language: cpp
  notes: This method is typically called during battleground events when a player
    attempts to capture an objective. It's important to ensure that the player GUID
    passed is valid and that the battleground state allows for capture. The method
    may also update internal timers or cooldowns related to tower captures.
  warnings: Do not call this method without verifying that the player has proper access
    rights and that the capture conditions are met. Calling with an invalid player
    pointer can lead to undefined behavior or crashes. Ensure that the battleground
    instance is properly initialized before invoking this method.
  related:
  - GetTowerOwner
  - IsTowerCapturable
  - UpdateTowerState
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T20:24:42.153982'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
