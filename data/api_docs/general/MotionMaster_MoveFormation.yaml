api:
  class: MotionMaster
  method: MoveFormation
  signature: void MotionMaster::MoveFormation(Unit * leader, float range, float angle,
    uint32 point1, uint32 point2)
documentation:
  brief: Initiates a formation movement for a unit relative to a leader unit.
  description: The MoveFormation method instructs a Unit to move into a specific formation
    pattern relative to a designated leader unit. This method is typically used in
    AI behavior scripting to create coordinated group movements, such as when NPCs
    follow a leader in a tactical formation. It calculates the target position based
    on range and angle from the leader's current location and initiates movement toward
    that point. The method does not immediately move the unit but schedules the movement
    action within the MotionMaster's queue.
  parameters:
  - name: leader
    description: Pointer to the Unit that serves as the formation leader. This unit
      defines the reference point for calculating the formation position.
  - name: range
    description: Distance in yards from the leader unit where this unit should position
      itself within the formation.
  - name: angle
    description: Angular offset in radians from the leader's facing direction to determine
      the relative position within the formation.
  - name: point1
    description: First point identifier used for pathfinding or movement targeting
      within the formation logic (typically an index or ID).
  - name: point2
    description: Second point identifier used for additional positioning or movement
      targeting within the formation logic.
  returns: null
  examples:
  - title: Basic Formation Movement
    code: 'Unit* leader = ...;

      Unit* follower = ...;

      float range = 3.0f;

      float angle = M_PI / 4; // 45 degrees

      follower->GetMotionMaster()->MoveFormation(leader, range, angle, 0, 1);'
    language: cpp
  - title: Advanced Formation with Dynamic Positioning
    code: 'Unit* leader = ...;

      Unit* follower = ...;

      float baseRange = 5.0f;

      float angleOffset = follower->GetEntry() * M_PI / 8; // Varying angles per NPC
      entry

      follower->GetMotionMaster()->MoveFormation(leader, baseRange, angleOffset, 10,
      20);'
    language: cpp
  notes: This method relies on the MotionMaster's internal movement queue and does
    not immediately execute the move. The actual positioning will occur asynchronously
    during the next update cycle. It is intended for use with AI-controlled units
    that are part of a group or formation, such as in battlegrounds or scripted events.
  warnings: Ensure that the leader unit is valid and alive before calling this method;
    otherwise, it may result in undefined behavior or movement errors. Also note that
    angle should be specified in radians, not degrees, for correct positioning calculations.
  related:
  - MoveChase
  - MoveTargetedHome
  - MoveIdle
  - Clear
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T10:35:56.501463'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
