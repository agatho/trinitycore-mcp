api:
  class: InstanceScript
  method: RegisterPersistentScriptValue
  signature: void InstanceScript::RegisterPersistentScriptValue(PersistentInstanceScriptValueBase
    * value)
documentation:
  brief: Registers a persistent script value with the instance script for long-term
    storage and retrieval.
  description: The RegisterPersistentScriptValue method allows an InstanceScript to
    register a PersistentInstanceScriptValueBase object that can store and persist
    data across different game events or server restarts. This mechanism is typically
    used to maintain state information for instance encounters, such as boss health,
    event progress, or player-related data that must survive temporary disruptions.
    The registered value is managed by the instance script's internal persistence
    system and can be retrieved later using corresponding getter methods. This method
    should be called during instance initialization or when setting up persistent
    data structures.
  parameters:
  - name: value
    description: A pointer to a PersistentInstanceScriptValueBase object that represents
      the persistent data to be registered with this instance script. The object must
      be properly initialized and contain valid data before registration.
  returns: null
  examples:
  - title: Basic Registration of Persistent Value
    code: "class MyInstanceScript : public InstanceScript\n{\npublic:\n    MyInstanceScript(Map*\
      \ map) : InstanceScript(map)\n    {\n        // Create and register a persistent\
      \ value\n        auto* persistentValue = new PersistentInstanceScriptValue<int>(\"\
      boss_kill_count\", 0);\n        RegisterPersistentScriptValue(persistentValue);\n\
      \    }\n};"
    language: cpp
  - title: Registering Multiple Persistent Values
    code: "class BossEncounterScript : public InstanceScript\n{\npublic:\n    BossEncounterScript(Map*\
      \ map) : InstanceScript(map)\n    {\n        // Register multiple persistent\
      \ values for encounter tracking\n        RegisterPersistentScriptValue(new PersistentInstanceScriptValue<bool>(\"\
      boss1_defeated\", false));\n        RegisterPersistentScriptValue(new PersistentInstanceScriptValue<uint32>(\"\
      encounter_timer\", 0));\n        RegisterPersistentScriptValue(new PersistentInstanceScriptValue<std::string>(\"\
      raid_progress\", \"none\"));\n    }\n};"
    language: cpp
  notes: This method assumes that the provided PersistentInstanceScriptValueBase object
    will be managed by the instance script's lifecycle. Developers should ensure that
    registered values are properly initialized before calling this method and avoid
    registering null pointers. The actual persistence mechanism is handled internally
    by TrinityCore's instance management system.
  warnings: Calling RegisterPersistentScriptValue with a null pointer will likely
    cause undefined behavior or crashes. Ensure all persistent values are valid objects
    before registration. Be cautious when re-registering the same value multiple times
    as it may lead to memory leaks or duplicate entries in the persistence system.
  related:
  - GetPersistentScriptValue
  - RemovePersistentScriptValue
  - SavePersistentData
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T05:21:07.184741'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
