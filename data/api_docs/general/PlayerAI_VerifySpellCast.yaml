api:
  class: PlayerAI
  method: VerifySpellCast
  signature: TargetedSpell PlayerAI::VerifySpellCast(int spellId, SpellTarget target)
documentation:
  brief: Verifies and prepares a spell cast for a targeted spell with specified spell
    ID and target.
  description: The VerifySpellCast method in the PlayerAI class is responsible for
    validating and preparing a spell cast operation. It takes a spell ID and a target,
    performs necessary checks to ensure the spell can be cast under current conditions,
    and returns a TargetedSpell structure that encapsulates the validated spell information.
    This method typically handles pre-cast validation such as checking if the player
    has sufficient mana, if the target is valid, and if the spell is currently available
    for casting. The returned TargetedSpell object contains all necessary data to
    proceed with the actual spell execution, including the spell's ID, target, and
    potentially other metadata required for the spell's behavior.
  parameters:
  - name: spellId
    description: The unique identifier of the spell to be verified. This must correspond
      to a valid spell entry in the game's spell database.
  - name: target
    description: The target for the spell cast, which can be a unit, item, or object.
      The target must be valid and within casting range of the player.
  returns: Returns a TargetedSpell object containing the validated spell information
    including the spell ID, target, and other relevant data needed to execute the
    spell. If verification fails, the returned structure may contain error flags or
    invalid state indicators.
  examples:
  - title: Basic Spell Verification
    code: "TargetedSpell spell = playerAI->VerifySpellCast(12345, targetUnit);\nif\
      \ (spell.IsValid()) {\n    // Proceed with spell execution\n    playerAI->CastSpell(spell);\n\
      }"
    language: cpp
  - title: Checking Spell Cast Validity
    code: "TargetedSpell spell = playerAI->VerifySpellCast(67890, targetPlayer);\n\
      if (spell.IsValid()) {\n    // Spell is valid and ready to cast\n    playerAI->ExecuteSpell(spell);\n\
      } else {\n    // Handle invalid spell state\n    playerAI->SendSpellFailedMessage(spell.GetSpellId(),\
      \ SPELL_FAILED_UNKNOWN);\n}"
    language: cpp
  notes: This method is part of the AI system's core spell handling mechanism. It
    should be called before attempting to cast a spell to ensure proper validation
    and prevent invalid spell casts. The method may perform checks such as mana availability,
    target validity, line-of-sight, and spell cooldowns.
  warnings: Improper use of this method without checking the returned TargetedSpell's
    validity can lead to crashes or unexpected behavior. Always verify that the returned
    object is valid before proceeding with spell execution.
  related:
  - CastSpell
  - ExecuteSpell
  - IsSpellValid
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T11:43:11.491213'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
