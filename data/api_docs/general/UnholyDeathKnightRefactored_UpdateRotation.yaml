api:
  class: UnholyDeathKnightRefactored
  method: UpdateRotation
  signature: void UnholyDeathKnightRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the unholy death knight's rotation state based on current target
    and combat conditions
  description: The UpdateRotation method manages the core combat logic for an unholy
    death knight AI, determining which abilities to cast next based on the target's
    status, resource levels, and cooldowns. This method evaluates the optimal sequence
    of spells such as Death Coil, Scourge Strike, and Death and Decay while considering
    rune regeneration, energy management, and tactical positioning. It integrates
    with the broader AI framework to ensure proper execution of the unholy specialization's
    rotation strategy during both single-target and AoE encounters.
  parameters:
  - name: target
    description: Pointer to the target unit that the death knight is engaging in combat.
      This parameter determines which abilities are prioritized based on target type,
      health percentage, and debuff status.
  returns: null
  examples:
  - title: Basic usage in combat loop
    code: "void UnholyDeathKnightAI::Update()\n{\n    Unit* target = me->GetVictim();\n\
      \    if (target)\n        UpdateRotation(&target);\n}"
    language: cpp
  - title: Integration with custom combat state
    code: "void UnholyDeathKnightRefactored::UpdateRotation(int* target)\n{\n    if\
      \ (!target || !me->IsInCombat())\n        return;\n    \n    // Evaluate current\
      \ rotation state\n    if (CanCastDeathCoil())\n        CastDeathCoil(target);\n\
      \    else if (CanCastScourgeStrike())\n        CastScourgeStrike(target);\n\
      \    // Additional logic for other abilities\n}"
    language: cpp
  notes: This method should be called regularly within the AI update loop to maintain
    proper rotation execution. The target pointer must remain valid throughout the
    method's execution, as it directly influences ability selection and casting decisions.
  warnings: Do not call this method without ensuring the target is valid and in combat,
    as invalid targets may cause undefined behavior or incorrect spell targeting.
    The method assumes that all necessary resource checks (runes, energy) are handled
    externally before calling.
  related:
  - CastDeathCoil
  - CastScourgeStrike
  - CanCastDeathAndDecay
  - CheckRuneReadiness
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T18:00:26.894937'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
