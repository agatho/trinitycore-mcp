api:
  class: PlayerAI
  method: SelectAttackTarget
  signature: int * PlayerAI::SelectAttackTarget() const
documentation:
  brief: Selects and returns the GUID of the most threatening target for the player's
    AI to attack.
  description: The SelectAttackTarget method is responsible for determining which
    enemy target the player's AI should prioritize attacking based on threat levels,
    distance, and other combat factors. This method is typically invoked during AI
    decision-making processes to identify the optimal target for the player character.
    It evaluates available enemies within the player's aggro range and selects one
    based on predefined criteria such as highest threat value or proximity. The returned
    GUID uniquely identifies the selected target entity, which can then be used by
    other systems to perform actions like casting spells or initiating melee attacks
    against that specific target.
  parameters: []
  returns: A pointer to an integer representing the GUID of the selected attack target.
    Returns NULL if no valid target is found within the AI's detection range or if
    all targets are out of combat scope.
  examples:
  - title: Basic Usage in Combat AI
    code: "void PlayerAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = GetPlayer()->GetAI()->SelectAttackTarget())\n\
      \    {\n        // Perform attack logic using the selected target\n        if\
      \ (GetPlayer()->CanAttack(target))\n            GetPlayer()->Attack(target,\
      \ true);\n    }\n}"
    language: cpp
  notes: This method is part of the core AI behavior system in TrinityCore and relies
    on internal threat management systems. It may return NULL if no suitable targets
    are present or if the player's current state prevents targeting (e.g., during
    casting, movement, or dead state). The implementation uses standard WoW combat
    mechanics including aggro tracking, target priority, and visibility checks.
  warnings: Do not assume that the returned GUID will always be valid. Always check
    for NULL before using the result to avoid dereferencing invalid pointers. Additionally,
    calling this method during certain AI states (like while casting) may yield unexpected
    results due to concurrent state changes.
  related:
  - GetPlayer
  - CanAttack
  - Attack
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T11:44:09.168529'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
