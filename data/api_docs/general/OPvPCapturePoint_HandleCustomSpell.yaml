api:
  class: OPvPCapturePoint
  method: HandleCustomSpell
  signature: bool OPvPCapturePoint::HandleCustomSpell(Player * player, int spellId,
    GameObject * go)
documentation:
  brief: Handles custom spell effects for OPvP capture points when a player interacts
    with a game object.
  description: The HandleCustomSpell method is responsible for executing custom spell
    logic associated with OPvP (Open PvP) capture points. This method is typically
    invoked when a player interacts with a specific GameObject related to an OPvP
    zone, such as capturing or defending a point. It allows for custom game mechanics
    to be applied during OPvP events, including applying buffs, debuffs, or triggering
    special effects based on the spell ID and the GameObject involved. The method
    ensures proper handling of spell effects within the context of OPvP gameplay,
    maintaining synchronization between client and server states.
  parameters:
  - name: player
    description: Pointer to the Player object who initiated the interaction with the
      GameObject. Must be a valid player instance.
  - name: spellId
    description: Integer identifier of the spell to be applied. This ID corresponds
      to a specific spell defined in the game's spell database.
  - name: go
    description: Pointer to the GameObject that triggered the spell handling. Represents
      the physical object (e.g., capture point banner) involved in the OPvP event.
  returns: Returns true if the spell was successfully handled and applied, false otherwise.
    A return value of false may indicate invalid parameters or failed spell application.
  examples:
  - title: Basic Spell Handling
    code: "if (capturePoint->HandleCustomSpell(player, 12345, go)) {\n    // Spell\
      \ successfully applied\n    player->SendAreaTriggerMessage(\"Spell effect applied!\"\
      );\n} else {\n    // Failed to apply spell\n    player->SendAreaTriggerMessage(\"\
      Failed to apply spell.\");\n}"
    language: cpp
  - title: OPvP Capture Point Interaction
    code: "void OPvPCapturePoint::HandlePlayerEnter(Player* player) {\n    if (player->GetTeamId()\
      \ == TEAM_ALLIANCE) {\n        HandleCustomSpell(player, 34567, m_go);\n   \
      \ }\n}"
    language: cpp
  notes: This method is part of the OPvP system and should only be called in contexts
    where OPvP capture point logic is active. The spell ID must correspond to a valid
    spell defined in the TrinityCore spell database. Ensure that player and GameObject
    pointers are validated before calling this method.
  warnings: Do not call this method without verifying that the player is within an
    OPvP zone or that the GameObject belongs to a capture point. Passing invalid spell
    IDs may result in undefined behavior or server crashes.
  related:
  - GetCapturePoint
  - IsPlayerInCapturePoint
  - UpdatePlayerScores
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T07:51:20.481678'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
