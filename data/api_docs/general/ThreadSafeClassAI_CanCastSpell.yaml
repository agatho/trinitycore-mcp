api:
  class: ThreadSafeClassAI
  method: CanCastSpell
  signature: bool ThreadSafeClassAI::CanCastSpell(uint32 spellId, Unit * target) const
documentation:
  brief: Determines whether a specified spell can be cast by the AI-controlled unit
    on a given target.
  description: The CanCastSpell method evaluates if a spell identified by its unique
    ID is currently available for casting by the AI-controlled unit. It checks various
    conditions such as spell availability, target validity, cooldowns, mana requirements,
    and other game mechanics that may prevent spell casting. This method is typically
    used within AI logic to determine valid actions before attempting to cast spells.
    The method performs these checks in a thread-safe manner, ensuring consistency
    across concurrent operations.
  parameters:
  - name: spellId
    description: The unique identifier of the spell to be evaluated for casting. This
      value corresponds to the Spell.dbc entry ID.
  - name: target
    description: Pointer to the target Unit that the spell would be cast upon. Can
      be nullptr if checking general spell availability without targeting.
  returns: Returns true if the spell can be cast under current conditions; otherwise
    returns false. This includes checks for cooldowns, mana costs, target validity,
    and other game state constraints.
  examples:
  - title: Basic Spell Casting Check
    code: "if (ai->CanCastSpell(12345, targetUnit)) {\n    ai->CastSpell(targetUnit,\
      \ 12345);\n}"
    language: cpp
  - title: Conditional AI Behavior Based on Spell Availability
    code: "if (ai->CanCastSpell(SPELL_FIREBALL, target)) {\n    ai->CastSpell(target,\
      \ SPELL_FIREBALL);\n} else if (ai->CanCastSpell(SPELL_FROST_NOVA, target)) {\n\
      \    ai->CastSpell(target, SPELL_FROST_NOVA);\n}"
    language: cpp
  notes: This method is designed to be thread-safe and should not be used in contexts
    where thread safety cannot be guaranteed. The implementation likely includes checks
    for spell cooldowns, mana costs, target validity, and other game state conditions
    that may prevent casting.
  warnings: Ensure that the target unit pointer is valid before calling this method
    to avoid potential crashes or undefined behavior. Be aware that this check does
    not guarantee successful spell execution after casting, as runtime conditions
    might change between the check and actual cast.
  related:
  - CastSpell
  - IsCasting
  - GetSpellCooldown
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T04:41:44.191039'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
