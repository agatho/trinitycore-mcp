api:
  class: LoSUtils
  method: GetEffectiveSpellRange
  signature: float LoSUtils::GetEffectiveSpellRange(Player * caster, uint32 spellId)
documentation:
  brief: Calculates the effective range of a spell for a given player caster.
  description: The GetEffectiveSpellRange method computes the actual range of a spell
    as modified by the caster's attributes, buffs, and game mechanics. It takes into
    account the base spell range, any applicable modifiers from the caster's equipment
    or abilities, and other relevant factors such as stance, movement state, or special
    spell effects. This value is used primarily for determining whether a target is
    within casting range and for line-of-sight calculations in spell targeting.
  parameters:
  - name: caster
    description: Pointer to the Player object representing the caster of the spell.
      Must not be null.
  - name: spellId
    description: The unique identifier of the spell being evaluated. Used to retrieve
      spell-specific range data from the SpellMgr.
  returns: Returns a float value representing the effective spell range in yards.
    A negative value may indicate an error or invalid spell ID.
  examples:
  - title: Basic usage to determine spell range
    code: "Player* player = ...; // Assume valid player object\nuint32 spellId = 12345;\
      \ // Example spell ID\nfloat range = LoSUtils::GetEffectiveSpellRange(player,\
      \ spellId);\nif (range > 0)\n{\n    // Use the calculated range for targeting\
      \ logic\n    // e.g., check if target is within range\n}"
    language: cpp
  - title: Using effective range in spell targeting
    code: "Player* caster = ...;\nuint32 spellId = 12345;\nfloat effectiveRange =\
      \ LoSUtils::GetEffectiveSpellRange(caster, spellId);\nif (effectiveRange > 0)\n\
      {\n    Unit* target = caster->GetSelectedUnit();\n    if (target && caster->IsWithinDist(target,\
      \ effectiveRange))\n    {\n        // Proceed with spell casting\n        caster->CastSpell(target,\
      \ spellId, true);\n    }\n}"
    language: cpp
  notes: This method relies on the SpellMgr to retrieve base spell information and
    applies various modifiers based on the player's state. It may return different
    values depending on whether the caster is in combat, moving, or affected by specific
    buffs/debuffs.
  warnings: Ensure that both the caster and spellId parameters are valid before calling
    this method. Passing a null caster or invalid spell ID may lead to undefined behavior
    or incorrect range calculations.
  related:
  - GetSpellRange
  - IsWithinSpellRange
  - CalculateSpellRange
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T01:14:54.187491'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
