api:
  class: Unit
  method: DealMeleeDamage
  signature: void Unit::DealMeleeDamage(CalcDamageInfo * damageInfo, bool durabilityLoss)
documentation:
  brief: DealMeleeDamage initiates melee damage calculation and applies it to target
    units.
  description: This method handles the processing of melee damage for a Unit, calculating
    damage based on the provided CalcDamageInfo structure and applying it to targets.
    It manages both direct and indirect damage, including critical hits and miss chances.
    The method is crucial for combat mechanics in World of Warcraft, particularly
    when dealing with physical attacks. It ensures proper handling of damage calculation
    and application while considering durability loss for weapons during combat.
  parameters:
  - name: damageInfo
    description: Pointer to a CalcDamageInfo structure containing damage calculation
      parameters including hit chance, critical chance, and base damage values. This
      structure defines how the damage is calculated and applied.
  - name: durabilityLoss
    description: Boolean flag indicating whether durability loss should occur for
      weapons during combat. If true, weapon durability will decrease based on damage
      dealt.
  returns: null
  examples:
  - title: Basic usage example
    code: 'CalcDamageInfo damageInfo;

      Unit* attacker = player;

      Unit* target = mob;

      attacker->DealMeleeDamage(&damageInfo, true);'
    language: cpp
  - title: Advanced combat example
    code: 'CalcDamageInfo damageInfo;

      // Setup damage info with specific values

      damageInfo.damage = 100;

      // Apply damage to target

      attacker->DealMeleeDamage(&damageInfo, false);'
    language: cpp
  notes: This method is typically called during combat processing and requires proper
    initialization of CalcDamageInfo structure before use. It should be used carefully
    as it directly affects combat mechanics and damage calculation. The method may
    trigger additional events such as critical hit or miss calculations.
  warnings: Improper handling of CalcDamageInfo can lead to incorrect damage application,
    potentially causing game balance issues. This method should only be called when
    proper combat conditions are met.
  related:
  - CalcDamageInfo
  - DealDamage
  - CalculateDamage
  - GetMeleeHitChance
  - GetCritChance
metadata:
  confidence: 0.95
  generated_at: '2025-10-30T21:12:56.679612'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
