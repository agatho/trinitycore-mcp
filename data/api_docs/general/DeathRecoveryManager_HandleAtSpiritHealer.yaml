api:
  class: DeathRecoveryManager
  method: HandleAtSpiritHealer
  signature: void DeathRecoveryManager::HandleAtSpiritHealer(uint32 diff)
documentation:
  brief: Processes spirit healer area trigger events and handles player resurrection
    mechanics.
  description: The HandleAtSpiritHealer method manages the logic for when players
    enter spirit healer area triggers, typically found in cities like Stormwind or
    Orgrimmar. This method processes the resurrection of players who have died and
    are within the spirit healer's influence zone. It checks if any players are waiting
    to be resurrected, handles the resurrection process including experience loss
    penalties, and updates player states accordingly. The method is called periodically
    with a time delta parameter to control update frequency and ensure smooth gameplay
    mechanics.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in game loop
    code: "void GameWorld::Update(uint32 diff)\n{\n    // ... other updates\n    sDeathRecovery->HandleAtSpiritHealer(diff);\n\
      \    // ... other updates\n}"
    language: cpp
  notes: This method is typically called from the main game loop or update system.
    It's important to note that this method handles resurrection logic for players
    who have died in areas where spirit healers are present, which includes handling
    experience penalties and updating player states. The method uses a time-based
    delta parameter to control how frequently it processes these events.
  warnings: This method should only be called from the main game thread as it interacts
    with player objects and game state. Improper use of the diff parameter can cause
    unexpected behavior in resurrection timing or experience loss calculations.
  related:
  - HandleAtSpiritHealer
  - Player::ResurrectPlayer
  - Player::SaveToDB
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T04:08:20.921423'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
