api:
  class: TradeSystem
  method: CalculateRepairCost
  signature: uint32 TradeSystem::CalculateRepairCost(Player * player)
documentation:
  brief: Calculates the cost for repairing all items in a player's inventory
  description: The CalculateRepairCost method determines the total gold cost required
    to repair all damaged equipment and items currently in the player's inventory.
    This function iterates through all equipped items and items in the player's bags,
    calculating repair costs based on item durability, quality, and the vendor's repair
    rates. The method respects the player's current gold balance and applies any applicable
    discounts or modifiers from guilds, professions, or special events. It is typically
    invoked when a player interacts with a repair NPC or uses the repair command.
  parameters: []
  returns: Returns the total gold amount required to fully repair all items in the
    player's inventory. If no items require repair or if the player has insufficient
    funds, returns 0.
  examples:
  - title: Basic Usage Example
    code: "Player* player = ...; // Assume player is initialized\nuint32 totalCost\
      \ = TradeSystem::CalculateRepairCost(player);\nif (totalCost > 0)\n{\n    //\
      \ Player can afford repairs\n    player->ModifyMoney(-static_cast<int32>(totalCost));\n\
      \    // Proceed with actual repair logic\n}"
    language: cpp
  notes: This method does not perform the actual repair operation; it only calculates
    the cost. The calculation considers item durability, quality levels, and vendor-specific
    modifiers. Performance-wise, this function may be called frequently during player
    interactions with NPCs, so optimization is important.
  warnings: The method assumes that all items in the player's inventory are valid
    and accessible. It does not validate item ownership or access permissions beyond
    basic inventory traversal. In edge cases where a player has corrupted or invalid
    items, unexpected behavior may occur.
  related:
  - TradeSystem::RepairPlayerItems
  - Player::GetMoney
  - Item::GetDurability
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:38:45.586711'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
