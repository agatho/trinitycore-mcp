api:
  class: Spell
  method: CallScriptCalcDamageHandlers
  signature: void Spell::CallScriptCalcDamageHandlers(const SpellEffectInfo & spellEffectInfo,
    Unit * victim, int32 & damage, int32 & flatMod, float & pctMod)
documentation:
  brief: Calls script handlers to calculate spell damage modifications for a given
    effect and target
  description: This method invokes all registered script handlers that modify spell
    damage calculations for a specific spell effect and target. It processes both
    flat and percentage-based modifiers to determine the final damage output. The
    method is typically called during spell execution when damage calculations need
    to be adjusted based on custom scripts or game mechanics. It allows for dynamic
    modification of damage values through various script interfaces, making it essential
    for implementing custom spell behaviors in TrinityCore.
  parameters:
  - name: spellEffectInfo
    description: Contains information about the specific spell effect being processed,
      including effect type, base damage, and other relevant parameters
  - name: victim
    description: The target unit receiving the spell effect; can be null if the spell
      is self-targeted or if no target exists
  - name: damage
    description: Reference to the base damage value that will be modified by script
      handlers; this value is updated during processing
  - name: flatMod
    description: Reference to flat damage modifier value that can be adjusted by script
      handlers; represents additive modifications to base damage
  - name: pctMod
    description: Reference to percentage damage modifier value that can be adjusted
      by script handlers; represents multiplicative modifications to base damage
  returns: null
  examples:
  - title: Basic Usage Example
    code: "void Spell::CallScriptCalcDamageHandlers(const SpellEffectInfo& spellEffectInfo,\
      \ Unit* victim, int32& damage, int32& flatMod, float& pctMod)\n{\n    // Implementation\
      \ example\n    // Process all script handlers for damage calculation\n    //\
      \ Update damage values based on script modifications\n}"
    language: cpp
  notes: This method is part of the spell execution flow and should only be called
    during active spell processing. It requires careful handling of references to
    avoid unintended side effects. The method may be invoked multiple times per spell
    depending on effect types and target conditions.
  warnings: Improper handling of references can lead to incorrect damage calculations
    or memory corruption. Care must be taken when modifying the damage values, as
    these modifications affect final spell outcomes.
  related:
  - Spell::CallScriptHandlers
  - Spell::CalculateDamage
  - Spell::GetSpellInfo
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T22:48:02.940135'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
