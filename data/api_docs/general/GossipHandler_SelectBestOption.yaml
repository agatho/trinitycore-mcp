api:
  class: GossipHandler
  method: SelectBestOption
  signature: int32 GossipHandler::SelectBestOption(const int & options, InteractionType
    desiredType) const
documentation:
  brief: Selects the best gossip option based on interaction type and available options.
  description: The SelectBestOption method evaluates available gossip options and
    determines the most appropriate one to present to the player based on the desired
    interaction type. This method is typically used in NPC gossip systems where multiple
    choices are available, and a prioritized selection needs to be made. It considers
    factors such as quest availability, player level, faction status, and other game-specific
    conditions to make an informed decision. The method returns an identifier for
    the selected option that can be used to process the player's subsequent interaction.
  parameters:
  - name: options
    description: An integer representing the bitmask or list of available gossip options.
      Each bit or value corresponds to a specific gossip choice that may be presented
      to the player.
  - name: desiredType
    description: An InteractionType enum value specifying the kind of interaction
      desired (e.g., quest, vendor, gossip menu). This helps determine which option
      is most suitable based on game context.
  returns: Returns an int32 value representing the identifier of the selected gossip
    option. A negative value may indicate an error or no valid option was found.
  examples:
  - title: Basic usage in NPC gossip handler
    code: "int32 selectedOption = gossipHandler.SelectBestOption(0x0F, InteractionType::QUEST);\n\
      if (selectedOption >= 0) {\n    // Process the selected quest option\n    player->PlayerTalkClass->GetGossipMenu().AddMenuItem(-1,\
      \ 0, \"Select Quest\", selectedOption, false);\n}"
    language: cpp
  - title: Using with different interaction types
    code: "int32 vendorOption = gossipHandler.SelectBestOption(0x07, InteractionType::VENDOR);\n\
      int32 questOption = gossipHandler.SelectBestOption(0x0F, InteractionType::QUEST);\n\
      if (vendorOption >= 0 && questOption >= 0) {\n    // Present both options to\
      \ the player\n    player->PlayerTalkClass->GetGossipMenu().AddMenuItem(-1, 0,\
      \ \"Buy Items\", vendorOption, false);\n    player->PlayerTalkClass->GetGossipMenu().AddMenuItem(-1,\
      \ 0, \"Accept Quest\", questOption, false);\n}"
    language: cpp
  notes: This method is part of the core gossip handling system in TrinityCore. It
    assumes that the options and desiredType parameters are properly initialized before
    calling. The implementation likely uses internal logic to prioritize options based
    on player state, quest status, and other contextual factors.
  warnings: Ensure that the 'options' parameter contains valid option identifiers;
    otherwise, the method may return an invalid selection or error code. This method
    should not be called during critical gameplay states where immediate response
    is required as it might perform complex logic checks.
  related:
  - GossipMenu::AddMenuItem
  - Player::PlayerTalkClass->GetGossipMenu()
  - GossipHandler::SendGossipMenu
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T04:12:49.470997'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
