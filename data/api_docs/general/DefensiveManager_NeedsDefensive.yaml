api:
  class: DefensiveManager
  method: NeedsDefensive
  signature: bool DefensiveManager::NeedsDefensive()
documentation:
  brief: Determines whether a defensive action is needed based on current combat state
    and AI logic.
  description: The NeedsDefensive method evaluates the current state of the unit's
    health, threat level, and available defensive abilities to determine if a defensive
    action should be executed. This method is typically used within the AI decision-making
    process to prioritize defensive behaviors over offensive ones when necessary.
    It considers factors such as incoming damage, current health percentage, and the
    presence of beneficial buffs or debuffs that might affect the unit's ability to
    survive.
  parameters: []
  returns: Returns true if the unit requires a defensive action based on its current
    state; otherwise returns false. The decision is made by evaluating combat conditions
    such as low health, high threat level, or lack of defensive cooldowns.
  examples:
  - title: Basic Usage in AI Logic
    code: "if (defensiveManager.NeedsDefensive())\n{\n    // Execute defensive ability\n\
      \    unit->CastSpell(target, DEFENSIVE_SPELL_ID);\n}"
    language: cpp
  - title: Integration with Combat State Check
    code: "if (unit->GetHealthPct() < 30 && defensiveManager.NeedsDefensive())\n{\n\
      \    // Prioritize defensive actions when health is low\n    unit->SetReactState(REACT_DEFENSIVE);\n\
      \    unit->CastSpell(unit, HEALING_SPELL_ID);\n}"
    language: cpp
  notes: This method should be called regularly during AI updates to ensure timely
    defensive responses. The decision logic may vary depending on the specific implementation
    of DefensiveManager and could include checks for cooldowns, mana availability,
    or target proximity.
  warnings: Ensure that defensive actions do not interfere with other AI priorities
    such as threat management or positioning. Calling this method too frequently without
    proper state checks may lead to unnecessary spell casting or resource waste.
  related:
  - DefensiveManager::UpdateDefensive
  - DefensiveManager::HasDefensiveCooldown
  - Unit::GetHealthPct
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T06:34:36.660849'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
