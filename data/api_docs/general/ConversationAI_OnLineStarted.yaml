api:
  class: ConversationAI
  method: OnLineStarted
  signature: void ConversationAI::OnLineStarted(uint32 lineId, Player * sender)
documentation:
  brief: Invoked when a conversation line begins playback in a ConversationAI context.
  description: The OnLineStarted method is a callback function within the ConversationAI
    class that gets triggered whenever a specific line of dialogue starts playing
    within a conversation. This method allows developers to execute custom logic or
    actions at the beginning of each line, such as updating quest progress, triggering
    visual effects, or modifying NPC behavior. It serves as an integration point for
    extending the default conversation behavior with game-specific mechanics. The
    method receives the unique identifier of the line being played and a pointer to
    the player who initiated the conversation.
  parameters:
  - name: lineId
    description: The unique identifier of the conversation line that has started playing.
      This ID corresponds to the line definition in the conversation database.
  - name: sender
    description: Pointer to the Player object who initiated or is involved in the
      conversation. May be nullptr if no player is directly associated with the start
      of the line.
  returns: null
  examples:
  - title: Basic Override Implementation
    code: "void MyConversationAI::OnLineStarted(uint32 lineId, Player* sender)\n{\n\
      \    if (lineId == 1001)\n        sender->AddItem(ITEM_ID_REWARD, 1);\n}"
    language: cpp
  - title: Advanced Logic with Line Conditions
    code: "void MyConversationAI::OnLineStarted(uint32 lineId, Player* sender)\n{\n\
      \    switch (lineId)\n    {\n        case 2001:\n            // Trigger a quest\
      \ update\n            sender->KilledMonsterCredit(QUEST_ID);\n            break;\n\
      \        case 2002:\n            // Play sound effect\n            sender->PlayDirectSound(SOUND_ID_CONVERSATION_START);\n\
      \            break;\n    }\n}"
    language: cpp
  notes: This method is typically called from within the core conversation system
    during line playback. Developers should ensure that any logic implemented here
    does not block or significantly delay the game loop, as it may affect overall
    performance. The sender parameter can be null if the line is triggered by a non-player
    entity.
  warnings: Avoid performing heavy computations or database operations inside this
    method as it's called frequently during conversation playback. Be cautious when
    modifying player state directly, as unintended side effects might occur if not
    properly synchronized with the game's state management.
  related:
  - OnLineFinished
  - OnConversationStart
  - OnConversationEnd
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T16:48:15.709506'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
