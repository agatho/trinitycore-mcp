api:
  class: IdleMovementGenerator
  method: Finalize
  signature: void IdleMovementGenerator::Finalize(int * param0, bool param1, bool
    param2)
documentation:
  brief: Completes the idle movement behavior for a creature or unit, cleaning up
    any associated resources or states.
  description: The Finalize method in IdleMovementGenerator is responsible for performing
    cleanup operations when an idle movement state ends. This typically involves releasing
    any held references, resetting internal state variables, and ensuring that the
    movement generator properly transitions out of its active idle state. In the context
    of TrinityCore's AI system, this method ensures that units no longer performing
    idle movements do not leave behind dangling pointers or inconsistent states. The
    method is called automatically by the movement manager when the idle movement
    is concluded, either through natural completion or interruption.
  parameters:
  - name: param0
    description: Pointer to an integer parameter that may represent a state identifier
      or counter used during idle movement processing.
  - name: param1
    description: Boolean flag indicating whether the idle movement should be interrupted
      or allowed to complete naturally.
  - name: param2
    description: Boolean flag that may control whether cleanup actions are performed
      immediately or deferred for later execution.
  returns: void
  examples:
  - title: Basic usage in AI context
    code: "class MyAI : public CreatureAI {\npublic:\n    void UpdateAI(uint32 diff)\
      \ override {\n        if (!me->IsInCombat()) {\n            // Trigger idle\
      \ movement\n            me->GetMotionMaster()->MoveIdle();\n        }\n    }\n\
      };"
    language: cpp
  - title: Manual Finalize call in custom movement logic
    code: "void CustomIdleBehavior(Unit* unit) {\n    IdleMovementGenerator* idleGen\
      \ = new IdleMovementGenerator();\n    // ... perform idle logic ...\n    idleGen->Finalize(nullptr,\
      \ true, false);\n    delete idleGen;\n}"
    language: cpp
  notes: This method is typically invoked internally by the movement system and should
    not usually be called directly unless implementing custom movement behavior. The
    parameters are used to control how cleanup is performed, with param0 often being
    a state tracking variable, param1 determining interruption status, and param2
    controlling execution timing.
  warnings: Direct invocation of Finalize without proper setup may lead to undefined
    behavior or memory corruption. Ensure that the movement generator has been properly
    initialized before calling this method.
  related:
  - IdleMovementGenerator::Initialize
  - IdleMovementGenerator::Update
  - MovementGenerator::Initialize
  - MovementGenerator::Update
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T02:51:36.569767'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
