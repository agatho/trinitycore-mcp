api:
  class: VehicleScript
  method: OnAddPassenger
  signature: void VehicleScript::OnAddPassenger(Vehicle * veh, Unit * passenger, int8
    seatId)
documentation:
  brief: Called when a unit is added as a passenger to a vehicle
  description: The OnAddPassenger method is invoked whenever a Unit (such as a player
    or creature) is added as a passenger to a Vehicle. This callback allows scripts
    to execute custom logic when passengers board a vehicle, such as applying buffs,
    triggering events, or modifying the passenger's state. The method provides access
    to both the vehicle and the passenger unit, along with the specific seat ID they
    are occupying. It is part of the VehicleScript system which enables developers
    to customize vehicle behavior through scripting.
  parameters:
  - name: veh
    description: Pointer to the Vehicle object that the passenger is being added to.
      This represents the vehicle instance in the game world.
  - name: passenger
    description: Pointer to the Unit object (player or creature) that is being added
      as a passenger to the vehicle.
  - name: seatId
    description: The seat ID where the passenger is being seated. This value typically
      ranges from 0 to the maximum number of seats on the vehicle, with -1 indicating
      an invalid or unoccupied seat.
  returns: null
  examples:
  - title: Basic Vehicle Passenger Addition Script
    code: "class MyVehicleScript : public VehicleScript\n{\npublic:\n    MyVehicleScript()\
      \ : VehicleScript(\"MyVehicleScript\") {}\n\n    void OnAddPassenger(Vehicle*\
      \ veh, Unit* passenger, int8 seatId) override\n    {\n        if (passenger->IsPlayer())\n\
      \        {\n            // Apply a buff when player boards the vehicle\n   \
      \         passenger->CastSpell(passenger, 12345, true);\n            ChatHandler(passenger->ToPlayer()).SendSysMessage(\"\
      You have boarded the vehicle!\");\n        }\n    }\n};"
    language: cpp
  notes: This method is called after the passenger has been successfully added to
    the vehicle's seat. It is not invoked for passengers who fail to board due to
    invalid seat or other conditions. The seatId parameter can be used to determine
    which specific seat was occupied, allowing for different behaviors based on seat
    position.
  warnings: Ensure that any modifications made to the passenger or vehicle within
    this method do not cause recursion or infinite loops. Be cautious when modifying
    vehicle state during passenger addition as it may affect other passengers or vehicle
    behavior.
  related:
  - OnRemovePassenger
  - OnVehicleUpdate
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T19:48:04.953099'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
