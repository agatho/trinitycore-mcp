api:
  class: LootEventBus
  method: CleanupExpiredEvents
  signature: uint32 LootEventBus::CleanupExpiredEvents()
documentation:
  brief: Removes expired loot events from the event bus and returns the count of cleaned
    up events.
  description: The CleanupExpiredEvents method iterates through all active loot events
    stored in the LootEventBus, identifies those that have exceeded their expiration
    time, and removes them from the system. This method is typically called periodically
    by the game loop or cleanup routines to maintain performance and prevent memory
    leaks caused by stale event data. The method ensures that only events that are
    no longer relevant (based on their expiration timestamp) are removed, preserving
    valid loot events for proper processing.
  parameters: []
  returns: Returns a uint32 value representing the number of expired loot events that
    were successfully removed from the event bus. A return value of zero indicates
    no expired events were found or removed.
  examples:
  - title: Basic usage in game loop
    code: "void GameLoop()\n{\n    // Periodically clean up expired loot events\n\
      \    uint32 cleanedCount = sLootEventBus->CleanupExpiredEvents();\n    if (cleanedCount\
      \ > 0)\n    {\n        TC_LOG_DEBUG(\"loot\", \"Cleaned up {} expired loot events\"\
      , cleanedCount);\n    }\n}"
    language: cpp
  notes: This method is designed to be called from the main game thread or a dedicated
    cleanup thread. It performs a linear scan of all active events, so performance
    may degrade with a large number of concurrent loot events. The method does not
    block other operations on the event bus during execution.
  warnings: Calling this method frequently may impact performance if there are many
    active loot events. Ensure it's called at appropriate intervals rather than on
    every game tick to avoid unnecessary overhead.
  related:
  - LootEventBus::AddEvent
  - LootEventBus::GetActiveEvents
  - LootEventBus::ProcessEvents
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T01:06:00.402715'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
