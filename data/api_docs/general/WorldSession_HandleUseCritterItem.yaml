api:
  class: WorldSession
  method: HandleUseCritterItem
  signature: void WorldSession::HandleUseCritterItem(WorldPackets::Item::UseCritterItem
    & packet)
documentation:
  brief: Processes a client request to use a critter item, triggering associated game
    mechanics such as pet summoning or quest progress.
  description: The HandleUseCritterItem method handles incoming packets from the client
    when a player attempts to use an item classified as a 'critter item'. These items
    are typically used in World of Warcraft for interacting with specific NPCs or
    objects that trigger special behaviors, such as summoning pets or advancing quest
    objectives. The method validates the packet data and executes the appropriate
    game logic based on the item's properties and the player's current state. This
    function is part of the WorldSession class which manages all communication between
    a connected client and the server. It ensures that only valid actions are performed
    and prevents exploits related to improper item usage.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleUseCritterItem(WorldPackets::Item::UseCritterItem&\
      \ packet)\n{\n    // Validate item and player state\n    if (!CanUseItem(packet.ItemGUID))\n\
      \        return;\n    \n    // Process critter item logic\n    if (auto* item\
      \ = GetPlayer()->GetItemByGuid(packet.ItemGUID))\n    {\n        // Trigger\
      \ pet summon or quest event\n        HandleCritterItemLogic(item);\n    }\n}"
    language: cpp
  notes: This method is typically invoked during packet processing within the WorldSession's
    main message loop. It assumes that all preconditions (such as valid item GUID
    and player state) have been checked before this function is called. The actual
    behavior of critter items depends on their entry in the database, including their
    ScriptName or SpellId fields.
  warnings: Improper handling of critter items can lead to exploits where players
    bypass quest requirements or gain unintended benefits. Always validate item usage
    against player permissions and item restrictions before executing any logic.
  related:
  - CanUseItem
  - GetPlayer
  - HandleCritterItemLogic
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T20:06:15.584413'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
