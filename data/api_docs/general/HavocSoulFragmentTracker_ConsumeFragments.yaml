api:
  class: HavocSoulFragmentTracker
  method: ConsumeFragments
  signature: bool HavocSoulFragmentTracker::ConsumeFragments(uint32 count)
documentation:
  brief: Consumes a specified number of soul fragments from the tracker and returns
    whether the operation was successful.
  description: The ConsumeFragments method attempts to reduce the current count of
    soul fragments tracked by this HavocSoulFragmentTracker instance by the specified
    amount. It verifies that there are sufficient fragments available before performing
    the consumption. This method is typically used in the context of Warlock class
    abilities, particularly those related to Havoc specialization where soul fragments
    are consumed for various spells or effects. The method ensures atomicity of the
    operation and will return false if the requested count exceeds the available fragments.
  parameters: []
  returns: True if the specified number of fragments were successfully consumed; false
    if there were insufficient fragments available to complete the operation.
  examples:
  - title: Basic Fragment Consumption
    code: "HavocSoulFragmentTracker tracker;\n// Assume tracker has 5 fragments\n\
      bool success = tracker.ConsumeFragments(3);\nif (success)\n{\n    // 3 fragments\
      \ consumed successfully\n}\nelse\n{\n    // Not enough fragments available\n\
      }"
    language: cpp
  - title: Checking Fragment Availability Before Consumption
    code: "HavocSoulFragmentTracker tracker;\nuint32 requiredFragments = 2;\nif (tracker.GetFragmentCount()\
      \ >= requiredFragments)\n{\n    bool success = tracker.ConsumeFragments(requiredFragments);\n\
      \    if (success)\n    {\n        // Proceed with spell or effect that requires\
      \ these fragments\n    }\n}"
    language: cpp
  notes: This method is designed to be thread-safe in the context of TrinityCore's
    multithreaded environment. It internally handles synchronization to prevent race
    conditions when multiple systems attempt to consume fragments simultaneously.
  warnings: Calling this method with a count greater than the current fragment total
    will result in a failed operation and no fragments being consumed. Ensure that
    sufficient fragments are available before calling this method to avoid unexpected
    behavior.
  related:
  - GetFragmentCount
  - AddFragments
  - ResetFragments
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T01:14:26.031858'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
