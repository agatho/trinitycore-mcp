api:
  class: BotAI
  method: OnCombatEvent
  signature: void BotAI::OnCombatEvent(const CombatEvent & event)
documentation:
  brief: Handles combat-related events for bot AI behavior
  description: The OnCombatEvent method is a core callback function in the BotAI class
    that processes and responds to various combat-related events occurring within
    the game world. This method is invoked whenever significant combat actions take
    place, such as damage dealt or received, creature aggro, or player death. It allows
    the bot AI to dynamically adjust its behavior based on real-time combat conditions,
    enabling adaptive tactics and strategic responses during encounters. The method
    integrates with TrinityCore's combat system to ensure bots respond appropriately
    to changing battlefield dynamics.
  parameters:
  - name: event
    description: A constant reference to a CombatEvent object containing details about
      the combat event that occurred, including event type, involved entities, damage
      values, and timestamps.
  returns: null
  examples:
  - title: Basic Combat Event Handling
    code: "void BotAI::OnCombatEvent(const CombatEvent& event) {\n    switch (event.GetType())\
      \ {\n        case COMBAT_EVENT_DAMAGE_DEALT:\n            // Handle damage dealt\
      \ by bot\n            break;\n        case COMBAT_EVENT_DAMAGE_RECEIVED:\n \
      \           // Handle damage received by bot\n            if (event.GetDamage()\
      \ > 100) {\n                // Trigger defensive action\n                ExecuteDefensiveStrategy();\n\
      \            }\n            break;\n        default:\n            break;\n \
      \   }\n}"
    language: cpp
  - title: Advanced Combat Event Processing
    code: "void BotAI::OnCombatEvent(const CombatEvent& event) {\n    if (event.GetType()\
      \ == COMBAT_EVENT_CREATURE_AGGRO) {\n        // Store aggro target for tactical\
      \ decisions\n        m_aggroTarget = event.GetTarget();\n        \n        //\
      \ Switch to aggressive stance\n        SetStance(BOT_STANCE_AGGRESSIVE);\n \
      \       \n        // Initiate combat routine\n        StartCombatRoutine();\n\
      \    } else if (event.GetType() == COMBAT_EVENT_PLAYER_DEATH) {\n        //\
      \ Handle player death event\n        m_bot->GetPlayer()->SendAreaTriggerMessage(\"\
      Bot has died in combat!\");\n        \n        // Reset bot state\n        ResetBotState();\n\
      \    }\n}"
    language: cpp
  notes: This method is called from the game's main combat loop and should be implemented
    with minimal processing to avoid performance degradation. The CombatEvent object
    passed in is read-only and should not be modified. Consider using event queuing
    or asynchronous processing for complex combat logic.
  warnings: Do not perform blocking operations within this method as it may cause
    frame rate drops or game lag. Avoid calling methods that modify the game state
    directly from this handler without proper synchronization. Be cautious of infinite
    recursion if event handling triggers new events.
  related:
  - BotAI::Update
  - BotAI::CombatStart
  - BotAI::CombatStop
  - BotAI::HandleCombatEvent
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T19:39:34.497212'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
