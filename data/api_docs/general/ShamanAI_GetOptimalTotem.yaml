api:
  class: ShamanAI
  method: GetOptimalTotem
  signature: int ShamanAI::GetOptimalTotem(TotemType type, int * target) const
documentation:
  brief: Determines the optimal totem type to summon based on current combat state
    and target conditions.
  description: The GetOptimalTotem method evaluates the ShamanAI's current situation,
    including target status, available totems, and combat requirements, to determine
    which totem type should be summoned next. This method considers factors such as
    enemy proximity, health status, and existing totem placements to make an informed
    decision. It returns a TotemType enumeration value indicating the recommended
    totem to summon. The method also populates the target parameter with a GUID if
    the optimal totem requires targeting a specific unit. This functionality is crucial
    for automated shaman AI behavior in TrinityCore's game engine.
  parameters:
  - name: type
    description: The type of totem to evaluate for optimal summoning. This parameter
      specifies which totem category (e.g., Earth, Fire, Water, Air) the method should
      consider when making its decision.
  - name: target
    description: Pointer to an integer that will be populated with the GUID of a target
      unit if the optimal totem requires targeting. This value is only set if the
      method returns a valid totem type that requires a specific target.
  returns: Returns an integer representing the TotemType enum value indicating the
    optimal totem to summon. Returns -1 if no appropriate totem can be determined
    or if there are no valid targets for targeting-based totems.
  examples:
  - title: Basic usage in shaman AI logic
    code: "int totemType = ai->GetOptimalTotem(TOTEM_TYPE_EARTH, &targetGuid);\nif\
      \ (totemType != -1)\n{\n    // Summon the optimal earth totem\n    // Implementation\
      \ details depend on game mechanics\n}"
    language: cpp
  - title: Using return value for decision making
    code: "int targetGuid;\nint optimalTotem = shamanAI->GetOptimalTotem(TOTEM_TYPE_FIRE,\
      \ &targetGuid);\nswitch (optimalTotem)\n{\n    case TOTEM_TYPE_FIRE:\n     \
      \   // Handle fire totem summoning\n        break;\n    case -1:\n        //\
      \ No suitable totem available\n        break;\n}"
    language: cpp
  notes: This method is part of the core ShamanAI behavior system and integrates with
    TrinityCore's combat and targeting subsystems. It assumes that the AI has access
    to up-to-date information about the current target, nearby enemies, and existing
    totems. The method does not perform actual totem summoning but rather provides
    strategic guidance for when and what to summon.
  warnings: The target parameter should be checked for validity before using its value,
    as it may contain an invalid GUID if no appropriate target exists. This method
    is intended for internal AI usage and should not be called directly by external
    systems without proper context setup.
  related:
  - ShamanAI::UpdateTotems
  - ShamanAI::HasTotem
  - ShamanAI::SummonTotem
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T10:06:27.914444'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
