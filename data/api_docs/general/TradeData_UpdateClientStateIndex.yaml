api:
  class: TradeData
  method: UpdateClientStateIndex
  signature: void TradeData::UpdateClientStateIndex()
documentation:
  brief: Updates the client trade state index for the player's current trade session.
  description: The UpdateClientStateIndex method synchronizes the internal trade data
    state with the client-side trade window, ensuring that both the server and client
    have consistent information about the trade status. This method is typically invoked
    during trade operations such as item additions, removals, or state changes to
    maintain synchronization between the player's local trade interface and the server's
    trade state. It plays a crucial role in preventing desynchronization issues that
    could lead to invalid trades or client-side errors.
  parameters: []
  returns: null
  examples:
  - title: Updating Trade State After Adding Item
    code: 'TradeData* tradeData = player->GetTradeData();

      tradeData->AddItem(itemGuid);

      tradeData->UpdateClientStateIndex(); // Sync client with new item'
    language: cpp
  notes: This method should be called after any modification to the trade data to
    ensure that the client's trade window reflects the current state accurately. It
    is an internal synchronization mechanism and typically not called directly by
    external code.
  warnings: Calling this method without proper trade data context may result in undefined
    behavior or client-side errors. Ensure that a valid trade session exists before
    invoking this method.
  related:
  - TradeData::AddItem
  - TradeData::RemoveItem
  - TradeData::ConfirmTrade
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T17:45:12.692597'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
