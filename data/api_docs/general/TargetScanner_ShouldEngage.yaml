api:
  class: TargetScanner
  method: ShouldEngage
  signature: bool TargetScanner::ShouldEngage(Unit * target) const
documentation:
  brief: Determines whether the AI should engage a target based on current combat
    conditions and rules.
  description: The ShouldEngage method evaluates if a given unit is a valid target
    for engagement by the AI controller. It checks various conditions such as target
    visibility, threat level, faction relationships, and combat readiness to decide
    whether initiating an attack or pursuit is appropriate. This method is typically
    used within AI decision-making loops to determine when to transition from idle
    or patrol states into active combat behavior. The evaluation considers factors
    like whether the target is hostile, within detection range, not under invulnerability
    effects, and meets other game-specific engagement criteria.
  parameters: []
  returns: Returns true if the AI should engage the target based on all evaluated
    conditions; otherwise returns false if engagement should be avoided due to current
    state or rules.
  examples:
  - title: Basic Usage in AI Update Loop
    code: "if (ai->GetTargetScanner()->ShouldEngage(target)) {\n    ai->AttackStart(target);\n\
      }"
    language: cpp
  - title: Conditional Engagement with Additional Checks
    code: "if (scanner->ShouldEngage(target) && target->IsAlive() && !target->HasUnitState(UNIT_STATE_STUNNED))\
      \ {\n    if (me->CanCreatureAttack(target)) {\n        me->AI()->AttackStart(target);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the AI target scanning system and should be called
    before any engagement logic to avoid unnecessary processing. It's designed to
    integrate with TrinityCore's existing combat state management and may interact
    with other AI components like threat tables or movement controllers.
  warnings: Do not call this method directly without ensuring that the target pointer
    is valid and not null, as it could lead to undefined behavior. Also, be aware
    that this method might be called frequently during AI updates, so performance
    should be considered in custom implementations.
  related:
  - TargetScanner::ScanTargets
  - TargetScanner::GetTarget
  - Unit::IsHostileTo
  - Unit::CanCreatureAttack
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T14:29:59.748843'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
