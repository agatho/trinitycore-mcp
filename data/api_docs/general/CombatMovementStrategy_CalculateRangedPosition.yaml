api:
  class: CombatMovementStrategy
  method: CalculateRangedPosition
  signature: int CombatMovementStrategy::CalculateRangedPosition(Player * player,
    Unit * target) const
documentation:
  brief: Calculates and returns the optimal ranged combat position for a player relative
    to a target unit.
  description: The CalculateRangedPosition method determines the best positional offset
    for a player to maintain during ranged combat against a target. It evaluates factors
    such as target movement, player positioning, and combat mechanics to return an
    appropriate distance and angle for optimal ranged engagement. This method is typically
    used by AI systems to guide player movement during ranged combat scenarios. The
    returned value represents a calculated position offset that helps maintain effective
    ranged distance while avoiding melee threat.
  parameters:
  - name: player
    description: Pointer to the Player object for which the ranged position is being
      calculated. Must be a valid player instance with valid combat state.
  - name: target
    description: Pointer to the Unit object that serves as the combat target. Must
      be a valid unit that can be engaged in combat.
  returns: Returns an integer value representing the calculated ranged position offset.
    Positive values typically indicate positioning further from the target, while
    negative values suggest closer proximity. The exact meaning of the return value
    depends on internal AI logic and may represent distance units or a normalized
    position index.
  examples:
  - title: Basic usage in combat AI
    code: "int position = strategy.CalculateRangedPosition(player, target);\nif (position\
      \ > 0) {\n    // Move further away from target\n    player->SetFacing(target->GetOrientation());\n\
      \    player->MovePosition(target->GetPosition(), position);\n}"
    language: cpp
  - title: Using calculated position for movement
    code: "CombatMovementStrategy strategy;\nPlayer* player = ...; // Valid player\
      \ instance\nUnit* target = ...;   // Valid target unit\nint result = strategy.CalculateRangedPosition(player,\
      \ target);\nif (result != 0) {\n    // Apply calculated positioning to player\
      \ movement\n    Position newPosition;\n    player->GetNearPosition(newPosition,\
      \ result, player->GetOrientation());\n    player->MovePosition(newPosition);\n\
      }"
    language: cpp
  notes: This method is part of the AI combat movement system and relies on internal
    state tracking of both player and target units. The calculation considers current
    combat state, target mobility, and player weapon range. Performance impact is
    minimal as it's designed for frequent calls during combat updates.
  warnings: Ensure that both player and target parameters are valid non-null pointers
    before calling this method. Invalid or null pointers will likely cause undefined
    behavior or crashes. This method should only be called during active combat scenarios
    when both units are in valid combat states.
  related:
  - GetCombatDistance
  - CalculateMeleePosition
  - UpdateMovement
  - IsInRange
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:47:03.204454'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
