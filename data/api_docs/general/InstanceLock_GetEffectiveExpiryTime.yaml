api:
  class: InstanceLock
  method: GetEffectiveExpiryTime
  signature: int InstanceLock::GetEffectiveExpiryTime() const
documentation:
  brief: Calculates and returns the effective expiration time of an instance lock.
  description: The GetEffectiveExpiryTime method determines the actual time at which
    an instance lock will expire, taking into account any active extensions or modifications
    to the lock's duration. This value is typically represented as a Unix timestamp.
    The method is commonly used in World of Warcraft's TrinityCore server implementation
    to manage dungeon and raid instance locking mechanics, ensuring players cannot
    enter locked instances beyond their allowed time window. It provides a consistent
    way for the server to evaluate whether an instance lock is still valid or has
    expired.
  parameters: []
  returns: An integer representing the Unix timestamp of when the instance lock will
    effectively expire. A value of 0 or negative may indicate that the lock has no
    expiration or has already expired.
  examples:
  - title: Checking Instance Lock Expiry
    code: "InstanceLock* lock = player->GetInstanceLock();\nint expiryTime = lock->GetEffectiveExpiryTime();\n\
      if (expiryTime > time(nullptr)) {\n    // Instance is still locked\n    int\
      \ secondsRemaining = expiryTime - time(nullptr);\n    printf(\"Instance lock\
      \ expires in %d seconds\\n\", secondsRemaining);\n} else {\n    // Instance\
      \ lock has expired\n    printf(\"Instance lock has expired\\n\");\n}"
    language: cpp
  notes: This method may internally account for server time adjustments or player-specific
    modifiers. It is recommended to call this method only when necessary, as it might
    involve calculations based on current server state and potential lock extensions.
  warnings: The returned timestamp should not be directly compared with local system
    time without considering potential time synchronization issues between the client
    and server. Also, if the instance lock has been extended or modified, the value
    returned may differ from the original expiration time.
  related:
  - GetInstanceLock
  - SetExpiryTime
  - IsLocked
  - ExtendExpiryTime
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T03:18:08.375221'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
