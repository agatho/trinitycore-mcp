api:
  class: BloodDeathKnightRefactored
  method: UpdateRotation
  signature: void BloodDeathKnightRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the blood death knight's rotation state based on target and combat
    conditions
  description: The UpdateRotation method manages the core combat logic for a blood
    death knight AI, determining the appropriate sequence of abilities to execute
    based on current target status, resource levels, and combat state. This method
    evaluates whether to use abilities like Blood Strike, Death Coil, or other rotation
    spells while considering factors such as rune availability, rage generation, and
    target health thresholds. The method operates within the TrinityCore framework's
    AI system and integrates with the player's combat state machine to ensure optimal
    spell usage during encounters.
  parameters:
  - name: target
    description: Pointer to the target unit that the death knight is engaging in combat.
      This parameter determines which enemy the rotation logic will prioritize when
      selecting abilities.
  returns: null
  examples:
  - title: Basic Usage Example
    code: "void MyBloodDK::OnUpdate()\n{\n    Unit* target = GetVictim();\n    if\
      \ (target)\n        UpdateRotation(&target);\n}"
    language: cpp
  - title: Advanced Usage with Target Validation
    code: "void BloodDeathKnightRefactored::UpdateRotation(int* target)\n{\n    if\
      \ (!target || *target <= 0)\n        return;\n    \n    Unit* unitTarget = ObjectAccessor::GetUnit(*this,\
      \ *target);\n    if (!unitTarget || !unitTarget->IsAlive())\n        return;\n\
      \    \n    // Core rotation logic would be implemented here\n    // This method\
      \ updates the AI's current spell selection based on combat state\n}"
    language: cpp
  notes: This method is typically called during the AI update cycle and should not
    be invoked directly from outside the AI framework. The target parameter is expected
    to be a valid unit identifier, though the method includes basic validation to
    prevent crashes with invalid targets. Performance is optimized for frequent calls
    as it's part of the combat AI loop.
  warnings: Do not call this method with a null or invalid target pointer without
    proper validation, as this may lead to undefined behavior. The method assumes
    that the target unit exists and is valid within the current combat context.
  related:
  - GetVictim
  - CastSpell
  - HasRune
  - GetRage
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T08:32:13.539608'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
