api:
  class: Scenario
  method: CanCompleteCriteriaTree
  signature: bool Scenario::CanCompleteCriteriaTree(const int * tree)
documentation:
  brief: Determines whether a scenario criteria tree can be completed based on current
    progress
  description: The CanCompleteCriteriaTree method evaluates whether all requirements
    within a specified criteria tree have been met, allowing the scenario to be marked
    as complete. This method is typically used during scenario progression checks
    to validate if a player has fulfilled all necessary conditions for completing
    a specific objective or milestone within a scenario. The method operates on a
    tree structure of criteria that define what must be achieved before advancement
    or completion can occur. It returns true only when all child criteria in the tree
    are satisfied, making it essential for proper scenario state management and quest
    progression logic.
  parameters:
  - name: tree
    description: Pointer to an integer array representing the criteria tree structure.
      Each element in the array corresponds to a specific criterion node within the
      scenario's objective hierarchy. The array must be properly initialized and contain
      valid criterion identifiers that map to existing scenario requirements.
  returns: Returns true if all criteria nodes within the specified tree have been
    completed, indicating the scenario milestone can advance or complete. Returns
    false if any criterion in the tree has not yet been satisfied, meaning the scenario
    remains in progress or cannot proceed to the next phase.
  examples:
  - title: Basic usage for checking scenario completion
    code: "if (scenario->CanCompleteCriteriaTree(criteriaTree)) {\n    // All criteria\
      \ met, proceed with scenario completion\n    scenario->Complete();\n}"
    language: cpp
  - title: Using in a scenario progression check
    code: "void CheckScenarioProgress(Scenario* scenario) {\n    const int tree[]\
      \ = {1001, 1002, 1003}; // Example criteria IDs\n    if (scenario->CanCompleteCriteriaTree(tree))\
      \ {\n        scenario->SetState(SCENARIO_STATE_COMPLETE);\n        scenario->SendUpdate();\n\
      \    }\n}"
    language: cpp
  notes: This method is integral to TrinityCore's scenario system and should be called
    regularly during scenario updates. The criteria tree parameter must point to a
    valid memory location containing properly structured criterion data. Performance-wise,
    this method performs a linear scan of the criteria tree nodes, so large trees
    may impact frame rate if called frequently.
  warnings: Ensure that the criteria tree pointer is not null before calling this
    method, as dereferencing invalid memory will cause undefined behavior. This method
    should only be used when scenario state is properly initialized and the criteria
    data is consistent with current player progress.
  related:
  - Scenario::GetCriteriaTree
  - Scenario::CompleteCriteriaTree
  - Scenario::IsCompleted
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T23:49:56.107358'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
