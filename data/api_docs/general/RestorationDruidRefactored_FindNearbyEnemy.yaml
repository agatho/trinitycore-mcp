api:
  class: RestorationDruidRefactored
  method: FindNearbyEnemy
  signature: int * RestorationDruidRefactored::FindNearbyEnemy() const
documentation:
  brief: Finds and returns a pointer to the identifier of the nearest enemy unit within
    detection range.
  description: The FindNearbyEnemy method searches for the closest hostile unit (enemy)
    in the vicinity of the Restoration Druid AI agent. It evaluates all nearby units
    and determines which one is the nearest enemy based on distance and visibility.
    This function is typically used during combat decision-making to identify targets
    for spells or abilities such as Entangling Roots, Wrath, or Healing Touch. The
    method returns a pointer to an integer identifier (GUID) representing the target
    enemy unit. If no valid enemy is found within detection range, it may return nullptr
    or a default invalid GUID value depending on implementation details. This function
    is part of the core AI behavior system for druids in TrinityCore's AI framework.
  parameters: []
  returns: A pointer to an integer representing the GUID of the nearest enemy unit,
    or nullptr if no valid enemy is found within detection range.
  examples:
  - title: Basic usage to find and attack nearest enemy
    code: "if (int* enemyGuid = druid->FindNearbyEnemy()) {\n    Unit* target = ObjectAccessor::GetUnit(*druid,\
      \ *enemyGuid);\n    if (target && druid->CanSeeOrDetect(target)) {\n       \
      \ // Cast a spell on the found enemy\n        druid->CastSpell(target, SPELL_WRATH,\
      \ true);\n    }\n}"
    language: cpp
  notes: This method relies on the AI's internal vision and detection range settings.
    Performance is optimized by using spatial partitioning or cached unit lists where
    possible. The returned GUID should be validated before use to ensure the target
    is still alive and within range.
  warnings: Do not assume that the returned pointer will always be valid; always check
    for null before dereferencing. Also, be cautious about using the GUID directly
    without verifying the existence of the unit in the world, as units can die or
    become invalid between the time the method returns and when it's used.
  related:
  - GetNearbyEnemies
  - IsInCombat
  - CanSeeOrDetect
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T11:24:55.786203'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
