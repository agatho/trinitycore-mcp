api:
  class: LFGQueue
  method: UpdateBestCompatibleInQueue
  signature: void LFGQueue::UpdateBestCompatibleInQueue(int itrQueue, const std::string
    & key, const LfgRolesMap & roles)
documentation:
  brief: Updates the best compatible group in the LFG queue for a given player role
    combination.
  description: The UpdateBestCompatibleInQueue method is responsible for maintaining
    and updating the optimal group composition within the Looking For Group (LFG)
    system. It evaluates the current queue state and identifies the most suitable
    group matches based on player roles, ensuring efficient group formation for dungeons,
    raids, and other group content. This method plays a crucial role in the LFG matchmaking
    process by continuously optimizing group compatibility as players join or leave
    queues. The method operates on a specific queue index and updates internal data
    structures to reflect the best available matches for the given role configuration.
  parameters:
  - name: itrQueue
    description: The index identifier of the queue to update. This represents which
      specific LFG queue (e.g., dungeon, raid) is being processed.
  - name: key
    description: A unique string identifier used to distinguish different group configurations
      or player contexts within the queue.
  - name: roles
    description: A map containing role assignments for players in the queue, defining
      their preferred or required roles (tank, healer, damage dealer) for group matching
      purposes.
  returns: null
  examples:
  - title: Updating Best Compatible Group for a Dungeon Queue
    code: 'LfgRolesMap roles;

      roles[PLAYER_ROLE_TANK] = 1;

      roles[PLAYER_ROLE_HEALER] = 2;

      roles[PLAYER_ROLE_DAMAGE] = 3;


      // Update best compatible group for dungeon queue with specific role configuration

      lfgQueue->UpdateBestCompatibleInQueue(0, "dungeon_123", roles);'
    language: cpp
  - title: Updating Compatible Group in Raid Queue Context
    code: 'LfgRolesMap raidRoles;

      raidRoles[PLAYER_ROLE_TANK] = 1;

      raidRoles[PLAYER_ROLE_HEALER] = 1;

      raidRoles[PLAYER_ROLE_DAMAGE] = 5;


      // Update best compatible group for raid queue with specific role configuration

      lfgQueue->UpdateBestCompatibleInQueue(2, "raid_456", raidRoles);'
    language: cpp
  notes: This method is typically called internally by the LFG system when player
    roles change or when new players join a queue. It may trigger internal group matching
    algorithms that consider multiple factors including role distribution, player
    levels, and instance requirements. The method assumes valid input parameters and
    does not perform extensive validation.
  warnings: Calling this method with invalid queue indices or malformed role maps
    can lead to undefined behavior or crashes. Ensure that the queue index corresponds
    to an existing queue in the LFG system before invoking this method.
  related:
  - GetBestCompatibleInQueue
  - AddPlayerToQueue
  - RemovePlayerFromQueue
  - UpdateQueue
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T02:06:57.654549'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
