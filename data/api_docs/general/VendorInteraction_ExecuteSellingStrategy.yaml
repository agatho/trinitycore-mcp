api:
  class: VendorInteraction
  method: ExecuteSellingStrategy
  signature: void VendorInteraction::ExecuteSellingStrategy(Player * player, uint32
    vendorGuid, const SellingStrategy & strategy)
documentation:
  brief: Executes a selling strategy for a player interacting with a vendor.
  description: The ExecuteSellingStrategy method processes and applies a defined selling
    strategy to determine which items from a player's inventory should be sold to
    a vendor. This method is typically invoked during vendor interaction sessions,
    allowing for automated or scripted item sales based on predefined rules. It handles
    the logic of identifying eligible items, calculating their sell values, and updating
    the player's inventory and money accordingly. The strategy parameter defines the
    criteria for which items to sell, such as item quality, type, or specific item
    IDs.
  parameters:
  - name: player
    description: Pointer to the Player object representing the interacting player.
      Must be a valid player instance with an active session.
  - name: vendorGuid
    description: The unique identifier (GUID) of the vendor the player is interacting
      with. Used to validate the vendor context and ensure proper transaction handling.
  - name: strategy
    description: A constant reference to a SellingStrategy object that defines the
      rules for determining which items to sell. Includes criteria such as item quality,
      type, and value thresholds.
  returns: null
  examples:
  - title: Basic Usage of ExecuteSellingStrategy
    code: 'SellingStrategy strategy;

      strategy.minItemQuality = ITEM_QUALITY_UNCOMMON;

      strategy.sellAllItems = false;

      VendorInteraction vendorInteraction;

      vendorInteraction.ExecuteSellingStrategy(player, vendorGuid, strategy);'
    language: cpp
  - title: Advanced Usage with Custom Selling Strategy
    code: 'SellingStrategy strategy;

      strategy.minItemQuality = ITEM_QUALITY_RARE;

      strategy.sellItemsByType.push_back(ITEM_CLASS_WEAPON);

      strategy.sellItemsByType.push_back(ITEM_CLASS_ARMOR);

      strategy.maxItemValue = 100000; // 10g in copper

      VendorInteraction vendorInteraction;

      vendorInteraction.ExecuteSellingStrategy(player, vendorGuid, strategy);'
    language: cpp
  notes: This method assumes that the player and vendor are within valid interaction
    range and that the player has sufficient items to sell according to the provided
    strategy. It does not perform any validation on the vendor GUID or player state
    beyond basic pointer checks. The actual selling process may involve multiple database
    transactions and should be considered when optimizing performance in high-frequency
    scenarios.
  warnings: Ensure that the SellingStrategy object passed is properly initialized
    and validated before calling this method, as incorrect parameters could lead to
    unexpected behavior or errors during item sales. Also, be cautious of concurrent
    access if multiple threads are modifying player inventory or vendor data simultaneously.
  related:
  - VendorInteraction::ExecuteBuyingStrategy
  - VendorInteraction::GetVendorItems
  - Player::GetMoney
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:03:58.765243'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
