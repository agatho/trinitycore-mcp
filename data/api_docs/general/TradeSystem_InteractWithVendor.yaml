api:
  class: TradeSystem
  method: InteractWithVendor
  signature: bool TradeSystem::InteractWithVendor(Player * player, uint32 vendorGuid)
documentation:
  brief: Initiates a trade interaction between a player and a vendor NPC.
  description: The InteractWithVendor method handles the process of a player engaging
    with a vendor NPC to initiate trading. It validates that the player is within
    range of the specified vendor, checks if the vendor is valid and available for
    trading, and then opens the vendor's trade window. This method is typically called
    when a player right-clicks on a vendor NPC or uses a trade-related command. The
    method ensures proper game state management by verifying the vendor's existence
    in the world and that the player has not already started another interaction.
  parameters:
  - name: player
    description: Pointer to the Player object initiating the interaction with the
      vendor.
  - name: vendorGuid
    description: The unique identifier (GUID) of the vendor NPC with whom the player
      wants to trade.
  returns: Returns true if the interaction was successfully initiated and the vendor
    window opened, false otherwise. This can fail if the vendor is not found, out
    of range, or if the player is already engaged in another interaction.
  examples:
  - title: Basic Vendor Interaction
    code: "Player* player = ...;\nuint32 vendorGuid = 12345;\nif (TradeSystem::InteractWithVendor(player,\
      \ vendorGuid)) {\n    // Vendor window opened successfully\n} else {\n    //\
      \ Failed to open vendor window\n}"
    language: cpp
  - title: Checking Interaction Result Before Proceeding
    code: "Player* player = ...;\nuint32 vendorGuid = 12345;\nbool success = TradeSystem::InteractWithVendor(player,\
      \ vendorGuid);\nif (success) {\n    // Proceed with additional logic\n    player->SendTradeUpdate();\n\
      } else {\n    // Handle error case\n    player->GetSession()->SendNotification(\"\
      Unable to interact with vendor.\");\n}"
    language: cpp
  notes: This method relies on the TrinityCore's internal NPC validation and range
    checking systems. It assumes that the vendor GUID is valid and corresponds to
    an actual NPC in the game world. The method does not perform any direct item transfer
    or transaction logic; it only initiates the interaction.
  warnings: Ensure that the vendorGuid provided actually refers to a valid vendor
    NPC, as passing an invalid GUID may result in undefined behavior or silent failures.
    This method should not be called from within other trade-related methods to prevent
    potential stack overflows or state corruption.
  related:
  - TradeSystem::SendTradeUpdate
  - TradeSystem::ProcessTrade
  - Player::GetTrader
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:32:22.936987'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
