api:
  class: VendorInteractionManager
  method: PurchaseItem
  signature: bool VendorInteractionManager::PurchaseItem(Creature * vendor, uint32
    itemId, uint32 quantity)
documentation:
  brief: Attempts to purchase an item from a vendor creature with specified quantity.
  description: The PurchaseItem method handles the logic for a player purchasing an
    item from a vendor in World of Warcraft. It validates whether the player can afford
    the item, checks if the vendor has the item available, and processes the transaction
    by deducting gold and adding the item to the player's inventory. This method is
    typically called when a player interacts with a vendor and selects an item to
    buy. The method returns true upon successful purchase, or false if the transaction
    fails due to insufficient funds, lack of availability, or other constraints.
  parameters:
  - name: vendor
    description: Pointer to the Creature object representing the vendor from whom
      the item is being purchased. Must be a valid vendor creature with a valid entry
      ID and item list.
  - name: itemId
    description: The unique identifier of the item to purchase. This must correspond
      to an item in the vendor's inventory list.
  - name: quantity
    description: The number of items to purchase. Must be a positive integer, typically
      1 for single purchases, but can be greater if multiple items are allowed.
  returns: Returns true if the item was successfully purchased and added to the player's
    inventory; returns false if the purchase failed due to insufficient gold, lack
    of item availability, invalid parameters, or other transaction errors.
  examples:
  - title: Basic Purchase Example
    code: "if (vendorManager.PurchaseItem(vendorCreature, 12345, 1)) {\n    // Item\
      \ purchased successfully\n    SendNotification(\"Item purchased successfully!\"\
      );\n} else {\n    // Purchase failed\n    SendNotification(\"Purchase failed.\
      \ Check your gold or item availability.\");\n}"
    language: cpp
  - title: Multiple Item Purchase Example
    code: "uint32 quantity = 5;\nif (vendorManager.PurchaseItem(vendorCreature, 67890,\
      \ quantity)) {\n    // Successfully purchased 5 of item ID 67890\n    SendNotification(\"\
      Successfully purchased \" + std::to_string(quantity) + \" items.\");\n} else\
      \ {\n    SendNotification(\"Failed to purchase multiple items.\");\n}"
    language: cpp
  notes: This method assumes that the player has already been validated and is within
    interaction range of the vendor. It does not handle UI updates or visual feedback
    directly; these are usually managed by the calling code or game systems. The method
    performs internal checks for item availability, gold balance, and inventory space.
  warnings: Ensure that the vendor pointer is valid and points to a creature with
    a proper vendor entry before calling this method. Passing invalid item IDs or
    quantities may result in undefined behavior or silent failures. This method does
    not perform any validation on player state such as whether they are in combat
    or have sufficient inventory space beyond basic checks.
  related:
  - GetVendorItem
  - CanAffordItem
  - UpdateVendorInventory
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T17:41:02.156264'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
