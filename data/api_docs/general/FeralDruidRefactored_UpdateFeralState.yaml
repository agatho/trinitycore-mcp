api:
  class: FeralDruidRefactored
  method: UpdateFeralState
  signature: void FeralDruidRefactored::UpdateFeralState(int * target)
documentation:
  brief: Updates the feral druid's combat state based on current target and form requirements.
  description: The UpdateFeralState method manages the transition and maintenance
    of a feral druid's combat state, ensuring proper form switching between cat, bear,
    and moonkin forms based on combat conditions and target status. This method evaluates
    whether the druid should remain in or switch out of their current form, considering
    factors such as target threat level, available mana, and combat duration. It also
    handles the automatic switching to appropriate forms when entering or exiting
    combat situations. The method is typically called during AI update cycles to maintain
    optimal combat performance for the feral druid class.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void FeralDruidAI::UpdateAI(uint32 diff)\n{\n    // ... other AI logic\
      \ ...\n    _druid.UpdateFeralState(&target);\n    // ... rest of AI logic ...\n\
      }"
    language: cpp
  notes: This method is part of the core feral druid AI implementation and should
    only be called during active combat or when target state changes. The method internally
    manages form switching and may trigger spell casts, so it's important to ensure
    proper timing within the AI update cycle.
  warnings: Calling this method outside of combat context may result in inappropriate
    form switching or spell casting behavior. The method assumes that the druid has
    a valid target reference and that combat state is properly managed by the calling
    code.
  related:
  - EnterCombat
  - ExitCombat
  - CheckFormRequirements
  - CastFeralSpell
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T05:59:48.315945'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
