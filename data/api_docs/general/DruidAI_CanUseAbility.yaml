api:
  class: DruidAI
  method: CanUseAbility
  signature: bool DruidAI::CanUseAbility(int spellId)
documentation:
  brief: Determines whether a Druid AI can use a specified spell ability based on
    current game state and resource availability.
  description: The CanUseAbility method evaluates if a druid AI character is capable
    of casting a specific spell by checking various conditions such as mana requirements,
    cooldowns, form restrictions, and player state. This method is crucial for AI
    decision-making in TrinityCore's NPC behavior system, ensuring that the druid
    only attempts to cast spells that are currently valid within the game mechanics.
    It considers factors like the druid's current form (e.g., not being able to cast
    certain spells while shapeshifted), available mana, and whether the spell is on
    cooldown.
  parameters:
  - name: spellId
    description: The unique identifier of the spell to check for usability. This corresponds
      to the Spell.dbc entry ID in the TrinityCore database.
  returns: Returns true if the druid AI can cast the specified spell, false otherwise.
    The method returns false when the spell is not available due to resource constraints,
    form restrictions, or cooldowns.
  examples:
  - title: Basic usage to check if a druid can cast Regrowth
    code: "if (druidAI->CanUseAbility(8936)) {\n    // Cast Regrowth spell\n    druidAI->CastSpell(8936);\n\
      }"
    language: cpp
  - title: Using CanUseAbility in a spell selection logic
    code: "int bestSpell = 0;\nfor (int spell : {8936, 774, 5185}) {\n    if (druidAI->CanUseAbility(spell))\
      \ {\n        bestSpell = spell;\n        break;\n    }\n}\nif (bestSpell !=\
      \ 0) {\n    druidAI->CastSpell(bestSpell);\n}"
    language: cpp
  notes: This method is typically called during AI update cycles to determine valid
    actions. It's important to note that the method does not perform actual spell
    casting but only evaluates if it's possible to do so. The implementation may vary
    depending on the druid's current form and state, such as being in combat or out
    of combat.
  warnings: Do not assume that a spell is usable just because CanUseAbility returns
    true; always verify the AI's current state before casting. Also, be aware that
    this method might return false even if the spell is not on cooldown if other conditions
    like form restrictions are not met.
  related:
  - CastSpell
  - GetMana
  - IsInCombat
  - GetForm
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T09:30:28.693605'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
