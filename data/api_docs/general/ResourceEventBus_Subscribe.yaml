api:
  class: ResourceEventBus
  method: Subscribe
  signature: bool ResourceEventBus::Subscribe(BotAI * subscriber, const int & types)
documentation:
  brief: Registers a BotAI subscriber to receive resource events of specified types.
  description: The Subscribe method allows a BotAI instance to register itself with
    the ResourceEventBus to receive notifications about resource-related events. It
    takes a pointer to the subscribing BotAI instance and a bitmask of event types
    to subscribe to. The method returns true if the subscription was successfully
    added, or false if the subscription failed due to invalid parameters or internal
    errors. This mechanism is used in TrinityCore's AI system to enable bots to react
    to changes in resource availability, such as gold, mana, health, or other game
    resources.
  parameters:
  - name: subscriber
    description: Pointer to the BotAI instance that wants to subscribe to resource
      events. Must not be null.
  - name: types
    description: Bitmask representing the types of resource events the subscriber
      wishes to receive. Each bit corresponds to a specific event type (e.g., gold
      change, mana change). Valid values are defined by the ResourceEventType enum
      or similar bitmask constants.
  returns: True if the subscription was successfully registered with the event bus;
    false otherwise. A return value of false may indicate invalid parameters, memory
    allocation failure, or other internal errors.
  examples:
  - title: Basic Subscription Example
    code: "BotAI* myBot = new BotAI();\nint eventTypes = RESOURCE_EVENT_GOLD | RESOURCE_EVENT_MANA;\n\
      bool success = ResourceEventBus::Subscribe(myBot, eventTypes);\nif (success)\
      \ {\n    // Bot is now subscribed to gold and mana change events\n}"
    language: cpp
  - title: Subscription with All Event Types
    code: "BotAI* ai = GetPlayerBot();\nint allEvents = RESOURCE_EVENT_GOLD | RESOURCE_EVENT_MANA\
      \ | RESOURCE_EVENT_HEALTH;\nbool result = ResourceEventBus::Subscribe(ai, allEvents);\n\
      if (!result) {\n    // Handle subscription failure\n    sLog->outError(\"Failed\
      \ to subscribe bot to resource events\");\n}"
    language: cpp
  notes: This method is typically used within the AI subsystem of TrinityCore where
    bots need to react dynamically to changes in their environment or character state.
    Subscriptions are managed internally by the ResourceEventBus and should be cleaned
    up when the BotAI instance is destroyed to prevent memory leaks.
  warnings: Ensure that the subscriber pointer is valid and not null before calling
    this method, as passing a null pointer may lead to undefined behavior or crashes.
    Also, make sure that the event types bitmask contains only valid resource event
    identifiers; invalid bits may be ignored or cause unexpected behavior.
  related:
  - Unsubscribe
  - Publish
  - GetSubscriberCount
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T03:53:15.691938'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
