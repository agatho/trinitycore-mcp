api:
  class: PhasingHandler
  method: OnConditionChange
  signature: bool PhasingHandler::OnConditionChange(WorldObject * object, bool updateVisibility)
documentation:
  brief: Updates phasing conditions and visibility for a WorldObject when its condition
    state changes
  description: The OnConditionChange method is responsible for handling updates to
    phasing conditions for a given WorldObject. When a condition that affects phasing
    status changes, this method is invoked to adjust the object's visibility and phasing
    state accordingly. It ensures that objects are properly shown or hidden based
    on player conditions, phase masks, and other phasing-related criteria within the
    TrinityCore framework. The method typically operates as part of the phasing system's
    event handling mechanism and may trigger updates to nearby players' visibility
    states.
  parameters:
  - name: object
    description: Pointer to the WorldObject whose phasing conditions are changing.
      This can be a Player, Creature, GameObject, or any other object that supports
      phasing.
  - name: updateVisibility
    description: Boolean flag indicating whether visibility should be updated for
      nearby players. When true, the method will notify surrounding players of visibility
      changes; when false, only internal state updates occur.
  returns: Returns true if the phasing update was successfully processed and visibility
    was adjusted, false otherwise. A return value of false typically indicates that
    no changes were necessary or an error occurred during processing.
  examples:
  - title: Basic usage in condition change handler
    code: "void HandlePlayerConditionChange(Player* player)\n{\n    PhasingHandler::OnConditionChange(player,\
      \ true);\n}"
    language: cpp
  - title: Using with custom phasing logic
    code: "void CustomPhasingUpdate(Unit* unit)\n{\n    // Update some condition\n\
      \    unit->SetPhaseMask(123, true);\n    \n    // Notify phasing system of change\n\
      \    bool success = PhasingHandler::OnConditionChange(unit, false);\n    \n\
      \    if (success)\n        sLog->outString(\"Phasing updated successfully for\
      \ %s\", unit->GetName().c_str());\n}"
    language: cpp
  notes: This method is typically called internally by the phasing system when condition
    changes occur. Developers should not call this directly unless implementing custom
    phasing logic. The method may trigger multiple visibility updates and should be
    used judiciously to avoid performance issues in high-frequency scenarios.
  warnings: Calling this method with incorrect parameters can lead to inconsistent
    phasing states or visibility issues for players. Always ensure that the WorldObject
    pointer is valid before calling, and be aware that setting updateVisibility to
    true may cause additional network traffic and processing overhead.
  related:
  - PhasingHandler::UpdatePhasing
  - PhasingHandler::IsInPhase
  - PhasingHandler::GetPhaseMaskFor
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T01:40:41.715542'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
