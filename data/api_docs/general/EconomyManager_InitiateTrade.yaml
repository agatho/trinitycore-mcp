api:
  class: EconomyManager
  method: InitiateTrade
  signature: bool EconomyManager::InitiateTrade(Player * target)
documentation:
  brief: Initiates a trade session between the player and a target player.
  description: The InitiateTrade method starts a trade interaction between the calling
    player and the specified target player. It validates that both players are within
    trading distance, checks for existing trade sessions, and ensures neither player
    is in a combat state. If all conditions are met, it sends the appropriate trade
    start packets to both clients and initializes the trade window. The method returns
    true upon successful initiation of the trade session, or false if preconditions
    are not satisfied.
  parameters:
  - name: target
    description: Pointer to the Player object representing the target player with
      whom the trade is to be initiated. Must be a valid player object within trading
      range.
  returns: Returns true if the trade session was successfully initiated, false otherwise.
    A return of false typically indicates that one or more preconditions failed such
    as being out of range, already in a trade, or in combat.
  examples:
  - title: Basic Trade Initiation
    code: "Player* targetPlayer = ObjectAccessor::FindConnectedPlayer(\"TargetPlayerName\"\
      );\nif (targetPlayer && player->GetDistance(targetPlayer) <= TRADE_DISTANCE)\n\
      {\n    bool success = player->GetEconomyManager()->InitiateTrade(targetPlayer);\n\
      \    if (!success)\n    {\n        player->SendNotification(\"Unable to initiate\
      \ trade.\");\n    }\n}"
    language: cpp
  notes: This method relies on the TrinityCore's internal trade system and requires
    that both players are connected to the server. The trade window will automatically
    close if either player moves out of trading distance or if one player cancels
    the trade.
  warnings: Ensure that the target player pointer is valid before calling this method
    to avoid crashes. Also, be aware that initiating a trade while in combat may result
    in an automatic cancellation of the trade request.
  related:
  - CancelTrade
  - AcceptTrade
  - GetTradeStatus
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T05:35:46.408053'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
