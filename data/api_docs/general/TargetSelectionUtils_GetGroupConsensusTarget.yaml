api:
  class: TargetSelectionUtils
  method: GetGroupConsensusTarget
  signature: Unit * TargetSelectionUtils::GetGroupConsensusTarget(const int & group)
documentation:
  brief: Determines and returns the consensus target for a specified group based on
    shared aggro and targeting behavior.
  description: The GetGroupConsensusTarget method identifies the most commonly targeted
    unit by members of a given group, typically used in AI decision-making for mobs
    or NPCs. It evaluates the current target selections of all group members to determine
    which unit is being prioritized across the group. This function is particularly
    useful in scenarios where multiple units are engaged in combat and need to coordinate
    their attacks on a single target. The method considers factors like threat levels,
    targeting priority, and shared aggro to establish consensus. It's commonly used
    in TrinityCore's AI framework for group-based targeting logic.
  parameters: []
  returns: Returns a pointer to the Unit object that represents the consensus target
    for the specified group. If no valid consensus target exists or if the group is
    invalid, it returns nullptr.
  examples:
  - title: Basic Usage in AI Context
    code: "Unit* target = TargetSelectionUtils::GetGroupConsensusTarget(5);\nif (target)\n\
      {\n    // Proceed with attack logic\n    me->Attack(target, true);\n}"
    language: cpp
  - title: Using Consensus Target for Group Coordination
    code: "Group* group = player->GetGroup();\nif (group)\n{\n    int groupId = group->GetId();\n\
      \    Unit* consensusTarget = TargetSelectionUtils::GetGroupConsensusTarget(groupId);\n\
      \    if (consensusTarget && !me->Attack(consensusTarget, true))\n    {\n   \
      \     // Fallback logic\n        me->SetTarget(nullptr);\n    }\n}"
    language: cpp
  notes: This method relies on the internal state of group members' targeting and
    may not reflect real-time changes immediately. It assumes that all group members
    are in a valid combat state and have established targets. The implementation might
    vary depending on the specific AI behavior module being used.
  warnings: Ensure that the provided group ID is valid and corresponds to an active
    group; otherwise, the method will return nullptr. Be cautious when using this
    in high-frequency update loops as it may involve expensive target evaluation computations.
  related:
  - GetGroupMembers
  - GetTarget
  - SetTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T17:26:52.447347'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
