api:
  class: FormationManager
  method: AdjustForTerrain
  signature: void FormationManager::AdjustForTerrain()
documentation:
  brief: Adjusts formation positions to account for terrain height differences
  description: The AdjustForTerrain method modifies the positioning of units within
    a formation to ensure they maintain proper spatial relationships relative to the
    underlying terrain. This is particularly important in World of Warcraft's TrinityCore
    environment where terrain variations can affect unit positioning, especially when
    units are part of a group or raid formation. The method calculates and applies
    height adjustments to each formation member's position based on the terrain elevation
    at their respective locations. It ensures that formations appear visually consistent
    and functionally correct regardless of the terrain they are positioned on.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Formation Update
    code: "void MyFormation::Update()\n{\n    // ... other update logic ...\n    AdjustForTerrain();\n\
      \    // ... continue with formation logic ...\n}"
    language: cpp
  notes: This method is typically called during formation updates or when units are
    added/removed from a formation. It may involve terrain sampling operations that
    could impact performance if called too frequently. The adjustment is performed
    in world coordinates and accounts for the Z-axis height differences between formation
    members.
  warnings: Calling this method without proper formation initialization can lead to
    undefined behavior. The method assumes that all formation members have valid positions
    and that the terrain data is accessible. It's recommended to call this method
    after any significant terrain changes or unit positioning updates.
  related:
  - GetFormationPosition
  - SetFormationPosition
  - UpdateFormation
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T07:40:39.500599'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
