api:
  class: ZoneScript
  method: OnFlagTaken
  signature: void ZoneScript::OnFlagTaken(GameObject * flag, Player * player)
documentation:
  brief: Handles the event when a player takes a flag in a zone script context.
  description: The OnFlagTaken method is invoked when a player interacts with and
    takes a flag object within a zone script environment. This method is typically
    used in battlegrounds or capture-the-flag style game mechanics where players must
    capture and return flags to score points. The method provides access to both the
    flag GameObject that was taken and the Player who took it, allowing for custom
    logic such as scoring, messaging, or triggering additional events. It serves as
    a hook point for extending default flag-taking behavior in custom zone scripts.
  parameters:
  - name: flag
    description: Pointer to the GameObject representing the flag that was taken by
      the player. This object contains all relevant properties and state of the flag
      in the game world.
  - name: player
    description: Pointer to the Player object who took the flag. This provides access
      to the player's attributes, inventory, and other player-specific data for custom
      handling.
  returns: null
  examples:
  - title: Basic Flag Taken Handling
    code: "void MyZoneScript::OnFlagTaken(GameObject* flag, Player* player)\n{\n \
      \   // Log the event\n    sLog->outString(\"Player %s took flag %u\", player->GetName().c_str(),\
      \ flag->GetEntry());\n    \n    // Award points or trigger other actions\n \
      \   player->AddItem(ITEM_FLAG_CAPTURING, 1);\n}"
    language: cpp
  - title: Advanced Flag Handling with Custom Logic
    code: "void MyZoneScript::OnFlagTaken(GameObject* flag, Player* player)\n{\n \
      \   // Check if player is on the correct team\n    if (player->GetTeamId() ==\
      \ TEAM_ALLIANCE)\n    {\n        // Send a custom message to the player\n  \
      \      player->SendNotification(\"You have captured the flag!\");\n        \n\
      \        // Trigger a sound effect\n        player->PlayDirectSound(SOUND_FLAG_TAKEN);\n\
      \        \n        // Update score or achievement\n        sWorld->UpdatePlayerScore(player,\
      \ SCORE_FLAGS_CAPTURED, 1);\n    }\n}"
    language: cpp
  notes: This method is called from the core game loop during flag interaction events.
    Developers should be aware that the flag GameObject and player may be in a transitional
    state when this method is invoked. It's recommended to validate pointers before
    using them to prevent crashes. The method does not handle flag return logic; for
    that, use OnFlagReturn.
  warnings: Ensure that any modifications made to the player or flag objects are thread-safe
    if the zone script is used in a multi-threaded context. Avoid performing heavy
    computations or blocking operations within this method as it may impact game performance.
  related:
  - OnFlagReturn
  - OnFlagDrop
  - OnPlayerEnter
  - OnPlayerLeave
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T19:00:02.992708'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
