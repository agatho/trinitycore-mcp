api:
  class: TargetSelector
  method: SelectCrowdControlTarget
  signature: Unit * TargetSelector::SelectCrowdControlTarget(uint32 spellId)
documentation:
  brief: Selects a target unit that is affected by a crowd control spell based on
    the provided spell ID.
  description: The SelectCrowdControlTarget method identifies and returns a suitable
    target unit from the current threat list or nearby enemies that is currently under
    the effect of a specified crowd control spell. This method is typically used in
    AI behavior logic to determine which enemy should be targeted for crowd control
    abilities such as Fear, Silence, or Stun. The method evaluates targets based on
    their current spell effects and prioritizes those that are already incapacitated
    or otherwise hindered by crowd control mechanics. It ensures that the selected
    target is valid, within range, and not immune to the specified spell type.
  parameters: []
  returns: A pointer to a Unit object representing the selected target affected by
    the crowd control spell, or nullptr if no suitable target is found.
  examples:
  - title: Basic Usage in AI Script
    code: "Unit* target = selector->SelectCrowdControlTarget(SPELL_FEAR);\nif (target)\n\
      {\n    // Cast fear on the selected target\n    me->CastSpell(target, SPELL_FEAR,\
      \ true);\n}"
    language: cpp
  - title: Using with Multiple Crowd Control Spells
    code: "uint32 spellIds[] = {SPELL_STUN, SPELL_SILENCE, SPELL_FEAR};\nfor (uint32\
      \ spellId : spellIds)\n{\n    Unit* target = selector->SelectCrowdControlTarget(spellId);\n\
      \    if (target)\n    {\n        me->CastSpell(target, spellId, true);\n   \
      \     break;\n    }\n}"
    language: cpp
  notes: This method relies on the internal threat management and spell effect tracking
    systems of TrinityCore. It may not return targets that are immune to crowd control
    effects or those that are flagged as untargetable by game rules. The selection
    process considers unit validity, line-of-sight, and current spell application
    states.
  warnings: The method assumes that the spell ID provided corresponds to a valid crowd
    control spell with proper effect handling in the core. Using an invalid spell
    ID may result in unexpected behavior or no target selection. Ensure that the calling
    context has appropriate checks for unit validity before using the returned pointer.
  related:
  - SelectTarget
  - SelectRandomTarget
  - GetCurrentVictim
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T01:20:39.357869'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
