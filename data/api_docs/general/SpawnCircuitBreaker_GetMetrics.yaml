api:
  class: SpawnCircuitBreaker
  method: GetMetrics
  signature: CircuitBreakerMetrics SpawnCircuitBreaker::GetMetrics() const
documentation:
  brief: Retrieves the current metrics and statistics of the circuit breaker instance
  description: The GetMetrics method returns a CircuitBreakerMetrics structure containing
    detailed performance and operational data about the SpawnCircuitBreaker. This
    includes information such as invocation counts, failure rates, timeouts, and current
    state indicators that help monitor the health and behavior of the circuit breaker
    mechanism. The returned metrics are typically used for debugging, monitoring,
    and performance analysis purposes within the TrinityCore framework. The method
    is thread-safe and does not modify any internal state of the circuit breaker.
  parameters: []
  returns: A CircuitBreakerMetrics object containing current statistics about the
    circuit breaker's operation including invocation counts, failure rates, timeout
    occurrences, and the current breaker state (open/closed/half-open).
  examples:
  - title: Basic Metrics Retrieval
    code: 'SpawnCircuitBreaker* breaker = new SpawnCircuitBreaker();

      CircuitBreakerMetrics metrics = breaker->GetMetrics();

      std::cout << "Failures: " << metrics.failureCount << std::endl;

      std::cout << "Successes: " << metrics.successCount << std::endl;'
    language: cpp
  - title: Monitoring Circuit Breaker Health
    code: "void MonitorCircuitBreaker(SpawnCircuitBreaker& breaker) {\n    CircuitBreakerMetrics\
      \ metrics = breaker.GetMetrics();\n    if (metrics.failureRate > 0.5f) {\n \
      \       sLog->outInfo(LOG_FILTER_GENERAL, \"Warning: High failure rate detected\
      \ (%f)\", metrics.failureRate);\n    }\n    sLog->outInfo(LOG_FILTER_GENERAL,\
      \ \"Circuit Breaker Status: %s\", \n        metrics.currentState == CircuitBreakerState::OPEN\
      \ ? \"OPEN\" : \"CLOSED\");\n}"
    language: cpp
  notes: The returned metrics are snapshots taken at the time of the method call and
    may not reflect real-time values if the circuit breaker is actively being modified
    by concurrent operations. The metrics structure includes floating-point failure
    rates that are calculated based on recent invocation history.
  warnings: Do not rely on the returned metrics for making critical decisions about
    system behavior, as they represent a point-in-time snapshot. The circuit breaker
    may have changed state between when GetMetrics is called and when its values are
    used.
  related:
  - SetMetrics
  - ResetMetrics
  - GetState
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T18:37:43.876218'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
