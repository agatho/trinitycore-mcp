api:
  class: QuestRequirementAnalyzer
  method: AnalyzeClassRaceRequirements
  signature: void QuestRequirementAnalyzer::AnalyzeClassRaceRequirements(const Quest
    * quest, Player * bot, int & issues)
documentation:
  brief: Analyzes class and race requirements for a quest and updates the issue counter
    if requirements are not met.
  description: The AnalyzeClassRaceRequirements method evaluates whether a given player
    meets the class and race restrictions defined in a quest. It checks if the player's
    class and race align with the quest's allowed classes and races, and increments
    the provided issues counter if mismatches are found. This functionality is typically
    used during quest validation or bot quest selection logic to ensure that only
    appropriate quests are considered for a given player character. The method does
    not modify the quest or player objects directly but solely reports compliance
    issues through the output parameter.
  parameters:
  - name: quest
    description: Pointer to the Quest object being analyzed for class and race requirements.
      Must not be null.
  - name: bot
    description: Pointer to the Player object whose class and race are checked against
      the quest's restrictions. Must not be null.
  - name: issues
    description: Reference to an integer that is incremented whenever a class or race
      requirement is not met by the player. The value is modified in-place.
  returns: null
  examples:
  - title: Basic Quest Requirement Analysis
    code: "Quest* quest = sObjectMgr->GetQuestTemplate(12345);\nPlayer* bot = player;\n\
      int issues = 0;\nquestAnalyzer.AnalyzeClassRaceRequirements(quest, bot, issues);\n\
      if (issues > 0) {\n    // Handle requirement violations\n}"
    language: cpp
  - title: Integration with Quest Selection Logic
    code: "void SelectAvailableQuests(Player* player, std::vector<Quest*>& availableQuests)\
      \ {\n    for (auto& quest : allQuests) {\n        int issues = 0;\n        questAnalyzer.AnalyzeClassRaceRequirements(quest,\
      \ player, issues);\n        if (issues == 0) {\n            availableQuests.push_back(quest);\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method assumes that the Quest and Player objects are valid and properly
    initialized. It relies on internal quest data structures such as allowed classes
    and races, which should be populated during server startup or quest loading. Performance
    is generally low since it involves simple comparisons but may become noticeable
    when analyzing many quests in a loop.
  warnings: Ensure that both the quest and player parameters are non-null before calling
    this method to prevent crashes. The issues counter will be modified even if the
    player meets all requirements, so always check the value after calling the function
    to determine if any problems were detected.
  related:
  - AnalyzeLevelRequirements
  - AnalyzeReputationRequirements
  - AnalyzeItemRequirements
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T21:23:57.198118'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
