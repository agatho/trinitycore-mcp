api:
  class: SoulShardResource
  method: GenerateFromDamage
  signature: void SoulShardResource::GenerateFromDamage(uint32 damage, uint32 targetMaxHealth)
documentation:
  brief: Generates soul shards based on damage dealt to a target with maximum health.
  description: The GenerateFromDamage method calculates and adds soul shards to the
    player's resource pool based on the amount of damage dealt to a target relative
    to the target's maximum health. This method is typically invoked during combat
    when a player deals damage to an enemy, contributing to the accumulation of soul
    shards used for various warlock abilities such as Consume Soul or other soul shard-consuming
    spells. The calculation considers both the damage dealt and the target's total
    health to determine how many soul shards should be generated.
  parameters:
  - name: damage
    description: The amount of damage dealt to the target during the attack. Must
      be a non-negative integer representing the damage value.
  - name: targetMaxHealth
    description: The maximum health points of the target being damaged. This value
      determines the proportion of soul shards generated based on the damage ratio.
  returns: null
  examples:
  - title: Basic Usage in Combat
    code: "void OnPlayerAttack(Unit* target)\n{\n    uint32 damage = player->CalculateDamage(target);\n\
      \    uint32 maxHealth = target->GetMaxHealth();\n    soulShardResource->GenerateFromDamage(damage,\
      \ maxHealth);\n}"
    language: cpp
  - title: Integration with Spell Effects
    code: "void OnSpellHit(Unit* target, SpellInfo const* spellInfo)\n{\n    if (spellInfo->Id\
      \ == 198590) // Example warlock spell\n    {\n        uint32 damage = spellInfo->Effects[0].Damage.Min;\n\
      \        uint32 maxHealth = target->GetMaxHealth();\n        soulShardResource->GenerateFromDamage(damage,\
      \ maxHealth);\n    }\n}"
    language: cpp
  notes: This method is part of the warlock's resource management system and directly
    affects gameplay mechanics related to soul shard generation. The actual number
    of soul shards generated depends on internal calculations within the TrinityCore
    engine that may vary based on game balance settings or player class-specific modifiers.
  warnings: Ensure that both damage and targetMaxHealth parameters are valid and non-zero
    to avoid unexpected behavior or division by zero errors in internal calculations.
    This method should only be called during active combat scenarios where damage
    is being dealt.
  related:
  - GetSoulShards
  - AddSoulShards
  - RemoveSoulShards
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T21:50:21.954648'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
