api:
  class: MovementValidator
  method: HasLineOfSight
  signature: bool MovementValidator::HasLineOfSight(Map * map, const int & start,
    const int & end) const
documentation:
  brief: Determines whether there is a clear line of sight between two points in a
    map.
  description: The HasLineOfSight method checks if a direct visual path exists between
    two specified points within a given map. This functionality is commonly used in
    game mechanics such as spell casting, NPC interaction, and AI behavior to determine
    if an object or character can see another without obstruction. The method evaluates
    the spatial relationship between the start and end coordinates, taking into account
    map geometry, terrain features, and any blocking objects or environments that
    might impede visibility. It returns true if there is an unobstructed path, and
    false otherwise.
  parameters:
  - name: map
    description: Pointer to the Map object where the line of sight check is performed.
      Must not be null.
  - name: start
    description: Integer representing the starting point identifier or index used
      for line of sight calculation. Typically corresponds to a specific location
      within the map's coordinate system.
  - name: end
    description: Integer representing the ending point identifier or index used for
      line of sight calculation. Must correspond to a valid location within the same
      map as the start parameter.
  returns: Returns true if there is an unobstructed line of sight between the start
    and end points, false otherwise.
  examples:
  - title: Basic Line of Sight Check
    code: "if (validator.HasLineOfSight(map, 100, 200)) {\n    // Perform action if\
      \ line of sight exists\n    std::cout << \"Clear path between points.\" << std::endl;\n\
      }"
    language: cpp
  - title: Using Line of Sight in Spell Casting
    code: "if (player->HasLineOfSight(target->GetMap(), player->GetPositionX(), target->GetPositionX()))\
      \ {\n    // Cast spell if target is visible\n    player->CastSpell(target, SPELL_FIREBALL);\n\
      } else {\n    // Notify player that target is not in sight\n    player->SendSpellFailed(0,\
      \ SPELL_FIREBALL, 0, 0, 1);\n}"
    language: cpp
  notes: This method relies on internal map data structures and may perform expensive
    spatial queries depending on the complexity of the map. It is recommended to cache
    results when checking multiple points against a fixed location to avoid redundant
    calculations.
  warnings: Ensure that both start and end parameters refer to valid locations within
    the same map instance; otherwise, behavior is undefined. Avoid calling this method
    with invalid or uninitialized map pointers as it can lead to crashes or incorrect
    results.
  related:
  - IsWithinLOS
  - CheckLineOfSight
  - HasPath
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T23:11:10.464969'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
