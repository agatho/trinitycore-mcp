api:
  class: LootAnalysis
  method: CompareWeaponItems
  signature: float LootAnalysis::CompareWeaponItems(Player * player, const LootItem
    & newItem, const Item * currentItem)
documentation:
  brief: Compares weapon item values for loot analysis to determine relative worth.
  description: The CompareWeaponItems method evaluates and compares the value of a
    new weapon item against an existing weapon item owned by a player. It calculates
    a relative worth score based on various weapon attributes such as damage, speed,
    enchantments, and item level. This method is used internally by the LootAnalysis
    system to help determine whether a newly acquired weapon is superior to the one
    currently equipped by the player. The comparison takes into account the weapon's
    stats, quality, and potential for improvement through enchantments or gemming.
  parameters:
  - name: player
    description: Pointer to the Player object whose inventory is being analyzed. Must
      be a valid player instance with an active session.
  - name: newItem
    description: Reference to the LootItem structure representing the new weapon item
      to be compared. Contains information about item ID, stack count, and loot properties.
  - name: currentItem
    description: Pointer to the existing Item object currently equipped or in inventory
      by the player. Can be nullptr if no item exists at that slot.
  returns: Returns a float value representing the relative worth comparison between
    the new and current weapon items. A positive value indicates the new item is better,
    negative indicates it's worse, and zero means they are equivalent in value.
  examples:
  - title: Basic Weapon Comparison
    code: "LootAnalysis analysis;\nPlayer* player = ...; // Valid player instance\n\
      LootItem newItem = ...; // New weapon loot item\nItem* currentItem = player->GetItemByPos(INVTYPE_WEAPON,\
      \ 0); // Currently equipped weapon\nfloat comparison = analysis.CompareWeaponItems(player,\
      \ newItem, currentItem);\nif (comparison > 0.0f) {\n    // New weapon is better\n\
      }"
    language: cpp
  - title: Handling Null Current Item
    code: 'LootAnalysis analysis;

      Player* player = ...;

      LootItem newItem = ...;

      Item* currentItem = nullptr; // No current weapon

      float comparison = analysis.CompareWeaponItems(player, newItem, currentItem);

      // Will return positive value if newItem is better than empty slot'
    language: cpp
  notes: This method performs calculations based on item statistics and may involve
    complex comparisons including weapon damage per second (DPS), item level scaling,
    and enchantment bonuses. The implementation likely uses internal TrinityCore item
    evaluation functions to compute these values accurately.
  warnings: Ensure that the player parameter is valid and not null before calling
    this method. Passing an invalid currentItem pointer can lead to undefined behavior
    or crashes. This method should only be called during active gameplay sessions
    when items are properly initialized.
  related:
  - LootAnalysis::AnalyzeLoot
  - LootAnalysis::CompareItems
  - Player::GetItemByPos
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T01:25:28.487561'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
