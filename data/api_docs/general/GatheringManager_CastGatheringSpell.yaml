api:
  class: GatheringManager
  method: CastGatheringSpell
  signature: bool GatheringManager::CastGatheringSpell(const GatheringNode & node)
documentation:
  brief: Casts a gathering spell on the specified gathering node and returns true
    if successful.
  description: The CastGatheringSpell method is responsible for initiating the process
    of gathering resources from a specified gathering node, such as mining a vein
    of ore or herbalism. It typically checks if the player has the appropriate skill
    level, item requirements, and is within range of the node before casting the spell.
    The method handles the logic for applying the gathering spell to the node and
    updating the player's inventory with the gathered resources. This method is part
    of the core gathering system in TrinityCore and integrates with the game's resource
    management and player progression mechanics.
  parameters:
  - name: node
    description: Reference to the GatheringNode object that represents the resource
      node to be gathered from. The node contains information about the type of resource,
      position, and required skill levels.
  returns: Returns true if the gathering spell was successfully cast and the player
    obtained resources; returns false if the operation failed due to invalid conditions
    such as insufficient skill, range, or other preconditions.
  examples:
  - title: Basic Usage
    code: "GatheringNode node = GetGatheringNodeById(12345);\nbool success = gatheringManager.CastGatheringSpell(node);\n\
      if (success)\n{\n    // Handle successful gathering\n    SendSystemMessage(\"\
      You successfully gathered resources.\");\n}"
    language: cpp
  - title: With Error Handling
    code: "GatheringNode node = GetGatheringNodeById(player.GetTargetGuid());\nif\
      \ (!node.IsValid())\n{\n    SendSystemMessage(\"Invalid gathering target.\"\
      );\n    return false;\n}\n\nbool result = gatheringManager.CastGatheringSpell(node);\n\
      if (!result)\n{\n    SendSystemMessage(\"You cannot gather from this node at\
      \ this time.\");\n    return false;\n}\n\nSendSystemMessage(\"Gathering completed\
      \ successfully.\");"
    language: cpp
  notes: This method assumes that the player has already been validated for range
    and skill requirements before being called. The actual spell casting and resource
    distribution is handled internally by TrinityCore's spell system. Performance
    considerations include checking node validity and ensuring proper synchronization
    when multiple players interact with the same node.
  warnings: Do not call this method without first validating that the player can gather
    from the specified node. Calling this method on an invalid or inaccessible node
    may result in unexpected behavior or errors. This method should only be invoked
    during valid player interaction contexts, such as when a player right-clicks on
    a gathering node.
  related:
  - GetGatheringNodeById
  - ValidateGatheringConditions
  - UpdatePlayerInventory
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T07:07:46.434743'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
