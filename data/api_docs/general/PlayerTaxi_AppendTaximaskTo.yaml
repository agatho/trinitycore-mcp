api:
  class: PlayerTaxi
  method: AppendTaximaskTo
  signature: void PlayerTaxi::AppendTaximaskTo(WorldPackets::Taxi::ShowTaxiNodes &
    data, bool all)
documentation:
  brief: Appends the player's taxi mask data to a ShowTaxiNodes packet for network
    transmission.
  description: The AppendTaximaskTo method populates a WorldPackets::Taxi::ShowTaxiNodes
    packet with the player's known taxi nodes. This method is used internally by the
    TrinityCore server to send updated taxi information to the client, allowing players
    to see which flight paths they have unlocked. The 'all' parameter determines whether
    all known taxi nodes are included or only those relevant to the current zone or
    session. This functionality is crucial for proper taxi system operation in World
    of Warcraft emulation.
  parameters:
  - name: data
    description: Reference to a WorldPackets::Taxi::ShowTaxiNodes packet object that
      will be populated with taxi node information.
  - name: all
    description: Boolean flag indicating whether to include all known taxi nodes (true)
      or only relevant ones (false).
  returns: null
  examples:
  - title: Basic usage in packet preparation
    code: 'WorldPackets::Taxi::ShowTaxiNodes packet;

      playerTaxi.AppendTaximaskTo(packet, true);

      player->SendDirectMessage(&packet);'
    language: cpp
  - title: Conditional taxi mask appending based on player state
    code: 'WorldPackets::Taxi::ShowTaxiNodes packet;

      bool showAll = player->HasFlag(PLAYER_FLAGS, PLAYER_FLAGS_GM);

      playerTaxi.AppendTaximaskTo(packet, showAll);

      player->SendDirectMessage(&packet);'
    language: cpp
  notes: This method operates on the player's internal taxi mask data structure. It
    is typically called during taxi node update events or when sending taxi-related
    packets to clients. The method does not modify the player's actual taxi state,
    but rather prepares data for network transmission.
  warnings: Improper usage of this method may result in incorrect taxi node visibility
    for players, potentially causing confusion or gameplay issues related to flight
    paths. Ensure that the 'all' parameter is set appropriately based on the intended
    behavior and player permissions.
  related:
  - PlayerTaxi::AddTaxiMask
  - PlayerTaxi::HasTaxiMask
  - PlayerTaxi::ClearTaxiMask
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T05:54:03.297575'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
