api:
  class: PlayerScript
  method: OnSave
  signature: void PlayerScript::OnSave(Player * player)
documentation:
  brief: Called when a player is saved to the database, allowing scripts to modify
    or log player data before saving.
  description: The OnSave method is a hook in the PlayerScript class that gets invoked
    whenever a player character is about to be saved to the database. This method
    provides an opportunity for custom scripts to perform actions such as updating
    player statistics, logging events, or modifying data before it's persisted. It
    is typically used in custom expansions or modifications where additional logic
    needs to be executed during the save process. The method is called during the
    normal player save cycle and should not block execution for extended periods to
    avoid performance issues.
  parameters:
  - name: player
    description: Pointer to the Player object that is being saved. This represents
      the current player state at the time of saving.
  returns: null
  examples:
  - title: Basic implementation logging player save events
    code: "class MyPlayerScript : public PlayerScript\n{\npublic:\n    void OnSave(Player*\
      \ player) override\n    {\n        sLog->outString(\"Player %s is being saved.\"\
      , player->GetName().c_str());\n    }\n};"
    language: cpp
  - title: Updating player data before save
    code: "class MyPlayerScript : public PlayerScript\n{\npublic:\n    void OnSave(Player*\
      \ player) override\n    {\n        // Update player's last save timestamp\n\
      \        player->SetUInt32Value(PLAYER_FIELD_SAVE_TIME, time(nullptr));\n  \
      \      \n        // Save custom data to database\n        if (player->GetSession())\n\
      \        {\n            // Custom logic here\n        }\n    }\n};"
    language: cpp
  notes: This method is called during the player save process, so any heavy operations
    should be avoided to prevent performance degradation. The player object passed
    in is valid and represents the current state of the character at the time of saving.
  warnings: Do not perform blocking operations or long-running tasks within this method
    as it can cause delays in the game's save cycle and affect overall server performance.
  related:
  - OnCreate
  - OnDelete
  - OnLogin
  - OnLogout
metadata:
  confidence: 0.95
  generated_at: '2025-10-31T20:59:29.766712'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
