api:
  class: GuardianDruidRefactored
  method: ExecuteAoEThreatRotation
  signature: void GuardianDruidRefactored::ExecuteAoEThreatRotation(int * target,
    uint32 enemyCount)
documentation:
  brief: Executes an AoE threat rotation for a Guardian Druid, targeting multiple
    enemies within range.
  description: The ExecuteAoEThreatRotation method performs a coordinated attack pattern
    designed to maximize threat generation against multiple enemy targets simultaneously.
    This method is typically used in AI-controlled Guardian Druid units to efficiently
    handle groups of enemies by applying appropriate abilities and spells in sequence.
    The implementation considers the number of available enemies and adjusts its behavior
    accordingly, ensuring optimal resource usage and threat distribution across all
    targets. It may involve abilities such as Swipe, Mangle, or other AoE attacks
    depending on the druid's current form and available mana.
  parameters:
  - name: target
    description: Pointer to an integer representing the index or identifier of the
      primary target in the enemy list. This parameter determines which enemy is prioritized
      for initial threat generation.
  - name: enemyCount
    description: Unsigned 32-bit integer specifying the total number of enemies currently
      within the druid's detection range. Used to determine how many targets should
      be included in the AoE rotation.
  returns: null
  examples:
  - title: Basic usage in AI logic
    code: "void GuardianDruidAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n\
      \    {\n        int primaryTarget = 0;\n        uint32 enemiesInRange = GetEnemiesInRangeCount();\n\
      \        ExecuteAoEThreatRotation(&primaryTarget, enemiesInRange);\n    }\n}"
    language: cpp
  - title: Advanced usage with dynamic target selection
    code: "void GuardianDruidAI::ExecuteThreatRotation()\n{\n    std::vector<Unit*>\
      \ targets = GetNearbyEnemies(10.0f);\n    if (targets.empty()) return;\n\n \
      \   int* primaryTarget = &targets[0]->GetGUID().GetRawValue();\n    uint32 count\
      \ = static_cast<uint32>(targets.size());\n    ExecuteAoEThreatRotation(primaryTarget,\
      \ count);\n}"
    language: cpp
  notes: This method assumes that the druid is already in Bear Form or Cat Form and
    has sufficient mana to perform AoE abilities. The method does not handle target
    switching logic directly; it only executes the rotation based on provided parameters.
  warnings: Ensure that the target pointer points to a valid enemy unit before calling
    this method, otherwise undefined behavior may occur. Also, be aware that excessive
    calls to this function without proper cooldown management can lead to performance
    issues in high-density combat scenarios.
  related:
  - ExecuteSingleTargetRotation
  - GetEnemiesInRangeCount
  - IsInCombat
  - HasManaForAbility
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:04:35.220850'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
