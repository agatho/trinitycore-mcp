api:
  class: BitVectors
  method: WriteUpdate
  signature: void BitVectors::WriteUpdate(ByteBuffer & data, bool ignoreChangesMask,
    const Player * owner, const Player * receiver) const
documentation:
  brief: Writes bit vector update data to a ByteBuffer for transmission to a player.
  description: The WriteUpdate method serializes the internal bit vector state into
    a ByteBuffer, which is typically used to send updates about object changes (such
    as player stats, equipment, or other attributes) to a specific receiver player.
    It respects the ignoreChangesMask flag to determine whether to include all changes
    or only those that have been marked as dirty. The method also takes into account
    the owner of the bit vectors and the receiving player for proper filtering and
    serialization. This functionality is essential in TrinityCore's packet handling
    system for efficiently transmitting object state updates over the network.
  parameters:
  - name: data
    description: The ByteBuffer to which the serialized bit vector update data will
      be written.
  - name: ignoreChangesMask
    description: If true, all bit vector data is written regardless of change flags;
      if false, only changed fields are included.
  - name: owner
    description: The player who owns the bit vectors being updated. Used for context
      and filtering during serialization.
  - name: receiver
    description: The player receiving the update data. May be used to apply specific
      filters or formatting based on the receiver's state.
  returns: null
  examples:
  - title: Basic usage in packet creation
    code: 'ByteBuffer data;

      BitVectors vectors;

      Player* owner = ...;

      Player* receiver = ...;

      vectors.WriteUpdate(data, false, owner, receiver);

      // Send ''data'' as part of a network packet to the receiver'
    language: cpp
  - title: Writing all data regardless of changes
    code: 'ByteBuffer data;

      BitVectors vectors;

      Player* owner = ...;

      Player* receiver = ...;

      vectors.WriteUpdate(data, true, owner, receiver);

      // Forces full serialization including unchanged fields'
    language: cpp
  notes: This method is commonly used in the context of World of Warcraft's object
    update system where only changed data needs to be sent over the network. The ignoreChangesMask
    parameter allows for optimization by avoiding unnecessary data transmission when
    full updates are required.
  warnings: null
  related:
  - BitVectors::ReadUpdate
  - BitVectors::SetChanged
  - BitVectors::ClearChanged
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T08:36:22.009179'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
