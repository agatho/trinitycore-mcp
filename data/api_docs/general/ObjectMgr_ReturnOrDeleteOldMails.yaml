api:
  class: ObjectMgr
  method: ReturnOrDeleteOldMails
  signature: void ObjectMgr::ReturnOrDeleteOldMails(bool serverUp)
documentation:
  brief: Returns or deletes old mails based on server status.
  description: The ReturnOrDeleteOldMails method processes all old mails in the mail
    system, either returning them to their original owners if the server is up, or
    deleting them entirely if the server is going down. This method ensures that stale
    mail does not accumulate in the database and maintains proper mail system integrity.
    It typically runs during server startup or shutdown routines to clean up or restore
    mail states appropriately.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage During Server Shutdown
    code: ObjectMgr::instance()->ReturnOrDeleteOldMails(false);
    language: cpp
  - title: Usage During Server Startup
    code: ObjectMgr::instance()->ReturnOrDeleteOldMails(true);
    language: cpp
  notes: This method is typically invoked by the server's core initialization or shutdown
    sequence. It may involve database operations and should be called only when mail
    system consistency is required. The method does not return any value but modifies
    the state of the mail system.
  warnings: Improper usage of this method during active gameplay can lead to mail
    corruption or loss. It should only be used during controlled server maintenance
    periods such as shutdowns or restarts.
  related:
  - Mail::DeliverMessage
  - Mail::AddItem
  - ObjectMgr::LoadMail
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T02:38:25.593548'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
