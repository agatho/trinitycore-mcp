api:
  class: DefensiveManager
  method: GetRecommendedDefensive
  signature: uint32 DefensiveManager::GetRecommendedDefensive()
documentation:
  brief: Calculates and returns the recommended defensive ability for the player based
    on current combat state and AI logic.
  description: The GetRecommendedDefensive method determines the most appropriate
    defensive action for a player character in the current combat scenario. This method
    evaluates various factors such as threat level, health status, available defensive
    abilities, and enemy positioning to recommend an optimal defensive strategy. The
    returned value typically corresponds to a specific defensive ability or spell
    ID that can be used by the AI or player controller. This functionality is crucial
    for automated combat decision-making in TrinityCore's AI system, particularly
    for NPCs that utilize defensive behaviors.
  parameters: []
  returns: Returns a uint32 representing the ID of the recommended defensive ability
    or spell. A value of 0 typically indicates no defensive action is recommended
    or that the method failed to determine a suitable defensive option.
  examples:
  - title: Basic usage in AI behavior
    code: "class MyAI : public ScriptedAI\n{\npublic:\n    void UpdateAI(uint32 diff)\
      \ override\n    {\n        if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \        {\n            uint32 defensiveAction = me->GetDefensiveManager()->GetRecommendedDefensive();\n\
      \            if (defensiveAction)\n                DoCast(defensiveAction);\n\
      \        }\n    }\n};"
    language: cpp
  notes: This method is primarily used within AI contexts and relies on the internal
    state of the DefensiveManager. The implementation may vary depending on the specific
    creature type and its assigned AI behavior. Performance-wise, this method should
    be called sparingly during combat updates to avoid excessive overhead.
  warnings: The returned defensive action ID must be validated before casting to ensure
    it corresponds to a valid spell or ability in the game database. Using an invalid
    ID may cause unexpected behavior or crashes. Additionally, calling this method
    outside of combat context may return unreliable results.
  related:
  - GetRecommendedOffensive
  - GetDefensiveCooldown
  - SetDefensiveAction
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T14:50:09.243477'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
