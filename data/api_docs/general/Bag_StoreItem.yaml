api:
  class: Bag
  method: StoreItem
  signature: void Bag::StoreItem(int slot, int * pItem, bool update)
documentation:
  brief: Stores an item in a specified slot of the bag, updating the inventory state
    accordingly.
  description: The StoreItem method is responsible for placing an item into a specific
    slot within a Bag object. It handles the internal management of item placement,
    including updating the bag's item array and ensuring proper inventory state tracking.
    The method supports both direct item storage and optional update notifications
    to the player client. This functionality is essential for managing player inventories,
    loot distribution, and item transactions within the TrinityCore framework.
  parameters:
  - name: slot
    description: The target slot index within the bag where the item should be stored.
      Must be a valid slot number within the bag's capacity range.
  - name: pItem
    description: Pointer to the item to be stored. This parameter represents the item
      data that will be placed in the specified slot.
  - name: update
    description: Boolean flag indicating whether to send update notifications to the
      player client. If true, inventory changes are communicated to the player's interface.
  returns: null
  examples:
  - title: Basic Item Storage
    code: "Item* item = player->GetItemByGuid(itemGuid);\nif (item)\n{\n    Bag* bag\
      \ = player->GetBagSlot(0);\n    if (bag)\n    {\n        bag->StoreItem(5, &item,\
      \ true);\n    }\n}"
    language: cpp
  - title: Conditional Item Storage with Update
    code: "if (player->GetFreeBagSlot() >= 0)\n{\n    Item* newItem = Item::CreateItem(itemEntry,\
      \ itemCount, player);\n    if (newItem)\n    {\n        Bag* bag = player->GetBagByGuid(bagGuid);\n\
      \        if (bag)\n        {\n            int slot = bag->GetFreeSlot();\n \
      \           bag->StoreItem(slot, &newItem, true);\n        }\n    }\n}"
    language: cpp
  notes: The method assumes that the provided slot index is valid and within the bounds
    of the bag's capacity. It performs internal validation to ensure item integrity
    before storing. The update parameter controls whether client-side inventory updates
    are triggered, which can impact performance in bulk operations.
  warnings: Incorrect slot indices may lead to memory corruption or undefined behavior.
    Always verify that the target slot is available and valid before calling StoreItem.
    When performing multiple store operations, consider disabling updates until all
    items are placed to improve performance.
  related:
  - GetItemBySlot
  - AddItem
  - RemoveItem
  - GetFreeSlot
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T20:48:18.175488'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
