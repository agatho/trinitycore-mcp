api:
  class: PathfindingManager
  method: FindLoSPreservingPath
  signature: int PathfindingManager::FindLoSPreservingPath(const int & goal, Unit
    * target)
documentation:
  brief: Calculates a path from the current unit's position to a specified goal while
    preserving line of sight.
  description: The FindLoSPreservingPath method computes a navigation path for a Unit
    that ensures line of sight is maintained between the starting point and the target
    goal. This method is typically used in AI pathfinding to ensure units move in
    a way that does not block their view of targets or waypoints. It takes into account
    obstacles, terrain, and other environmental factors to generate a valid path.
    The method returns an integer status code indicating success or failure of the
    pathfinding operation.
  parameters:
  - name: goal
    description: The identifier or index representing the target destination for pathfinding.
      This value is typically used as a reference point in the navigation system to
      determine where the unit should move.
  - name: target
    description: A pointer to the Unit object that represents the target of the pathfinding
      operation. This parameter defines the goal location and may influence how the
      path is computed, particularly in relation to maintaining line of sight.
  returns: Returns an integer value indicating the outcome of the pathfinding operation.
    A return value of 0 typically indicates success, while non-zero values may represent
    various error conditions such as invalid input parameters, unreachable destinations,
    or internal pathfinding failures.
  examples:
  - title: Basic usage in AI behavior
    code: "int result = pathfinder->FindLoSPreservingPath(12345, targetUnit);\nif\
      \ (result == 0) {\n    // Path was successfully computed\n    // Proceed with\
      \ movement logic\n} else {\n    // Handle pathfinding failure\n}"
    language: cpp
  - title: Using within a custom AI module
    code: "class CustomAI : public CreatureAI {\npublic:\n    void UpdateAI(const\
      \ uint32 diff) override {\n        if (Unit* target = SelectTarget(SELECT_TARGET_NEAREST,\
      \ 0)) {\n            int pathResult = me->GetMap()->GetPathfindingManager()->FindLoSPreservingPath(12345,\
      \ target);\n            if (pathResult == 0) {\n                // Move towards\
      \ the computed path\n                me->GetMotionMaster()->MovePoint(12345,\
      \ target->GetPosition());\n            }\n        }\n    }\n};"
    language: cpp
  notes: This method is part of TrinityCore's advanced pathfinding system and relies
    on the underlying NavMesh infrastructure. It may be computationally expensive
    depending on the complexity of the environment and the distance to the goal. The
    method assumes that the Unit has a valid position and that the target unit exists
    in the same map.
  warnings: Ensure that the 'goal' parameter is a valid identifier for a known waypoint
    or destination within the current map's navigation system. Passing invalid or
    uninitialized pointers for the target unit may lead to undefined behavior or crashes.
    The method does not validate whether the path is actually traversable by the unit's
    movement type.
  related:
  - FindPath
  - GetPath
  - CalculatePath
  - IsInLineOfSight
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T01:57:39.544182'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
