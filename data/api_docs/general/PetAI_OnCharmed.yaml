api:
  class: PetAI
  method: OnCharmed
  signature: void PetAI::OnCharmed(bool isNew)
documentation:
  brief: Initializes pet AI behavior when the pet is charmed by a player
  description: The OnCharmed method is called when a pet becomes charmed by a player,
    typically during the process of taming or summoning a creature. This method sets
    up the necessary AI state and behavior for the pet to respond appropriately to
    player commands and control. It handles the transition from wild/neutral creature
    to a controlled companion under player influence. The method may also initialize
    various pet-specific flags, update AI state machines, and prepare the pet for
    command execution.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in pet AI initialization
    code: "void MyPetAI::OnCharmed(bool isNew)\n{\n    // Set up pet AI state when\
      \ charmed\n    if (isNew)\n    {\n        // Initialize new pet behavior\n \
      \       m_pet->SetReactState(REACT_AGGRESSIVE);\n        m_pet->SetControlledByPlayer(true);\n\
      \    }\n    else\n    {\n        // Handle re-charming existing pet\n      \
      \  m_pet->SetReactState(REACT_DEFENSIVE);\n    }\n}"
    language: cpp
  notes: This method is typically invoked internally by the TrinityCore framework
    when a pet's charm state changes. Developers should not call this method directly
    unless implementing custom AI behavior. The 'isNew' parameter indicates whether
    the pet is being charmed for the first time or if it's an existing pet being re-charmed.
  warnings: Do not override this method without understanding the full AI state management
    system. Improper implementation may cause pets to become unresponsive to player
    commands or exhibit unexpected behavior during combat.
  related:
  - PetAI::UpdateAI
  - PetAI::EnterEvadeMode
  - CreatureAI::OnCharmed
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T06:25:43.310626'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
