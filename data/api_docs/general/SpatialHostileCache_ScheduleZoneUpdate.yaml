api:
  class: SpatialHostileCache
  method: ScheduleZoneUpdate
  signature: void SpatialHostileCache::ScheduleZoneUpdate(uint32 zoneId)
documentation:
  brief: Schedules an update of the spatial hostile cache for the specified zone.
  description: The ScheduleZoneUpdate method is responsible for queuing a background
    task to refresh the spatial hostile cache data for a given zone. This ensures
    that the system maintains up-to-date information about hostile units within the
    specified zone, which is crucial for proper AI behavior and threat management
    in World of Warcraft. The method does not perform the update immediately but rather
    schedules it for execution at an appropriate time by the system's background processing
    mechanisms. This approach helps maintain performance by avoiding immediate, potentially
    expensive operations during critical gameplay moments.
  parameters:
  - name: zoneId
    description: The unique identifier of the zone for which to schedule the hostile
      cache update. This value corresponds to the ZoneID used internally by TrinityCore's
      map and zone management systems.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'SpatialHostileCache* cache = sObjectMgr->GetSpatialHostileCache();

      cache->ScheduleZoneUpdate(1234); // Schedule update for zone with ID 1234'
    language: cpp
  - title: Usage in Zone Change Context
    code: "void Player::OnZoneChange(uint32 newZoneId)\n{\n    SpatialHostileCache*\
      \ cache = sObjectMgr->GetSpatialHostileCache();\n    if (cache)\n    {\n   \
      \     cache->ScheduleZoneUpdate(newZoneId);\n    }\n}"
    language: cpp
  notes: This method is typically called when a player enters or leaves a zone, or
    when significant changes occur in the zone's hostile population. The actual update
    may be delayed until the next available processing cycle to avoid performance
    spikes. The system maintains internal queues for these scheduled updates.
  warnings: Calling this method with an invalid zoneId may result in undefined behavior
    or no-op execution. Ensure that the zone ID corresponds to a valid, loaded zone
    before calling this method.
  related:
  - GetHostileUnitsInZone
  - UpdateZoneCache
  - ClearZoneCache
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T18:57:36.615474'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
