api:
  class: MageSpellCalculator
  method: WillCriticalHit
  signature: bool MageSpellCalculator::WillCriticalHit(uint32 spellId, Player * caster,
    ::Unit * target)
documentation:
  brief: Determines whether a mage's spell will critically hit based on spell ID,
    caster, and target.
  description: The WillCriticalHit method evaluates if a given mage spell has a chance
    to critical hit when cast by the specified player onto the target unit. This method
    considers various factors such as the spell's critical strike chance, the caster's
    critical strike rating, and the target's resistance. It is typically used in spell
    processing logic to determine damage multipliers and apply critical hit effects.
    The method returns true if the spell is expected to crit, and false otherwise.
    This functionality is essential for accurate spell damage calculation in the Mage
    class within TrinityCore's combat system.
  parameters:
  - name: spellId
    description: The unique identifier of the spell being cast. This determines which
      spell properties are used for critical hit calculations, including base critical
      strike chance and spell school.
  - name: caster
    description: Pointer to the Player object representing the mage casting the spell.
      The caster's stats, such as critical strike rating and class-specific modifiers,
      influence the critical hit probability.
  - name: target
    description: Pointer to the Unit object that is being targeted by the spell. The
      target's resistance values may affect the final critical hit outcome in some
      cases.
  returns: A boolean value indicating whether the spell will critically hit. Returns
    true if the calculated chance results in a critical hit, false otherwise.
  examples:
  - title: Basic usage to check if a Fireball will crit
    code: "uint32 fireballSpellId = 133;\nPlayer* player = ...; // Get current player\n\
      Unit* target = ...; // Get target unit\nbool isCrit = MageSpellCalculator::WillCriticalHit(fireballSpellId,\
      \ player, target);\nif (isCrit)\n{\n    // Apply critical hit damage multiplier\n\
      }"
    language: cpp
  - title: Using in spell processing with conditional logic
    code: "void ProcessMageSpell(uint32 spellId, Player* caster, Unit* target)\n{\n\
      \    if (MageSpellCalculator::WillCriticalHit(spellId, caster, target))\n  \
      \  {\n        // Apply critical hit effects\n        ApplyCriticalHitEffects(caster,\
      \ target);\n    }\n    else\n    {\n        // Apply normal damage\n       \
      \ ApplyNormalDamage(caster, target);\n    }\n}"
    language: cpp
  notes: This method relies on internal game mechanics and player stats to determine
    critical hit chances. It may be affected by buffs, debuffs, and class-specific
    talents that modify critical strike chance. The implementation assumes valid pointers
    for caster and target, and spellId must correspond to a known mage spell.
  warnings: Ensure that the caster and target pointers are valid before calling this
    method, as null pointer dereferences will result in crashes. Also, be aware that
    spellId should refer to an actual mage spell; otherwise, undefined behavior may
    occur.
  related:
  - CalculateSpellDamage
  - GetSpellCriticalChance
  - ApplyCriticalHitEffects
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T08:57:11.348079'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
