api:
  class: PositionUtils
  method: GetNearestWalkablePosition
  signature: int PositionUtils::GetNearestWalkablePosition(const int & pos, Map *
    map, float searchRadius)
documentation:
  brief: Finds the nearest walkable position within a specified radius from a given
    point on a map.
  description: The GetNearestWalkablePosition method searches for the closest navigable
    location within a defined search radius from a provided starting position. It
    is commonly used in World of Warcraft's TrinityCore to determine valid movement
    targets for NPCs or players, ensuring that positions returned are suitable for
    character navigation. The method evaluates the map's terrain data and collision
    information to identify walkable areas. This function typically operates on a
    per-map basis, requiring a valid Map pointer to perform the search. It is essential
    for pathfinding and movement logic in game AI systems.
  parameters:
  - name: pos
    description: Reference to an integer representing the starting position. In TrinityCore
      context, this usually corresponds to a coordinate or identifier that defines
      where the search begins.
  - name: map
    description: Pointer to the Map object on which the search is performed. The method
      uses this map's navigation data to determine walkable areas and calculate distances.
  - name: searchRadius
    description: Float value defining the maximum distance (in game units) to search
      for a walkable position around the starting point. Larger values may increase
      computation time but improve accuracy.
  returns: Returns an integer representing the index or identifier of the nearest
    walkable position found within the specified radius. If no walkable position is
    found, it typically returns -1 or a similar error indicator.
  examples:
  - title: Basic usage to find nearest walkable position
    code: "int startPosition = 100;\nMap* map = player->GetMap();\nfloat radius =\
      \ 5.0f;\nint result = PositionUtils::GetNearestWalkablePosition(startPosition,\
      \ map, radius);\nif (result != -1) {\n    // Use the returned position for movement\n\
      }"
    language: cpp
  - title: Using with NPC AI to find valid patrol points
    code: 'PositionUtils::GetNearestWalkablePosition(currentPatrolPoint, npc->GetMap(),
      10.0f);

      // This ensures the NPC will only move to positions that are navigable

      // and within a reasonable distance from the current point'
    language: cpp
  notes: This method relies heavily on the underlying map's navigation mesh or terrain
    data. Performance can be affected by large search radii or complex maps with many
    obstacles. The 'pos' parameter must be a valid reference to ensure correct behavior.
  warnings: Ensure that the Map pointer is not null before calling this function,
    as it will likely cause a crash if passed an invalid pointer. Also, be aware that
    very small search radii may return -1 if no walkable area exists within the specified
    bounds.
  related:
  - GetNearestWalkablePosition
  - IsWalkable
  - FindNearestPoint
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T21:10:12.696282'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
