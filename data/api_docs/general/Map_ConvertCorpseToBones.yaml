api:
  class: Map
  method: ConvertCorpseToBones
  signature: int * Map::ConvertCorpseToBones(const int & ownerGuid, bool insignia)
documentation:
  brief: Converts a player's corpse to bones, returning the GUID of the bone object.
  description: The ConvertCorpseToBones method is responsible for transforming a player's
    corpse into a bone object that can be looted by other players. This process typically
    occurs when a player dies and their corpse is not immediately claimed or when
    the corpse expires. The method handles the cleanup of the original corpse and
    creation of a new bone object in the same location. It returns the GUID of the
    newly created bone object, which allows other systems to reference or interact
    with it. The insignia parameter determines whether the bone object retains the
    player's faction insignia, which is used for honor-related mechanics in PvP scenarios.
  parameters:
  - name: ownerGuid
    description: The GUID of the player whose corpse is being converted to bones.
      This identifies the original owner of the corpse.
  - name: insignia
    description: Boolean flag indicating whether the bone object should retain the
      player's faction insignia. When true, the bone will show the player's faction
      emblem for PvP honor purposes.
  returns: Returns a pointer to an integer containing the GUID of the newly created
    bone object. If the conversion fails or no corpse exists for the given owner,
    this may return nullptr or an invalid GUID.
  examples:
  - title: Basic corpse to bones conversion
    code: "int* boneGuid = map->ConvertCorpseToBones(playerGuid, true);\nif (boneGuid\
      \ && *boneGuid != 0)\n{\n    // Successfully converted corpse to bones\n   \
      \ // boneGuid now contains the GUID of the bone object\n}"
    language: cpp
  - title: Converting corpse without insignia
    code: "int* boneGuid = map->ConvertCorpseToBones(playerGuid, false);\nif (boneGuid)\n\
      {\n    // Convert corpse to bones without faction insignia\n    // Useful for\
      \ PvE scenarios or when insignia is not needed\n}"
    language: cpp
  notes: This method is typically called during corpse cleanup processes, such as
    when a corpse expires after a certain time period. The bone object created will
    be visible to other players in the same map and can be looted according to standard
    loot rules. The method may perform additional checks for player state or map restrictions
    before conversion.
  warnings: Calling this method on a non-existent corpse may result in undefined behavior
    or failure. Ensure that the ownerGuid corresponds to an actual corpse that exists
    on the map before invoking this method. Also, be aware that multiple calls with
    the same ownerGuid may not behave as expected since corpses are typically removed
    after conversion.
  related:
  - GetCorpse
  - RemoveCorpse
  - AddCorpse
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T11:11:58.516627'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
