api:
  class: RestorationDruidRefactored
  method: UpdateDefensives
  signature: void RestorationDruidRefactored::UpdateDefensives()
documentation:
  brief: Updates the defensive abilities and cooldowns for the restoration druid based
    on current game state and spell availability.
  description: The UpdateDefensives method manages the internal state of defensive
    abilities for a restoration druid class instance. It evaluates the current spell
    cooldowns, mana levels, and combat conditions to determine which defensive spells
    should be made available or refreshed. This method is typically invoked during
    the AI update cycle to ensure that defensive actions are properly coordinated
    with the druid's overall healing and survival strategy. The method does not directly
    cast spells but rather prepares the internal state for potential defensive spell
    usage in subsequent game ticks.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void RestorationDruidAI::UpdateAI(uint32 diff)\n{\n    // ... other AI\
      \ logic ...\n    m_restorationDruid.UpdateDefensives();\n    // ... continue\
      \ with other updates ...\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void RestorationDruidRefactored::UpdateDefensives()\n{\n    if (IsInCombat())\n\
      \    {\n        // Update defensive cooldowns\n        if (GetSpellCooldown(SPELL_REJUVENATION)\
      \ <= 0)\n            SetAvailableSpell(SPELL_REJUVENATION);\n        \n    \
      \    if (GetSpellCooldown(SPELL_REGROWTH) <= 0)\n            SetAvailableSpell(SPELL_REGROWTH);\n\
      \    }\n}"
    language: cpp
  notes: This method should be called regularly during the AI update cycle to maintain
    accurate defensive spell availability. It's designed to work in conjunction with
    other methods like GetAvailableSpells() and IsSpellReady(). The implementation
    assumes that cooldown tracking and mana management are handled externally through
    the base class or associated systems.
  warnings: Do not call this method outside of the AI update context as it may lead
    to inconsistent spell availability states. Ensure that all defensive spells referenced
    in this method have proper cooldown tracking implemented elsewhere in the system.
  related:
  - GetAvailableSpells
  - IsSpellReady
  - SetAvailableSpell
  - GetSpellCooldown
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T20:39:08.212074'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
