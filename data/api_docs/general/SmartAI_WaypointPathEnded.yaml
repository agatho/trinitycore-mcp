api:
  class: SmartAI
  method: WaypointPathEnded
  signature: void SmartAI::WaypointPathEnded(uint32 nodeId, uint32 pathId)
documentation:
  brief: Called when a SmartAI waypoint path has completed execution.
  description: The WaypointPathEnded method is invoked by the SmartAI system when
    a creature's waypoint movement path finishes executing. This method serves as
    a callback mechanism to notify the AI script that the predefined path has been
    fully traversed. It allows for custom behavior to be executed upon path completion,
    such as triggering events, changing AI states, or initiating new actions. The
    method is typically used in conjunction with waypoint-based movement systems where
    creatures follow predetermined routes defined by a sequence of waypoints.
  parameters:
  - name: nodeId
    description: The identifier of the last waypoint node that was reached in the
      path. This value corresponds to the index or unique ID assigned to the final
      waypoint in the sequence.
  - name: pathId
    description: The unique identifier of the waypoint path that has ended. This allows
      distinguishing between multiple different paths that may be defined for the
      same creature or AI system.
  returns: null
  examples:
  - title: Basic Waypoint Path Completion Handling
    code: "void SmartAI::WaypointPathEnded(uint32 nodeId, uint32 pathId)\n{\n    //\
      \ Log that the path has completed\n    sLog->outString(\"Creature %u completed\
      \ waypoint path %u at node %u\", GetCreature()->GetGUIDLow(), pathId, nodeId);\n\
      \    \n    // Trigger an event or change AI state\n    if (pathId == 1)\n  \
      \  {\n        SetCombatScript(true);\n    }\n}"
    language: cpp
  - title: Advanced Path Completion with Conditional Logic
    code: "void SmartAI::WaypointPathEnded(uint32 nodeId, uint32 pathId)\n{\n    switch\
      \ (pathId)\n    {\n        case 1:\n            // Path 1 completed - start\
      \ combat\n            AttackStart(GetVictim());\n            break;\n      \
      \  case 2:\n            // Path 2 completed - summon NPCs\n            DoSummon(NPC_TYPE_BAT,\
      \ 5);\n            break;\n        default:\n            // Default behavior\
      \ for other paths\n            break;\n    }\n}"
    language: cpp
  notes: This method is part of the SmartAI framework in TrinityCore and is automatically
    called by the core AI system when a waypoint path completes. Developers should
    ensure that any logic implemented within this method does not introduce performance
    bottlenecks, especially if multiple creatures are following paths simultaneously.
    The nodeId and pathId parameters provide context for which specific path has ended,
    allowing for fine-grained control over behavior.
  warnings: Care must be taken when modifying the creature's state or triggering actions
    within this callback, as improper handling could lead to unexpected behavior or
    infinite loops if not properly managed. Also note that this method is only called
    after all waypoints in a path have been successfully traversed, so it should not
    be used for interrupting or canceling movement.
  related:
  - GetWaypointPath
  - StartWaypointMovement
  - SetWaypointPath
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T02:38:05.224621'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
