api:
  class: TradeManager
  method: AddItemToTrade
  signature: bool TradeManager::AddItemToTrade(Item * item, uint8 slot)
documentation:
  brief: Adds an item to the trade window for the specified player.
  description: The AddItemToTrade method is responsible for adding a specified item
    to the active trade window of a player. This method is typically invoked when
    a player attempts to place an item into their trade slot during a trade interaction
    with another player. The method validates whether the item can be traded, checks
    if the trade window is still open, and ensures that the item is properly added
    to the trade state. It also handles updating the trade status and notifying both
    parties involved in the trade about the new item addition.
  parameters:
  - name: item
    description: Pointer to the Item object that is being added to the trade window.
      Must be a valid item instance, otherwise the method will fail.
  - name: slot
    description: The trade slot index (0-6) where the item should be placed. Valid
      values are typically 0 through 6 representing the available trade slots.
  returns: Returns true if the item was successfully added to the trade window, false
    otherwise. Failure can occur due to invalid item pointer, invalid slot index,
    or when the trade is no longer active.
  examples:
  - title: Basic Usage of AddItemToTrade
    code: "Player* player = ...;\nItem* item = player->GetItemByPos(INVENTORY_SLOT_BAG_0,\
      \ 5);\nif (item)\n{\n    TradeManager* tradeMgr = player->GetTradeData();\n\
      \    bool success = tradeMgr->AddItemToTrade(item, 0);\n    if (!success)\n\
      \        TC_LOG_ERROR(\"trade\", \"Failed to add item to trade window.\");\n\
      }"
    language: cpp
  notes: This method is part of the core trading system in TrinityCore and should
    only be called when a valid trade session exists. It assumes that all preconditions
    such as item ownership, trade window validity, and slot availability are already
    checked by the calling code.
  warnings: Do not call this method directly without ensuring that the player's trade
    session is active and that the item being added is valid. Passing an invalid item
    pointer or incorrect slot index may lead to undefined behavior or crashes.
  related:
  - GetTradeData
  - AcceptTrade
  - CancelTrade
  - UpdateTrade
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T20:24:37.178527'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
