api:
  class: Player
  method: CalculateReputationGain
  signature: int32 Player::CalculateReputationGain(ReputationSource source, uint32
    creatureOrQuestLevel, int32 rep, int32 faction, bool noQuestBonus)
documentation:
  brief: Calculates reputation gain for a player based on creature or quest level
    and faction.
  description: The CalculateReputationGain method determines the amount of reputation
    a player will receive when interacting with a creature or completing a quest.
    It takes into account the player's current level, the level of the creature or
    quest, and the faction being interacted with. This method is crucial for determining
    how much reputation is gained during quest completion or creature interaction,
    and it handles both quest-based and creature-based reputation gains. The method
    considers various factors including player level, creature/quest level, and faction
    to calculate the final reputation amount.
  parameters:
  - name: source
    description: The reputation source type indicating whether the gain is from a
      quest or creature interaction. Valid values are ReputationSource::Quest and
      ReputationSource::Creature.
  - name: creatureOrQuestLevel
    description: The level of the creature or quest that triggered the reputation
      gain. This parameter affects how much reputation is gained based on the difference
      between player's level and the creature/quest level.
  - name: rep
    description: The base reputation amount to be gained, which may be modified by
      various factors including player level, quest/creature level, and faction.
  - name: faction
    description: The faction ID that the player is gaining reputation with. This determines
      how much reputation is gained based on faction-specific modifiers.
  - name: noQuestBonus
    description: A boolean flag indicating whether to apply quest bonus multipliers.
      If true, no bonus is applied; if false, bonuses are applied based on player's
      level and quest/creature level.
  returns: Returns the calculated reputation amount that will be gained by the player.
    The value can be positive or negative depending on the interaction type and faction.
  examples:
  - title: Basic Reputation Calculation
    code: int32 repGain = player->CalculateReputationGain(ReputationSource::Quest,
      60, 1000, 47, false);
    language: cpp
  - title: Creature Reputation Gain
    code: int32 repGain = player->CalculateReputationGain(ReputationSource::Creature,
      50, 500, 112, true);
    language: cpp
  notes: The method is typically used internally by TrinityCore during quest completion
    or creature interaction. It's important to note that the actual reputation gain
    may be modified by various factors including player level, faction-specific modifiers,
    and quest bonuses. This method does not directly update the player's reputation
    but calculates what should be gained.
  warnings: The method may return negative values if the player is above the creature
    or quest level, which can happen when the player level is significantly higher
    than the target level. Be aware that this method does not account for any reputation
    modifiers or bonus multipliers beyond what is specified in the parameters.
  related:
  - GetReputation
  - AddReputation
  - SetReputation
metadata:
  confidence: 0.95
  generated_at: '2025-10-31T01:05:32.699857'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
