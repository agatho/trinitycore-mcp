api:
  class: BattlegroundMap
  method: SetUnload
  signature: void BattlegroundMap::SetUnload()
documentation:
  brief: Marks the battleground map for unloading from memory
  description: The SetUnload method is used to schedule a battleground map for removal
    from the game world. This typically occurs when the battleground has ended and
    no players remain on the map, or when the server is shutting down. The method
    sets an internal flag that indicates the map should be unloaded during the next
    cleanup cycle. This helps manage memory usage by removing inactive battleground
    instances from the server's active memory space.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Battleground End Logic
    code: "void BattleGround::OnPlayerLeave(Player* player)\n{\n    // Remove player\
      \ from battleground\n    RemovePlayerFromBattleground(player);\n    \n    //\
      \ Check if battleground is empty\n    if (GetPlayersCount() == 0)\n    {\n \
      \       // Mark map for unloading\n        GetMap()->SetUnload();\n    }\n}"
    language: cpp
  notes: This method does not immediately unload the map. It sets a flag that will
    be processed during the next map cleanup cycle. The actual unloading happens asynchronously
    to avoid blocking the main game loop.
  warnings: Calling this method on a map that is already marked for unloading may
    result in undefined behavior. Always ensure proper synchronization when calling
    this method from different threads.
  related:
  - IsUnload
  - GetMap
  - RemovePlayerFromBattleground
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T15:22:57.102792'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
