api:
  class: Garrison
  method: CancelBuildingConstruction
  signature: void Garrison::CancelBuildingConstruction(uint32 garrPlotInstanceId)
documentation:
  brief: Cancels the construction of a building in the garrison identified by the
    plot instance ID.
  description: The CancelBuildingConstruction method is used to abort an ongoing building
    construction process within a player's garrison. When invoked, it will halt the
    construction timer and remove the building from the construction queue if it is
    currently under construction. This method is typically called when a player decides
    to cancel their building project or when certain game conditions require the cancellation
    of construction. The method operates on a specific plot instance identified by
    the garrPlotInstanceId parameter, which uniquely identifies the location where
    the building is being constructed. If no building is currently under construction
    at the specified plot, the method will have no effect.
  parameters:
  - name: garrPlotInstanceId
    description: The unique identifier of the garrison plot instance where the building
      construction should be canceled. This value corresponds to the PlotInstanceID
      field in the garrison plot data and is used to identify the specific location
      within the player's garrison.
  returns: null
  examples:
  - title: Cancel Construction on a Specific Plot
    code: 'Garrison* garrison = player->GetGarrison();

      uint32 plotInstanceId = 12345;

      garrison->CancelBuildingConstruction(plotInstanceId);'
    language: cpp
  - title: Cancel Construction with Error Handling
    code: "Garrison* garrison = player->GetGarrison();\nif (garrison)\n{\n    uint32\
      \ plotInstanceId = player->GetGarrison()->GetPlotInstanceIdAtPosition(10, 15);\n\
      \    if (plotInstanceId != 0)\n    {\n        garrison->CancelBuildingConstruction(plotInstanceId);\n\
      \    }\n}"
    language: cpp
  notes: This method only affects the construction state of a building and does not
    refund resources or remove the plot from the garrison. The actual removal of the
    building from the garrison requires additional logic that may involve resource
    refunds or plot cleanup operations. This method should be called on the main thread
    as it interacts with player state and garrison data structures.
  warnings: Calling this method on a plot instance that does not exist or where no
    construction is occurring will have no effect but could indicate a logic error
    in the calling code. Ensure proper validation of the garrPlotInstanceId before
    invoking this method to avoid unintended behavior.
  related:
  - Garrison::StartBuildingConstruction
  - Garrison::GetBuildingState
  - Garrison::GetPlotInstanceIdAtPosition
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T04:50:27.407502'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
