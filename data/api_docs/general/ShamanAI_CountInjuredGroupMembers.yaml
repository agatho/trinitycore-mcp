api:
  class: ShamanAI
  method: CountInjuredGroupMembers
  signature: int ShamanAI::CountInjuredGroupMembers(float healthThreshold) const
documentation:
  brief: Counts the number of injured group members within a specified health threshold.
  description: The CountInjuredGroupMembers method iterates through all members of
    the shaman's current group and counts how many are below the given health threshold.
    This is commonly used by ShamanAI to determine when to cast healing spells like
    Healing Wave or Lesser Healing Wave. The method evaluates each group member's
    current health percentage against the provided threshold, returning a count of
    those who qualify as 'injured'. This functionality is essential for intelligent
    healing behavior in group scenarios and helps optimize resource usage by avoiding
    unnecessary heals on fully healthy players.
  parameters: []
  returns: Returns an integer representing the number of group members whose health
    percentage is less than or equal to the specified threshold. A return value of
    0 indicates no injured group members were found, while a positive integer indicates
    the count of injured players requiring healing.
  examples:
  - title: Basic Usage for Healing Decision Making
    code: "int injuredCount = shamanAI->CountInjuredGroupMembers(0.7f);\nif (injuredCount\
      \ > 0)\n{\n    // Cast a healing spell if at least one group member is below\
      \ 70% health\n    shamanAI->DoCastSpellIfCan(me, SPELL_HEALING_WAVE);\n}"
    language: cpp
  - title: Advanced Usage with Dynamic Threshold
    code: "float threshold = 0.5f; // 50% health\nint injuredCount = shamanAI->CountInjuredGroupMembers(threshold);\n\
      if (injuredCount >= 3)\n{\n    // Use a more powerful heal if multiple group\
      \ members are critically injured\n    shamanAI->DoCastSpellIfCan(me, SPELL_LESSER_HEALING_WAVE);\n\
      }\nelse if (injuredCount >= 1)\n{\n    // Use standard healing for single target\n\
      \    shamanAI->DoCastSpellIfCan(me, SPELL_HEALING_WAVE);\n}"
    language: cpp
  notes: This method assumes the shaman is in a group context and relies on the AI's
    internal knowledge of group members. It does not perform any direct health checks
    but rather uses cached information from the group management system. The method
    should be called frequently enough to provide up-to-date healing decisions, but
    not so often as to cause performance issues.
  warnings: Be cautious when using this method in high-frequency scenarios as it may
    iterate through all group members each time it's called. Ensure that the health
    threshold is appropriate for your game balance and difficulty settings, as thresholds
    too low may result in excessive healing usage while thresholds too high may miss
    critical healing opportunities.
  related:
  - ShamanAI::GetGroupMembers
  - ShamanAI::IsInjured
  - ShamanAI::DoCastSpellIfCan
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T20:00:17.935719'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
