api:
  class: SpellEffectInfo
  method: CalcValue
  signature: int32 SpellEffectInfo::CalcValue(const WorldObject * caster, const int32
    * basePoints, const Unit * target, float * variance, uint32 castItemId, int32
    itemLevel) const
documentation:
  brief: Calculates the final value of a spell effect based on caster, base points,
    target, and other contextual factors.
  description: The CalcValue method computes the actual numerical value of a spell
    effect, taking into account various modifiers such as caster stats, base effect
    points, target properties, variance, cast item ID, and item level. This method
    is crucial for determining how powerful or impactful a spell effect will be in-game.
    It handles calculations that may involve randomization through variance, and can
    adjust values based on the specific item used to cast the spell. The result represents
    the effective damage, healing, or stat change that the spell will apply.
  parameters:
  - name: caster
    description: Pointer to the WorldObject that is casting the spell. This could
      be a Unit (player, NPC) or GameObject. Used to determine caster stats and abilities
      that may affect the effect value.
  - name: basePoints
    description: Array of base points for the spell effect. These are the raw values
      defined in the spell template or effect definition, which may be modified by
      other factors during calculation.
  - name: target
    description: Pointer to the Unit that is being targeted by the spell. Used to
      determine target properties such as resistance, level, and other factors that
      influence effect value.
  - name: variance
    description: Pointer to a float that represents the variance or randomization
      factor for the effect. The method may modify this value to reflect how much
      the final result can vary from the base calculation.
  - name: castItemId
    description: ID of the item used to cast the spell, if applicable. This is used
      to determine if any item-specific modifiers or bonuses should be applied to
      the effect value.
  - name: itemLevel
    description: The level of the item used for casting. This affects how item-based
      scaling or bonuses are calculated in the final effect value.
  returns: Returns an int32 representing the calculated final value of the spell effect,
    which may be a damage amount, healing amount, stat modifier, or other numerical
    effect depending on the spell's purpose.
  examples:
  - title: Basic usage in spell effect handling
    code: 'int32 finalValue = spellEffect.CalcValue(caster, basePoints, target, &variance,
      castItemId, itemLevel);

      // Use finalValue for damage calculation or effect application'
    language: cpp
  - title: Using variance to randomize spell effects
    code: 'float variance = 0.1f; // 10% variance

      int32 calculatedValue = spellEffect.CalcValue(caster, basePoints, target, &variance,
      castItemId, itemLevel);

      // The final value may be adjusted by up to 10% based on variance'
    language: cpp
  notes: This method is typically called during spell execution when the actual effect
    values need to be computed. It's important to note that the variance parameter
    is modified in place, so callers should be aware of this side effect. The method
    may perform complex calculations involving multiple factors like caster level,
    target resistance, and item bonuses.
  warnings: Ensure that all input parameters are valid pointers before calling this
    method, as passing null pointers can lead to undefined behavior. Also, be careful
    when using the variance parameter since it is modified in place, which could affect
    other parts of the code if not handled properly.
  related:
  - SpellEffectInfo::GetEffect
  - SpellEffectInfo::CalculateDamage
  - SpellEffectInfo::ApplyEffect
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T02:04:28.548561'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
