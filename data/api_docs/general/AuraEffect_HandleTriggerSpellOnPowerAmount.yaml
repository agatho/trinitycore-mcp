api:
  class: AuraEffect
  method: HandleTriggerSpellOnPowerAmount
  signature: void AuraEffect::HandleTriggerSpellOnPowerAmount(const AuraApplication
    * aurApp, uint8 mode, bool apply) const
documentation:
  brief: Triggers a spell when the target's power amount meets specified conditions.
  description: The HandleTriggerSpellOnPowerAmount method is responsible for executing
    a triggered spell effect when a specific power threshold is met during aura application
    or removal. This method is typically used in aura effects that activate based
    on player or creature power levels, such as mana thresholds for spell triggers.
    The method evaluates the current power state of the target and determines whether
    to apply or remove the associated spell trigger based on the provided aura application
    context and mode flags. It integrates with the TrinityCore's aura system to ensure
    proper timing and execution of triggered spells.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object that contains information about
      the aura being applied or removed. This parameter provides context for the trigger
      condition evaluation.
  - name: mode
    description: Mode flag indicating the context of the aura application. Values
      typically represent different application states such as initial application,
      update, or removal.
  - name: apply
    description: Boolean flag indicating whether the aura is being applied (true)
      or removed (false). This determines the direction of the trigger logic execution.
  returns: null
  examples:
  - title: Basic usage in aura effect handler
    code: "void MyAuraEffect::HandleTriggerSpellOnPowerAmount(const AuraApplication*\
      \ aurApp, uint8 mode, bool apply) const\n{\n    if (!aurApp || !aurApp->GetTarget())\n\
      \        return;\n    \n    Unit* target = aurApp->GetTarget();\n    // Check\
      \ power level and trigger spell if threshold met\n    if (apply && target->GetPower(POWER_MANA)\
      \ >= 50)\n    {\n        target->CastSpell(target, 12345, true);\n    }\n}"
    language: cpp
  notes: This method is part of the TrinityCore aura system and relies on proper aura
    application context. The implementation may vary depending on specific aura effect
    types. Ensure that the target unit has valid power values before triggering spells
    to prevent runtime errors.
  warnings: Improper handling of the aura application context can lead to incorrect
    spell triggers or crashes. Always validate pointers and ensure power values are
    within expected ranges before performing operations.
  related:
  - AuraEffect::HandleApply
  - AuraEffect::HandleRemove
  - AuraApplication::GetTarget
  - Unit::GetPower
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T11:56:33.099564'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
