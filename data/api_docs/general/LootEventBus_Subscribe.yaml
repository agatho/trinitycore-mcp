api:
  class: LootEventBus
  method: Subscribe
  signature: bool LootEventBus::Subscribe(BotAI * subscriber, const int & types)
documentation:
  brief: Registers a BotAI subscriber to receive loot event notifications based on
    specified event types.
  description: The Subscribe method allows a BotAI instance to register itself with
    the LootEventBus to receive notifications about loot-related events. It takes
    a pointer to the BotAI subscriber and a bitmask of event types they wish to listen
    for. The method returns true if the subscription was successfully added, or false
    if the subscription failed due to invalid parameters or internal errors. This
    mechanism enables bots to react to specific loot events such as item drops, looting
    successes, or failures within the World of Warcraft environment.
  parameters:
  - name: subscriber
    description: Pointer to the BotAI instance that wants to subscribe to loot events.
      Must be a valid, non-null pointer to a BotAI object.
  - name: types
    description: Bitmask representing the types of loot events the subscriber wishes
      to receive notifications for. The exact values and their meanings depend on
      the defined loot event constants within the system.
  returns: True if the subscription was successfully registered with the event bus,
    false otherwise. A return value of false may indicate invalid parameters or internal
    failure during registration.
  examples:
  - title: Basic Subscription Example
    code: "BotAI* myBot = new BotAI();\nint eventTypeMask = LOOT_EVENT_DROP | LOOT_EVENT_SUCCESS;\n\
      bool success = LootEventBus::Subscribe(myBot, eventTypeMask);\nif (success)\
      \ {\n    // Bot is now subscribed to drop and success events\n}"
    language: cpp
  - title: Subscription with All Event Types
    code: "BotAI* aiBot = GetBotAI();\nint allEvents = LOOT_EVENT_DROP | LOOT_EVENT_SUCCESS\
      \ | LOOT_EVENT_FAILURE;\nbool result = LootEventBus::Subscribe(aiBot, allEvents);\n\
      if (!result) {\n    // Handle subscription failure\n    LogError(\"Failed to\
      \ subscribe bot to loot events\");\n}"
    language: cpp
  notes: This method is typically used in the context of AI bot development for World
    of Warcraft, particularly within TrinityCore-based servers. The event types are
    likely defined as constants (e.g., LOOT_EVENT_DROP, LOOT_EVENT_SUCCESS) that correspond
    to specific loot-related occurrences in the game world. Subscriptions are managed
    internally by the LootEventBus and may be automatically cleaned up when a BotAI
    instance is destroyed.
  warnings: Ensure that the BotAI pointer passed is valid and not null before calling
    this method. Passing invalid or dangling pointers can lead to undefined behavior.
    Also, be aware that repeated subscriptions from the same BotAI with different
    event masks will likely overwrite previous subscriptions unless the system supports
    multiple subscriptions per subscriber.
  related:
  - Unsubscribe
  - Publish
  - GetSubscribers
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T09:22:36.017928'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
