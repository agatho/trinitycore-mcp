api:
  class: LootDistribution
  method: UpdateItemPriorityCache
  signature: void LootDistribution::UpdateItemPriorityCache(Player * player, const
    LootItem & item, LootPriority priority)
documentation:
  brief: Updates the item priority cache for a player's loot distribution.
  description: The UpdateItemPriorityCache method manages and updates the priority
    levels assigned to specific items within a player's loot distribution context.
    This function is typically invoked during loot processing to ensure that item
    priorities are correctly maintained and reflected in the player's current loot
    state. It allows the system to dynamically adjust how items are prioritized for
    distribution, particularly in scenarios involving grouped loot or when players
    have specific loot preferences. The method ensures that priority changes are properly
    synchronized with the player's active loot session.
  parameters:
  - name: player
    description: Pointer to the Player object whose loot priority cache is being updated.
      Must not be null.
  - name: item
    description: Reference to the LootItem structure containing details about the
      item whose priority is being updated. This includes item ID, stack size, and
      other relevant properties.
  - name: priority
    description: LootPriority enum value indicating the new priority level for the
      specified item. Valid values typically include LOOT_PRIORITY_LOW, LOOT_PRIORITY_MEDIUM,
      LOOT_PRIORITY_HIGH, etc., depending on implementation.
  returns: null
  examples:
  - title: Updating Item Priority for a Player
    code: 'Player* player = ...;

      LootItem item;

      item.itemid = 12345;

      item.count = 1;

      LootPriority priority = LOOT_PRIORITY_HIGH;

      player->GetLootDistribution()->UpdateItemPriorityCache(player, item, priority);'
    language: cpp
  notes: This method is part of the internal loot distribution system and should generally
    not be called directly by external modules. It's designed to work in conjunction
    with other loot-related methods such as DistributeLoot() or ProcessLoot(). The
    cache update may trigger recalculations in the loot priority queue, which could
    affect subsequent loot decisions.
  warnings: Calling this method with a null player pointer will likely result in a
    crash. Ensure that all parameters are valid before invoking this function. Improper
    use of item priorities can lead to unexpected loot distribution behavior or conflicts
    with existing loot rules.
  related:
  - DistributeLoot
  - ProcessLoot
  - GetItemPriorityCache
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T01:49:46.876026'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
