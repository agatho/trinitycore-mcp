api:
  class: BehaviorManager
  method: OnUpdate
  signature: void BehaviorManager::OnUpdate(uint32 elapsed)
documentation:
  brief: Updates the behavior manager's internal state and processes AI behaviors
    for all managed units.
  description: The OnUpdate method is a core component of the BehaviorManager class
    responsible for executing periodic updates to AI behaviors. It is typically called
    by the game loop at regular intervals, processing elapsed time to update unit
    behaviors, pathfinding, threat management, and other AI-related activities. This
    method ensures that all managed units maintain their current AI state and respond
    appropriately to environmental changes or combat situations. The implementation
    handles internal timers, behavior transitions, and coordination between different
    AI subsystems within the TrinityCore framework.
  parameters:
  - name: elapsed
    description: The time elapsed in milliseconds since the last update call. This
      value is used to determine how much time has passed for behavior calculations,
      movement updates, and timing-based AI decisions.
  returns: null
  examples:
  - title: Basic usage in game loop
    code: "void GameLoop()\n{\n    uint32 elapsed = sWorld->GetLastUpdateTiming();\n\
      \    sBehaviorManager->OnUpdate(elapsed);\n}"
    language: cpp
  - title: Integration with AI subsystem updates
    code: "void BehaviorManager::OnUpdate(uint32 elapsed)\n{\n    // Update all registered\
      \ behaviors\n    for (auto& behavior : m_behaviors)\n    {\n        if (behavior->IsEnabled())\n\
      \            behavior->Update(elapsed);\n    }\n    \n    // Process behavior\
      \ transitions and state changes\n    ProcessBehaviorTransitions();\n}"
    language: cpp
  notes: This method is called from the main game update loop and should not block
    or perform heavy computations. It's designed to be lightweight and efficient,
    as it's invoked frequently. The elapsed parameter represents actual game time,
    not CPU time, ensuring consistent AI behavior across different performance conditions.
  warnings: Do not call this method directly from within AI behavior logic as it may
    cause recursion issues. Ensure that all behaviors registered with the manager
    are thread-safe if used in multi-threaded contexts.
  related:
  - BehaviorManager::AddBehavior
  - BehaviorManager::RemoveBehavior
  - BehaviorManager::Initialize
  - BehaviorManager::Update
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T12:18:40.332956'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
