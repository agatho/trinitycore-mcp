api:
  class: AdaptiveBehaviorManager
  method: ApplyDefensiveStrategies
  signature: void AdaptiveBehaviorManager::ApplyDefensiveStrategies(const CombatMetrics
    & metrics)
documentation:
  brief: Applies defensive AI strategies based on combat metrics to optimize NPC behavior
    during encounters.
  description: The ApplyDefensiveStrategies method evaluates the provided CombatMetrics
    data to determine and execute appropriate defensive behaviors for an NPC. This
    includes adjusting threat management, selecting suitable defensive spells or abilities,
    and modifying movement patterns to enhance survivability. The method is typically
    invoked during combat situations where the AI needs to respond dynamically to
    changing battlefield conditions. It integrates with the broader adaptive behavior
    system to ensure that NPCs make intelligent decisions based on real-time combat
    data rather than following rigid scripted sequences.
  parameters:
  - name: metrics
    description: A constant reference to CombatMetrics structure containing current
      combat state data including health, threat levels, target position, and environmental
      factors. This data drives the decision-making process for defensive actions.
  returns: null
  examples:
  - title: Basic Usage in Combat Context
    code: "void MyAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n    {\n\
      \        CombatMetrics metrics = GetCombatMetrics();\n        adaptiveBehaviorManager.ApplyDefensiveStrategies(metrics);\n\
      \    }\n}"
    language: cpp
  - title: Integration with Custom Defensive Logic
    code: "void AdaptiveBehaviorManager::ApplyDefensiveStrategies(const CombatMetrics&\
      \ metrics)\n{\n    if (metrics.GetHealthPercentage() < 30)\n    {\n        //\
      \ Activate defensive cooldowns\n        me->CastSpell(me, SPELL_DEFENSIVE_STANCE,\
      \ true);\n    }\n    else if (metrics.GetThreatLevel() == ThreatLevel::HIGH)\n\
      \    {\n        // Move to safety or use defensive abilities\n        DoDefensiveMovement();\n\
      \    }\n}"
    language: cpp
  notes: This method is designed to be called frequently during combat updates, typically
    every tick or at regular intervals. It assumes that the CombatMetrics object passed
    contains valid and up-to-date information about the current battle state. The
    implementation may involve multiple internal checks and strategy evaluations,
    so performance should be considered in high-frequency scenarios.
  warnings: Ensure that CombatMetrics data is properly updated before calling this
    method; stale or incorrect metrics can lead to inappropriate defensive behaviors.
    Avoid calling this method outside of combat contexts as it may cause unexpected
    behavior or errors due to missing combat state information.
  related:
  - GetCombatMetrics
  - UpdateAdaptiveBehaviors
  - EvaluateThreatLevel
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T06:55:31.271477'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
