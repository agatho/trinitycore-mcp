api:
  class: Action
  method: SetNextAction
  signature: void Action::SetNextAction(std::shared_ptr<Action> action)
documentation:
  brief: Sets the next action to be executed in the AI action queue
  description: The SetNextAction method configures the subsequent action that will
    be performed by an AI-controlled unit. This method is typically used within AI
    behavior trees or action sequences to define the flow of actions based on current
    conditions or priorities. The provided action pointer is stored internally and
    will be executed in the next available opportunity, assuming no higher-priority
    actions interrupt it. This mechanism allows for dynamic behavior modification
    and conditional action chaining in TrinityCore's AI system.
  parameters:
  - name: action
    description: A shared pointer to the Action object that should be executed next.
      Must not be null or invalid, as this will result in undefined behavior.
  returns: null
  examples:
  - title: Basic Usage
    code: 'std::shared_ptr<Action> nextAction = std::make_shared<AttackAction>(target);

      unit->SetNextAction(nextAction);'
    language: cpp
  - title: Conditional Action Chaining
    code: "if (health < 30)\n{\n    std::shared_ptr<Action> healAction = std::make_shared<HealAction>(unit);\n\
      \    unit->SetNextAction(healAction);\n}\nelse\n{\n    std::shared_ptr<Action>\
      \ attackAction = std::make_shared<AttackAction>(target);\n    unit->SetNextAction(attackAction);\n\
      }"
    language: cpp
  notes: This method does not immediately execute the action; it only schedules it
    for execution. The actual execution depends on the AI's update cycle and priority
    handling. Ensure that the shared_ptr passed is valid and not expired to avoid
    runtime errors.
  warnings: Passing a null or invalid shared_ptr to this method will lead to undefined
    behavior. Always verify that the action object exists before calling SetNextAction.
    Additionally, be cautious about creating circular references between actions which
    could cause memory leaks.
  related:
  - GetNextAction
  - ExecuteAction
  - ClearNextAction
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T17:55:54.189632'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
