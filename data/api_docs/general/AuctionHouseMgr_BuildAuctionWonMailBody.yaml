api:
  class: AuctionHouseMgr
  method: BuildAuctionWonMailBody
  signature: int AuctionHouseMgr::BuildAuctionWonMailBody(int guid, uint64 bid, uint64
    buyout)
documentation:
  brief: Constructs and returns the body text for an auction house won mail message.
  description: The BuildAuctionWonMailBody method generates the formatted text content
    for a mail notification sent to a player when they win an auction. This method
    is typically invoked by the AuctionHouseMgr class during the auction settlement
    process, after an auction has concluded and a bidder has been determined. It takes
    the winning bid amount and buyout price as inputs to construct a message that
    informs the player of their victory and the terms of the purchase. The returned
    integer likely represents the size or identifier of the constructed message body
    for internal handling within the mail system.
  parameters:
  - name: guid
    description: The unique identifier (GUID) of the winning player who will receive
      the auction won mail.
  - name: bid
    description: The final bid amount that the winning player paid for the item.
  - name: buyout
    description: The buyout price of the auctioned item, which may be zero if the
      auction was settled via bidding only.
  returns: An integer representing the size or identifier of the constructed mail
    body string. This value is used internally by the mail system to manage message
    handling and storage.
  examples:
  - title: Basic usage in auction settlement
    code: int bodySize = auctionHouseMgr->BuildAuctionWonMailBody(playerGuid, winningBid,
      itemBuyout);
    language: cpp
  - title: Integration with mail sending logic
    code: "uint64 bidAmount = 150000;\nuint64 buyoutPrice = 200000;\nint bodyLength\
      \ = auctionHouseMgr->BuildAuctionWonMailBody(playerGuid, bidAmount, buyoutPrice);\n\
      // Assume mail sending logic uses bodyLength for buffer allocation\nif (bodyLength\
      \ > 0) {\n    // Proceed with sending the mail\n}"
    language: cpp
  notes: This method is part of the auction house system's internal messaging infrastructure.
    It likely formats a standard message template with the provided bid and buyout
    values, but does not actually send the mail itself. The returned integer value
    may be used for logging or debugging purposes to verify successful message construction.
  warnings: Ensure that all input parameters are validated before calling this method,
    as invalid GUIDs or negative bid/buyout values could lead to malformed messages
    or system errors. This method should only be called after verifying that an auction
    has actually concluded and a valid winner exists.
  related:
  - AuctionHouseMgr::SendAuctionWonMail
  - AuctionHouseMgr::BuildAuctionOutbidMailBody
  - AuctionHouseMgr::BuildAuctionExpiredMailBody
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T13:44:50.791604'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
