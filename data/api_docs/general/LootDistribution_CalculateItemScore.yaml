api:
  class: LootDistribution
  method: CalculateItemScore
  signature: float LootDistribution::CalculateItemScore(Player * player, Item * item)
documentation:
  brief: Calculates a scoring value for an item based on player preferences and loot
    distribution rules.
  description: The CalculateItemScore method determines how valuable or desirable
    a specific item is to a given player within the context of loot distribution.
    This score influences decisions made during group loot systems, such as whether
    to roll need, greed, or pass on an item. The calculation considers factors like
    item level, quality, player class, specialization, and personal loot preferences.
    It's used internally by the TrinityCore's loot system to prioritize items for
    players in a raid or dungeon setting.
  parameters:
  - name: player
    description: Pointer to the Player object for whom the item score is being calculated.
      Must be a valid player instance; null pointers will result in undefined behavior.
  - name: item
    description: Pointer to the Item object whose score is being evaluated. Must point
      to a valid item; null pointers will result in undefined behavior.
  returns: A float value representing the calculated score for the item. Higher scores
    indicate higher desirability or value to the player. Scores are typically normalized
    and may range from 0.0 (least desirable) to 1.0 (most desirable), though actual
    ranges can vary based on implementation details.
  examples:
  - title: Basic Usage in Loot Processing
    code: "float score = lootDist->CalculateItemScore(player, item);\nif (score >\
      \ 0.8f) {\n    // Player has high interest in this item\n    player->SendLootMessage(\"\
      This item is highly valued!\");\n}"
    language: cpp
  - title: Using Score to Determine Loot Preference
    code: "float score1 = lootDist->CalculateItemScore(player, item1);\nfloat score2\
      \ = lootDist->CalculateItemScore(player, item2);\nif (score1 > score2) {\n \
      \   // Prioritize item1 for this player\n} else {\n    // Prioritize item2 for\
      \ this player\n}"
    language: cpp
  notes: This method is part of the internal loot distribution logic and may be called
    multiple times during a single loot event. The exact scoring algorithm is implementation-dependent
    but generally includes item stats, player role (tank/healer/dps), class-specific
    preferences, and gear priorities. Developers should ensure that both player and
    item parameters are valid before calling this method to avoid crashes or incorrect
    results.
  warnings: Calling this method with null pointers for either player or item will
    lead to undefined behavior and likely crash the server. Additionally, the returned
    score is not guaranteed to be stable across different game sessions or configurations,
    as it may depend on dynamic factors like player specialization changes or server-side
    loot rules updates.
  related:
  - GetLootForPlayer
  - DistributeLoot
  - IsItemAllowed
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T01:12:34.529463'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
