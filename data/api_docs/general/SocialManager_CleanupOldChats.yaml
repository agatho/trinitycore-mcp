api:
  class: SocialManager
  method: CleanupOldChats
  signature: void SocialManager::CleanupOldChats(uint32 diff)
documentation:
  brief: Removes expired chat messages from the social manager's internal chat history
    storage.
  description: The CleanupOldChats method is responsible for periodically removing
    old or expired chat messages from the social manager's internal storage. This
    method is typically called by the game loop at regular intervals to maintain performance
    and memory usage by purging outdated chat data. It processes all stored chat messages
    and removes those that have exceeded their retention period based on configured
    settings. The method operates on a per-player basis, ensuring that each player's
    chat history is cleaned up according to the defined time limits.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Game Loop
    code: "void GameWorld::Update(uint32 diff)\n{\n    // ... other updates ...\n\
      \    sSocialMgr->CleanupOldChats(diff);\n    // ... other updates ...\n}"
    language: cpp
  notes: This method is automatically invoked by the TrinityCore game loop and should
    not be called manually. The cleanup interval and retention period are configurable
    through server settings. Performance is optimized to process chat messages in
    batches to avoid blocking the main thread during large cleanup operations.
  warnings: null
  related:
  - GetSocialList
  - AddFriend
  - RemoveFriend
  - SendChatMessage
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T04:57:09.138911'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
