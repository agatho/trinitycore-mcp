api:
  class: MageSpellCalculator
  method: ApplyResistance
  signature: uint32 MageSpellCalculator::ApplyResistance(uint32 damage, float resistance)
documentation:
  brief: Applies magical resistance to reduce incoming spell damage based on the target's
    resistance value.
  description: The ApplyResistance method calculates the effective damage after applying
    magical resistance from the target. It reduces the base damage amount according
    to the resistance value provided, simulating how spell effects are mitigated by
    a target's magical resistance. This is commonly used in spell calculations for
    Mage and other spellcasting classes within the TrinityCore framework. The method
    assumes that resistance values are normalized (typically between 0 and 1) and
    applies standard damage reduction mechanics based on the game's resistance formula.
  parameters:
  - name: damage
    description: The base damage amount before resistance application. Must be a positive
      integer value representing raw spell damage.
  - name: resistance
    description: The resistance value applied to reduce damage. Should typically be
      a float between 0.0 and 1.0, where 0.0 means no resistance and 1.0 means full
      resistance (damage reduced to zero).
  returns: Returns the final calculated damage amount after applying the resistance.
    The result is always a non-negative integer, with 0 indicating that the full damage
    was resisted.
  examples:
  - title: Basic Damage Reduction
    code: 'MageSpellCalculator calculator;

      uint32 originalDamage = 100;

      float resistance = 0.25f; // 25% resistance

      uint32 finalDamage = calculator.ApplyResistance(originalDamage, resistance);

      // Result: 75 (25% of damage resisted)'
    language: cpp
  - title: Full Resistance Scenario
    code: 'MageSpellCalculator calculator;

      uint32 originalDamage = 50;

      float resistance = 1.0f; // Full resistance

      uint32 finalDamage = calculator.ApplyResistance(originalDamage, resistance);

      // Result: 0 (all damage resisted)'
    language: cpp
  notes: This method likely implements a standard damage reduction formula such as
    effective_damage = base_damage * (1 - resistance), where resistance is capped
    between 0 and 1. The implementation may also include minimum thresholds or clamping
    to prevent negative damage values.
  warnings: Ensure that the resistance parameter is properly normalized between 0
    and 1; otherwise, unexpected damage calculations may occur. Be aware that very
    high resistance values might cause integer underflow if not handled carefully
    in the calculation logic.
  related:
  - CalculateSpellDamage
  - GetTargetResistance
  - ApplySpellEffect
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T09:02:24.092658'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
