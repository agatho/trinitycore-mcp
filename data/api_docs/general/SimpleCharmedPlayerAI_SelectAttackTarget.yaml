api:
  class: SimpleCharmedPlayerAI
  method: SelectAttackTarget
  signature: int * SimpleCharmedPlayerAI::SelectAttackTarget() const
documentation:
  brief: Selects and returns the GUID of the most threatening target for the charmed
    player to attack.
  description: The SelectAttackTarget method determines the optimal enemy target for
    a charmed player AI to engage in combat. It evaluates potential targets based
    on threat level, distance, and other combat-relevant factors. The method is typically
    invoked during the AI's update cycle to ensure the charmed unit attacks the most
    suitable opponent. This function returns a pointer to an integer representing
    the GUID of the selected target, or nullptr if no valid target exists. The implementation
    likely considers factors such as aggro, target priority, and player state to make
    this decision.
  parameters: []
  returns: A pointer to an integer representing the GUID of the selected attack target.
    Returns nullptr if no suitable target is found.
  examples:
  - title: Basic usage in AI update loop
    code: "void SimpleCharmedPlayerAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target\
      \ = GetAttackTarget())\n    {\n        // Perform attack logic\n        AttackStart(target);\n\
      \    }\n    else\n    {\n        int* guid = SelectAttackTarget();\n       \
      \ if (guid && *guid != 0)\n        {\n            // Found a valid target to\
      \ attack\n            Unit* target = ObjectAccessor::GetUnit(*me, *guid);\n\
      \            if (target)\n                AttackStart(target);\n        }\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the AI system for charmed units in TrinityCore. It
    assumes that the AI has access to a valid unit context and threat management system.
    The returned GUID should be used with ObjectAccessor::GetUnit() to retrieve the
    actual target object.
  warnings: Ensure that the returned pointer is not null before dereferencing it.
    The method may return nullptr if no valid targets exist, which could lead to crashes
    if not properly checked.
  related:
  - GetAttackTarget
  - AttackStart
  - UpdateAI
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T09:59:59.022561'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
