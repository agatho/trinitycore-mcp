api:
  class: GuardAI
  method: UpdateAI
  signature: void GuardAI::UpdateAI(int diff)
documentation:
  brief: Updates the guard AI behavior based on elapsed time and target status
  description: The UpdateAI method is responsible for driving the artificial intelligence
    behavior of guard NPCs within the TrinityCore framework. It processes the guard's
    current state, evaluates potential threats, manages target selection, and executes
    appropriate combat or defensive actions. This method is called regularly by the
    core game loop and uses the provided time delta to determine when to perform AI
    decisions such as targeting enemies, moving to positions, or performing attacks.
    The guard AI operates under specific rules defined by the game's NPC behavior
    system, including faction-based interactions, aggro mechanics, and patrol behaviors.
  parameters:
  - name: diff
    description: The time elapsed in milliseconds since the last update call. This
      value is used to determine timing for AI decisions, movement calculations, and
      cooldown management.
  returns: null
  examples:
  - title: Basic AI Update Call
    code: "void GuardAI::UpdateAI(int diff)\n{\n    if (!UpdateVictim())\n       \
      \ return;\n    \n    if (me->getVictim()->IsWithinLOS(me))\n        DoMeleeAttackIfReady();\n\
      \    else\n        DoSpellAttackIfReady();\n}"
    language: cpp
  notes: This method is typically invoked from the creature's main update loop in
    TrinityCore. The 'diff' parameter should be carefully handled to ensure consistent
    timing across different server loads. GuardAI implementations often rely on the
    base CreatureAI class methods for common behaviors like movement and combat actions.
  warnings: Improper handling of the diff parameter can cause inconsistent AI behavior,
    such as premature or delayed actions. Avoid performing heavy computations within
    this method as it's called frequently and can impact server performance.
  related:
  - UpdateVictim
  - DoMeleeAttackIfReady
  - DoSpellAttackIfReady
  - MoveInLineOfSight
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T06:41:29.780002'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
