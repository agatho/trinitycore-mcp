api:
  class: LootRoll
  method: TryToStart
  signature: bool LootRoll::TryToStart(Map * map, Loot & loot, uint32 lootListId,
    uint16 enchantingSkill)
documentation:
  brief: Attempts to start a loot rolling process for a given loot list on a specified
    map.
  description: The TryToStart method initiates a loot roll process for a specific
    loot list within the context of a game map. It evaluates whether the conditions
    are met to begin the rolling phase, such as ensuring that the loot is valid and
    the map supports rolling mechanics. This method typically gets invoked when a
    player or creature has been awarded loot and it's time to determine who receives
    which item through a random roll mechanism. The process may involve checking for
    active players in the area, verifying loot eligibility, and preparing the necessary
    data structures for the rolling event.
  parameters:
  - name: map
    description: Pointer to the Map object where the loot is located. This parameter
      defines the game world context in which the loot roll occurs.
  - name: loot
    description: Reference to a Loot object containing the items and properties of
      the loot being rolled for.
  - name: lootListId
    description: Unique identifier for the specific loot list that is to be rolled.
      This ID corresponds to a predefined set of loot items in the game's database.
  - name: enchantingSkill
    description: The enchanting skill level of the player who triggered the loot roll.
      This value affects the probability or outcome of certain enchantments during
      the rolling process.
  returns: Returns true if the loot rolling process was successfully initiated, otherwise
    returns false. A return value of false typically indicates that preconditions
    were not met, such as invalid map reference, empty loot list, or unsupported rolling
    conditions.
  examples:
  - title: Basic usage to start a loot roll
    code: 'LootRoll roll;

      Map* map = player->GetMap();

      Loot& loot = player->GetLoot();

      uint32 lootListId = 12345;

      uint16 enchantingSkill = player->GetSkillValue(SKILL_ENCHANTING);

      bool success = roll.TryToStart(map, loot, lootListId, enchantingSkill);'
    language: cpp
  notes: This method is generally called internally by the core game logic when a
    loot event needs to be processed. Developers should ensure that all parameters
    passed are valid and not null before invoking this method. The method does not
    directly handle item distribution but prepares the environment for the rolling
    process.
  warnings: Incorrect or invalid map references can lead to undefined behavior or
    crashes. Ensure that the Loot object is properly initialized and contains valid
    items before calling this method.
  related:
  - LootRoll::Start
  - LootRoll::Finish
  - LootRoll::Roll
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T00:06:35.622492'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
