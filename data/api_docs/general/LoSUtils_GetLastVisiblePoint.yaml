api:
  class: LoSUtils
  method: GetLastVisiblePoint
  signature: int LoSUtils::GetLastVisiblePoint(const int & from, const int & to, Map
    * map)
documentation:
  brief: Calculates the last visible point between two locations in a map, returning
    the distance or error code.
  description: The GetLastVisiblePoint method determines the furthest point along
    a line of sight from a starting location (from) toward a target location (to)
    that is still visible within the given map. It evaluates visibility by checking
    for obstacles such as walls, terrain, or other blocking objects in the path. This
    function is commonly used in game mechanics like spell casting range checks, line-of-sight
    detection for NPCs, and determining whether an object can be seen from another.
    The method returns an integer value representing either the distance to the last
    visible point or a negative error code if visibility cannot be determined. It
    requires valid Map pointer and properly initialized coordinates.
  parameters:
  - name: from
    description: The starting coordinate (x, y) of the line-of-sight check. This represents
      the origin point from which visibility is evaluated.
  - name: to
    description: The target coordinate (x, y) of the line-of-sight check. This represents
      the destination point toward which visibility is tested.
  - name: map
    description: Pointer to the Map object where the visibility test occurs. Must
      be a valid map instance for accurate results.
  returns: Returns a positive integer representing the distance to the last visible
    point along the line of sight. If no visibility is found or an error occurs, it
    returns a negative value indicating failure.
  examples:
  - title: Basic Usage Example
    code: int result = LoSUtils::GetLastVisiblePoint(100, 200, map);
    language: cpp
  - title: Checking Visibility Between Two Points
    code: "int fromX = player->GetPositionX();\nint fromY = player->GetPositionY();\n\
      int toX = target->GetPositionX();\nint toY = target->GetPositionY();\nint distance\
      \ = LoSUtils::GetLastVisiblePoint(fromX, fromY, map);\nif (distance > 0) {\n\
      \    // Visibility exists up to 'distance' units\n} else {\n    // No visibility\
      \ or error occurred\n}"
    language: cpp
  notes: This method relies on the underlying map's collision detection system. Performance
    may vary depending on map complexity and number of obstacles in the line of sight.
    The function assumes that coordinates are valid and within the bounds of the provided
    map.
  warnings: Ensure that the Map pointer is not null before calling this method, otherwise
    it will likely cause a crash or undefined behavior. Also, note that the return
    value may be negative to indicate an error condition rather than just distance.
  related:
  - IsInLineOfSight
  - GetVisibilityRange
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T01:14:24.022380'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
