api:
  class: MeleePositionStrategy
  method: CalculateOptimalPosition
  signature: int MeleePositionStrategy::CalculateOptimalPosition(Player * bot, Unit
    * target, float preferredRange)
documentation:
  brief: Calculates the optimal melee position for a bot relative to its target within
    a preferred range.
  description: The CalculateOptimalPosition method determines the best location for
    a bot to stand when engaging in melee combat with a target unit. It evaluates
    positioning based on the bot's current state, the target's position, and a specified
    preferred combat range. The method considers factors such as line of sight, threat
    generation, and avoidance of harmful effects while maintaining optimal distance
    for melee attacks. This function is typically used by AI systems to make tactical
    decisions about movement during combat encounters.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that needs positioning
      calculation. Must not be null.
  - name: target
    description: Pointer to the Unit object representing the target enemy. Must not
      be null.
  - name: preferredRange
    description: Floating point value indicating the desired distance from the target
      for melee engagement. Should be a positive value representing meters.
  returns: Returns an integer code indicating the result of the positioning calculation.
    A return value of 0 typically indicates success and valid positioning, while negative
    values may indicate failure or invalid parameters. Positive non-zero values might
    represent specific positioning states or flags.
  examples:
  - title: Basic usage in combat AI
    code: "int result = strategy.CalculateOptimalPosition(bot, target, 1.5f);\nif\
      \ (result == 0) {\n    // Proceed with movement to calculated position\n   \
      \ bot->MoveTowards(target->GetPosition(), 1.5f);\n}"
    language: cpp
  - title: Handling different positioning outcomes
    code: "int posResult = strategy.CalculateOptimalPosition(playerBot, enemyTarget,\
      \ 2.0f);\nswitch (posResult) {\n    case 0:\n        // Optimal position found\n\
      \        playerBot->MoveTo(optimalPosition);\n        break;\n    case -1:\n\
      \        // Invalid parameters\n        sLog->outError(\"Invalid parameters\
      \ in positioning calculation\");\n        break;\n    default:\n        // Other\
      \ positioning states\n        sLog->outDebug(\"Positioning state: %d\", posResult);\n\
      \        break;\n}"
    language: cpp
  notes: This method is part of the TrinityCore AI system and relies on various internal
    pathfinding and combat calculations. The implementation may vary based on the
    specific bot's class, equipped weapons, and current combat state. Performance
    can be affected by complex terrain or multiple obstacles between the bot and target.
  warnings: Ensure that both bot and target pointers are valid before calling this
    method to avoid null pointer exceptions. The preferredRange parameter should be
    within reasonable bounds to prevent unrealistic positioning decisions. This method
    does not perform actual movement - it only calculates positions for use by other
    systems.
  related:
  - GetMeleePosition
  - CalculateDistanceToTarget
  - IsInRange
  - FindBestCombatPosition
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T23:52:06.837161'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
