api:
  class: LootDistribution
  method: ExecuteClassPriorityStrategy
  signature: void LootDistribution::ExecuteClassPriorityStrategy(Player * player,
    const LootItem & item, LootRollType & decision)
documentation:
  brief: Processes loot item distribution decisions based on class priority strategies
    for a given player.
  description: The ExecuteClassPriorityStrategy method determines how a specific loot
    item should be distributed among players in a group, taking into account class-based
    priority rules. This method is typically invoked during the loot rolling process
    to ensure that items are awarded according to predefined class hierarchies or
    roles. It evaluates the player's class and the item type to make a decision on
    whether the player should receive the item directly, pass on it, or initiate a
    roll. The method modifies the LootRollType parameter to reflect the outcome of
    this evaluation.
  parameters:
  - name: player
    description: Pointer to the Player object for whom the loot distribution decision
      is being made. Must be a valid player instance in the game world.
  - name: item
    description: Reference to the LootItem structure containing information about
      the item being distributed, including item ID, stack size, and other relevant
      properties.
  - name: decision
    description: Reference to a LootRollType variable that will be updated with the
      result of the class priority evaluation. The value can indicate direct award,
      pass, or roll initiation.
  returns: null
  examples:
  - title: Basic usage in loot distribution
    code: "void DistributeLootItem(Player* player, LootItem& item, LootRollType& decision)\n\
      {\n    LootDistribution::ExecuteClassPriorityStrategy(player, item, decision);\n\
      }"
    language: cpp
  - title: Processing loot with class priority check
    code: "void ProcessLootForPlayer(Player* player, LootItem& item)\n{\n    LootRollType\
      \ decision = LOOT_ROLL_PASS;\n    LootDistribution::ExecuteClassPriorityStrategy(player,\
      \ item, decision);\n    \n    switch (decision)\n    {\n        case LOOT_ROLL_DIRECT:\n\
      \            // Award item directly to player\n            break;\n        case\
      \ LOOT_ROLL_ROLL:\n            // Initiate roll for item\n            break;\n\
      \        case LOOT_ROLL_PASS:\n            // Player passes on item\n      \
      \      break;\n    }\n}"
    language: cpp
  notes: This method is part of the core loot distribution system in TrinityCore and
    integrates with group loot rules. It assumes that player and item data are valid
    and properly initialized before calling. The method does not perform any validation
    on input parameters beyond ensuring they are non-null.
  warnings: Calling this method without proper initialization of the player or item
    structures may lead to undefined behavior. Ensure that the player is in a valid
    group context when executing this strategy, as class priorities might depend on
    group composition.
  related:
  - LootDistribution::RollLoot
  - LootDistribution::DistributeItem
  - Player::GetLootThreshold
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T09:33:42.253260'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
