api:
  class: AccountScript
  method: OnFailedPasswordChange
  signature: void AccountScript::OnFailedPasswordChange(uint32 accountId)
documentation:
  brief: Called when a password change attempt for an account fails
  description: This method is invoked by the TrinityCore framework whenever a password
    change operation for a specific account fails. It serves as a notification hook
    for script developers to implement custom logic in response to failed password
    changes, such as logging the event, triggering security alerts, or enforcing rate
    limiting. The method provides the account identifier of the affected account,
    allowing scripts to perform account-specific actions. This callback is part of
    the AccountScript system which enables customization of account-related events
    within the game server.
  parameters:
  - name: accountId
    description: The unique identifier of the account for which the password change
      attempt failed. This value corresponds to the 'id' field in the 'account' table
      of the TrinityCore database.
  returns: null
  examples:
  - title: Basic Implementation Example
    code: "class MyAccountScript : public AccountScript\n{\npublic:\n    void OnFailedPasswordChange(uint32\
      \ accountId) override\n    {\n        // Log the failed password change attempt\n\
      \        sLog->outInfo(LOG_FILTER_GENERAL, \"Password change failed for account\
      \ ID: %u\", accountId);\n    }\n};"
    language: cpp
  - title: Advanced Implementation with Security Logging
    code: "class SecurityAccountScript : public AccountScript\n{\npublic:\n    void\
      \ OnFailedPasswordChange(uint32 accountId) override\n    {\n        // Retrieve\
      \ account information\n        if (AccountInfo const* info = sAccountMgr->GetAccountInfo(accountId))\n\
      \        {\n            // Log security event with IP address and timestamp\n\
      \            sLog->outInfo(LOG_FILTER_GENERAL, \"Failed password change for\
      \ account %s (ID: %u) at %s\", \n                         info->GetName().c_str(),\
      \ accountId, GetTimeString().c_str());\n            \n            // Optionally\
      \ trigger additional security measures\n            // e.g., increment failed\
      \ attempts counter or lock account temporarily\n        }\n    }\n};"
    language: cpp
  notes: This method is called from the authentication and account management subsystem
    of TrinityCore. It should be implemented carefully to avoid performance bottlenecks,
    as it may be invoked frequently during high-traffic periods. The accountId parameter
    is guaranteed to be valid at the time of invocation.
  warnings: Do not perform heavy operations or database queries within this method
    unless absolutely necessary, as it can impact server performance. Avoid calling
    methods that might cause deadlocks or recursive calls into the account system.
  related:
  - OnAccountLogin
  - OnFailedAccountLogin
  - OnPasswordChange
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T14:31:47.156872'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
