api:
  class: GuardianDruidRefactored
  method: UpdateDefensives
  signature: void GuardianDruidRefactored::UpdateDefensives()
documentation:
  brief: Updates the guardian druid's defensive abilities and cooldowns based on current
    game state and player conditions.
  description: The UpdateDefensives method is responsible for managing and updating
    all defensive capabilities of a Guardian Druid AI unit. This includes checking
    and applying cooldowns, refreshing defensive auras, and ensuring that defensive
    abilities are properly activated or deactivated according to the druid's current
    health status, mana levels, and combat conditions. The method typically executes
    during each AI update cycle to maintain optimal defensive positioning and ability
    usage. It may also handle interactions with other defensive mechanics such as
    barkskin, survival instincts, and feral charge cooldowns.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void GuardianDruidAI::UpdateAI(uint32 diff)\n{\n    // ... other AI logic\
      \ ...\n    UpdateDefensives();\n    // ... rest of AI logic ...\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void GuardianDruidAI::EnterCombat(Unit* target)\n{\n    // Initialize defensive\
      \ state\n    UpdateDefensives();\n    // ... other combat entry logic ...\n\
      }\n\nvoid GuardianDruidAI::UpdateDefensives()\n{\n    if (me->GetHealthPct()\
      \ < 30.0f)\n        DoCast(me, SPELL_SURVIVAL_INSTINCTS);\n    // ... additional\
      \ defensive checks ...\n}"
    language: cpp
  notes: This method should be called regularly during AI update cycles to ensure
    proper defensive behavior. It may internally check for conditions such as health
    percentage thresholds, mana availability, and existing aura states before applying
    new defensive abilities. The implementation is likely optimized to avoid redundant
    casts or state updates.
  warnings: Calling this method outside of the AI update context might lead to unexpected
    behavior or inconsistent defensive states. Ensure that all defensive abilities
    are properly checked for cooldowns and prerequisites before activation.
  related:
  - UpdateAI
  - DoCast
  - GetHealthPct
  - HasAura
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T03:34:21.795822'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
