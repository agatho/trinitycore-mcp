api:
  class: MostHPPercentMissingInRange
  method: MostHPPercentMissingInRange
  signature: void MostHPPercentMissingInRange::MostHPPercentMissingInRange(const int
    * obj, float range, int minHpPct, int maxHpPct)
documentation:
  brief: Finds the target with the highest percentage of missing health within a specified
    range.
  description: The MostHPPercentMissingInRange method identifies and returns the target
    unit that has the highest percentage of health missing within a given range. This
    is commonly used in AI scripts to determine which nearby enemy or ally requires
    immediate attention based on their health deficit. The method evaluates all units
    within the specified range, calculates the percentage of health lost for each,
    and selects the one with the maximum missing health percentage. It's particularly
    useful for healing or damage-dealing AI behaviors where prioritization based on
    health loss is required.
  parameters:
  - name: obj
    description: Pointer to an object (typically a unit) that serves as the reference
      point for range calculations. This parameter defines the origin from which the
      range is measured.
  - name: range
    description: The maximum distance within which to search for targets. Units beyond
      this range will be ignored in the evaluation process.
  - name: minHpPct
    description: Minimum health percentage threshold that a target must meet or exceed
      to be considered. Targets with less than this percentage of health are excluded
      from consideration.
  - name: maxHpPct
    description: Maximum health percentage threshold that a target must meet or fall
      below to be considered. Targets with more than this percentage of health are
      excluded from consideration.
  returns: None. This method does not return any value directly; instead, it modifies
    internal state or performs actions based on the evaluation results.
  examples:
  - title: Basic Usage for Healing AI
    code: "void MyAI::Update()\n{\n    Unit* target = MostHPPercentMissingInRange(&me,\
      \ 30.0f, 20, 100);\n    if (target)\n    {\n        // Cast healing spell on\
      \ the most injured unit\n        DoCast(target, SPELL_HEALING_SPELL);\n    }\n\
      }"
    language: cpp
  - title: Advanced Usage with Conditional Logic
    code: "void MyAI::Update()\n{\n    Unit* target = MostHPPercentMissingInRange(&me,\
      \ 25.0f, 10, 80);\n    if (target && target->GetHealthPct() < 30)\n    {\n \
      \       // Prioritize targets with very low health\n        DoCast(target, SPELL_MASS_HEAL);\n\
      \    }\n    else if (target)\n    {\n        // Otherwise, use standard healing\n\
      \        DoCast(target, SPELL_FLASH_HEAL);\n    }\n}"
    language: cpp
  notes: This method is typically used in AI behavior scripts within TrinityCore's
    scripting framework. It performs a range-based search and evaluates health percentages,
    making it computationally efficient for real-time gameplay scenarios. The method
    assumes that the input object (obj) has valid positioning data for accurate range
    calculations.
  warnings: Ensure that the 'obj' parameter points to a valid unit with proper positioning;
    otherwise, range calculations may be inaccurate or cause undefined behavior. Also,
    be cautious when setting minHpPct and maxHpPct values as they can significantly
    affect which targets are considered.
  related:
  - MostHPPercentMissing
  - InRange
  - GetHealthPct
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T11:47:04.744169'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
