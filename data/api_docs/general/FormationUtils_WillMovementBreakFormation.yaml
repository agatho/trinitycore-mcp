api:
  class: FormationUtils
  method: WillMovementBreakFormation
  signature: bool FormationUtils::WillMovementBreakFormation(const int & members,
    const int & destination, float threshold)
documentation:
  brief: Determines whether a unit's movement will cause it to break formation based
    on distance thresholds.
  description: The WillMovementBreakFormation method evaluates if moving a unit to
    a specified destination would result in that unit breaking its current formation.
    It compares the distance between the unit and its formation members against a
    given threshold to decide whether the movement is acceptable or not. This utility
    is commonly used in AI behavior systems where maintaining group cohesion is important,
    such as for pets or summoned creatures following their master. The method considers
    the number of formation members and the destination coordinates to make this determination.
  parameters:
  - name: members
    description: The number of units currently in the formation that the movement
      is being evaluated against. This typically represents the count of units following
      a leader or maintaining a group structure.
  - name: destination
    description: The target destination coordinate or index for the unit's movement.
      This value likely corresponds to a position in the world or a formation slot
      that the unit is moving towards.
  - name: threshold
    description: A floating-point value representing the maximum allowed distance
      deviation from the formation before breaking occurs. Units that move beyond
      this threshold relative to their formation members will be considered as breaking
      formation.
  returns: Returns true if the movement would cause the unit to break formation based
    on the provided parameters and threshold; otherwise returns false.
  examples:
  - title: Basic usage to check if movement breaks formation
    code: "bool breaksFormation = FormationUtils::WillMovementBreakFormation(3, 100,\
      \ 5.0f);\nif (breaksFormation)\n{\n    // Handle the case where movement would\
      \ break formation\n    printf(\"Movement would break formation\\n\");\n}"
    language: cpp
  - title: Using in AI decision making for pet behavior
    code: "Unit* pet = ...;\nPosition destPos = ...;\nif (FormationUtils::WillMovementBreakFormation(pet->GetFormationMembers(),\
      \ destPos.GetPositionX(), 3.0f))\n{\n    // Pet should not move to this position\
      \ to avoid breaking formation\n    pet->SetCanMove(false);\n}\nelse\n{\n   \
      \ // Allow movement\n    pet->SetCanMove(true);\n}"
    language: cpp
  notes: This method is likely used internally by TrinityCore's AI system for managing
    group behaviors and formation maintenance. The 'members' parameter might refer
    to the number of units in a formation, while 'destination' could be an index or
    coordinate. Performance-wise, this function should be lightweight as it only performs
    distance comparisons.
  warnings: Ensure that the 'threshold' value is properly configured based on game
    mechanics and desired formation tightness. Incorrect threshold values may lead
    to either too strict or too lenient formation enforcement.
  related:
  - GetFormationMembers
  - IsInFormation
  - UpdateFormationPosition
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T14:04:08.079852'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
