api:
  class: Unit
  method: CalculateMeleeDamage
  signature: void Unit::CalculateMeleeDamage(Unit * victim, CalcDamageInfo * damageInfo,
    int attackType)
documentation:
  brief: Calculates melee damage output for a unit's attack against a victim.
  description: This method computes the damage dealt by a unit's melee attack against
    a target, taking into account various factors such as weapon damage, attack type,
    and critical hit chance. It handles both regular and critical hits, and is used
    in combat calculations to determine the actual damage output during melee attacks.
    The method operates on the CalcDamageInfo structure which contains detailed information
    about the attack and damage calculation.
  parameters:
  - name: victim
    description: The target unit being attacked. This parameter defines the victim
      of the melee attack, typically a player or NPC.
  - name: damageInfo
    description: Pointer to a CalcDamageInfo structure containing damage calculation
      details. This structure holds information about the attack type, base damage,
      critical hit chance, and other relevant parameters for calculating melee damage.
  - name: attackType
    description: The type of melee attack being performed (normal, off-hand, etc.).
      This parameter determines whether the attack is a main hand, off-hand, or normal
      attack, affecting how damage is calculated.
  returns: null
  examples:
  - title: Basic Melee Damage Calculation
    code: 'Unit* attacker = new Unit;

      Unit* victim = new Unit;

      CalcDamageInfo damageInfo;

      attacker->CalculateMeleeDamage(victim, &damageInfo, ATTACK_TYPE_NORMAL);'
    language: cpp
  - title: Advanced Damage Calculation with Critical Hit
    code: "Unit* attacker = new Unit;\nUnit* victim = new Unit;\nCalcDamageInfo damageInfo;\n\
      attacker->CalculateMeleeDamage(victim, &damageInfo, ATTACK_TYPE_OFFHAND);\n\
      if (damageInfo.criticalHit) {\n    // Handle critical hit\n}\nelse {\n    //\
      \ Handle normal hit\n}"
    language: cpp
  notes: This method is part of the core combat system and should only be called during
    actual melee attacks. It requires proper initialization of the CalcDamageInfo
    structure before being used. The method may trigger additional calculations for
    critical hits or miss events depending on game mechanics.
  warnings: The method assumes that all parameters are properly initialized and valid.
    Incorrect handling of damageInfo can lead to incorrect damage calculations or
    crashes. Also, this method should not be called directly in combat situations
    without proper setup of the attack parameters.
  related:
  - CalculateDamage
  - CalculateSpellDamage
  - GetMeleeAttackPower
  - GetWeaponDamage
metadata:
  confidence: 0.95
  generated_at: '2025-10-30T21:21:30.614560'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
