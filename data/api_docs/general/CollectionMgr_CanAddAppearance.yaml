api:
  class: CollectionMgr
  method: CanAddAppearance
  signature: bool CollectionMgr::CanAddAppearance(const ItemModifiedAppearanceEntry
    * itemModifiedAppearance) const
documentation:
  brief: Determines whether a player can add a specific item appearance to their collection.
  description: The CanAddAppearance method checks if a given item modified appearance
    entry can be added to the player's collection. This method is typically used during
    item appearance acquisition or when attempting to unlock new cosmetic appearances
    for the player. It evaluates various conditions such as whether the appearance
    is already known, if the player has the required prerequisites, and if the appearance
    is valid for the current game context. The method returns true if the appearance
    can be added, false otherwise. This check is crucial in preventing duplicate entries
    and ensuring proper progression of cosmetic unlocks within the game's collection
    system.
  parameters:
  - name: itemModifiedAppearance
    description: Pointer to an ItemModifiedAppearanceEntry structure that defines
      the appearance to be checked. This entry contains all necessary data about the
      item appearance including its ID, associated item, and unlock requirements.
  returns: Returns true if the player can add the specified appearance to their collection;
    returns false if the appearance cannot be added due to prerequisites not being
    met, already being known, or other validation failures.
  examples:
  - title: Basic Usage Check
    code: "if (collectionMgr->CanAddAppearance(appearanceEntry)) {\n    // Add the\
      \ appearance to player's collection\n    collectionMgr->AddAppearance(appearanceEntry);\n\
      } else {\n    // Handle case where appearance cannot be added\n    SendNotification(\"\
      Cannot add this appearance.\");\n}"
    language: cpp
  - title: Conditional Appearance Unlock
    code: "void HandleItemAppearanceUnlock(Player* player, uint32 appearanceId) {\n\
      \    if (auto* entry = sItemModifiedAppearanceStore.LookupEntry(appearanceId))\
      \ {\n        if (player->GetCollectionMgr()->CanAddAppearance(entry)) {\n  \
      \          player->GetCollectionMgr()->AddAppearance(entry);\n            player->SendNotification(\"\
      New appearance unlocked!\");\n        } else {\n            player->SendNotification(\"\
      This appearance is already known or not available.\");\n        }\n    }\n}"
    language: cpp
  notes: This method likely performs checks against the player's existing collection,
    account status, and game progression requirements. It may also validate that the
    appearance entry is valid and properly initialized before performing any checks.
  warnings: Ensure that the ItemModifiedAppearanceEntry pointer passed to this method
    is valid and not null; passing an invalid pointer could lead to undefined behavior
    or crashes.
  related:
  - AddAppearance
  - HasAppearance
  - GetCollectionSize
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T17:18:06.191642'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
