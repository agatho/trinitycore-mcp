api:
  class: Corpse
  method: BuildValuesUpdateForPlayerWithMask
  signature: void Corpse::BuildValuesUpdateForPlayerWithMask(int * data, const int
    & requestedObjectMask, const int & requestedCorpseMask, const int * target) const
documentation:
  brief: Populates update buffer with corpse data for a specific player based on provided
    object and corpse masks.
  description: The BuildValuesUpdateForPlayerWithMask method constructs an update
    packet containing relevant corpse data for a specific player. It uses the provided
    object mask and corpse mask to determine which fields should be included in the
    update, and writes the resulting data into the supplied buffer. This method is
    typically used during player login or when a player interacts with a corpse to
    ensure that only necessary data is sent over the network. The target parameter
    specifies the player for whom the update is being built, allowing for per-player
    customization of the update data. The method operates on the internal state of
    the corpse object and modifies the provided data buffer in-place.
  parameters:
  - name: data
    description: Pointer to an integer array that will be populated with the update
      values for the corpse. This buffer must be pre-allocated with sufficient space
      to hold all relevant update fields.
  - name: requestedObjectMask
    description: Integer mask specifying which object fields should be included in
      the update. Each bit represents a different field in the object's update data
      structure.
  - name: requestedCorpseMask
    description: Integer mask specifying which corpse-specific fields should be included
      in the update. This determines what additional corpse-related information is
      sent to the client.
  - name: target
    description: Pointer to an integer array representing the target player for whom
      the update data is being constructed. Used to determine per-player visibility
      and field inclusion.
  returns: null
  examples:
  - title: Basic usage of BuildValuesUpdateForPlayerWithMask
    code: 'int updateData[100];

      int objectMask = 0x0001;

      int corpseMask = 0x0002;

      int targetPlayer[10];


      Corpse* corpse = ...; // some corpse instance


      corpse->BuildValuesUpdateForPlayerWithMask(updateData, objectMask, corpseMask,
      targetPlayer);'
    language: cpp
  notes: This method is part of the TrinityCore's update system and is crucial for
    efficient network communication. The method modifies the data buffer in-place
    without returning any value. It assumes that all input parameters are valid and
    properly initialized. The method may be called multiple times with different masks
    to build incremental updates.
  warnings: Ensure that the 'data' buffer has sufficient space to accommodate all
    fields specified by the masks. Passing invalid or uninitialized pointers for 'target'
    or 'data' can lead to memory corruption or undefined behavior. This method should
    only be called from within the game's update loop or when a player is actively
    connected.
  related:
  - BuildValuesUpdateForPlayer
  - BuildOutOfRangeUpdate
  - GetUpdateData
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T09:11:59.195471'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
