api:
  class: WorldSession
  method: HandleTextEmoteOpcode
  signature: void WorldSession::HandleTextEmoteOpcode(WorldPackets::Chat::CTextEmote
    & packet)
documentation:
  brief: Processes incoming text emote packets from players and broadcasts them to
    nearby players in the world.
  description: The HandleTextEmoteOpcode method is responsible for handling text-based
    emotes sent by players in World of Warcraft. When a player sends a text emote
    (such as 'laughs', 'giggles', or custom emotes), this method receives the packet,
    validates it, and broadcasts the emote to nearby players within the player's current
    zone or instance. It ensures proper formatting and respects emote cooldowns and
    permissions. The method operates on the WorldSession object which represents a
    player's connection to the server.
  parameters: []
  returns: null
  examples:
  - title: Basic usage of text emote handling
    code: "void WorldSession::HandleTextEmoteOpcode(WorldPackets::Chat::CTextEmote&\
      \ packet)\n{\n    // Validate that the player is not in a disabled state\n \
      \   if (!GetPlayer() || GetPlayer()->HasUnitState(UNIT_STATE_DIED))\n      \
      \  return;\n\n    // Process the emote and broadcast to nearby players\n   \
      \ GetPlayer()->SendTextEmote(packet.TextEmote, packet.Unit); // Example internal\
      \ call\n}"
    language: cpp
  notes: This method is part of the chat system's packet handling pipeline. It assumes
    that the packet has already been validated for basic structure and content by
    the network layer before reaching this handler. The actual emote broadcast logic
    typically involves checking visibility, distance, and player permissions.
  warnings: Improper handling of text emotes can lead to spam or abuse in chat systems.
    Ensure proper rate limiting and validation are implemented to prevent abuse. Also,
    be cautious when broadcasting emotes to ensure they do not violate server rules
    or cause performance issues with large groups.
  related:
  - HandleChatMessage
  - SendTextEmote
  - GetPlayer
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:14:54.971210'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
