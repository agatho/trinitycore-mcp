api:
  class: AuraEffect
  method: HandleModTotalPercentStat
  signature: void AuraEffect::HandleModTotalPercentStat(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Applies or removes a percentage-based stat modification aura effect on the
    target.
  description: The HandleModTotalPercentStat method is responsible for modifying a
    player's or creature's total stats by a specified percentage when an aura is applied
    or removed. This method is typically invoked during aura application or removal
    events to adjust character attributes such as health, mana, attack power, or other
    stat-related values. It calculates the modified stat value based on the aura's
    percentage modifier and applies it to the target's current total stats. The method
    operates in conjunction with the AuraApplication object which provides context
    about the aura being applied or removed.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object that contains information about
      the aura being applied or removed. This parameter provides context such as the
      aura's caster, duration, and application state.
  - name: mode
    description: The mode of operation for the aura effect. This typically indicates
      whether the effect is being applied (true) or removed (false). The value may
      also control specific behavior flags for how the stat modification should be
      calculated or applied.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the aura effect. When true, the percentage modifier is added to the target's
      stats; when false, it is removed.
  returns: null
  examples:
  - title: Applying a Stat Modifier Aura
    code: "void ApplyStatModifier(AuraEffect* auraEffect, Unit* target) {\n    AuraApplication*\
      \ app = new AuraApplication(target, target, nullptr);\n    auraEffect->HandleModTotalPercentStat(app,\
      \ 0, true);\n    delete app;\n}"
    language: cpp
  - title: Removing a Stat Modifier Aura
    code: "void RemoveStatModifier(AuraEffect* auraEffect, Unit* target) {\n    AuraApplication*\
      \ app = new AuraApplication(target, target, nullptr);\n    auraEffect->HandleModTotalPercentStat(app,\
      \ 0, false);\n    delete app;\n}"
    language: cpp
  notes: This method is part of the aura system in TrinityCore and is typically called
    internally by the core engine when handling aura application or removal. The actual
    stat modification logic is usually implemented in base classes or overridden methods.
    Developers should ensure that any custom implementations properly handle both
    apply and remove cases to maintain consistent character state.
  warnings: Improper use of this method can lead to incorrect stat calculations or
    memory leaks if the AuraApplication object is not managed correctly. Always ensure
    proper cleanup of temporary objects created for aura application context.
  related:
  - AuraEffect::HandleModTotalStat
  - AuraEffect::HandleApplyAura
  - AuraEffect::HandleRemoveAura
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T12:17:44.641856'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
