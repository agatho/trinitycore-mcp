api:
  class: SpellMgr
  method: GetPetAura
  signature: const PetAura * SpellMgr::GetPetAura(uint32 spell_id, uint8 eff) const
documentation:
  brief: Retrieves the pet aura associated with a specified spell and effect index.
  description: The GetPetAura method looks up and returns a const pointer to a PetAura
    structure that corresponds to the given spell ID and effect index. This method
    is used internally by the TrinityCore server to manage pet auras, which are special
    effects applied to summoned creatures or pets. The returned PetAura structure
    contains information about how the aura should behave, including its duration,
    visual effects, and application rules. This function is typically called during
    spell casting or pet summoning processes to ensure proper aura handling for summoned
    creatures.
  parameters:
  - name: spell_id
    description: The unique identifier of the spell for which to retrieve the pet
      aura. This must correspond to a valid spell entry in the database.
  - name: eff
    description: The effect index (0-2) specifying which effect of the spell should
      be considered when retrieving the pet aura. Valid values are 0, 1, or 2.
  returns: A const pointer to a PetAura structure if a matching aura is found for
    the specified spell and effect; otherwise, returns nullptr if no corresponding
    pet aura exists.
  examples:
  - title: Basic Usage
    code: "const PetAura* aura = sSpellMgr->GetPetAura(12345, 0);\nif (aura)\n{\n\
      \    // Process the pet aura\n    printf(\"Found pet aura with ID: %u\\n\",\
      \ aura->GetId());\n}"
    language: cpp
  - title: Checking for Valid Aura Before Use
    code: "uint32 spellId = 67890;\nuint8 effectIndex = 1;\nconst PetAura* petAura\
      \ = sSpellMgr->GetPetAura(spellId, effectIndex);\n\nif (petAura != nullptr)\n\
      {\n    // Use the pet aura\n    if (petAura->IsPassive())\n        printf(\"\
      This is a passive pet aura\\n\");\n}\nelse\n{\n    printf(\"No pet aura found\
      \ for spell %u effect %u\\n\", spellId, effectIndex);\n}"
    language: cpp
  notes: The method performs a lookup in an internal data structure that maps spell
    IDs and effect indices to PetAura entries. It is expected to be called during
    server initialization or spell processing phases. The returned pointer is valid
    only for the lifetime of the SpellMgr instance and should not be stored or used
    beyond that scope.
  warnings: Do not assume that all spells have associated pet auras; always check
    for null returns before dereferencing the result. Incorrect effect indices may
    lead to undefined behavior or incorrect aura application.
  related:
  - GetSpellInfo
  - GetPetAuraMap
  - IsPetAura
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T06:25:07.645403'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
