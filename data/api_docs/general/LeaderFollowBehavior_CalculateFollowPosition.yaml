api:
  class: LeaderFollowBehavior
  method: CalculateFollowPosition
  signature: int LeaderFollowBehavior::CalculateFollowPosition(Player * leader, int
    role)
documentation:
  brief: Calculates and returns the optimal follow position for a player relative
    to their leader based on role.
  description: The CalculateFollowPosition method determines the appropriate positioning
    for a player to follow their leader within a group or raid context. It evaluates
    the player's role (such as tank, healer, or damage dealer) and calculates a suitable
    offset from the leader's position to maintain proper formation and gameplay mechanics.
    This method is typically used in group AI behavior systems where maintaining structured
    positioning is important for both gameplay balance and visual presentation. The
    returned value represents an index or identifier that corresponds to a predefined
    set of follow positions, ensuring players maintain appropriate spacing and orientation
    relative to their leader.
  parameters:
  - name: leader
    description: Pointer to the Player object representing the group leader whose
      position will be used as reference for calculating follow positioning.
  - name: role
    description: Integer value indicating the player's role within the group (e.g.,
      0 = tank, 1 = healer, 2 = damage dealer). Used to determine appropriate positioning
      offset.
  returns: Returns an integer representing the calculated follow position index. A
    negative value typically indicates an error or invalid state, while positive values
    correspond to predefined positions in a follow formation array.
  examples:
  - title: Basic usage in group AI
    code: "Player* leader = player->GetGroup()->GetLeader();\nint position = leaderFollowBehavior.CalculateFollowPosition(leader,\
      \ 2);\nif (position >= 0) {\n    // Use calculated position for movement\n \
      \   player->SetFollowPosition(position);\n}"
    language: cpp
  - title: Role-based positioning calculation
    code: "int role = player->GetRole(); // Assume method exists to get player's role\n\
      Player* leader = player->GetGroup()->GetLeader();\nint followPos = leaderFollowBehavior.CalculateFollowPosition(leader,\
      \ role);\nswitch (followPos) {\n    case 0: player->MoveTo(leader->GetPositionX()\
      \ - 2.0f, leader->GetPositionY(), leader->GetPositionZ()); break;\n    case\
      \ 1: player->MoveTo(leader->GetPositionX() + 2.0f, leader->GetPositionY(), leader->GetPositionZ());\
      \ break;\n    default: break;\n}"
    language: cpp
  notes: This method is part of the group AI system and relies on predefined role-based
    positioning tables. The exact positioning logic may vary depending on group size,
    instance type, and player class. Performance considerations are minimal as this
    is a simple lookup operation, but frequent calls should be avoided in performance-critical
    sections.
  warnings: Ensure that the leader parameter is not null before calling this method
    to prevent crashes. The role parameter must be within valid range (typically 0-2)
    otherwise unexpected behavior may occur. This method does not perform any validation
    of player state or group membership.
  related:
  - GetFollowPosition
  - SetFollowPosition
  - UpdateFollowFormation
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T10:36:41.974338'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
