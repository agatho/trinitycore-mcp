api:
  class: WorldSession
  method: HandleSetRoleOpcode
  signature: void WorldSession::HandleSetRoleOpcode(WorldPackets::Party::SetRole &
    packet)
documentation:
  brief: Processes a packet to set the player's role in a party or raid group
  description: The HandleSetRoleOpcode method handles incoming packets from players
    that request to change their role within a party or raid group. This functionality
    is part of the World of Warcraft grouping system, allowing players to designate
    themselves as either a tank, healer, or damage dealer (DPS) for the purposes of
    loot distribution and group coordination. The method validates the requested role
    against valid game mechanics and updates the player's role in their current group
    context. It ensures that only valid roles are assigned and that the change is
    properly propagated to the group members.
  parameters:
  - name: packet
    description: The incoming packet containing the role assignment request from the
      client. This packet includes information about which role the player wants to
      assume within their group context.
  returns: null
  examples:
  - title: Setting a Player's Role to Tank
    code: 'WorldPackets::Party::SetRole rolePacket;

      rolePacket.Role = PartyRoles::TANK;

      worldSession->HandleSetRoleOpcode(rolePacket);'
    language: cpp
  - title: Assigning a Healing Role in Raid Group
    code: 'WorldPackets::Party::SetRole rolePacket;

      rolePacket.Role = PartyRoles::HEALER;

      worldSession->HandleSetRoleOpcode(rolePacket);'
    language: cpp
  notes: This method is typically called when a player interacts with the group roles
    UI in the game client. The actual role assignment logic may be subject to group
    leader permissions and raid restrictions. It's important to note that this method
    does not validate whether the player is actually in a group before processing
    the role change.
  warnings: Improper handling of role changes can lead to incorrect loot distribution
    or confusion among group members. This method should only be called when the player
    is confirmed to be in a valid group context, otherwise it may cause undefined
    behavior or errors.
  related:
  - HandlePartyCommand
  - SendSetRole
  - GetPlayerRole
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:14:02.470024'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
