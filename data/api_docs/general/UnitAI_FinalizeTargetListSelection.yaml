api:
  class: UnitAI
  method: FinalizeTargetListSelection
  signature: void UnitAI::FinalizeTargetListSelection(int & targetList, uint32 num,
    SelectTargetMethod targetType)
documentation:
  brief: Finalizes target list selection for AI behavior by processing and applying
    the selected target criteria.
  description: The FinalizeTargetListSelection method is used within the UnitAI system
    to complete the process of selecting targets for an AI-controlled unit. It takes
    a pre-populated target list, applies the specified selection method, and finalizes
    the target choice based on the given parameters. This method typically follows
    prior steps where potential targets are identified and filtered according to various
    criteria such as threat level, distance, or health status. The method ensures
    that the AI unit selects an appropriate target from the provided list using the
    defined selection logic.
  parameters:
  - name: targetList
    description: Reference to an integer representing the index or identifier of the
      target list to be processed. This value is modified by the method to reflect
      the final selected target.
  - name: num
    description: The number of valid targets in the target list that should be considered
      for selection. This parameter defines how many entries from the list are relevant
      for processing.
  - name: targetType
    description: An enumeration value specifying the method used to select a target
      from the provided list. Possible values include methods like SELECT_TARGET_RANDOM,
      SELECT_TARGET_NEAREST, SELECT_TARGET_FARTHEST, etc., which determine how the
      final target is chosen from the list.
  returns: null
  examples:
  - title: Basic Target Selection
    code: 'int targetIndex = 0;

      uint32 numTargets = 5;

      SelectTargetMethod method = SELECT_TARGET_NEAREST;

      me->GetAI()->FinalizeTargetListSelection(targetIndex, numTargets, method);'
    language: cpp
  - title: Using with AI Unit Targeting Logic
    code: "if (Unit* target = SelectTarget(SELECT_TARGET_RANDOM, 0, 100.0f, true))\n\
      {\n    int targetListIndex = 0;\n    uint32 count = 1;\n    FinalizeTargetListSelection(targetListIndex,\
      \ count, SELECT_TARGET_RANDOM);\n}"
    language: cpp
  notes: This method is part of the internal AI targeting mechanism and is usually
    invoked after a target list has been populated with valid candidates. It's important
    to ensure that the target list indices are correctly managed before calling this
    function, as incorrect indexing may lead to undefined behavior or invalid target
    selection.
  warnings: Improper handling of the targetList parameter can result in accessing
    invalid memory locations or selecting unintended targets. Always validate that
    the target list contains valid entries before invoking this method.
  related:
  - SelectTarget
  - GetAI
  - AddTargetToList
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T23:08:33.414602'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
