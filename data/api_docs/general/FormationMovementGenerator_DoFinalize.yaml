api:
  class: FormationMovementGenerator
  method: DoFinalize
  signature: void FormationMovementGenerator::DoFinalize(Creature * param0, bool param1,
    bool param2)
documentation:
  brief: Finalizes the formation movement for a creature, cleaning up resources and
    stopping movement.
  description: The DoFinalize method is responsible for completing the formation movement
    behavior of a creature in TrinityCore. It ensures that any ongoing movement related
    to formation positioning is properly terminated, releases associated resources,
    and resets internal state variables. This method is typically called when the
    creature's formation movement should end, either due to the formation being disbanded,
    the creature leaving the formation, or when transitioning to a different movement
    behavior. The method handles cleanup tasks such as stopping any active movement
    generators, clearing formation references, and ensuring that the creature returns
    to a stable state after movement termination.
  parameters:
  - name: param0
    description: Pointer to the Creature object whose formation movement is being
      finalized. This parameter represents the specific creature instance for which
      the movement cleanup is performed.
  - name: param1
    description: Boolean flag indicating whether the movement should be stopped immediately.
      If true, forces immediate cessation of movement without graceful transitions.
  - name: param2
    description: Boolean flag indicating whether to reset the creature's position
      after finalizing the formation movement. When true, the creature's position
      may be adjusted back to a default or expected formation location.
  returns: null
  examples:
  - title: Basic usage of DoFinalize
    code: 'Creature* creature = ...; // Get creature reference

      FormationMovementGenerator* movementGen = ...; // Get movement generator

      movementGen->DoFinalize(creature, true, false); // Finalize movement immediately
      without resetting position'
    language: cpp
  - title: Finalizing formation movement with position reset
    code: 'Creature* creature = ...;

      FormationMovementGenerator* movementGen = ...;

      movementGen->DoFinalize(creature, false, true); // Gracefully finalize and reset
      position'
    language: cpp
  notes: This method is part of the AI movement system in TrinityCore and should only
    be called on creatures that are actively using formation movement. The method
    assumes that the creature pointer passed in is valid and not null. It's important
    to ensure proper synchronization if this method is called from different threads,
    as movement operations can affect shared state.
  warnings: Calling DoFinalize with incorrect parameters may lead to inconsistent
    creature behavior or memory leaks. Always verify that the creature is indeed using
    formation movement before calling this method. Passing a null pointer for param0
    will likely cause a crash or undefined behavior.
  related:
  - DoInitialize
  - DoUpdate
  - GetMovementGeneratorType
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T04:34:20.526472'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
