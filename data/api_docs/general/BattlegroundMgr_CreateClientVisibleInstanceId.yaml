api:
  class: BattlegroundMgr
  method: CreateClientVisibleInstanceId
  signature: uint32 BattlegroundMgr::CreateClientVisibleInstanceId(int bgTypeId, int
    bracket_id)
documentation:
  brief: Creates and returns a unique client-visible instance ID for a battleground
    based on type and bracket.
  description: The CreateClientVisibleInstanceId method generates a unique instance
    identifier that is visible to clients for a specific battleground type and rating
    bracket. This ID is used internally by the TrinityCore server to manage separate
    instances of battlegrounds, ensuring that players are matched appropriately based
    on their arena or battleground ratings. The method typically handles the allocation
    of instance IDs in a way that prevents conflicts between different battleground
    types or brackets, maintaining proper game balance and player matchmaking. It's
    an essential part of the battleground management system that supports the core
    gameplay mechanics of competitive PvP content.
  parameters:
  - name: bgTypeId
    description: The type identifier of the battleground (e.g., 1 for AV, 2 for WS,
      etc.). This determines which specific battleground template is used.
  - name: bracket_id
    description: The rating bracket identifier that defines the skill level group
      for matchmaking. Used to separate different competitive tiers within the same
      battleground type.
  returns: Returns a unique uint32 instance ID that can be used by client-facing systems
    to identify and manage specific battleground instances. This ID is guaranteed
    to be unique per battleground type and bracket combination.
  examples:
  - title: Basic Usage for Creating a Battleground Instance
    code: 'uint32 instanceId = sBattlegroundMgr->CreateClientVisibleInstanceId(BATTLEGROUND_AV,
      0);

      // Returns a unique instance ID for Alterac Valley in the first bracket'
    language: cpp
  - title: Using Instance ID for Player Assignment
    code: 'uint32 bgTypeId = BATTLEGROUND_WS;

      uint32 bracketId = 3;

      uint32 instanceId = sBattlegroundMgr->CreateClientVisibleInstanceId(bgTypeId,
      bracketId);

      // Assign to player''s battleground data

      player->SetBattlegroundInstanceId(instanceId);'
    language: cpp
  notes: This method is typically called during battleground creation or player matchmaking
    processes. The returned instance ID should be stored and used for subsequent operations
    related to that specific battleground instance. The method may internally maintain
    a registry of allocated IDs to prevent collisions.
  warnings: Do not call this method with invalid bgTypeId or bracket_id values, as
    it may lead to undefined behavior or incorrect instance allocation. Ensure proper
    synchronization if called from multiple threads.
  related:
  - GetBattleground
  - CreateBattleground
  - GetBattlegroundTemplate
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T15:22:39.050329'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
