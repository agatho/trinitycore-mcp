api:
  class: ThreatReference
  method: FlagsAllowFighting
  signature: bool ThreatReference::FlagsAllowFighting(const Unit * a, const Unit *
    b)
documentation:
  brief: Determines whether two units are allowed to engage in combat based on their
    threat flags.
  description: The FlagsAllowFighting method evaluates the combat readiness of two
    Unit objects by examining their threat-related flags. It returns true if both
    units have compatible threat flags that permit them to fight each other, and false
    otherwise. This method is typically used within the AI and threat management systems
    of TrinityCore to determine whether a creature or player can initiate or continue
    combat with another entity. The check considers factors such as faction neutrality,
    PvP status, and other combat-related flags that define allowable engagement conditions.
  parameters: []
  returns: Returns true if both units have compatible threat flags allowing them to
    fight each other; otherwise returns false.
  examples:
  - title: Basic Usage in Combat Check
    code: "if (threatRef.FlagsAllowFighting(player, mob)) {\n    // Proceed with combat\
      \ logic\n    player->Attack(mob);\n}"
    language: cpp
  - title: Integration with AI Decision Making
    code: "void CreatureAI::UpdateAI(uint32 diff) {\n    if (me->GetVictim() && !threatRef.FlagsAllowFighting(me,\
      \ me->GetVictim())) {\n        me->CombatStop();\n        return;\n    }\n \
      \   // Continue with normal AI behavior\n}"
    language: cpp
  notes: This method is part of the internal threat management system and should not
    be called directly in most gameplay logic. It's primarily used by the core combat
    system to validate engagement between units.
  warnings: Do not rely on this method for custom AI behavior without understanding
    its underlying flag checks. Incorrect usage may lead to unexpected combat behavior
    or exploits.
  related:
  - ThreatReference::AddThreat
  - ThreatReference::GetThreat
  - Unit::IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T09:14:40.207194'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
