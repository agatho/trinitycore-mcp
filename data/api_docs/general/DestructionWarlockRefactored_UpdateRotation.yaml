api:
  class: DestructionWarlockRefactored
  method: UpdateRotation
  signature: void DestructionWarlockRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the destruction warlock's spell rotation based on current target
    and combat state
  description: The UpdateRotation method manages the core combat decision-making logic
    for a destruction warlock class. It evaluates the current target, available spells,
    mana levels, and combat conditions to determine the optimal sequence of abilities
    to cast. This method typically integrates with the AI system to provide automated
    spell selection and execution for destruction warlocks in World of Warcraft's
    TrinityCore environment. The method considers factors such as spell cooldowns,
    damage output prioritization, and resource management to maximize combat effectiveness.
  parameters:
  - name: target
    description: Pointer to the target unit that the warlock should cast spells upon.
      This parameter represents the current enemy target in combat and is used to
      determine spell targeting and damage calculation.
  returns: null
  examples:
  - title: Basic UpdateRotation Usage
    code: "void MyDestructionWarlock::OnCombatStart()\n{\n    // Set initial target\n\
      \    Unit* target = GetVictim();\n    if (target)\n    {\n        UpdateRotation(&target);\n\
      \    }\n}"
    language: cpp
  - title: Integration with Combat AI Loop
    code: "void DestructionWarlockRefactored::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n\
      \        return;\n\n    Unit* target = GetVictim();\n    if (target && target->IsAlive())\n\
      \    {\n        UpdateRotation(&target);\n    }\n}"
    language: cpp
  notes: This method is typically called within the AI update loop and should not
    be invoked directly from outside the combat system. The method assumes that a
    valid target exists and that the warlock has sufficient resources (mana, soul
    shards) to cast spells. Performance considerations include avoiding expensive
    calculations during high-frequency updates.
  warnings: Calling UpdateRotation without a valid target pointer may cause undefined
    behavior or crashes. Ensure that the target parameter points to a valid Unit object
    before calling this method. The method modifies internal state variables and should
    not be called concurrently from multiple threads.
  related:
  - GetVictim
  - CastSpell
  - IsCasting
  - HasMana
  - GetSpellCooldown
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T06:14:59.191214'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
