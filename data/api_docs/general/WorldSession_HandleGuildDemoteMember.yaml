api:
  class: WorldSession
  method: HandleGuildDemoteMember
  signature: void WorldSession::HandleGuildDemoteMember(WorldPackets::Guild::GuildDemoteMember
    & demote)
documentation:
  brief: Demotes a guild member to a lower rank.
  description: The HandleGuildDemoteMember method processes a client request to demote
    a specified guild member to a lower rank within the guild. This function is part
    of the WorldSession class and handles the communication between the client and
    server for guild rank management. It validates that the requesting player has
    sufficient permissions to demote members, checks if the target player exists in
    the guild, and ensures the new rank is valid. The method updates the member's
    rank in the database and broadcasts the change to all guild members.
  parameters:
  - name: demote
    description: A reference to a GuildDemoteMember packet containing the target player's
      GUID and the new rank to demote them to.
  returns: null
  examples:
  - title: Basic guild demotion usage
    code: "void WorldSession::HandleGuildDemoteMember(WorldPackets::Guild::GuildDemoteMember\
      \ & demote)\n{\n    // Validate session and guild membership\n    if (!GetPlayer()\
      \ || !GetPlayer()->GetGuild())\n        return;\n    \n    // Process the demotion\
      \ request\n    GetPlayer()->GetGuild()->DemoteMember(GetPlayer(), demote.TargetGuid,\
      \ demote.NewRank);\n}"
    language: cpp
  notes: This method assumes that proper authentication and authorization checks have
    already been performed by the calling code. The actual rank update is handled
    by the Guild class, which ensures data consistency in the database.
  warnings: Improper handling of guild permissions can lead to unauthorized rank changes.
    Always verify that the player requesting the demotion has the appropriate guild
    permissions before calling this method.
  related:
  - HandleGuildPromoteMember
  - HandleGuildSetLeader
  - HandleGuildLeave
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T22:00:16.375724'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
