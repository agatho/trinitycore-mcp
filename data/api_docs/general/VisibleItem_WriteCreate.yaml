api:
  class: VisibleItem
  method: WriteCreate
  signature: void VisibleItem::WriteCreate(ByteBuffer & data, const Unit * owner,
    const Player * receiver) const
documentation:
  brief: Serializes visible item data into a packet buffer for client transmission.
  description: The WriteCreate method serializes the state of a VisibleItem object
    into a ByteBuffer, preparing it for network transmission to a specific player.
    This method is typically invoked when sending initial item state information to
    clients, such as when an item becomes visible in a player's inventory or on the
    ground. The serialization process includes item properties, display information,
    and other relevant metadata needed by the client to render the item correctly.
    The method takes into account the owner of the item and the receiving player to
    ensure proper data formatting and visibility rules are applied.
  parameters:
  - name: data
    description: Reference to a ByteBuffer where the serialized item data will be
      written. This buffer is typically used to construct network packets sent to
      clients.
  - name: owner
    description: Pointer to the Unit object that owns this visible item. Used to determine
      ownership context and apply appropriate visibility rules.
  - name: receiver
    description: Pointer to the Player object who will receive this item data. Used
      to customize the serialized information based on the receiver's perspective
      and permissions.
  returns: null
  examples:
  - title: Basic Usage in Item Visibility Context
    code: 'VisibleItem visibleItem;

      Player* player = ...; // Get reference to player

      Unit* owner = ...;   // Get reference to item owner

      ByteBuffer dataBuffer;

      visibleItem.WriteCreate(dataBuffer, owner, player);'
    language: cpp
  - title: Sending Visible Item Data to Client
    code: "void SendVisibleItemToPlayer(VisibleItem& item, Player* receiver) {\n \
      \   Unit* owner = receiver; // Or get actual owner\n    ByteBuffer data;\n \
      \   item.WriteCreate(data, owner, receiver);\n    receiver->GetSession()->SendPacket(&data);\n\
      }"
    language: cpp
  notes: This method is part of the TrinityCore's packet serialization system and
    should only be called when preparing network packets for client communication.
    The method assumes that all parameters are valid pointers and does not perform
    null checks. It's commonly used in conjunction with other visibility-related systems
    such as item spawning, inventory updates, and object visibility management.
  warnings: Do not call this method without ensuring that the owner and receiver parameters
    are valid. Incorrect usage can lead to undefined behavior or client-side rendering
    issues. The ByteBuffer must be properly initialized before calling this method.
  related:
  - VisibleItem::WriteUpdate
  - VisibleItem::BuildCreateUpdateBlockForPlayer
  - VisibleItem::GetEntry
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T17:29:19.658566'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
