api:
  class: PvPCombatAI
  method: ShouldUseImmunity
  signature: bool PvPCombatAI::ShouldUseImmunity(int * player) const
documentation:
  brief: Determines whether the player should use an immunity ability during PvP combat.
  description: The ShouldUseImmunity method evaluates if a player's current state
    and combat context justify using an immunity ability, such as Divine Shield or
    Ice Block. This method typically checks for active threat levels, incoming damage,
    player health status, and cooldowns before making a decision. It is used by the
    PvPCombatAI class to make intelligent decisions about when to activate defensive
    mechanisms in player versus player scenarios.
  parameters:
  - name: player
    description: Pointer to the player object for which immunity usage is being evaluated.
      This parameter is not actually used in the method signature as defined, but
      may be referenced internally for state checks.
  returns: Returns true if the player should use an immunity ability based on current
    combat conditions; otherwise returns false.
  examples:
  - title: Basic usage in AI decision making
    code: "if (pvpCombatAI->ShouldUseImmunity(nullptr)) {\n    // Activate immunity\
      \ ability\n    player->AddAura(SPELL_DIVINE_SHIELD, player);\n}"
    language: cpp
  - title: Integration with combat state evaluation
    code: "void PlayerPvPAI::UpdateCombatState() {\n    if (ShouldUseImmunity(nullptr)\
      \ && !player->HasAura(SPELL_DIVINE_SHIELD)) {\n        player->CastSpell(player,\
      \ SPELL_DIVINE_SHIELD, true);\n    }\n}"
    language: cpp
  notes: This method is part of the AI decision-making framework for PvP combat and
    relies on internal state tracking. The parameter 'player' may be unused in some
    implementations but is kept for interface consistency with other similar methods.
  warnings: Ensure that immunity abilities are not overused, as they can be flagged
    by anti-cheat systems if used too frequently or without proper justification.
    Always verify that the player has sufficient resources before activating immunities.
  related:
  - PvPCombatAI::Update
  - PvPCombatAI::IsInCombat
  - PvPCombatAI::GetPlayerHealth
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T20:33:05.248416'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
