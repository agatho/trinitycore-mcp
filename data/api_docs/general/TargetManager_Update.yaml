api:
  class: TargetManager
  method: Update
  signature: void TargetManager::Update(uint32 diff, const CombatMetrics & metrics)
documentation:
  brief: Updates the target manager's internal state based on combat metrics and time
    delta.
  description: The Update method is responsible for maintaining the target manager's
    state during combat. It processes incoming combat metrics and applies time-based
    updates to determine current target validity, threat levels, and targeting decisions.
    This method is typically called from the AI update loop and ensures that the target
    manager reflects the most recent combat conditions. The method uses the provided
    time delta (diff) to perform time-sensitive calculations and incorporates combat
    metrics to adjust targeting behavior accordingly.
  parameters:
  - name: diff
    description: Time delta in milliseconds since last update. Used for time-based
      calculations and state transitions.
  - name: metrics
    description: Combat metrics containing information about recent combat events,
      damage dealt/ taken, threat levels, and other relevant combat data used to influence
      target selection decisions.
  returns: null
  examples:
  - title: Basic Update Usage in AI Context
    code: "void CreatureAI::UpdateAI(uint32 diff)\n{\n    if (UpdateVictim())\n  \
      \      m_targetManager.Update(diff, m_combatMetrics);\n}"
    language: cpp
  - title: Advanced Update with Custom Metrics
    code: "void BossAI::UpdateAI(uint32 diff)\n{\n    if (m_phase == PHASE_COMBAT)\n\
      \    {\n        m_combatMetrics.AddDamageDealt(m_creature->GetHealth() - m_lastHealth);\n\
      \        m_combatMetrics.UpdateThreatLevels();\n        m_targetManager.Update(diff,\
      \ m_combatMetrics);\n    }\n}"
    language: cpp
  notes: This method is typically called every tick in the AI update loop. The combat
    metrics parameter should be updated before calling this method to ensure accurate
    targeting decisions. Performance is generally low as it only performs state updates
    without heavy computations.
  warnings: Do not call this method outside of the AI update context as it may lead
    to inconsistent target states. Ensure that combat metrics are properly initialized
    and updated before calling to avoid targeting anomalies.
  related:
  - TargetManager::GetTarget
  - TargetManager::SetTarget
  - TargetManager::IsTargetValid
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T23:24:31.452706'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
