api:
  class: FireMageRefactored
  method: UpdateRotation
  signature: void FireMageRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the fire mage's spell rotation based on current target and combat
    state
  description: The UpdateRotation method manages the core spell casting logic for
    a fire mage character, determining which spells to cast next based on the target's
    current status, available mana, and combat conditions. This method typically integrates
    with the AI system to make real-time decisions about spell selection, cooldown
    management, and optimal damage output. It evaluates the target's health, debuff
    status, and the mage's resource availability to select the most effective spell
    from the fire specialization's rotation sequence.
  parameters:
  - name: target
    description: Pointer to the current target entity for spell casting decisions.
      The method uses this target's properties to determine optimal spell selection
      and casting priority.
  returns: null
  examples:
  - title: Basic UpdateRotation Call
    code: "void FireMageAI::Update()\n{\n    Unit* target = GetVictim();\n    if (target)\n\
      \        m_fireMage->UpdateRotation(&target);\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "void FireMageRefactored::UpdateRotation(int* target)\n{\n    if (!target\
      \ || *target == 0)\n        return;\n    \n    // Evaluate current combat state\
      \ and target conditions\n    if (IsSpellReady(FIREBALL) && HasEnoughMana(FIREBALL))\n\
      \        CastSpell(FIREBALL);\n    else if (IsSpellReady(SCORCH) && HasEnoughMana(SCORCH))\n\
      \        CastSpell(SCORCH);\n    // Additional rotation logic...\n}"
    language: cpp
  notes: This method is typically called during the AI update cycle and should only
    be invoked when the mage has a valid target. The method assumes that the target
    parameter points to a valid unit ID or entity reference. Performance considerations
    include avoiding expensive calculations within this method, as it may be called
    frequently during combat.
  warnings: Ensure that the target pointer is properly validated before calling this
    method to prevent null pointer dereferences. This method should not be called
    when the mage is in an invalid state such as being stunned or feared, as it may
    lead to incorrect spell selection.
  related:
  - CastSpell
  - IsSpellReady
  - HasEnoughMana
  - GetVictim
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T04:46:44.166506'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
