api:
  class: EscortAI
  method: AddEscortState
  signature: void EscortAI::AddEscortState(int escortState)
documentation:
  brief: Adds a new escort state to the EscortAI instance for managing quest escort
    behavior.
  description: The AddEscortState method is used to register a new state within the
    EscortAI system, which controls the behavior and progression of NPC escorts during
    quest events. This method allows developers to define custom states that can be
    triggered or managed during an escort mission, such as idle, moving, combat, or
    reaching a destination. The escort AI uses these states to determine how the NPC
    should behave at different stages of the quest. This is typically used internally
    by the core quest system when setting up escort quests, but can also be extended
    by custom scripts for more complex escort behaviors.
  parameters: []
  returns: null
  examples:
  - title: Adding a custom escort state
    code: "class MyEscortAI : public EscortAI\n{\npublic:\n    void InitializeEscort()\n\
      \    {\n        AddEscortState(ESCORT_STATE_CUSTOM_1);\n        AddEscortState(ESCORT_STATE_CUSTOM_2);\n\
      \    }\n};"
    language: cpp
  - title: Basic usage in quest script
    code: "void OnQuestAccept(Player* player, Quest const* quest)\n{\n    if (quest->GetQuestId()\
      \ == 12345)\n    {\n        // Create escort AI and add states\n        EscortAI*\
      \ escort = new EscortAI(player);\n        escort->AddEscortState(ESCORT_STATE_IDLE);\n\
      \        escort->AddEscortState(ESCORT_STATE_MOVING);\n        escort->Start(false);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called during the initialization phase of an escort
    quest. The EscortAI system internally manages these states to control NPC behavior,
    including movement, combat readiness, and quest progression. Developers should
    be aware that state management in EscortAI is critical for proper quest handling
    and that adding invalid or duplicate states may cause unexpected behavior.
  warnings: Improper use of this method can lead to incorrect escort behavior or quest
    failures. The method should only be called during appropriate initialization phases,
    not during active escort execution. Avoid calling this method repeatedly on the
    same EscortAI instance without proper cleanup.
  related:
  - Start
  - UpdateAI
  - SetState
  - GetState
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T05:20:49.270630'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
