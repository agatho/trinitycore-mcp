api:
  class: CreatureAI
  method: OnQuestReward
  signature: void CreatureAI::OnQuestReward(int * param0, const int * param1, int
    param2, int param3)
documentation:
  brief: Handles quest reward events for a creature AI, executing custom logic when
    a player completes a quest related to the creature.
  description: The OnQuestReward method is a virtual callback function in the CreatureAI
    class that is invoked when a player successfully completes a quest associated
    with the creature. This method allows developers to implement custom behavior
    such as rewarding players with items, experience, or triggering other game events.
    It is typically used in custom AI implementations to extend standard quest completion
    mechanics. The method is called during the quest reward processing phase and provides
    access to relevant quest data through its parameters. The function does not return
    any value but can modify the creature's state or interact with the player's quest
    progress.
  parameters:
  - name: param0
    description: Pointer to an integer representing the quest ID being rewarded. This
      parameter identifies which specific quest was completed and is used to determine
      appropriate reward logic.
  - name: param1
    description: Pointer to a constant integer array containing quest-related data
      or flags. The contents may vary based on implementation but typically includes
      state information or metadata about the quest completion event.
  - name: param2
    description: An integer value representing the player's current level at the time
      of quest reward. Used to adjust rewards or behaviors based on character progression.
  - name: param3
    description: An integer flag indicating additional context or modifiers for the
      quest reward event. Possible values may include quest source type, reward type,
      or special conditions affecting how the reward is processed.
  returns: null
  examples:
  - title: Basic Quest Reward Implementation
    code: "class MyCreatureAI : public CreatureAI {\npublic:\n    void OnQuestReward(int*\
      \ questId, const int* data, int playerLevel, int flags) override {\n       \
      \ if (*questId == 12345) {\n            // Give special item for this quest\n\
      \            Player* player = GetPlayerAtMinimumDistance();\n            if\
      \ (player)\n                player->AddItem(ITEM_ID_SPECIAL_REWARD, 1);\n  \
      \      }\n    }\n};"
    language: cpp
  - title: Advanced Quest Reward with Conditional Logic
    code: "class AdvancedCreatureAI : public CreatureAI {\npublic:\n    void OnQuestReward(int*\
      \ questId, const int* data, int playerLevel, int flags) override {\n       \
      \ switch (*questId) {\n            case 1001:\n                if (playerLevel\
      \ >= 10)\n                    DoRewardPlayerWithGold(5000);\n              \
      \  break;\n            case 1002:\n                if (flags & QUEST_FLAG_SPECIAL)\n\
      \                    SpawnRareMob();\n                break;\n        }\n  \
      \  }\n};"
    language: cpp
  notes: This method is part of the CreatureAI virtual function table and should be
    overridden in custom AI implementations. It is called from within the core quest
    reward processing system, so modifications to player state or quest data must
    be handled carefully to avoid conflicts with the game engine's internal systems.
  warnings: Avoid modifying core quest data structures directly within this method
    as it may cause unexpected behavior or crashes. Ensure that any item rewards or
    gold distributions are properly validated before applying them to prevent exploits.
    Be cautious when using player pointers obtained through GetPlayerAtMinimumDistance()
    as they might be null.
  related:
  - OnQuestAccept
  - OnQuestUpdate
  - OnQuestComplete
  - GetPlayerAtMinimumDistance
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T16:19:01.244036'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
