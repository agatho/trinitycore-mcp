api:
  class: PvPCombatAI
  method: GetPeelAbility
  signature: uint32 PvPCombatAI::GetPeelAbility(int * player) const
documentation:
  brief: Retrieves the peel ability ID for the player in PvP combat.
  description: The GetPeelAbility method returns the unique identifier of the peel
    ability associated with a player during PvP combat. This ability typically allows
    players to escape from melee combat or break free from certain crowd control effects.
    The method takes an optional pointer to an integer representing the player and
    returns a uint32 value that corresponds to the specific peel ability ID. In TrinityCore's
    context, this is used primarily for managing player actions during PvP encounters
    where escaping or breaking out of combat states is required.
  parameters:
  - name: player
    description: Pointer to an integer representing the player index or identifier.
      This parameter may be null or point to a valid player reference within the AI
      system.
  returns: Returns a uint32 value that represents the ID of the peel ability for the
    specified player. A return value of 0 typically indicates no valid peel ability
    is assigned, while non-zero values correspond to specific abilities defined in
    the game's ability database.
  examples:
  - title: Basic Usage
    code: "uint32 peelId = ai->GetPeelAbility(nullptr);\nif (peelId != 0)\n{\n   \
      \ // Use the peel ability ID for further processing\n    printf(\"Player has\
      \ peel ability ID: %u\\n\", peelId);\n}"
    language: cpp
  - title: Using with Player Reference
    code: "int playerId = 12345;\nuint32 peelId = ai->GetPeelAbility(&playerId);\n\
      if (peelId != 0)\n{\n    // Process the peel ability for specific player\n \
      \   SpellInfo const* spellInfo = sSpellMgr->GetSpellInfo(peelId);\n    if (spellInfo)\n\
      \    {\n        // Apply or check the peel ability logic\n        printf(\"\
      Peel ability '%s' found\\n\", spellInfo->SpellName[0]);\n    }\n}"
    language: cpp
  notes: This method is part of the PvPCombatAI system and assumes that the AI has
    been properly initialized with player data. The peel ability ID returned should
    correspond to a valid spell entry in the game's database, otherwise it may result
    in undefined behavior or invalid actions during combat.
  warnings: Ensure that the player parameter is correctly initialized before calling
    this method, as passing an invalid pointer could lead to memory access violations.
    Also note that if no peel ability is assigned, the return value will be zero,
    which should be handled appropriately in your code.
  related:
  - GetMeleeAbility
  - GetSpellAbility
  - IsInPvPCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-03T20:36:25.456999'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
