api:
  class: HunterAI
  method: IsPetInCombat
  signature: bool HunterAI::IsPetInCombat() const
documentation:
  brief: Checks if the hunter's pet is currently engaged in combat.
  description: The IsPetInCombat method determines whether the hunter's summoned pet
    is currently in combat with an enemy target. This method evaluates the pet's current
    state and returns true if the pet has an active combat target and is engaged in
    battle, or false if the pet is not in combat or has no target. The check typically
    involves examining the pet's AI state, target information, and combat flags within
    the TrinityCore framework. This functionality is essential for hunter AI behavior
    logic, particularly when deciding whether to issue commands like attack, follow,
    or stay.
  parameters: []
  returns: Returns true if the hunter's pet is currently in combat with a target;
    returns false if the pet is not in combat, has no target, or is in a non-combat
    state.
  examples:
  - title: Basic Usage in AI Decision Making
    code: "if (player->GetHunterAI()->IsPetInCombat()) {\n    // Pet is in combat,\
      \ issue attack command\n    player->GetPet()->CastSpell(target, SPELL_AUTO_SHOT,\
      \ TRIGGERED_OLD_TRIGGERED);\n} else {\n    // Pet not in combat, move to target\n\
      \    player->GetPet()->SetTarget(target);\n}"
    language: cpp
  - title: Combat State Monitoring for Pet Behavior
    code: "void HunterPetAI::UpdateAI(uint32 diff) {\n    if (IsPetInCombat()) {\n\
      \        // Pet is fighting, maintain combat stance\n        if (!me->HasUnitState(UNIT_STATE_CASTING))\n\
      \            DoMeleeAttackIfReady();\n    } else {\n        // Pet not in combat,\
      \ return to follow state\n        if (me->GetMotionMaster()->GetCurrentMovementGeneratorType()\
      \ != FOLLOW_MOTION_TYPE)\n            me->GetMotionMaster()->MoveFollow(player,\
      \ PET_FOLLOW_DIST, PET_FOLLOW_ANGLE);\n    }\n}"
    language: cpp
  notes: This method relies on the pet's current target and combat state flags maintained
    by the TrinityCore AI system. It does not perform any direct combat calculations
    but rather queries the existing state information. The method is typically used
    in conjunction with other pet AI methods to determine appropriate behavior during
    different combat scenarios.
  warnings: Ensure that the hunter has a valid pet before calling this method, as
    calling it on a hunter without an active pet may lead to undefined behavior or
    access violations. This method should not be used in contexts where the pet's
    state might be inconsistent due to rapid AI updates or concurrent modifications.
  related:
  - GetPet
  - IsInCombat
  - SetPetInCombat
metadata:
  confidence: 0.95
  generated_at: '2025-11-09T08:52:40.567664'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
