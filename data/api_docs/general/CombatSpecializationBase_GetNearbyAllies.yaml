api:
  class: CombatSpecializationBase
  method: GetNearbyAllies
  signature: int CombatSpecializationBase::GetNearbyAllies(float range) const
documentation:
  brief: Counts the number of nearby friendly units within the specified range.
  description: The GetNearbyAllies method calculates and returns the total count of
    ally units (including the caster) that are within a given radius. This method
    is typically used in combat specializations to determine the number of nearby
    allies for abilities or effects that scale based on group presence. The range
    parameter defines the maximum distance in yards from the unit's position to consider
    as 'nearby'. Units that are dead, invisible, or otherwise excluded from the calculation
    are not counted. This method performs a radius-based search using the TrinityCore's
    internal unit detection system.
  parameters: []
  returns: Returns an integer representing the number of nearby friendly units within
    the specified range. A value of 0 indicates no allies were found within range,
    while positive values indicate the count of allies present.
  examples:
  - title: Basic Usage
    code: "int allies = combatSpec->GetNearbyAllies(10.0f);\nif (allies > 0)\n{\n\
      \    // Apply an effect that benefits from nearby allies\n    unit->AddAura(SPELL_ID,\
      \ unit);\n}"
    language: cpp
  - title: Conditional Ability Activation
    code: "float range = 8.0f;\nint nearbyAllies = combatSpec->GetNearbyAllies(range);\n\
      if (nearbyAllies >= 3)\n{\n    // Trigger a powerful group ability\n    unit->CastSpell(unit,\
      \ GROUP_ABILITY_SPELL, true);\n}"
    language: cpp
  notes: This method uses the TrinityCore's internal unit detection system which may
    exclude certain units based on visibility, combat state, or other game mechanics.
    The range parameter is measured in yards and represents a spherical radius from
    the unit's center. Performance impact is minimal for small ranges but can increase
    with larger search radii due to the number of units being checked.
  warnings: The method does not account for line-of-sight restrictions; it only checks
    distance. Units that are behind walls or obstacles may still be counted if they're
    within the specified range. This could lead to unexpected behavior in certain
    scenarios where visibility is required for ally detection.
  related:
  - GetNearbyEnemies
  - GetNearbyUnits
  - GetNearbyPlayers
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T11:10:16.867821'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
