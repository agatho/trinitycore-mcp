api:
  class: AuraEffect
  method: HandleModInvisibilityDetect
  signature: void AuraEffect::HandleModInvisibilityDetect(const AuraApplication *
    aurApp, uint8 mode, bool apply) const
documentation:
  brief: Modifies the invisibility detection state of a unit based on aura application
    and mode.
  description: The HandleModInvisibilityDetect method is responsible for adjusting
    how invisibility is detected by a unit when an aura effect is applied or removed.
    This method is typically invoked during aura application or removal events to
    update the target's invisibility detection status, which affects whether stealthed
    units can be seen by others. The behavior depends on the mode parameter and whether
    the aura is being applied or removed. It interacts with the unit's visibility
    state and may affect combat behavior, stealth detection, and player interactions
    in World of Warcraft.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object that contains information about
      the aura being applied or removed. This parameter specifies which aura effect
      is triggering the invisibility detection change.
  - name: mode
    description: The mode of operation, typically indicating whether the aura is being
      applied (1) or removed (0). This value determines how the invisibility detection
      state should be modified.
  - name: apply
    description: Boolean flag indicating if the aura is being applied (true) or removed
      (false). When true, the invisibility detection is enabled; when false, it's
      disabled.
  returns: null
  examples:
  - title: Basic usage in aura effect handler
    code: "void MyInvisibilityAura::HandleModInvisibilityDetect(const AuraApplication*\
      \ aurApp, uint8 mode, bool apply) const {\n    if (apply) {\n        // Apply\
      \ invisibility detection changes\n        aurApp->GetTarget()->SetInvisibilityDetection(true);\n\
      \    } else {\n        // Remove invisibility detection changes\n        aurApp->GetTarget()->SetInvisibilityDetection(false);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the aura effect handling system and is usually called
    internally by TrinityCore's aura management framework. It should not be invoked
    directly unless implementing custom aura effects. The method modifies the target
    unit's invisibility detection state, which can have significant impact on gameplay
    mechanics related to stealth and visibility.
  warnings: Incorrectly setting the mode or apply flags may lead to unexpected behavior
    in stealth detection or visibility states. This method must be used carefully
    as it directly affects game mechanics such as stealth detection and combat interactions.
    Improper handling could cause players to remain invisible or visible when they
    shouldn't be.
  related:
  - AuraEffect::HandleEffect
  - AuraApplication::GetTarget
  - Unit::SetInvisibilityDetection
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T12:35:59.724220'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
