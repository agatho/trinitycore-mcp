api:
  class: AuctionHouseObject
  method: SendAuctionWon
  signature: void AuctionHouseObject::SendAuctionWon(const AuctionPosting * auction,
    Player * bidder, int trans) const
documentation:
  brief: Sends an auction won message to the bidder's client when an auction they
    placed a bid on has been successfully concluded.
  description: The SendAuctionWon method is responsible for notifying the player who
    won an auction that their bid was successful. This method is typically invoked
    by the auction house system when an auction concludes, either through expiration
    or direct sale. It sends a specific packet to the winning bidder's client containing
    details about the auction item and transaction. The method ensures proper communication
    between the server and client regarding auction outcomes, maintaining game state
    consistency for players involved in the auction process.
  parameters:
  - name: auction
    description: Pointer to the AuctionPosting object representing the auction that
      was won. This parameter must not be null and should contain valid auction data
      including item information, bid amount, and auction duration.
  - name: bidder
    description: Pointer to the Player object representing the player who placed the
      winning bid. This parameter must not be null and should reference a valid player
      instance in the game world.
  - name: trans
    description: Integer value representing the transaction type or identifier for
      the auction outcome. This value is used internally to track different types
      of auction transactions within the system.
  returns: null
  examples:
  - title: Basic usage in auction completion handler
    code: "void AuctionHouseObject::OnAuctionComplete(AuctionPosting* auction, Player*\
      \ bidder, int transactionId)\n{\n    SendAuctionWon(auction, bidder, transactionId);\n\
      }"
    language: cpp
  - title: Sending auction won notification with error handling
    code: "void AuctionHouseObject::HandleAuctionWin(AuctionPosting* auction, Player*\
      \ bidder)\n{\n    if (!auction || !bidder)\n        return;\n    \n    SendAuctionWon(auction,\
      \ bidder, 1);\n}"
    language: cpp
  notes: This method is part of the core auction house functionality in TrinityCore
    and relies on proper packet handling to communicate with players. The method assumes
    that all parameters are valid and properly initialized before invocation. It's
    typically called from within the auction house system's internal logic when an
    auction concludes successfully.
  warnings: Ensure that both the auction and bidder parameters are valid pointers
    before calling this method, as passing null pointers could result in undefined
    behavior or crashes. This method should only be called after verifying that the
    auction has actually concluded and the player is indeed the winner.
  related:
  - SendAuctionOutbid
  - SendAuctionExpired
  - SendAuctionCancelled
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T21:07:09.182699'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
