api:
  class: PetAI
  method: SelectNextTarget
  signature: int * PetAI::SelectNextTarget(bool allowAutoSelect) const
documentation:
  brief: Selects and returns the next target for the pet AI to attack based on current
    threat list and selection criteria.
  description: The SelectNextTarget method is responsible for determining which creature
    or player the pet should attack next. It evaluates the pet's current threat list,
    considering factors such as aggro level, distance, and priority. The method respects
    the allowAutoSelect flag to determine whether automatic target selection is permitted.
    This functionality is crucial in maintaining proper pet combat behavior within
    the TrinityCore framework, ensuring that pets engage enemies according to game
    mechanics and AI logic. The method operates on the pet's current target selection
    state and returns a pointer to an integer representing the target's GUID.
  parameters: []
  returns: A pointer to an integer representing the GUID of the selected target. Returns
    nullptr if no valid target is found or if auto selection is disabled and no target
    exists.
  examples:
  - title: Basic Target Selection
    code: "PetAI* petAI = player->GetPet()->AI();\nint* nextTarget = petAI->SelectNextTarget(true);\n\
      if (nextTarget != nullptr) {\n    // Process the selected target\n    uint64\
      \ targetGUID = *nextTarget;\n    // Use targetGUID for further actions\n}"
    language: cpp
  - title: Checking Target Selection with Auto-Select Disabled
    code: "PetAI* petAI = player->GetPet()->AI();\nint* nextTarget = petAI->SelectNextTarget(false);\n\
      if (nextTarget == nullptr) {\n    // No target selected because auto-select\
      \ is disabled\n    // Handle fallback logic here\n}"
    language: cpp
  notes: This method relies on the internal threat management system of the pet AI.
    It may return nullptr if no valid targets are available or if the pet is not in
    combat mode. The returned pointer points to a value stored within the AI's internal
    state and should not be modified directly.
  warnings: Do not assume that the returned pointer will always point to a valid target;
    always check for nullptr before dereferencing. Incorrect handling of the return
    value may lead to crashes or undefined behavior in combat scenarios.
  related:
  - PetAI::UpdateAI
  - PetAI::AttackStart
  - PetAI::SelectTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T22:31:09.072427'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
