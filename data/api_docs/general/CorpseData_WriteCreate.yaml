api:
  class: CorpseData
  method: WriteCreate
  signature: void CorpseData::WriteCreate(ByteBuffer & data, int fieldVisibilityFlags,
    const Corpse * owner, const Player * receiver) const
documentation:
  brief: Writes corpse data into a ByteBuffer for client synchronization.
  description: The WriteCreate method serializes the corpse's data fields into a provided
    ByteBuffer, which is used to send the corpse information to players in the game
    world. This method handles the construction of the packet that represents a corpse's
    initial state when it is created or becomes visible to a player. It takes into
    account field visibility flags and may include additional context based on the
    owner and receiver of the data. The method ensures that only relevant fields are
    included according to the visibility settings, making it efficient for network
    transmission.
  parameters:
  - name: data
    description: A reference to a ByteBuffer where the serialized corpse data will
      be written. This buffer is typically used to construct a packet sent to the
      client.
  - name: fieldVisibilityFlags
    description: An integer flag that determines which fields of the corpse should
      be included in the serialized output. These flags control visibility based on
      player permissions or game state.
  - name: owner
    description: A pointer to the Player object who owns the corpse. This is used
      to determine ownership-related data and may influence what information is written
      into the buffer.
  - name: receiver
    description: A pointer to the Player object who will receive this corpse data.
      The receiver's perspective affects how the data is formatted, particularly in
      relation to visibility flags.
  returns: null
  examples:
  - title: Basic usage of WriteCreate
    code: 'ByteBuffer buffer;

      CorpseData corpseData;

      Player* owner = ...; // some player

      Player* receiver = ...; // another player

      int visibilityFlags = VISIBILITY_FLAG_DEFAULT;

      corpseData.WriteCreate(buffer, visibilityFlags, owner, receiver);'
    language: cpp
  notes: This method is typically called during the process of sending a corpse packet
    to a client. It's important that the ByteBuffer passed in is properly initialized
    before calling this method. The fieldVisibilityFlags parameter plays a crucial
    role in determining what data is sent, and incorrect flag usage may lead to incomplete
    or incorrect corpse representations for players.
  warnings: null
  related:
  - CorpseData::WriteUpdate
  - CorpseData::WriteDestroy
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T04:14:24.107147'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
