api:
  class: ChatHandler
  method: GetSessionDbcLocale
  signature: LocaleConstant ChatHandler::GetSessionDbcLocale() const
documentation:
  brief: Retrieves the database locale constant associated with the current session's
    language settings.
  description: The GetSessionDbcLocale method returns the LocaleConstant value that
    represents the client's language setting for the active session. This locale identifier
    is used internally by TrinityCore to determine which localized strings, databases,
    and DBC files should be accessed for the player. The returned value corresponds
    to the standard locale constants defined in the game's localization system, such
    as LOCALE_en, LOCALE_ko, LOCALE_fr, etc. This method is typically called during
    command processing or when determining how to interpret or display localized content
    for a specific player session.
  parameters: []
  returns: A LocaleConstant enum value representing the database locale of the current
    session. Possible values include LOCALE_en, LOCALE_ko, LOCALE_fr, LOCALE_de, LOCALE_zh,
    LOCALE_tw, LOCALE_es, LOCALE_ru, and LOCALE_none. The method will return LOCALE_none
    if no valid locale is set for the session.
  examples:
  - title: Basic usage in a command handler
    code: "void HandleTestCommand(ChatHandler* handler)\n{\n    LocaleConstant locale\
      \ = handler->GetSessionDbcLocale();\n    handler->PSendSysMessage(\"Current\
      \ session locale: %u\", locale);\n}"
    language: cpp
  - title: Using locale to determine localized content
    code: "void SendLocalizedWelcomeMessage(ChatHandler* handler)\n{\n    LocaleConstant\
      \ locale = handler->GetSessionDbcLocale();\n    switch (locale)\n    {\n   \
      \     case LOCALE_en:\n            handler->PSendSysMessage(\"Welcome to the\
      \ server!\");\n            break;\n        case LOCALE_fr:\n            handler->PSendSysMessage(\"\
      Bienvenue sur le serveur!\");\n            break;\n        default:\n      \
      \      handler->PSendSysMessage(\"Welcome!\");\n            break;\n    }\n}"
    language: cpp
  notes: This method relies on the session's current locale setting which is typically
    initialized during player login based on their client language preference. The
    returned LocaleConstant value directly maps to the DBC file naming conventions
    used by TrinityCore for localization. This method does not perform any validation
    or fallback logic; it simply returns what has been set in the session.
  warnings: Be aware that if a player's locale is not properly initialized, this method
    may return LOCALE_none which could lead to unexpected behavior when trying to
    access localized resources. Always validate the returned value before using it
    for localization decisions.
  related:
  - GetSessionLocale
  - SetSessionLocale
  - GetSession()
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T16:20:26.215444'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
