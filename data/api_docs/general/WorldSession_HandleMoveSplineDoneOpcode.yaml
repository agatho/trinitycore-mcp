api:
  class: WorldSession
  method: HandleMoveSplineDoneOpcode
  signature: void WorldSession::HandleMoveSplineDoneOpcode(WorldPackets::Movement::MoveSplineDone
    & moveSplineDone)
documentation:
  brief: Processes a client's confirmation that it has completed a movement spline
    animation.
  description: The HandleMoveSplineDoneOpcode method is invoked when the client confirms
    that it has finished executing a movement spline, typically sent after a player
    or creature has completed a complex movement such as a flight path, teleportation,
    or a custom spline-based animation. This method serves as a synchronization point
    between the client and server to ensure proper handling of movement states and
    transitions. It is part of the WorldSession's packet handling system and is crucial
    for maintaining accurate character positioning and state management during dynamic
    movements.
  parameters:
  - name: moveSplineDone
    description: A reference to a MoveSplineDone packet structure containing data
      about the completed movement spline, including the spline ID and other movement-related
      metadata.
  returns: null
  examples:
  - title: Basic usage in packet handler
    code: "void WorldSession::HandleMoveSplineDoneOpcode(WorldPackets::Movement::MoveSplineDone&\
      \ moveSplineDone)\n{\n    // Process the completed spline\n    Player* player\
      \ = GetPlayer();\n    if (player && player->HasUnitState(UNIT_STATE_SPLINE_MOVING))\n\
      \    {\n        player->ClearUnitState(UNIT_STATE_SPLINE_MOVING);\n        //\
      \ Additional logic for movement completion\n    }\n}"
    language: cpp
  notes: This method is typically called during movement synchronization and should
    be used to clear movement-related states or trigger subsequent actions. It's important
    to ensure that the player or unit is in a valid state before processing this packet
    to avoid inconsistencies.
  warnings: Improper handling of this opcode may lead to incorrect positioning, stuck
    characters, or desynchronization between client and server. Ensure all movement
    states are properly cleared and validated after processing.
  related:
  - HandleMoveSpline
  - HandleMovementStats
  - UpdatePlayerPosition
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T21:28:17.696104'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
