api:
  class: MageAI
  method: RecordSpellResist
  signature: void MageAI::RecordSpellResist(uint32 spellId, ::Unit * target)
documentation:
  brief: Records a spell resist event for the mage AI, tracking when a spell fails
    to hit due to resistance.
  description: The RecordSpellResist method is used by the MageAI class to log instances
    where a spell fails to land on a target due to magical resistance. This function
    likely updates internal tracking mechanisms within the AI system to monitor spell
    effectiveness and adjust future casting behavior accordingly. The method takes
    the spell identifier and the target unit as parameters, allowing it to associate
    the resist event with specific spells and targets for later analysis or decision-making.
    This functionality is essential for implementing intelligent spell selection and
    targeting strategies in the mage's combat AI.
  parameters:
  - name: spellId
    description: The unique identifier of the spell that was resisted. This corresponds
      to the Spell ID used internally by TrinityCore's spell system.
  - name: target
    description: Pointer to the Unit object that resisted the spell. This represents
      the target unit that successfully avoided the spell effect through resistance.
  returns: null
  examples:
  - title: Basic Usage in Mage AI Context
    code: "void SomeMageAI::HandleSpellCast(Spell* spell, Unit* target)\n{\n    if\
      \ (spell->IsResisted(target))\n    {\n        RecordSpellResist(spell->m_spellInfo->Id,\
      \ target);\n    }\n}"
    language: cpp
  - title: Integration with Spell Effect Application
    code: "void MageAI::OnSpellHit(Unit* victim, SpellInfo const* spellInfo)\n{\n\
      \    if (spellInfo->HasAttribute(SPELL_ATTR0_IS_ABILITY) && !spellInfo->IsPositive())\n\
      \    {\n        // Check if the spell was resisted by the target\n        if\
      \ (victim->GetAuraEffect(SPELL_AURA_MOD_IMMUNITY, 0, spellInfo->Id))\n     \
      \   {\n            RecordSpellResist(spellInfo->Id, victim);\n        }\n  \
      \  }\n}"
    language: cpp
  notes: This method is likely part of a larger AI decision-making framework that
    tracks spell effectiveness over time. It may be used to influence future spell
    selection, cooldown management, or target prioritization in the mage's combat
    behavior. The internal tracking mechanism could involve maintaining statistics
    about which spells are most frequently resisted against different types of targets.
  warnings: Ensure that the spellId parameter is valid and corresponds to an actual
    spell entry in the database, otherwise the resist tracking may not function correctly.
    Also, verify that the target pointer is valid before calling this method to prevent
    potential crashes or undefined behavior.
  related:
  - GetSpellResistCount
  - ResetSpellResistTracking
  - IsSpellResisted
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T00:45:10.344783'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
