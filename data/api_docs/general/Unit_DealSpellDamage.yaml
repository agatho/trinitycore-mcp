api:
  class: Unit
  method: DealSpellDamage
  signature: void Unit::DealSpellDamage(const SpellNonMeleeDamage * damageInfo, bool
    durabilityLoss)
documentation:
  brief: DealSpellDamage performs spell damage calculations and applies damage to
    target units.
  description: This method handles the processing of spell damage dealt by a unit,
    calculating damage based on various factors including target resistance, spell
    modifiers, and critical hit chances. It applies the calculated damage to the target
    unit's health and manages the damage information through the SpellNonMeleeDamage
    structure. The method also considers durability loss for weapons when applicable,
    ensuring proper game mechanics handling during combat.
  parameters:
  - name: damageInfo
    description: A pointer to a SpellNonMeleeDamage structure containing damage details
      including damage type, damage amount, critical hit chance, and target information.
      This structure defines how the spell damage should be processed.
  - name: durabilityLoss
    description: Boolean flag indicating whether durability loss should occur for
      the weapon used in the attack. When true, the weapon's durability will decrease
      based on the damage dealt.
  returns: null
  examples:
  - title: Basic usage example
    code: 'Unit* attacker = GetOwner();

      SpellInfo->DealSpellDamage(&damageInfo, true);

      '
    language: cpp
  - title: Advanced usage example
    code: "Unit* target = GetTarget();\nSpellNonMeleeDamage damageInfo;\n damageInfo.damage\
      \ = 100;\n damageInfo.spellId = 12345;\n damageInfo.target = target;\n damageInfo.type\
      \ = SPELL_SCHOOL_MASK_NORMAL;\n damageInfo.critical = false;\n damageInfo.hitInfo\
      \ = HIT_INFO_NORMALHIT;\n\nUnit* attacker = GetOwner();\nattacker->DealSpellDamage(&damageInfo,\
      \ true);\n"
    language: cpp
  notes: The method performs damage calculation using the unit's spell power and target
    resistance. It handles critical hits by checking against the unit's critical hit
    chance. The method also manages weapon durability loss when durabilityLoss parameter
    is set to true. This method is typically used in combat situations where spell
    damage needs to be applied to targets.
  warnings: The method may cause unexpected behavior if damageInfo structure is not
    properly initialized or if target is null. Care should be taken when using this
    method with non-standard spell types as it might not handle all damage types correctly.
    Also, durabilityLoss parameter should only be set to true when dealing with weapon-based
    spells.
  related:
  - Unit::DealDamage
  - Unit::SpellNonMeleeDamage
  - Unit::GetVictim
  - Unit::GetHealth
metadata:
  confidence: 0.9
  generated_at: '2025-10-30T21:12:34.482636'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
