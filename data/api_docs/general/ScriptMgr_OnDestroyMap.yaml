api:
  class: ScriptMgr
  method: OnDestroyMap
  signature: void ScriptMgr::OnDestroyMap(Map * map)
documentation:
  brief: Notifies scripts when a map is being destroyed
  description: The OnDestroyMap method is called by the TrinityCore framework when
    a Map object is about to be destroyed. This allows script handlers to perform
    cleanup operations, release resources, or log information before the map instance
    is removed from memory. The method serves as a lifecycle callback for map management
    within the game world. It is typically invoked during server shutdown, map unloading,
    or when a dynamic map is being removed from the game state.
  parameters:
  - name: map
    description: Pointer to the Map object that is being destroyed. This parameter
      provides access to the map's properties and data during cleanup operations.
  returns: null
  examples:
  - title: Basic OnDestroyMap Implementation
    code: "class MyMapScript : public MapScript\n{\npublic:\n    void OnDestroyMap(Map*\
      \ map) override\n    {\n        // Log map destruction\n        sLog->outInfo(LOG_FILTER_GENERAL,\
      \ \"Map %u is being destroyed\", map->GetId());\n        \n        // Perform\
      \ cleanup operations\n        // ...\n    }\n};"
    language: cpp
  notes: This method is invoked during the map destruction phase of the game world
    lifecycle. Script implementations should avoid performing heavy operations or
    blocking calls as this may impact server performance. The Map pointer provided
    is guaranteed to be valid during execution, but should not be deleted by the script
    handler.
  warnings: null
  related:
  - OnCreateMap
  - OnMapUpdate
  - OnMapPlayerEnter
  - OnMapPlayerLeave
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T18:12:26.665912'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
