api:
  class: WorldSession
  method: HandleTrainerListOpcode
  signature: void WorldSession::HandleTrainerListOpcode(WorldPackets::NPC::Hello &
    packet)
documentation:
  brief: Handles the client's request to display a trainer's list of available skills
    and services.
  description: The HandleTrainerListOpcode method processes incoming packets from
    players who interact with NPC trainers. It retrieves and sends back a list of
    trainable skills, spell preparations, and service options that the trainer can
    offer. This method is part of the core NPC interaction system in TrinityCore,
    enabling players to access training menus for their character's progression. The
    method validates the player's proximity to the trainer and checks if the trainer
    is currently available before sending the appropriate response packet.
  parameters:
  - name: packet
    description: The WorldPackets::NPC::Hello packet containing information about
      the NPC interaction, including the GUID of the trainer being queried.
  returns: null
  examples:
  - title: Basic usage in a trainer interaction context
    code: "void WorldSession::HandleTrainerListOpcode(WorldPackets::NPC::Hello& packet)\n\
      {\n    if (!GetPlayer())\n        return;\n\n    Creature* trainer = GetPlayer()->GetNPCIfCanInteractWith(packet.GUID,\
      \ UNIT_NPC_FLAG_TRAINER);\n    if (!trainer)\n        return;\n\n    // Send\
      \ the trainer's list of available skills\n    WorldPackets::NPC::TrainerList\
      \ trainerList;\n    trainerList.TrainerID = trainer->GetGUID();\n    // ...\
      \ populate trainerList with skill data ...\n    SendPacket(trainerList.Write());\n\
      }"
    language: cpp
  notes: This method is typically invoked when a player clicks on a trainer NPC. It
    requires the player to be within interaction range and for the NPC to have the
    appropriate trainer flag set. The method does not directly modify any persistent
    data but rather constructs and sends a response packet containing training information.
  warnings: null
  related:
  - HandleTrainerBuySpellOpcode
  - HandleTrainerListOpcode
  - GetPlayer
  - GetNPCIfCanInteractWith
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T20:12:01.395969'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
