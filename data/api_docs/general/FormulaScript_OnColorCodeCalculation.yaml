api:
  class: FormulaScript
  method: OnColorCodeCalculation
  signature: void FormulaScript::OnColorCodeCalculation(XPColorChar & color, uint8
    playerLevel, uint8 mobLevel)
documentation:
  brief: Calculates the color code for experience points based on player and mob level
    difference in World of Warcraft.
  description: The OnColorCodeCalculation method is invoked during experience point
    award calculations to determine the visual color code that should be displayed
    for the experience gain. This color typically indicates the relative difficulty
    of the kill, with green representing easy kills, yellow moderate, and red difficult
    or higher-level mob encounters. The method modifies the XPColorChar parameter
    to reflect the appropriate color based on the level difference between the player
    and the mob being killed.
  parameters:
  - name: color
    description: Reference to an XPColorChar structure that will be modified to represent
      the calculated color code for experience points display.
  - name: playerLevel
    description: The level of the player who is earning experience points from killing
      the mob.
  - name: mobLevel
    description: The level of the mob that was killed and whose experience is being
      awarded to the player.
  returns: null
  examples:
  - title: Basic usage in a custom script
    code: "#include \"ScriptMgr.h\"\n\nclass MyFormulaScript : public FormulaScript\n\
      {\npublic:\n    void OnColorCodeCalculation(XPColorChar& color, uint8 playerLevel,\
      \ uint8 mobLevel) override\n    {\n        // Custom logic to determine experience\
      \ color\n        if (mobLevel > playerLevel + 5)\n            color = XPColorChar::RED;\n\
      \        else if (mobLevel > playerLevel)\n            color = XPColorChar::YELLOW;\n\
      \        else\n            color = XPColorChar::GREEN;\n    }\n};"
    language: cpp
  notes: This method is part of the FormulaScript class which allows customizing game
    mechanics. It's called during combat and experience award processing, so performance
    should be considered. The XPColorChar enum likely maps to standard WoW color codes
    used in chat or experience gain messages.
  warnings: Modifying the color parameter directly affects how experience points are
    visually presented to players. Incorrect implementation may lead to misleading
    visual feedback about kill difficulty. Ensure that level differences are properly
    validated to avoid unexpected behavior.
  related:
  - OnXPGain
  - OnLevelUp
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T07:25:16.512104'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
