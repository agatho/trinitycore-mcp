api:
  class: BotThreatManager
  method: AnalyzeThreatSituation
  signature: ThreatAnalysis BotThreatManager::AnalyzeThreatSituation()
documentation:
  brief: Analyzes the current threat situation for a bot and returns a structured
    threat analysis.
  description: The AnalyzeThreatSituation method evaluates the current combat state
    of a bot, including target selection, threat levels, and potential danger indicators.
    It processes the bot's current aggro status, enemy positions, and health states
    to determine an overall threat assessment. This method is typically used by AI
    systems to make informed decisions about combat behavior, such as whether to switch
    targets, retreat, or maintain current positioning. The analysis considers factors
    like proximity to enemies, damage dealt, and potential incoming attacks.
  parameters: []
  returns: A ThreatAnalysis object containing detailed information about the current
    threat situation, including threat levels, target priorities, and danger indicators
    that can be used by the bot's AI decision-making system.
  examples:
  - title: Basic Threat Analysis Usage
    code: "ThreatAnalysis analysis = bot->GetThreatManager()->AnalyzeThreatSituation();\n\
      if (analysis.IsHighThreat()) {\n    // Execute retreat behavior\n    bot->MoveToSafeLocation();\n\
      }"
    language: cpp
  - title: Using Threat Analysis for Target Selection
    code: "ThreatAnalysis analysis = bot->GetThreatManager()->AnalyzeThreatSituation();\n\
      if (analysis.GetPrimaryTarget() != nullptr && analysis.GetPrimaryTarget()->IsInCombat())\
      \ {\n    // Select target based on threat level\n    bot->SetCurrentTarget(analysis.GetPrimaryTarget());\n\
      }"
    language: cpp
  notes: This method should be called regularly during combat to maintain up-to-date
    threat assessments. The analysis may include cached data that is refreshed at
    intervals to optimize performance. The ThreatAnalysis object returned contains
    references to current game objects, so care should be taken when storing or using
    the results outside of active combat contexts.
  warnings: The method assumes the bot is currently in a combat situation. Calling
    it outside of combat may return inaccurate or misleading threat assessments. The
    returned ThreatAnalysis object should not be modified directly as it may cause
    inconsistencies in AI decision-making.
  related:
  - GetThreatLevel
  - UpdateThreat
  - ClearThreat
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T10:35:17.473872'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
