api:
  class: MageAI
  method: IsInDanger
  signature: bool MageAI::IsInDanger()
documentation:
  brief: Determines whether the Mage AI is currently in a dangerous situation that
    requires immediate defensive action.
  description: The IsInDanger method evaluates the current state of the Mage AI to
    determine if it is under threat or in a situation where it should prioritize defensive
    measures over offensive actions. This typically involves checking for nearby hostile
    targets, evaluating health levels, and assessing environmental hazards. The method
    returns true when the AI detects an imminent danger that could lead to player
    death or significant damage, prompting the AI to switch to defensive behavior
    patterns such as using protective spells, moving away from threats, or seeking
    cover. This method is crucial for implementing intelligent combat decision-making
    in Mage AI logic.
  parameters: []
  returns: Returns true if the Mage AI detects an immediate threat or dangerous condition
    that requires defensive action; returns false otherwise when the situation is
    deemed safe for normal spellcasting or movement.
  examples:
  - title: Basic Usage in Combat Logic
    code: "if (mageAI->IsInDanger()) {\n    mageAI->CastDefensiveSpell();\n    mageAI->MoveToSafety();\n\
      } else {\n    mageAI->CastOffensiveSpell();\n}"
    language: cpp
  - title: Integration with AI State Machine
    code: "void MageAI::UpdateAI(uint32 diff) {\n    if (IsInDanger()) {\n       \
      \ SetAIState(MAGE_AI_STATE_DEFENSIVE);\n        // Execute defensive actions\n\
      \    } else {\n        SetAIState(MAGE_AI_STATE_OFFENSIVE);\n        // Execute\
      \ offensive actions\n    }\n}"
    language: cpp
  notes: This method likely performs multiple checks including target proximity, health
    percentage, and threat level calculations. The implementation may cache results
    for performance reasons to avoid repeated expensive computations during each AI
    update cycle.
  warnings: Developers should be aware that this method's behavior might change based
    on the specific Mage class specialization or encounter mechanics. It's important
    to test thoroughly in various combat scenarios to ensure proper defensive triggering
    conditions.
  related:
  - CastDefensiveSpell
  - MoveToSafety
  - SetAIState
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T12:39:08.530539'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
