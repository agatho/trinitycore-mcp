api:
  class: WorldSession
  method: HandleRepairItemOpcode
  signature: void WorldSession::HandleRepairItemOpcode(WorldPackets::Item::RepairItem
    & packet)
documentation:
  brief: Processes a client request to repair items in the player's inventory or bank
  description: The HandleRepairItemOpcode method handles the client's request to repair
    damaged items. It processes the RepairItem packet sent by the client, which contains
    information about which items should be repaired and whether the repair should
    use guild funds. The method verifies that the player has sufficient gold or guild
    funds to cover the repair costs, checks if the items are actually damaged, and
    performs the repair operation. This method is typically invoked when a player
    interacts with a repair NPC or uses a repair spell in the game world.
  parameters:
  - name: packet
    description: The RepairItem packet containing information about which items to
      repair and whether to use guild funds for the repair
  returns: null
  examples:
  - title: Basic repair item usage
    code: "void WorldSession::HandleRepairItemOpcode(WorldPackets::Item::RepairItem&\
      \ packet)\n{\n    Player* player = GetPlayer();\n    if (!player)\n        return;\n\
      \n    // Process the repair request\n    player->GetReputationMgr().ModifyReputation(0,\
      \ 10);\n    // ... additional repair logic\n}"
    language: cpp
  notes: This method is part of the WorldSession class and handles game state changes
    related to item repairs. It should be called only when processing valid client
    packets. The method may interact with guild funds if the player has a guild and
    the repair option is set to use guild funds.
  warnings: Ensure that proper validation is performed on the packet data before processing
    to avoid exploits. The method assumes that the player has already been validated
    and authenticated. Incorrect handling of guild fund usage could lead to financial
    inconsistencies in the game economy.
  related:
  - HandleRepairItemOpcode
  - Player::DurabilityRepair
  - Player::HasItemCount
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:50:55.130298'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
