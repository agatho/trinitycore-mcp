api:
  class: WorldSession
  method: HandleItemTextQuery
  signature: void WorldSession::HandleItemTextQuery(WorldPackets::Query::ItemTextQuery
    & itemTextQuery)
documentation:
  brief: Handles incoming item text query requests from clients to retrieve item description
    text.
  description: The HandleItemTextQuery method processes incoming WorldPackets::Query::ItemTextQuery
    packets sent by players when they request to view the textual description of an
    item. This typically occurs when a player clicks on an item in their inventory
    or tooltip, triggering a request for the item's descriptive text. The method retrieves
    the corresponding item text from the database and sends it back to the client
    via a WorldPackets::Query::ItemTextResponse packet. It ensures that only valid
    item IDs are processed and handles cases where the item text might not exist in
    the database.
  parameters:
  - name: itemTextQuery
    description: The incoming packet containing the item ID for which the client is
      requesting text description.
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleItemTextQuery(WorldPackets::Query::ItemTextQuery&\
      \ itemTextQuery)\n{\n    if (itemTextQuery.ItemID >= 0)\n    {\n        // Process\
      \ the item text query\n        SendItemTextResponse(itemTextQuery.ItemID);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the packet handling system and is invoked automatically
    when a client sends an item text query. It requires database access to retrieve
    item descriptions, so performance may be affected by database latency. The method
    assumes that the item ID in the packet is valid and does not perform extensive
    validation beyond basic bounds checking.
  warnings: Improper handling of invalid item IDs can lead to database errors or crashes.
    Ensure proper error handling when retrieving item text from the database. This
    method should only be called during active session processing, as it relies on
    session-specific data structures.
  related:
  - SendItemTextResponse
  - HandleItemQuerySingle
  - HandleItemQueryMultiple
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:50:14.690693'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
