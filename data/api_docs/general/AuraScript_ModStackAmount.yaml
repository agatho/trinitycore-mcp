api:
  class: AuraScript
  method: ModStackAmount
  signature: bool AuraScript::ModStackAmount(int num, int removeMode)
documentation:
  brief: Modifies the stack amount of the aura, optionally removing it based on the
    specified remove mode.
  description: The ModStackAmount method adjusts the current stack count of an aura
    by adding or subtracting a specified number. This method is commonly used in AuraScript
    implementations to dynamically modify how many times an aura effect is applied.
    The removeMode parameter determines whether and how the aura should be removed
    if the stack amount reaches zero or below. It's typically used in conjunction
    with aura effects that have stacking mechanics, such as buffs or debuffs that
    can accumulate multiple applications. This method returns true if the modification
    was successful and the aura remains active, or false if the aura was removed or
    failed to update.
  parameters:
  - name: num
    description: The number to add or subtract from the current stack amount of the
      aura. Positive values increase the stack count, while negative values decrease
      it.
  - name: removeMode
    description: Controls how the aura is handled when the stack amount reaches zero
      or below. Valid values are typically 0 (do not remove), 1 (remove if stack count
      becomes zero), or 2 (remove if stack count drops below zero).
  returns: Returns true if the aura's stack amount was successfully modified and the
    aura remains active. Returns false if the aura was removed due to the modification
    or if the operation failed.
  examples:
  - title: Increase Aura Stack by 1
    code: "void OnApply(AuraEffect const* aurEff, AuraEffectHandleModes mode)\n{\n\
      \    // Increase stack amount by 1\n    ModStackAmount(1, 0);\n}"
    language: cpp
  - title: Remove Aura When Stack Reaches Zero
    code: "void OnUpdate(int32 duration)\n{\n    // Decrease stack amount by 1 and\
      \ remove if it reaches zero\n    if (!ModStackAmount(-1, 1))\n    {\n      \
      \  // Aura was removed\n        return;\n    }\n}"
    language: cpp
  notes: This method is part of the AuraScript framework in TrinityCore and should
    only be called from within an aura's application or update handler. The removeMode
    parameter affects the behavior when stack count reaches zero, which can be important
    for proper cleanup of aura effects.
  warnings: Incorrect use of removeMode may lead to unexpected aura removals or failure
    to properly clean up aura state. Always verify that the aura is still valid before
    calling this method to avoid potential crashes or undefined behavior.
  related:
  - GetStackAmount
  - SetStackAmount
  - RemoveAura
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T13:20:56.919081'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
