api:
  class: WorldScript
  method: OnShutdownInitiate
  signature: void WorldScript::OnShutdownInitiate(ShutdownExitCode code, ShutdownMask
    mask)
documentation:
  brief: Called when the world server initiates a shutdown sequence
  description: This method is invoked by the WorldScript system when the world server
    begins its shutdown process. It provides an opportunity for custom scripts to
    perform cleanup operations or save data before the server terminates. The method
    receives information about the shutdown type and mask, which can be used to determine
    how the shutdown should be handled. This method is part of the global event handling
    system in TrinityCore, allowing developers to hook into critical server lifecycle
    events.
  parameters:
  - name: code
    description: The exit code indicating the reason for shutdown. Common values include
      0 for normal shutdown, non-zero for error conditions.
  - name: mask
    description: A bitmask indicating which components are being shut down. This can
      be used to determine if the shutdown affects specific subsystems or is a full
      server termination.
  returns: null
  examples:
  - title: Basic Shutdown Handler Implementation
    code: "#include \"ScriptMgr.h\"\n\nclass MyWorldScript : public WorldScript\n\
      {\npublic:\n    void OnShutdownInitiate(ShutdownExitCode code, ShutdownMask\
      \ mask) override\n    {\n        // Log shutdown event\n        sLog->outString(\"\
      Server shutdown initiated with exit code: %u\", code);\n        \n        //\
      \ Perform cleanup tasks here\n        // For example, save player data or close\
      \ connections\n    }\n};"
    language: cpp
  notes: This method is called during the server's shutdown sequence and should not
    block for extended periods. It's intended for quick cleanup operations rather
    than long-running processes. The shutdown process will continue after this method
    returns.
  warnings: Avoid performing heavy I/O operations or blocking calls in this method
    as it may delay the shutdown process. Ensure that any cleanup performed here does
    not interfere with the normal shutdown sequence of other systems.
  related:
  - OnShutdownCancel
  - OnWorldInitialized
  - OnConfigLoad
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T19:26:21.425385'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
