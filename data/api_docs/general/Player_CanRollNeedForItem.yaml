api:
  class: Player
  method: CanRollNeedForItem
  signature: int Player::CanRollNeedForItem(const ItemTemplate * item, const int *
    map, bool restrictOnlyLfg) const
documentation:
  brief: Determines whether a player can roll need for a specific item based on their
    current role and item quality.
  description: This method evaluates if a player is eligible to roll need for a given
    item, considering factors such as item quality, player's current role, and whether
    the item is bound to a specific instance or dungeon. The method returns an integer
    value indicating the outcome of this evaluation, which can be used to determine
    if the player should be allowed to participate in the rolling process for that
    item. It also takes into account whether the item is restricted to LFG (Looking
    For Group) activities and checks against map restrictions.
  parameters:
  - name: item
    description: Pointer to the ItemTemplate structure representing the item being
      evaluated for need roll. This parameter must not be null.
  - name: map
    description: Pointer to an integer array containing map identifiers that restrict
      the item's eligibility. This parameter can be null, indicating no map restrictions
      apply.
  - name: restrictOnlyLfg
    description: Boolean flag indicating whether the item is restricted to LFG activities
      only. If true, only players with LFG restrictions applied will be eligible for
      need roll.
  returns: Returns an integer value representing the outcome of the evaluation. Values
    of 0 indicate that the player cannot roll need for the item; values greater than
    0 indicate that they can. The exact meaning depends on implementation details
    but typically reflects a combination of role, item quality, and map restrictions.
  examples:
  - title: Basic usage example
    code: int result = player->CanRollNeedForItem(itemTemplate, nullptr, false);
    language: cpp
  - title: Advanced usage with map restriction
    code: int result = player->CanRollNeedForItem(itemTemplate, &mapId, true);
    language: cpp
  notes: This method is typically used in conjunction with other rolling mechanisms
    within TrinityCore to determine eligibility for need rolls. It may involve checking
    against specific roles and item quality levels, and can be affected by player's
    current group status and dungeon instance settings.
  warnings: The method requires that the ItemTemplate pointer not be null; otherwise,
    it will result in undefined behavior or crash. Also, if the map parameter is not
    null, it must point to valid memory containing map identifiers.
  related:
  - CanRollNeedForItem
  - GetPlayerRole
  - IsInGroup
  - IsLFGInstance
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T17:42:37.723247'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
