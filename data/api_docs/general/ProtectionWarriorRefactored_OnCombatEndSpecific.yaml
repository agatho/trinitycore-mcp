api:
  class: ProtectionWarriorRefactored
  method: OnCombatEndSpecific
  signature: void ProtectionWarriorRefactored::OnCombatEndSpecific()
documentation:
  brief: Performs cleanup and state reset operations when a protection warrior exits
    combat.
  description: The OnCombatEndSpecific method is invoked when a protection warrior
    character exits combat mode. This method handles necessary cleanup tasks such
    as resetting combat-related flags, clearing temporary buffs or debuffs, and ensuring
    the AI state is properly synchronized with the character's new non-combat status.
    It serves as a critical component in maintaining proper game state management
    for the protection warrior class within TrinityCore's AI framework. The method
    ensures that all combat-specific behaviors are properly disabled and that the
    AI can transition smoothly back to its default idle or patrol behavior.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Combat Exit Scenario
    code: "void MyProtectionWarriorAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat()\
      \ && !me->GetVictim())\n    {\n        // Combat has ended\n        me->GetAI()->OnCombatEndSpecific();\n\
      \        // Continue with normal AI logic\n    }\n}"
    language: cpp
  notes: This method should only be called when the character is confirmed to have
    exited combat. It is typically invoked by the core combat system when the combat
    state transitions from active to inactive. The method assumes that all necessary
    combat-related resources have been properly managed and that no further combat-specific
    operations are pending.
  warnings: Calling this method outside of a proper combat exit context may lead to
    inconsistent AI behavior or state corruption. Ensure that combat state checks
    are performed before invoking this method to avoid unintended side effects.
  related:
  - OnCombatStart
  - UpdateAI
  - IsInCombat
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T08:06:29.100180'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
