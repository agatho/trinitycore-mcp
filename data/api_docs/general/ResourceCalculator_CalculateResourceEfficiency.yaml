api:
  class: ResourceCalculator
  method: CalculateResourceEfficiency
  signature: float ResourceCalculator::CalculateResourceEfficiency(uint32 spellId,
    int * caster)
documentation:
  brief: Calculates the resource efficiency for a given spell and caster.
  description: The CalculateResourceEfficiency method determines how effectively a
    spell consumes resources such as mana, rage, or energy based on the spell ID and
    the caster's properties. This calculation is crucial for balancing gameplay mechanics
    in World of Warcraft, particularly for determining spell costs and performance.
    The method takes into account various factors including the spell's base resource
    cost, the caster's class-specific modifiers, and any applicable buffs or debuffs
    that might affect resource consumption. It returns a float value representing
    the efficiency factor, which can be used to scale the actual resource cost of
    the spell.
  parameters:
  - name: spellId
    description: The unique identifier of the spell for which resource efficiency
      is being calculated. This ID corresponds to entries in the Spell.dbc file and
      must reference a valid spell entry.
  - name: caster
    description: Pointer to an integer representing the caster's identifier or index.
      This parameter typically refers to the object ID of the unit casting the spell,
      which is used to retrieve caster-specific properties such as class, level, and
      buffs.
  returns: A float value representing the calculated resource efficiency factor. A
    value of 1.0 indicates normal resource consumption, while values less than 1.0
    indicate reduced resource usage (e.g., increased efficiency), and values greater
    than 1.0 indicate higher resource consumption (e.g., decreased efficiency).
  examples:
  - title: Basic Usage Example
    code: "float efficiency = calculator.CalculateResourceEfficiency(12345, &casterId);\n\
      if (efficiency > 0.0f) {\n    // Apply efficiency scaling to spell cost\n  \
      \  float scaledCost = baseManaCost * efficiency;\n}"
    language: cpp
  - title: Advanced Usage with Buffs
    code: 'int casterId = player->GetGUID().GetCounter();

      float efficiency = calculator.CalculateResourceEfficiency(spellId, &casterId);

      // Apply a buff that increases resource efficiency by 20%

      efficiency *= 0.8f;

      float finalCost = spell->GetManaCost() * efficiency;'
    language: cpp
  notes: This method is typically used during spell casting to dynamically adjust
    the cost of resources based on game state and character attributes. It may involve
    complex calculations that consider multiple factors such as class specialization,
    talents, gear bonuses, and temporary effects. The caster parameter should always
    point to a valid unit object; otherwise, the behavior is undefined.
  warnings: Incorrect spell ID values or invalid caster pointers can lead to undefined
    behavior or crashes. Ensure that the spell ID exists in the database and that
    the caster pointer points to a valid game object before calling this method. The
    returned efficiency value should be checked for validity before applying scaling
    operations.
  related:
  - GetSpellResourceCost
  - CalculateSpellPower
  - GetCasterAttributes
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T03:56:21.359743'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
