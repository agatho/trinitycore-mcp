api:
  class: FormationManager
  method: MaintainFormationDuringMovement
  signature: void FormationManager::MaintainFormationDuringMovement()
documentation:
  brief: Maintains the formation of units during movement by adjusting their positions
    relative to the formation leader.
  description: The MaintainFormationDuringMovement method ensures that all units in
    a formation preserve their designated positions relative to the formation leader
    while moving. This method is typically invoked during AI-controlled movement to
    keep group members aligned according to predefined formation patterns. It calculates
    necessary adjustments to unit positions based on distance, angle, and movement
    direction to maintain cohesion. The method operates on the assumption that the
    formation leader's movement has already been processed and updates follower units
    accordingly. This functionality is essential for creating realistic group behavior
    in World of Warcraft's AI system, particularly for mobs, pets, and player-controlled
    groups.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void CustomCreatureAI::UpdateAI(uint32 diff)\n{\n    if (m_formationManager)\n\
      \    {\n        m_formationManager->MaintainFormationDuringMovement();\n   \
      \ }\n    // Other AI logic...\n}"
    language: cpp
  - title: Integration with Movement Handler
    code: "void FormationManager::OnMovementUpdate()\n{\n    // Update leader position\n\
      \    UpdateLeaderPosition();\n    \n    // Maintain formation during movement\n\
      \    MaintainFormationDuringMovement();\n    \n    // Apply updated positions\
      \ to units\n    ApplyFormationPositions();\n}"
    language: cpp
  notes: This method is typically called within the AI update loop and should be invoked
    after leader movement has been processed. The implementation relies on cached
    formation data and may not immediately reflect changes made to formation parameters
    during runtime. Performance considerations include the number of units in the
    formation, as each unit requires individual position calculations.
  warnings: Calling this method without proper initialization of formation data may
    result in undefined behavior or incorrect positioning. The method assumes that
    the formation leader's movement has already been processed and applied to the
    leader's current position before calling this function.
  related:
  - SetFormation
  - GetFormation
  - UpdateLeaderPosition
  - ApplyFormationPositions
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T07:31:38.331645'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
