api:
  class: Spell
  method: EffectCreateItem2
  signature: void Spell::EffectCreateItem2()
documentation:
  brief: Creates an item based on spell effect parameters and adds it to the target's
    inventory or drops it as loot.
  description: The EffectCreateItem2 method is responsible for handling the creation
    of items during spell effects in TrinityCore. This method typically executes when
    a spell has an effect that generates an item, such as enchanting recipes, potion
    creation, or other consumable item generation. It processes the item creation
    logic based on the spell's effect parameters and determines whether to add the
    item directly to the caster's inventory or drop it as loot at the target's location.
    The method respects item limits, quest item restrictions, and other game mechanics
    that govern item creation and distribution.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in spell effect handling
    code: "void Spell::EffectCreateItem2()\n{\n    if (!m_caster || !m_targets.GetTargetMask())\n\
      \        return;\n\n    ItemTemplate const* proto = sObjectMgr->GetItemTemplate(m_spellInfo->Effects[0].ItemType);\n\
      \    if (!proto)\n        return;\n\n    // Create item and add to inventory\
      \ or drop as loot\n    // Implementation details depend on spell effect parameters\n\
      }"
    language: cpp
  notes: This method is part of the spell effect system and should only be called
    during spell execution. It relies on proper spell target validation and effect
    parameter parsing. The actual item creation logic may vary depending on the specific
    spell and effect type.
  warnings: Improper use of this method without validating spell targets or effect
    parameters can lead to invalid item creation or crashes. Ensure that all required
    spell data is properly initialized before calling this method.
  related:
  - Spell::EffectCreateItem
  - Spell::EffectEnchantItem
  - Spell::EffectAddItem
metadata:
  confidence: 0.85
  generated_at: '2025-10-29T16:58:41.297950'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
