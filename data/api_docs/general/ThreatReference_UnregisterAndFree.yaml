api:
  class: ThreatReference
  method: UnregisterAndFree
  signature: void ThreatReference::UnregisterAndFree()
documentation:
  brief: Removes the threat reference from its associated object and releases its
    memory resources.
  description: The UnregisterAndFree method is responsible for safely removing a ThreatReference
    instance from its parent object's internal tracking mechanism and then freeing
    the memory allocated for that reference. This method ensures proper cleanup of
    threat data within the AI system, preventing memory leaks and maintaining consistent
    state management. It typically gets called when a creature or player's threat
    table entry needs to be invalidated or when the reference is no longer required.
    The method performs necessary deregistration steps before releasing the memory,
    ensuring that no dangling pointers or invalid references remain in the system.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Context
    code: "void MyCreatureAI::OnDeath()\n{\n    // Remove threat reference from target\n\
      \    if (m_threatReference)\n    {\n        m_threatReference->UnregisterAndFree();\n\
      \        m_threatReference = nullptr;\n    }\n}"
    language: cpp
  notes: This method should only be called on valid ThreatReference instances that
    have been properly initialized. Calling it on a null pointer or an already freed
    reference can lead to undefined behavior. The method assumes that the caller has
    ensured proper synchronization if used in multi-threaded contexts.
  warnings: Do not call UnregisterAndFree on a ThreatReference that has already been
    freed or is part of a different memory management system. This could result in
    double-free errors or memory corruption. Ensure all references to the object are
    cleared after calling this method.
  related:
  - ThreatReference::Register
  - ThreatReference::IsRegistered
  - ThreatReference::GetThreat
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T09:12:42.120478'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
