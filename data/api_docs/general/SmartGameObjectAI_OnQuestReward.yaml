api:
  class: SmartGameObjectAI
  method: OnQuestReward
  signature: void SmartGameObjectAI::OnQuestReward(Player * player, const Quest *
    quest, int type, uint32 opt)
documentation:
  brief: Handles quest reward processing for a GameObject when a player interacts
    with it.
  description: The OnQuestReward method is invoked by the SmartGameObjectAI framework
    when a player successfully completes a quest associated with a game object. This
    method serves as a callback that allows custom behavior to be executed upon quest
    completion, such as spawning loot, triggering events, or modifying the game state.
    It is part of the smart AI system used in TrinityCore to define dynamic interactions
    for GameObjects based on player actions and quest states.
  parameters:
  - name: player
    description: Pointer to the Player object who completed the quest and triggered
      this event.
  - name: quest
    description: Pointer to the Quest object that was completed by the player.
  - name: type
    description: Integer value indicating the type of quest reward being processed
      (e.g., 0 for normal, 1 for quest item, etc.).
  - name: opt
    description: Unsigned 32-bit integer representing optional parameters or flags
      related to the quest reward process.
  returns: null
  examples:
  - title: Basic Quest Reward Handling
    code: "void SmartGameObjectAI::OnQuestReward(Player* player, const Quest* quest,\
      \ int type, uint32 opt)\n{\n    // Spawn a quest item upon reward\n    if (quest\
      \ && quest->GetQuestId() == 12345)\n    {\n        player->AddItem(54321, 1);\n\
      \    }\n}"
    language: cpp
  - title: Advanced Quest Reward with Event Trigger
    code: "void SmartGameObjectAI::OnQuestReward(Player* player, const Quest* quest,\
      \ int type, uint32 opt)\n{\n    if (quest && quest->GetQuestId() == 67890)\n\
      \    {\n        // Trigger a custom event\n        DoAction(QUEST_REWARD_EVENT);\n\
      \        \n        // Send a broadcast message to all players\n        Map*\
      \ map = player->GetMap();\n        if (map)\n        {\n            map->SendZoneScriptEvent(player->GetZoneId(),\
      \ ZONE_SCRIPT_QUEST_COMPLETE);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called from within the SmartAI framework's internal
    quest handling logic. Developers should ensure that any modifications made to
    player state or game objects do not cause race conditions or invalid memory access.
    The parameters 'type' and 'opt' are often used for conditional logic based on
    how the quest was rewarded.
  warnings: Do not modify the player object directly without checking if they are
    still valid. Avoid performing heavy operations in this method as it may block
    the game loop. Be cautious when using global or shared resources inside this callback
    to prevent deadlocks.
  related:
  - OnQuestAccept
  - OnQuestCancel
  - OnGameObjectStateChanged
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T02:22:47.638644'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
