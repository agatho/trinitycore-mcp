api:
  class: AtonementTracker
  method: GetActiveAtonementCount
  signature: uint32 AtonementTracker::GetActiveAtonementCount() const
documentation:
  brief: Returns the total count of active atonement effects currently applied to
    the player.
  description: The GetActiveAtonementCount method retrieves the number of active atonement
    effects that are currently affecting the player. In World of Warcraft's TrinityCore
    implementation, atonement is a healing effect that reduces incoming damage based
    on the amount of healing received. This method is typically used by the AtonementTracker
    class to monitor and manage the state of atonement effects. The count returned
    represents how many separate atonement sources are currently active, which can
    influence various gameplay mechanics such as damage reduction calculations and
    aura stacking behavior.
  parameters: []
  returns: A uint32 value representing the number of active atonement effects currently
    applied to the player. Returns 0 if no atonement effects are active.
  examples:
  - title: Basic Usage
    code: "uint32 activeCount = player->GetAtonementTracker()->GetActiveAtonementCount();\n\
      if (activeCount > 0)\n{\n    // Player has active atonement effects\n    sLog->outString(\"\
      Player has %u active atonement effects\", activeCount);\n}"
    language: cpp
  - title: Damage Reduction Calculation
    code: "AtonementTracker* tracker = player->GetAtonementTracker();\nuint32 activeCount\
      \ = tracker->GetActiveAtonementCount();\nif (activeCount > 0)\n{\n    float\
      \ damageReduction = activeCount * 0.05f; // 5% per atonement effect\n    player->ApplyDamageReduction(damageReduction);\n\
      }"
    language: cpp
  notes: This method is typically called during combat state updates or aura refresh
    cycles. The returned count may change dynamically as atonement effects are applied,
    refreshed, or removed. The implementation likely uses internal tracking mechanisms
    to maintain a counter of active atonement sources rather than recalculating from
    scratch each time.
  warnings: This method should only be called on valid player objects that have an
    AtonementTracker instance. Calling this method on a null pointer or invalid object
    will result in undefined behavior. The count returned may not reflect the exact
    state of atonement effects if the tracker is not properly synchronized with the
    current game state.
  related:
  - GetAtonementTracker
  - AddActiveAtonement
  - RemoveActiveAtonement
  - IsAtonementActive
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T20:12:13.714628'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
