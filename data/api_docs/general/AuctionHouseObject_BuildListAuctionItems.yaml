api:
  class: AuctionHouseObject
  method: BuildListAuctionItems
  signature: void AuctionHouseObject::BuildListAuctionItems(WorldPackets::AuctionHouse::AuctionListItemsResult
    & listItemsResult, const Player * player, uint32 itemId, uint32 offset, int sorts)
    const
documentation:
  brief: Populates an auction list items result packet with auctioned items based
    on specified filters and sorting options.
  description: The BuildListAuctionItems method constructs a list of auctioned items
    for a given player, applying filters such as item ID and offset, and sorting options.
    It populates the provided WorldPackets::AuctionHouse::AuctionListItemsResult packet
    with relevant auction data including item details, bid information, and auction
    duration. This method is typically invoked when a player opens the auction house
    interface or searches for specific items. The method respects player permissions
    and auction house rules, ensuring only valid auctions are returned to the client.
  parameters:
  - name: listItemsResult
    description: Reference to the AuctionListItemsResult packet that will be populated
      with auction item data.
  - name: player
    description: Pointer to the Player object requesting the auction list. Used for
      permission checks and context.
  - name: itemId
    description: Filter value for item ID. A value of 0 indicates no filtering by
      item ID.
  - name: offset
    description: Starting index offset for pagination of results. Used to fetch subsequent
      pages of auction items.
  - name: sorts
    description: Sorting options bitmask that determines how the auction items are
      ordered in the result.
  returns: None. The method modifies the listItemsResult packet directly.
  examples:
  - title: Basic usage to fetch auction items for a player
    code: 'WorldPackets::AuctionHouse::AuctionListItemsResult result;

      AuctionHouseObject auctionHouse;

      Player* player = ...; // Valid player pointer

      auctionHouse.BuildListAuctionItems(result, player, 0, 0, 0);'
    language: cpp
  - title: Fetch specific item type with pagination and sorting
    code: 'WorldPackets::AuctionHouse::AuctionListItemsResult result;

      AuctionHouseObject auctionHouse;

      Player* player = ...; // Valid player pointer

      uint32 itemId = 12345;

      uint32 offset = 10;

      int sorts = 1; // Example sort option

      auctionHouse.BuildListAuctionItems(result, player, itemId, offset, sorts);'
    language: cpp
  notes: This method is part of the auction house subsystem and interacts with the
    database to retrieve auction data. It handles pagination internally using the
    offset parameter. The sorting logic depends on the implementation of the sorts
    bitmask, which may vary based on client expectations and server configuration.
  warnings: Ensure that the player pointer passed is valid and not null, as passing
    an invalid pointer can lead to undefined behavior or crashes. Also, be aware that
    this method does not validate the itemId or offset values beyond basic type checking;
    incorrect values may result in unexpected results or empty lists.
  related:
  - GetAuctionHouse
  - SendAuctionList
  - AuctionHouseObject::BuildAuctionList
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T21:15:25.503303'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
