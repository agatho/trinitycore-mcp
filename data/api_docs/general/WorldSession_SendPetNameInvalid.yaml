api:
  class: WorldSession
  method: SendPetNameInvalid
  signature: void WorldSession::SendPetNameInvalid(uint32 error, const std::string
    & name, const int & declinedName)
documentation:
  brief: Sends a pet name invalid message to the client with specified error code,
    name, and declined name.
  description: The SendPetNameInvalid method is used by the WorldSession class to
    communicate to the client that a pet name provided by the player is invalid. This
    method sends a specific error code along with the attempted pet name and an optional
    declined name to inform the player of why their chosen pet name was rejected.
    The method is typically invoked during pet naming operations when validation fails,
    such as when the name is too long, contains forbidden characters, or conflicts
    with existing names. It serves as part of the game's pet management system to
    maintain consistent naming rules and provide feedback to players.
  parameters:
  - name: error
    description: The error code indicating why the pet name is invalid. Common values
      include 1 for invalid characters, 2 for name too long, 3 for name already in
      use, etc.
  - name: name
    description: The pet name that was rejected by the server. This string represents
      the name provided by the player during the naming process.
  - name: declinedName
    description: An integer representing the declined form of the pet name, if applicable.
      This is used in cases where the pet name might be declined based on grammatical
      or cultural rules for different genders.
  returns: null
  examples:
  - title: Send invalid pet name error
    code: "void HandlePetNameChange(WorldSession* session, uint32 error, const std::string&\
      \ name, const int& declinedName)\n{\n    session->SendPetNameInvalid(error,\
      \ name, declinedName);\n}"
    language: cpp
  - title: Handle invalid pet name with specific error code
    code: "if (petName.length() > MAX_PET_NAME_LENGTH)\n{\n    session->SendPetNameInvalid(2,\
      \ petName, 0);\n}\nelse if (!isValidPetName(petName))\n{\n    session->SendPetNameInvalid(1,\
      \ petName, 0);\n}"
    language: cpp
  notes: This method directly interacts with the client's UI to display error messages
    related to pet naming. It is part of the packet handling system in TrinityCore
    and relies on proper client-server synchronization for correct behavior. The declinedName
    parameter may be used for localization or gender-specific naming conventions.
  warnings: Ensure that the error code passed matches the expected values defined
    in the client-side protocol, otherwise the client may not display the appropriate
    error message. Also, make sure the name string is properly sanitized before sending
    to prevent potential issues with packet construction.
  related:
  - SendPetNameQuery
  - SendPetNameInvalid
  - HandlePetRename
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T19:15:34.020955'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
