api:
  class: WorldSession
  method: HandleSplitItemToGuildBank
  signature: void WorldSession::HandleSplitItemToGuildBank(WorldPackets::Guild::SplitItemToGuildBank
    & splitItemToGuildBank)
documentation:
  brief: Handles the client request to split an item from the player's inventory and
    move it to the guild bank.
  description: This method processes a packet sent by the client when a player attempts
    to split a stack of items in their inventory and deposit a portion of those items
    into their guild bank. The method validates that the player has sufficient permissions
    to access the guild bank, checks that the item exists in the player's inventory,
    ensures the requested quantity is valid, and performs the necessary item transfer
    operations. It also updates the player's inventory and the guild bank accordingly,
    sending appropriate responses back to the client. This functionality supports
    the game mechanic where players can manage their guild resources by splitting
    items from their personal inventory into shared guild storage.
  parameters:
  - name: splitItemToGuildBank
    description: A packet containing information about the item to be split and moved
      to the guild bank, including source container and slot information, target guild
      bank slot details, and the quantity to split.
  returns: null
  examples:
  - title: Basic Usage
    code: "void WorldSession::HandleSplitItemToGuildBank(WorldPackets::Guild::SplitItemToGuildBank&\
      \ splitItemToGuildBank)\n{\n    // Validate player has guild and access to guild\
      \ bank\n    if (!GetPlayer()->GetGuild() || !GetPlayer()->GetGuild()->HasRankRight(GetPlayer()->GetGuildRank(),\
      \ GR_RIGHT_GUILD_BANK))\n        return;\n\n    // Process the item split and\
      \ move to guild bank\n    // Implementation details would follow here\n}"
    language: cpp
  notes: This method is part of the guild banking system and requires proper guild
    membership and rank permissions. The packet structure includes container and slot
    information for both the source inventory and destination guild bank slots, which
    must be validated before any item movement occurs.
  warnings: Improper validation of item quantities or slot positions could lead to
    item duplication or loss. Ensure that all client inputs are thoroughly validated
    against server-side state before performing any item transfers.
  related:
  - HandleMoveItemFromInventory
  - HandleGuildBankQueryTab
  - HandleGuildBankUpdateTab
  - HandleGuildBankDepositItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:25:32.965438'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
