api:
  class: PhasingHandler
  method: GetTerrainMapId
  signature: uint32 PhasingHandler::GetTerrainMapId(const PhaseShift & phaseShift,
    uint32 mapId, const TerrainInfo * terrain, float x, float y)
documentation:
  brief: Determines the terrain map ID for a given phase shift, map, and coordinates.
  description: The GetTerrainMapId method calculates and returns the appropriate terrain
    map identifier based on the provided phase shift information, base map ID, terrain
    data, and spatial coordinates. This method is crucial for handling phased environments
    in World of Warcraft where different areas may be visible or hidden depending
    on player phase status. It ensures that the correct terrain data is used when
    rendering or processing game objects within a specific phased context.
  parameters:
  - name: phaseShift
    description: Reference to the PhaseShift structure containing phase information
      for the current player or entity.
  - name: mapId
    description: The base map identifier (e.g., 0 for Azeroth) that serves as the
      starting point for terrain lookup.
  - name: terrain
    description: Pointer to the TerrainInfo structure providing terrain-specific data
      and configuration.
  - name: x
    description: The X coordinate in world space used to determine the specific terrain
      map ID.
  - name: y
    description: The Y coordinate in world space used to determine the specific terrain
      map ID.
  returns: Returns a uint32 representing the calculated terrain map ID. This value
    corresponds to the correct map identifier for the given phase and coordinates,
    ensuring accurate terrain rendering and object placement.
  examples:
  - title: Basic usage of GetTerrainMapId
    code: 'PhaseShift shift;

      uint32 baseMapId = 0;

      TerrainInfo* terrainInfo = sTerrainMgr->GetTerrainInfo(baseMapId);

      float playerX = 1234.5f;

      float playerY = 6789.0f;

      uint32 terrainMapId = PhasingHandler::GetTerrainMapId(shift, baseMapId, terrainInfo,
      playerX, playerY);'
    language: cpp
  notes: This method is typically used internally by the phasing system to determine
    which map data should be loaded or rendered for a particular player's current
    phase. The implementation may involve checking phase restrictions, terrain boundaries,
    and other environmental factors to compute the appropriate map ID.
  warnings: Ensure that all input parameters are valid before calling this method;
    passing invalid pointers or out-of-bounds coordinates could lead to undefined
    behavior or incorrect results.
  related:
  - GetPhaseShift
  - IsInPhase
  - UpdatePhasing
metadata:
  confidence: 0.85
  generated_at: '2025-11-01T08:29:04.800247'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
