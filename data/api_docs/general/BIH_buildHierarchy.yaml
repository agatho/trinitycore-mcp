api:
  class: BIH
  method: buildHierarchy
  signature: void BIH::buildHierarchy(int & tempTree, buildData & dat, BuildStats
    & stats) const
documentation:
  brief: Builds the bounding interval hierarchy for spatial acceleration
  description: The buildHierarchy method constructs a bounding interval hierarchy
    (BIH) data structure used for efficient spatial queries and collision detection
    in the TrinityCore world system. This method takes temporary tree data and build
    statistics to construct an optimized hierarchical structure that allows for fast
    intersection tests between objects in 3D space. The BIH is commonly used for terrain
    rendering, object culling, and physics calculations within the game engine.
  parameters:
  - name: tempTree
    description: Reference to an integer representing temporary tree data storage
      used during hierarchy construction
  - name: dat
    description: Reference to buildData structure containing input data for hierarchy
      building including object bounds and spatial information
  - name: stats
    description: Reference to BuildStats structure that tracks performance metrics
      and statistics during the hierarchy construction process
  returns: null
  examples:
  - title: Basic BIH hierarchy building example
    code: 'int tempTree = 0;

      buildData dat;

      BuildStats stats;

      bihInstance.buildHierarchy(tempTree, dat, stats);'
    language: cpp
  - title: Complete BIH construction with data preparation
    code: "buildData dat;\nBuildStats stats;\nint tempTree = 0;\n// Prepare bounding\
      \ data for objects\nfor (auto& obj : worldObjects) {\n    dat.addBounds(obj.getBoundingBox());\n\
      }\n// Build the hierarchy\nbihInstance.buildHierarchy(tempTree, dat, stats);\n\
      // Use built hierarchy for spatial queries"
    language: cpp
  notes: This method is typically called during map loading or object initialization
    phases. The BIH construction process can be computationally expensive but provides
    significant performance benefits for subsequent spatial queries. The method modifies
    the input parameters in-place and should only be called once per hierarchy build
    cycle.
  warnings: Calling this method with invalid or uninitialized data structures may
    result in undefined behavior. Ensure that all input data is properly validated
    before calling this method. The temporary tree storage must be allocated appropriately
    to avoid memory corruption.
  related:
  - BIH::build
  - BIH::getBounds
  - BIH::intersect
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T15:51:17.716152'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
