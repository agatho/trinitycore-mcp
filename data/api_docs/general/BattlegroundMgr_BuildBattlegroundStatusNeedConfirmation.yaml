api:
  class: BattlegroundMgr
  method: BuildBattlegroundStatusNeedConfirmation
  signature: void BattlegroundMgr::BuildBattlegroundStatusNeedConfirmation(WorldPackets::Battleground::BattlefieldStatusNeedConfirmation
    * battlefieldStatus, const Battleground * bg, const Player * player, uint32 ticketId,
    uint32 joinTime, uint32 timeout, int queueId)
documentation:
  brief: Fills a BattlefieldStatusNeedConfirmation packet with battleground join information
    for a player.
  description: This method prepares and populates a BattlefieldStatusNeedConfirmation
    packet that is sent to a player when they are about to join a battleground. It
    includes details such as the battleground type, queue time, and ticket ID. The
    packet informs the client that the player must confirm their participation in
    the battleground before joining. This method is typically called during the battleground
    queuing process to notify players of pending battlefield entry.
  parameters:
  - name: battlefieldStatus
    description: Pointer to a BattlefieldStatusNeedConfirmation packet object that
      will be filled with battleground information.
  - name: bg
    description: Pointer to the Battleground object representing the battleground
      the player is joining.
  - name: player
    description: Pointer to the Player object for whom the status packet is being
      built.
  - name: ticketId
    description: Unique identifier for the player's queue ticket, used to track their
      position in the battleground queue.
  - name: joinTime
    description: Time in seconds since the player joined the queue, used to calculate
      remaining wait time.
  - name: timeout
    description: Timeout value in seconds after which the player will be removed from
      the queue if they do not confirm.
  - name: queueId
    description: Identifier for the specific battleground queue the player is entering,
      used to distinguish between different queue types.
  returns: null
  examples:
  - title: Building a Battlefield Status Packet for a Player
    code: 'WorldPackets::Battleground::BattlefieldStatusNeedConfirmation status;

      BattlegroundMgr::BuildBattlegroundStatusNeedConfirmation(&status, bg, player,
      ticketId, joinTime, timeout, queueId);

      player->SendDirectMessage(status.Write());'
    language: cpp
  notes: This method is part of the battleground queuing system and should only be
    called when a player is about to enter a battleground. The packet structure must
    be properly initialized before calling this method.
  warnings: null
  related:
  - BattlegroundMgr::BuildBattlegroundStatus
  - BattlegroundMgr::BuildBattlegroundStatusFailed
  - BattlegroundMgr::AddPlayerToBattleground
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T12:37:06.529429'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
