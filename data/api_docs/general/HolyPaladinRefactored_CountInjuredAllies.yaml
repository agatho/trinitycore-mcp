api:
  class: HolyPaladinRefactored
  method: CountInjuredAllies
  signature: uint32 HolyPaladinRefactored::CountInjuredAllies(int * group, float threshold)
    const
documentation:
  brief: Counts the number of injured allies within a specified threshold distance.
  description: The CountInjuredAllies method determines how many friendly units (allies)
    are currently below a given health threshold within the paladin's group or raid.
    This function is typically used in healing logic to identify targets that require
    immediate attention. The method evaluates the health status of all group members
    and returns a count of those whose health percentage falls below the specified
    threshold. It does not consider dead or offline players, and only counts living
    allies in the same group or raid as the paladin.
  parameters:
  - name: group
    description: Pointer to an array representing the group members. This parameter
      is expected to contain valid pointers to Unit objects for each group member.
  - name: threshold
    description: A float value between 0.0 and 1.0 that represents the health percentage
      threshold. Units with health below this value are considered 'injured'. For
      example, a threshold of 0.5 means any ally with less than 50% health will be
      counted.
  returns: Returns a uint32 representing the total number of injured allies found
    in the group that meet or fall below the specified health threshold.
  examples:
  - title: Basic usage to count injured allies
    code: uint32 injuredCount = paladin->CountInjuredAllies(group, 0.5f); // Count
      allies with less than 50% health
    language: cpp
  - title: Advanced usage for prioritized healing
    code: "int* playerGroup = GetPlayerGroup();\nfloat lowHealthThreshold = 0.3f;\n\
      uint32 injuredCount = paladin->CountInjuredAllies(playerGroup, lowHealthThreshold);\n\
      if (injuredCount > 0)\n{\n    // Proceed with healing logic\n}"
    language: cpp
  notes: This method assumes that the group array passed in contains valid Unit pointers
    and does not perform null checks on individual entries. Performance may degrade
    if the group size is large or if frequent calls are made without caching results.
    The method relies on the TrinityCore API's internal health tracking system for
    accurate results.
  warnings: Ensure that the group pointer points to a valid array of Unit objects
    before calling this function, as invalid pointers will result in undefined behavior.
    Also, be aware that the threshold value must be between 0.0 and 1.0; values outside
    this range may produce unexpected results or cause assertion failures.
  related:
  - GetGroupMembers
  - IsInjured
  - GetHealthPercentage
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:00:01.409453'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
