api:
  class: BalanceDruidRefactored
  method: ExecuteSingleTargetRotation
  signature: void BalanceDruidRefactored::ExecuteSingleTargetRotation(int * target)
documentation:
  brief: Executes the balance druid's single-target rotation logic for the current
    fight.
  description: The ExecuteSingleTargetRotation method implements the core spell casting
    logic for a balance druid when engaged in single-target combat. This method evaluates
    the current game state, including mana levels, target health, and available cooldowns,
    to determine the optimal sequence of spells to cast. It typically includes rotation
    logic for abilities such as Wrath, Starfire, Moonfire, and other balance-specific
    spells. The method is designed to be called during the AI's update cycle and manages
    the druid's resource allocation and spell prioritization for maximum damage output
    in single-target scenarios.
  parameters:
  - name: target
    description: Pointer to the target unit that the rotation will be executed against.
      This parameter is used to determine target health, buffs, debuffs, and other
      combat state information necessary for spell selection and timing.
  returns: null
  examples:
  - title: Basic usage in AI update loop
    code: "void BalanceDruidAI::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n\
      \        return;\n    \n    ExecuteSingleTargetRotation(&m_target);\n}"
    language: cpp
  - title: Integration with custom rotation logic
    code: "void BalanceDruidRefactored::ExecuteSingleTargetRotation(int* target)\n\
      {\n    if (!target || *target <= 0)\n        return;\n    \n    // Check for\
      \ mana and spell availability\n    if (HasManaForSpell(WRATH_SPELL_ID))\n  \
      \  {\n        CastSpellOnTarget(WRATH_SPELL_ID, target);\n    }\n    else if\
      \ (HasManaForSpell(STARFIRE_SPELL_ID))\n    {\n        CastSpellOnTarget(STARFIRE_SPELL_ID,\
      \ target);\n    }\n    // Additional rotation logic here\n}"
    language: cpp
  notes: This method assumes that the druid has a valid target and that combat state
    is properly initialized. The method does not handle target switching or movement
    logic; it only executes the spell rotation based on current conditions. It's recommended
    to call this method within the AI update loop at appropriate intervals to maintain
    optimal performance.
  warnings: The target parameter must be a valid pointer to an existing unit. Passing
    null or invalid pointers can lead to undefined behavior or crashes. Ensure that
    the druid is in combat and has a valid target before calling this method, as it
    may not handle edge cases gracefully.
  related:
  - ExecuteMultiTargetRotation
  - UpdateAI
  - HasManaForSpell
  - CastSpellOnTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T10:29:13.448394'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
