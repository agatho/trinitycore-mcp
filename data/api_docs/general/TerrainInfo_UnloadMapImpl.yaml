api:
  class: TerrainInfo
  method: UnloadMapImpl
  signature: void TerrainInfo::UnloadMapImpl(int32 gx, int32 gy)
documentation:
  brief: Unloads the map data for a specified grid location.
  description: The UnloadMapImpl method is responsible for releasing memory and resources
    associated with a specific grid cell in the game world. This method is typically
    called when a player moves out of the loaded area or when the server needs to
    free up memory by unloading unused map data. It ensures that terrain information,
    collision data, and other grid-specific resources are properly deallocated to
    prevent memory leaks and maintain optimal performance. The method operates on
    grid coordinates (gx, gy) which represent the X and Y positions of the grid cell
    in the world's coordinate system.
  parameters:
  - name: gx
    description: The X coordinate of the grid cell to unload. This represents the
      horizontal position in the game world's grid system.
  - name: gy
    description: The Y coordinate of the grid cell to unload. This represents the
      vertical position in the game world's grid system.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'TerrainInfo* terrain = sTerrainMgr->GetTerrainInfo();

      // Unload map data for grid at coordinates (10, 15)

      terrain->UnloadMapImpl(10, 15);'
    language: cpp
  - title: Usage with Player Movement
    code: "void HandlePlayerMove(Player* player) {\n    int32 newGX = player->GetPositionX()\
      \ / GRID_SIZE;\n    int32 newGY = player->GetPositionY() / GRID_SIZE;\n    \n\
      \    // Unload old grid data\n    TerrainInfo* terrain = sTerrainMgr->GetTerrainInfo();\n\
      \    terrain->UnloadMapImpl(newGX, newGY);\n}"
    language: cpp
  notes: This method is part of the internal terrain management system and should
    not be called directly by most game logic. The method assumes that the grid coordinates
    are valid and within the bounds of the world map. It's typically invoked automatically
    by the terrain manager when necessary, but can also be called manually during
    specific cleanup operations or when implementing custom map loading/unloading
    behavior.
  warnings: Calling this method with invalid grid coordinates may result in undefined
    behavior or memory corruption. Ensure that the grid coordinates are within valid
    bounds before calling this method. This method should not be called concurrently
    with other terrain operations as it may lead to race conditions and data inconsistency.
  related:
  - LoadMapImpl
  - GetTerrainInfo
  - IsGridLoaded
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T18:25:21.589276'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
