api:
  class: TerrainInfo
  method: UnloadMap
  signature: void TerrainInfo::UnloadMap(int32 gx, int32 gy)
documentation:
  brief: Unloads the specified map tile from memory.
  description: The UnloadMap method removes a specific map tile, identified by its
    grid coordinates (gx, gy), from the terrain manager's memory cache. This operation
    is typically used to free up memory when a player moves away from a particular
    area or when the server needs to manage memory usage efficiently. The method ensures
    that the specified map tile is no longer loaded and accessible, which can improve
    performance by reducing memory consumption. It's important to note that this method
    only affects the in-memory representation of the map data and does not modify
    any persistent world state.
  parameters:
  - name: gx
    description: The x-coordinate of the grid tile to unload. This represents the
      horizontal position in the game world's grid system.
  - name: gy
    description: The y-coordinate of the grid tile to unload. This represents the
      vertical position in the game world's grid system.
  returns: null
  examples:
  - title: Unload a specific map tile
    code: 'TerrainInfo* terrain = sTerrainMgr->GetTerrainInfo();

      // Unload map tile at grid coordinates (10, 15)

      terrain->UnloadMap(10, 15);'
    language: cpp
  - title: Unload multiple tiles based on player movement
    code: "void HandlePlayerMovement(Player* player) {\n    int32 currentX = player->GetGridX();\n\
      \    int32 currentY = player->GetGridY();\n    \n    // Unload tiles that are\
      \ no longer needed\n    TerrainInfo* terrain = sTerrainMgr->GetTerrainInfo();\n\
      \    terrain->UnloadMap(currentX - 1, currentY);\n    terrain->UnloadMap(currentX\
      \ + 1, currentY);\n    terrain->UnloadMap(currentX, currentY - 1);\n    terrain->UnloadMap(currentX,\
      \ currentY + 1);\n}"
    language: cpp
  notes: This method is part of the terrain management system and works in conjunction
    with other methods like LoadMap to manage memory efficiently. The grid coordinates
    are typically derived from the player's position using the GetGridX() and GetGridY()
    methods. Memory management for map tiles is crucial for server performance, especially
    in high-traffic environments.
  warnings: Calling UnloadMap on a tile that is not currently loaded will have no
    effect but may be inefficient if done excessively. It's important to ensure that
    the grid coordinates are valid before calling this method to avoid unexpected
    behavior or errors.
  related:
  - LoadMap
  - GetTerrainInfo
  - IsTileLoaded
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T01:05:15.657705'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
