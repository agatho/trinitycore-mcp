api:
  class: InteractionManager
  method: BuyItem
  signature: InteractionResult InteractionManager::BuyItem(Player * bot, Creature
    * vendor, uint32 itemId, uint32 count)
documentation:
  brief: Initiates the purchase of an item from a vendor creature by a player bot
  description: The BuyItem method handles the process of a player bot purchasing an
    item from a vendor creature within the TrinityCore environment. It manages the
    transaction logic including validating the item availability, checking player
    inventory space, verifying sufficient currency, and updating both the player's
    inventory and the vendor's stock. The method returns an InteractionResult enum
    that indicates whether the purchase was successful or if any errors occurred during
    the process. This functionality is commonly used in AI-driven bot systems to automate
    trading behaviors within World of Warcraft.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot attempting to make
      the purchase. Must be a valid player instance with sufficient resources and
      inventory space.
  - name: vendor
    description: Pointer to the Creature object representing the vendor from whom
      the item is being purchased. Must be a valid vendor creature with the specified
      item in its inventory.
  - name: itemId
    description: Unique identifier of the item to be purchased. Must correspond to
      a valid item in the vendor's inventory table.
  - name: count
    description: Number of items to purchase. Must be a positive integer representing
      the quantity desired by the bot.
  returns: InteractionResult enum indicating the outcome of the purchase attempt.
    Possible values include SUCCESS, FAILURE, INSUFFICIENT_FUNDS, INVENTORY_FULL,
    ITEM_NOT_FOUND, or VENDOR_UNAVAILABLE.
  examples:
  - title: Basic item purchase
    code: "Player* bot = ...;\nCreature* vendor = ...;\nInteractionResult result =\
      \ bot->GetInteractionManager()->BuyItem(bot, vendor, 12345, 1);\nif (result\
      \ == InteractionResult::SUCCESS) {\n    // Item purchased successfully\n}"
    language: cpp
  - title: Bulk purchase with error handling
    code: "Player* bot = ...;\nCreature* vendor = ...;\nuint32 itemId = 67890;\nuint32\
      \ count = 5;\nInteractionResult result = bot->GetInteractionManager()->BuyItem(bot,\
      \ vendor, itemId, count);\nswitch (result) {\n    case InteractionResult::SUCCESS:\n\
      \        // Process successful purchase\n        break;\n    case InteractionResult::INSUFFICIENT_FUNDS:\n\
      \        // Handle insufficient gold\n        break;\n    case InteractionResult::INVENTORY_FULL:\n\
      \        // Handle full inventory\n        break;\n    default:\n        //\
      \ Handle other errors\n        break;\n}"
    language: cpp
  notes: This method internally calls vendor interaction handlers and may trigger
    database updates for player inventory changes. The method assumes that the bot
    has already validated that it can interact with the vendor and that the vendor
    is within range. Performance considerations include checking item availability
    and currency before processing the transaction.
  warnings: Ensure that the bot's Player instance is properly initialized and that
    the vendor Creature object is valid and accessible. Attempting to purchase non-existent
    items or quantities exceeding available stock may result in unexpected behavior.
    The method does not automatically handle quest-related item restrictions or faction-specific
    vendor limitations.
  related:
  - SellItem
  - GetVendorItems
  - CanAffordItem
  - UpdateInventory
metadata:
  confidence: 0.92
  generated_at: '2025-11-08T02:34:55.383307'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
