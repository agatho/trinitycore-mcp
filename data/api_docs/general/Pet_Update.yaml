api:
  class: Pet
  method: Update
  signature: void Pet::Update(uint32 diff)
documentation:
  brief: Updates the pet's state and behavior based on elapsed time.
  description: The Update method is responsible for processing all time-based updates
    for a pet instance. It handles various aspects such as mana regeneration, threat
    management, AI decision making, and status effect updates. This method is called
    regularly by the game loop to ensure that the pet behaves correctly according
    to its current state and the passage of time. The method typically processes actions
    like updating the pet's health, managing its combat state, handling summoned creature
    behavior, and ensuring proper synchronization with the owner's actions.
  parameters: []
  returns: null
  examples:
  - title: Basic Update Call
    code: "void GameWorld::UpdatePets(uint32 diff)\n{\n    for (auto& pet : m_pets)\n\
      \    {\n        if (pet)\n            pet->Update(diff);\n    }\n}"
    language: cpp
  - title: Pet Update with State Management
    code: "void PlayerPet::Update(uint32 diff)\n{\n    // Update pet's AI and behavior\n\
      \    if (m_ai)\n        m_ai->UpdateAI(diff);\n    \n    // Handle pet's mana\
      \ and health\n    UpdateManaRegen(diff);\n    UpdateHealthRegen(diff);\n   \
      \ \n    // Process summoned creature updates\n    if (IsSummoned())\n      \
      \  UpdateSummonedState(diff);\n}"
    language: cpp
  notes: This method is typically called from the main game loop at regular intervals.
    It's important to note that this method should not be called directly from within
    other update methods to avoid potential recursion issues. The diff parameter represents
    milliseconds since last update, which is used for time-based calculations.
  warnings: Never call Update() recursively or from multiple threads simultaneously
    as it may cause race conditions and inconsistent pet states. Ensure proper locking
    mechanisms are in place when accessing pet data from different threads.
  related:
  - Pet::UpdateAI
  - Pet::UpdateManaRegen
  - Pet::UpdateHealthRegen
  - Pet::IsSummoned
metadata:
  confidence: 0.95
  generated_at: '2025-10-31T10:17:38.040236'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
