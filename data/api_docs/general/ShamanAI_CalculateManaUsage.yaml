api:
  class: ShamanAI
  method: CalculateManaUsage
  signature: int ShamanAI::CalculateManaUsage() const
documentation:
  brief: Calculates and returns the mana cost of the next spell to be cast by the
    shaman AI.
  description: The CalculateManaUsage method determines the mana cost for the upcoming
    spell that the ShamanAI intends to cast. This method is typically invoked during
    AI decision-making processes to ensure the shaman has sufficient mana before executing
    a spell. It considers the current spell selection, aura effects, and any applicable
    mana regeneration modifiers. The returned value represents the exact amount of
    mana required for the spell, which can be used by the AI to make strategic decisions
    about spell casting or to prevent casting spells that would result in mana depletion.
  parameters: []
  returns: An integer representing the mana cost of the next spell to be cast. A negative
    value may indicate an error or special case, while zero typically means no mana
    is required for the spell.
  examples:
  - title: Basic usage in AI decision logic
    code: "if (shamanAI->CalculateManaUsage() <= player->GetPower(POWER_MANA)) {\n\
      \    shamanAI->CastNextSpell();\n} else {\n    shamanAI->DoNothing();\n}"
    language: cpp
  - title: Using mana usage to prioritize spell selection
    code: "int manaCost = shamanAI->CalculateManaUsage();\nif (manaCost > 0 && player->GetPower(POWER_MANA)\
      \ >= manaCost) {\n    // Proceed with casting\n    shamanAI->CastSpell(SPELL_LIGHTNING_BOLT);\n\
      } else if (manaCost == 0) {\n    // No mana cost, cast immediately\n    shamanAI->CastSpell(SPELL_HEALING_WAVE);\n\
      }"
    language: cpp
  notes: This method is part of the Shaman AI's internal logic and should not be called
    directly by external systems. The result may vary depending on the current spell
    queue, active buffs, or debuffs affecting the shaman. It is recommended to cache
    this value if it will be used multiple times in a single decision cycle.
  warnings: Calling this method without proper AI state validation may return incorrect
    values. Ensure that the ShamanAI has a valid spell target and spell selection
    before invoking this function. Improper use can lead to incorrect mana calculations
    and unexpected behavior during spell casting.
  related:
  - ShamanAI::CastNextSpell
  - ShamanAI::GetNextSpell
  - ShamanAI::HasMana
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T20:01:56.358891'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
