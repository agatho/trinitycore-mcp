api:
  class: ConditionMgr
  method: addToLootTemplate
  signature: void ConditionMgr::addToLootTemplate(const ConditionId & id, int conditions,
    LootTemplate * loot) const
documentation:
  brief: Adds a condition to a loot template for use in World of Warcraft item drops.
  description: The addToLootTemplate method integrates a specified condition into
    a loot template, enabling conditional item drops based on game criteria such as
    player faction, quest status, or achievement completion. This method is essential
    for implementing complex loot systems where items may only be obtainable under
    certain circumstances. The condition ID and its associated parameters are linked
    to the provided loot template, which is then used during the loot generation process.
    This functionality supports the TrinityCore's loot system by allowing dynamic
    and context-sensitive item distribution.
  parameters:
  - name: id
    description: The unique identifier for the condition being added. This ID references
      a predefined condition in the condition system, typically defined in database
      tables like `conditions`.
  - name: conditions
    description: An integer value representing the type or category of the condition.
      This parameter may be used to distinguish between different types of conditions
      (e.g., player level, quest completion) within the loot system.
  - name: loot
    description: A pointer to the LootTemplate object where the condition will be
      applied. This template defines which items can drop and under what conditions
      they are available for a specific creature or object.
  returns: null
  examples:
  - title: Adding a faction-based condition to a loot template
    code: 'ConditionId id;

      id.sourceType = CONDITION_SOURCE_TYPE_CREATURE_LOOT_TEMPLATE;

      id.sourceGroup = 12345;

      ConditionMgr::instance()->addToLootTemplate(id, CONDITION_FACTION_HOSTILE, &creatureLootTemplate);

      '
    language: cpp
  - title: Applying a quest completion condition to a loot template
    code: 'ConditionId id;

      id.sourceType = CONDITION_SOURCE_TYPE_CREATURE_LOOT_TEMPLATE;

      id.sourceGroup = 67890;

      ConditionMgr::instance()->addToLootTemplate(id, CONDITION_QUEST_REWARDED, &npcLootTemplate);

      '
    language: cpp
  notes: This method is typically called during server startup or when loading loot
    templates from the database. It modifies the internal structure of the LootTemplate
    to include condition checks that are evaluated at runtime when determining whether
    an item should be dropped. The method does not validate that the condition ID
    exists in the database; it simply links it to the template.
  warnings: Incorrectly setting the condition type or source group can lead to unexpected
    loot behavior or items never dropping. Ensure that all referenced conditions exist
    in the database and are properly configured before calling this method.
  related:
  - ConditionMgr::addCondition
  - ConditionMgr::checkCondition
  - LootTemplate::AddItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T04:24:36.450153'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
