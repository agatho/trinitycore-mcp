api:
  class: Spell
  method: DoSpellEffectHit
  signature: void Spell::DoSpellEffectHit(Unit * unit, const SpellEffectInfo & spellEffectInfo,
    TargetInfo & targetInfo)
documentation:
  brief: Applies a spell effect to a target unit during spell execution.
  description: The DoSpellEffectHit method is responsible for executing the core logic
    of applying a specific spell effect to a targeted unit within the TrinityCore
    framework. It processes the effect information provided by the SpellEffectInfo
    structure and applies it to the target specified in TargetInfo. This method integrates
    with the broader spell system to handle damage, healing, buffs, debuffs, and other
    magical effects. The method typically gets invoked during the spell's cast phase
    when the actual impact on targets occurs, ensuring that all relevant game mechanics
    such as resistances, mitigation, and effect modifiers are properly considered.
  parameters:
  - name: unit
    description: Pointer to the target Unit object that will receive the spell effect.
      This can be a player, creature, or any game entity that can be affected by spells.
  - name: spellEffectInfo
    description: Reference to the SpellEffectInfo structure containing detailed information
      about the specific spell effect being applied, including effect type, base points,
      implicit target, and other parameters.
  - name: targetInfo
    description: Reference to the TargetInfo structure that holds contextual data
      about the target such as hit status, crit chance, and damage calculation details.
  returns: null
  examples:
  - title: Basic Spell Effect Application
    code: "void MySpell::DoSpellEffectHit(Unit* unit, const SpellEffectInfo& spellEffectInfo,\
      \ TargetInfo& targetInfo)\n{\n    // Apply a damage effect to the target\n \
      \   if (spellEffectInfo.Effect == SPELL_EFFECT_SCHOOL_DAMAGE)\n    {\n     \
      \   uint32 damage = spellEffectInfo.BasePoints + (GetCaster()->GetTotalAttackPowerValue(BASE_ATTACK)\
      \ * 0.1f);\n        unit->DealDamage(GetCaster(), damage, NULL, DIRECT_DAMAGE,\
      \ SPELL_SCHOOL_MASK_NORMAL, NULL, false);\n    }\n}"
    language: cpp
  notes: This method is part of the internal spell execution pipeline and should not
    be called directly from outside the Spell class hierarchy. It assumes that all
    necessary preconditions for spell casting have already been validated. The method
    may modify target state, including health, buffs, or debuffs, depending on the
    effect type.
  warnings: Calling this method without proper initialization of the Spell object
    and its associated data structures can lead to undefined behavior or crashes.
    Ensure that unit is valid and not null before calling this method. Avoid modifying
    spell effect parameters after passing them to this method as it may cause inconsistencies
    in gameplay mechanics.
  related:
  - Spell::DoSpellHit
  - Spell::DoAllSpellEffects
  - Spell::Prepare
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T09:53:17.152309'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
