api:
  class: InstanceLockMgr
  method: UpdateInstanceLockExtensionForPlayer
  signature: int InstanceLockMgr::UpdateInstanceLockExtensionForPlayer(const int &
    playerGuid, const MapDb2Entries & entries, bool extended)
documentation:
  brief: Updates the instance lock extension status for a player based on provided
    map entries and extension flag.
  description: The UpdateInstanceLockExtensionForPlayer method manages the extension
    of instance locks for a specific player within the TrinityCore framework. It takes
    a player's GUID, a collection of map database entries, and an extension flag to
    determine whether to extend or reset instance lock durations. This functionality
    is crucial for managing player access to instances, particularly in scenarios
    involving extended playtime or temporary lock extensions. The method operates
    within the context of World of Warcraft's instance management system, where players
    may be granted additional time to complete instance content before their locks
    expire.
  parameters:
  - name: playerGuid
    description: The unique identifier (GUID) of the player whose instance lock extension
      is being updated. Must be a valid player GUID within the game world.
  - name: entries
    description: A collection of MapDb2Entries representing the maps for which instance
      locks are being modified. Each entry contains metadata about the map including
      its ID and lock duration properties.
  - name: extended
    description: Boolean flag indicating whether to extend the instance lock (true)
      or reset it to default duration (false). When true, the lock duration is increased;
      when false, it resets to base values.
  returns: Returns an integer value representing the success status of the operation.
    A return value of 0 typically indicates successful execution, while non-zero values
    may represent various error conditions such as invalid player GUID or failed database
    updates.
  examples:
  - title: Extend Instance Lock for Player
    code: "MapDb2Entries entries;\n// Populate entries with relevant map data\nint\
      \ result = instanceLockMgr.UpdateInstanceLockExtensionForPlayer(12345, entries,\
      \ true);\nif (result == 0) {\n    // Lock extension successful\n}"
    language: cpp
  - title: Reset Instance Lock Duration
    code: "MapDb2Entries entries;\n// Populate entries with relevant map data\nint\
      \ result = instanceLockMgr.UpdateInstanceLockExtensionForPlayer(12345, entries,\
      \ false);\nif (result == 0) {\n    // Lock duration reset to default\n}"
    language: cpp
  notes: This method interacts with the database to persist changes to instance lock
    states. It is typically called during player logout or when specific game events
    occur that require lock adjustments. The implementation may involve locking mechanisms
    to prevent race conditions in multi-threaded environments.
  warnings: Ensure that playerGuid is valid before calling this method, as invalid
    GUIDs may cause database errors. Also, be cautious when extending locks for extended
    periods, as this could impact server performance or game balance if not properly
    managed.
  related:
  - GetInstanceLockStatusForPlayer
  - ResetInstanceLockForPlayer
  - GetPlayerInstanceLocks
metadata:
  confidence: 0.85
  generated_at: '2025-11-01T00:16:15.882759'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
