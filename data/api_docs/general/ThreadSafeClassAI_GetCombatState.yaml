api:
  class: ThreadSafeClassAI
  method: GetCombatState
  signature: const CombatState & ThreadSafeClassAI::GetCombatState() const
documentation:
  brief: Retrieves the current combat state of the AI-controlled unit
  description: The GetCombatState method returns a constant reference to the CombatState
    object that represents the current combat status of the AI-controlled unit. This
    includes information about whether the unit is engaged in combat, the target it
    is fighting, and other relevant combat-related flags. The returned CombatState
    object is thread-safe and provides a consistent view of the unit's combat state
    at the time of the call. This method is typically used by AI systems to make decisions
    based on the current combat situation, such as determining when to use abilities
    or switch targets.
  parameters: []
  returns: A constant reference to the CombatState object representing the current
    combat status of the AI unit. The CombatState contains flags and data about combat
    engagement, target information, and combat-related states.
  examples:
  - title: Basic Usage to Check Combat Status
    code: "if (ai->GetCombatState().IsInCombat()) {\n    // Unit is currently in combat\n\
      \    // Perform combat-specific actions\n}"
    language: cpp
  - title: Accessing Target Information from Combat State
    code: "const CombatState& state = ai->GetCombatState();\nif (state.GetTargetGuid().IsCreature())\
      \ {\n    Creature* target = ai->GetCreature(state.GetTargetGuid());\n    if\
      \ (target && target->IsAlive()) {\n        // Proceed with combat actions against\
      \ the target\n    }\n}"
    language: cpp
  notes: This method is thread-safe and can be called from any thread without requiring
    explicit locking. The returned CombatState reference is valid only until the next
    call to a mutating method on the AI object or until the next frame update, so
    it should not be stored for extended periods. The combat state may change frequently
    during active combat, so repeated calls may return different values.
  warnings: Do not modify the returned CombatState object as it is const and intended
    only for reading purposes. Accessing the CombatState after the AI object has been
    destroyed or while it's in an inconsistent state can lead to undefined behavior.
    Avoid storing references to CombatState across frame boundaries as they may become
    invalid.
  related:
  - SetCombatState
  - IsInCombat
  - GetTarget
metadata:
  confidence: 0.92
  generated_at: '2025-11-08T14:28:45.932985'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
