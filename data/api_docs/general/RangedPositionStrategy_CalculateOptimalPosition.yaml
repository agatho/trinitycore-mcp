api:
  class: RangedPositionStrategy
  method: CalculateOptimalPosition
  signature: int RangedPositionStrategy::CalculateOptimalPosition(Player * bot, Unit
    * target, float preferredRange)
documentation:
  brief: Calculates and returns the optimal ranged position for a bot relative to
    its target based on preferred range.
  description: The CalculateOptimalPosition method determines the best positional
    offset for a bot to maintain an effective ranged combat distance from its target.
    It evaluates the current position of both the bot and its target, computes the
    ideal distance within the specified preferred range, and returns a calculated
    position that ensures optimal positioning for ranged attacks while avoiding melee
    threats. This method is typically used by AI systems to guide bot movement during
    ranged combat scenarios. The method considers factors such as target movement,
    bot's current orientation, and environmental constraints to determine the most
    advantageous position.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that needs positioning.
      Must be a valid player instance with valid target.
  - name: target
    description: Pointer to the Unit object representing the target unit for ranged
      combat. Must be a valid unit instance and within range.
  - name: preferredRange
    description: Float value specifying the preferred distance in yards from the target.
      Determines the optimal distance for ranged attacks.
  returns: Integer representing the calculated optimal position result code. Returns
    0 on success, negative values indicate errors or invalid conditions such as null
    pointers or unreachable targets.
  examples:
  - title: Basic usage of CalculateOptimalPosition
    code: "Player* bot = ...; // Bot player instance\nUnit* target = ...; // Target\
      \ unit\nfloat preferredRange = 20.0f;\nint result = bot->GetBotAI()->GetRangedPositionStrategy()->CalculateOptimalPosition(bot,\
      \ target, preferredRange);\nif (result == 0) {\n    // Position calculated successfully\n\
      }"
    language: cpp
  - title: Using CalculateOptimalPosition in combat AI
    code: "void CombatAI::UpdateRangedPosition() {\n    Player* bot = GetBot();\n\
      \    Unit* target = bot->GetVictim();\n    if (!target) return;\n    \n    float\
      \ preferredRange = 30.0f;\n    int result = CalculateOptimalPosition(bot, target,\
      \ preferredRange);\n    \n    if (result == 0) {\n        // Move to calculated\
      \ optimal position\n        bot->GetMotionMaster()->MovePoint(0, calculatedPosition);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the AI positioning system and relies on accurate target
    tracking and bot movement capabilities. The implementation may vary based on specific
    bot class or combat role. Performance impact is minimal as it performs only necessary
    calculations for position determination.
  warnings: Ensure that both bot and target pointers are valid before calling this
    method to avoid null pointer exceptions. The preferredRange parameter should be
    within reasonable bounds to prevent unrealistic positioning behavior.
  related:
  - GetRangedPositionStrategy
  - CalculatePosition
  - GetOptimalDistance
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T22:30:50.079235'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
