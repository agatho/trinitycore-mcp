api:
  class: NPCInteractionManager
  method: BuyFromVendor
  signature: bool NPCInteractionManager::BuyFromVendor(Creature * vendor, const int
    & itemsToBuy)
documentation:
  brief: Attempts to purchase items from a vendor creature using the specified item
    count.
  description: The BuyFromVendor method facilitates the process of purchasing items
    from a vendor NPC within the TrinityCore framework. It takes a pointer to a Creature
    object representing the vendor and an integer specifying how many items to buy.
    The method handles the transaction logic including checking if the player has
    sufficient funds, verifying item availability in the vendor's inventory, and updating
    both the player's inventory and the vendor's stock accordingly. This function
    is typically invoked during NPC interaction sequences when a player selects to
    purchase goods from a merchant.
  parameters:
  - name: vendor
    description: Pointer to the Creature object representing the vendor from whom
      items are being purchased. Must be a valid NPC with vendor functionality enabled.
  - name: itemsToBuy
    description: Integer value specifying the number of items to purchase from the
      vendor. Should be a positive integer; negative values may result in undefined
      behavior or error conditions.
  returns: Returns true if the purchase was successful, false otherwise. A return
    value of false could indicate insufficient funds, item unavailability, invalid
    vendor reference, or other transaction failures.
  examples:
  - title: Basic Purchase from Vendor
    code: "if (NPCInteractionManager::BuyFromVendor(vendorCreature, 5)) {\n    //\
      \ Successfully purchased 5 items\n    sLog->outString(\"Purchase successful\"\
      );\n} else {\n    // Purchase failed\n    sLog->outString(\"Purchase failed\"\
      );\n}"
    language: cpp
  notes: This method assumes that proper player interaction context has been established
    prior to calling. It relies on the TrinityCore internal systems for currency handling,
    inventory management, and vendor data validation. The method may perform database
    operations internally to update item counts and player gold.
  warnings: Ensure that the vendor pointer is valid and points to an actual NPC with
    vendor flags set before calling this function. Passing negative values for itemsToBuy
    can lead to unexpected behavior or errors in the transaction logic.
  related:
  - SellToVendor
  - GetVendorItems
  - CanAffordItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T23:23:39.761006'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
