api:
  class: WorldObject
  method: CalculateSpellDamage
  signature: int32 WorldObject::CalculateSpellDamage(const Unit * target, const SpellEffectInfo
    & spellEffectInfo, const int32 * basePoints, float * variance, uint32 castItemId,
    int32 itemLevel) const
documentation:
  brief: Calculates spell damage based on target, spell effect info, and base points
    values
  description: This method computes the final spell damage value for a given spell
    effect, taking into account various factors such as target properties, spell effect
    configuration, base points values, variance, cast item ID, and item level. It
    is used primarily in spell calculations during combat and magical effects to determine
    damage output. The method considers multiple variables including critical strike
    chance, randomization, and specific spell mechanics that affect damage calculation.
  parameters:
  - name: target
    description: Pointer to the target unit for which the spell damage is calculated.
      This parameter determines how the spell affects the target's health or other
      attributes.
  - name: spellEffectInfo
    description: Reference to the SpellEffectInfo structure that defines the specific
      effect being applied. This includes details about the spell's effect type, value,
      and other parameters.
  - name: basePoints
    description: Pointer to the base damage values for the spell effect. This array
      contains the base damage values that are used in calculations.
  - name: variance
    description: Pointer to the variance value used in damage calculation. This determines
      how much the damage can vary from the base value, typically representing randomization
      or deviation.
  - name: castItemId
    description: The item ID of the cast item used for spell calculations. This helps
      determine if any item bonuses or effects should be applied to the spell damage
      calculation.
  - name: itemLevel
    description: The item level of the cast item, used in conjunction with castItemId
      to determine additional spell modifiers and calculations.
  returns: Returns an integer representing the calculated spell damage value. This
    value can be positive or negative depending on the effect and context, and may
    represent a range of possible outcomes based on variance and randomization.
  examples:
  - title: Basic Spell Damage Calculation
    code: int32 damage = CalculateSpellDamage(target, spellEffectInfo, basePoints,
      &variance, castItemId, itemLevel);
    language: cpp
  notes: This method is typically used in conjunction with other spell calculation
    methods to determine final damage output. It may be called multiple times per
    spell depending on the effect type and target. Performance considerations include
    handling of variance and base point values, which can impact overall damage calculation.
  warnings: The method may return negative values if certain conditions are met, such
    as when a spell effect is designed to reduce health or when a critical strike
    occurs with low base damage. Care should be taken when using this method in combination
    with other spell-related functions to avoid incorrect damage calculations.
  related:
  - CalculateSpellDamageOverTime
  - CalculateSpellHeal
  - CalculateSpellEffect
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T19:49:01.209484'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
