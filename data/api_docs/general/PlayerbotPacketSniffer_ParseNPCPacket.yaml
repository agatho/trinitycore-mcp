api:
  class: PlayerbotPacketSniffer
  method: ParseNPCPacket
  signature: void PlayerbotPacketSniffer::ParseNPCPacket(WorldSession * session, const
    WorldPacket & packet)
documentation:
  brief: Parses incoming NPC-related packets from a player session to extract and
    process relevant data.
  description: The ParseNPCPacket method is responsible for analyzing WorldPackets
    that contain NPC-related information sent by a player's client. It processes these
    packets to gather data such as NPC interactions, quest updates, or gossip selections.
    This method plays a critical role in player bot behavior simulation within the
    TrinityCore framework, allowing bots to react appropriately to NPC communications
    and events. The method operates on the provided WorldSession and WorldPacket objects,
    extracting packet contents without modifying them directly. It is typically invoked
    by the packet sniffer system when an NPC-related packet is detected.
  parameters:
  - name: session
    description: Pointer to the WorldSession object representing the active player
      connection. Used to identify which player sent the packet and to access session-specific
      data.
  - name: packet
    description: Reference to the WorldPacket object containing the NPC-related data.
      This packet is parsed to extract relevant NPC interaction information such as
      gossip options, quest details, or vendor transactions.
  returns: null
  examples:
  - title: Basic Packet Parsing
    code: "void example() {\n    PlayerbotPacketSniffer sniffer;\n    WorldSession*\
      \ session = /* get active session */;\n    WorldPacket packet(CMSG_GOSSIP_SELECT_OPTION,\
      \ 4);\n    packet << uint32(12345); // NPC GUID\n    sniffer.ParseNPCPacket(session,\
      \ packet);\n}"
    language: cpp
  notes: This method is part of the player bot system and should only be called during
    active bot processing. It assumes that the packet data has already been validated
    by the core packet handling system. The parsing logic may vary depending on the
    specific NPC packet type received, such as gossip selections, quest offers, or
    vendor interactions.
  warnings: Improper handling of packet data can lead to incorrect bot behavior or
    crashes. Ensure that the session and packet parameters are valid before calling
    this method. This method does not perform any packet validation itself.
  related:
  - ParsePacket
  - HandleNPCGossip
  - ProcessPlayerBotEvents
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T22:11:37.281523'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
