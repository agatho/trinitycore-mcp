api:
  class: Unit
  method: CalcArmorReducedDamage
  signature: uint32 Unit::CalcArmorReducedDamage(const Unit * attacker, Unit * victim,
    uint32 damage, const SpellInfo * spellInfo, int attackType, uint8 attackerLevel)
documentation:
  brief: Calculates armor reduced damage based on attacker and victim parameters
  description: This method computes the actual damage dealt by an attack, taking into
    account the target's armor value and the attacker's level. It applies armor reduction
    to the base damage calculation, which is a fundamental part of World of Warcraft
    combat mechanics. The method considers various factors including spell information,
    attack type, and level differences between attacker and victim to determine the
    final reduced damage amount.
  parameters:
  - name: attacker
    description: Pointer to the Unit object that is performing the attack. This represents
      the attacking unit in combat.
  - name: victim
    description: Pointer to the Unit object that is receiving the attack. This represents
      the defending unit in combat.
  - name: damage
    description: The base damage amount being dealt before armor reduction is applied.
  - name: spellInfo
    description: Pointer to the SpellInfo structure that defines the spell being used
      for the attack. This affects how damage is calculated and reduced.
  - name: attackType
    description: The type of attack being performed (e.g., melee, ranged, spell).
      This influences how armor reduction is applied.
  - name: attackerLevel
    description: The level of the attacking unit. This affects the calculation of
      armor reduction and determines the effectiveness of the armor.
  returns: Returns the final reduced damage value after armor has been applied to
    the original damage amount.
  examples:
  - title: Basic usage example
    code: uint32 reducedDamage = attacker->CalcArmorReducedDamage(victim, damage,
      spellInfo, attackType, attackerLevel);
    language: cpp
  - title: Advanced usage example
    code: 'uint32 reducedDamage = unit->CalcArmorReducedDamage(attacker, victim, baseDamage,
      spellInfo, ATTACK_TYPE_MELEE, attackerLevel);

      // Apply to actual damage calculation

      uint32 finalDamage = reducedDamage;

      // This is used in combat calculations for determining actual damage dealt'
    language: cpp
  notes: This method is typically used in combat calculations within TrinityCore's
    core. It should be called with proper parameters to ensure accurate damage calculation.
    The method may not be thread-safe if used in concurrent scenarios, so developers
    should be aware of potential race conditions.
  warnings: The method requires valid pointers for attacker and victim; invalid pointers
    can lead to crashes or undefined behavior. Care must be taken when using this
    method in combat calculations as it affects the accuracy of damage dealt.
  related:
  - Unit::CalcDamage
  - Unit::CalculateSpellDamage
  - Unit::GetAttackPower
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T21:24:26.423259'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
