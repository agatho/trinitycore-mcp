api:
  class: DeathRecoveryManager
  method: HandleJustDied
  signature: void DeathRecoveryManager::HandleJustDied(uint32 diff)
documentation:
  brief: Processes death recovery logic when a player dies, handling resurrection
    and related mechanics.
  description: The HandleJustDied method is invoked when a player character dies within
    the TrinityCore framework. This method manages the core death recovery process,
    including updating player state, triggering death-related events, and preparing
    the character for potential resurrection or corpse management. It typically integrates
    with the game's combat system to ensure proper handling of player deaths, such
    as setting appropriate timers, managing loot eligibility, and coordinating with
    the death animation sequence. The method is part of the DeathRecoveryManager class
    which centralizes all logic related to player death states and recovery mechanisms.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in combat handler
    code: "void CombatHandler::OnPlayerDeath(Player* player)\n{\n    DeathRecoveryManager*\
      \ drMgr = sObjectAccessor->GetDeathRecoveryManager();\n    drMgr->HandleJustDied(0);\n\
      }"
    language: cpp
  notes: This method is typically called internally by the core game loop or combat
    system when a player's health reaches zero. It may be invoked multiple times during
    a single death event depending on how the game handles different death states
    (e.g., instant death vs. delayed resurrection). The 'diff' parameter likely represents
    time elapsed since last update, though it's not used in the method signature as
    provided.
  warnings: Improper handling of this method can lead to incorrect player state management,
    preventing proper resurrection or causing client-server desynchronization. Ensure
    that all related death events are properly synchronized between server and client.
  related:
  - HandleRespawn
  - HandleCorpseUpdate
  - IsPlayerDead
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T04:07:30.575902'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
