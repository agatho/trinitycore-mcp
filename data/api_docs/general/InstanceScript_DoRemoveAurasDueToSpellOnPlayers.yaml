api:
  class: InstanceScript
  method: DoRemoveAurasDueToSpellOnPlayers
  signature: void InstanceScript::DoRemoveAurasDueToSpellOnPlayers(uint32 spell, bool
    includePets, bool includeControlled)
documentation:
  brief: Removes a specified aura from all players within the instance, with optional
    inclusion of pets and controlled creatures.
  description: The DoRemoveAurasDueToSpellOnPlayers method removes a specific spell
    aura from all players currently present in the instance. This method is typically
    used during instance events or boss encounters to cleanse players of harmful effects
    or debuffs that should be cleared when certain conditions are met. The method
    allows for fine-grained control over which creatures are affected by including
    or excluding pets and controlled units. It operates on the active instance's player
    list, ensuring that only players within the current instance context are targeted.
    This is particularly useful for managing spell effects during dynamic instance
    events where multiple players may be affected by the same aura.
  parameters:
  - name: spell
    description: The spell ID of the aura to be removed from players. This must correspond
      to a valid spell entry in the database.
  - name: includePets
    description: If true, removes the aura from player pets. If false, only removes
      the aura from the players themselves.
  - name: includeControlled
    description: If true, removes the aura from creatures controlled by players (such
      as guardians or totems). If false, only removes the aura from the players themselves.
  returns: null
  examples:
  - title: Remove a debuff from all players in the instance
    code: "void BossEncounter::OnBossDeath()\n{\n    // Remove a specific debuff from\
      \ all players in the instance\n    DoRemoveAurasDueToSpellOnPlayers(12345, false,\
      \ false);\n}"
    language: cpp
  - title: Remove an aura including pets and controlled creatures
    code: "void EventTrigger::OnEventStart()\n{\n    // Remove a buff from players,\
      \ their pets, and controlled creatures\n    DoRemoveAurasDueToSpellOnPlayers(67890,\
      \ true, true);\n}"
    language: cpp
  notes: This method is designed to work within the context of an instance script
    and should only be called when the instance has active players. The spell ID must
    exist in the database or the removal will have no effect. Performance-wise, this
    operation iterates through all players in the instance, so it should not be called
    excessively during high-frequency events.
  warnings: Calling this method without proper instance context may lead to undefined
    behavior. Ensure that the spell ID is valid and corresponds to an actual aura
    before calling this function. Be cautious when using includePets and includeControlled
    flags as they can affect more creatures than expected, potentially interfering
    with other gameplay mechanics.
  related:
  - DoRemoveAurasDueToSpellOnPlayers
  - DoRemoveAurasDueToSpell
  - DoRemoveAuraFromPlayers
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:28:29.424317'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
