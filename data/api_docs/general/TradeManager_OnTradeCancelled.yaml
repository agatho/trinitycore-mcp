api:
  class: TradeManager
  method: OnTradeCancelled
  signature: void TradeManager::OnTradeCancelled()
documentation:
  brief: Handles the cleanup and notification when a trade is cancelled by either
    player.
  description: The OnTradeCancelled method is invoked when a trade session between
    two players is terminated before completion. This method ensures proper cleanup
    of trade data, returns items to their respective inventories, and notifies both
    players of the cancellation. It is typically called as part of the trade system's
    state management to maintain game consistency and prevent item loss or duplication.
    The method does not accept any parameters and performs no direct return operations.
  parameters: []
  returns: null
  examples:
  - title: Basic Trade Cancellation Handling
    code: "void HandleTradeCancellation()\n{\n    TradeManager* tradeMgr = sWorld->GetTradeManager();\n\
      \    tradeMgr->OnTradeCancelled();\n}"
    language: cpp
  notes: This method is automatically invoked by the TrinityCore trade system when
    a player cancels a trade. Developers should not manually call this unless implementing
    custom trade logic or extending the base functionality. The method assumes that
    all necessary state checks have been performed prior to invocation.
  warnings: Do not call this method directly unless you are certain about the trade
    session's state and have properly handled any preconditions. Improper usage may
    lead to inconsistent inventory states or client-side errors.
  related:
  - OnTradeAccepted
  - OnTradeComplete
  - GetTradeStatus
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T05:07:02.887092'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
