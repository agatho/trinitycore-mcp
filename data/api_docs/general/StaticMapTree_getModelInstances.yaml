api:
  class: StaticMapTree
  method: getModelInstances
  signature: void StaticMapTree::getModelInstances(ModelInstance *& models, uint32
    & count)
documentation:
  brief: Retrieves all model instances stored within the static map tree.
  description: The getModelInstances method provides access to all ModelInstance objects
    that have been registered with the StaticMapTree. This functionality is essential
    for rendering and collision detection systems in TrinityCore's map management,
    allowing subsystems to iterate through and process all 3D models present in a
    given map tile. The method populates the provided output parameters with pointers
    to the model instances and their count. It is typically used during map loading,
    rendering passes, or physics calculations where all static geometry needs to be
    processed.
  parameters:
  - name: models
    description: Output parameter that will receive a pointer to an array of ModelInstance
      objects. The caller must ensure this pointer is properly allocated or managed
      to avoid memory issues.
  - name: count
    description: Output parameter that will be set to the number of ModelInstance
      objects available in the models array. This value indicates how many valid entries
      are present in the returned model list.
  returns: null
  examples:
  - title: Basic usage to retrieve and iterate through model instances
    code: "ModelInstance* instances = nullptr;\nuint32 instanceCount = 0;\nmapTree->getModelInstances(instances,\
      \ instanceCount);\n\nfor (uint32 i = 0; i < instanceCount; ++i)\n{\n    // Process\
      \ each model instance\n    ModelInstance& instance = instances[i];\n    // Perform\
      \ operations on the instance...\n}"
    language: cpp
  - title: Usage in a rendering context to gather all static geometry
    code: "void RenderMapTile(StaticMapTree* mapTree)\n{\n    ModelInstance* models\
      \ = nullptr;\n    uint32 count = 0;\n    mapTree->getModelInstances(models,\
      \ count);\n    \n    for (uint32 i = 0; i < count; ++i)\n    {\n        // Render\
      \ each model instance\n        RenderModel(models[i]);\n    }\n}"
    language: cpp
  notes: This method is part of the static map tree system which caches and organizes
    3D models for efficient access. The returned ModelInstance array should not be
    modified directly as it's managed by the StaticMapTree internally. Callers must
    not free or reallocate the memory pointed to by 'models' as it's owned by the
    StaticMapTree.
  warnings: The method does not perform any bounds checking on the output parameters,
    so callers must ensure that the 'models' pointer is valid and that sufficient
    memory has been allocated for the returned array. Improper handling of the returned
    data can lead to undefined behavior or crashes.
  related:
  - getAreaData
  - getLiquidData
  - getModelInstance
  - addModelInstance
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T01:45:05.410785'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
