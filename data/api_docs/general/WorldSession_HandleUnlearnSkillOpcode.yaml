api:
  class: WorldSession
  method: HandleUnlearnSkillOpcode
  signature: void WorldSession::HandleUnlearnSkillOpcode(WorldPackets::Spells::UnlearnSkill
    & packet)
documentation:
  brief: Handles the client request to unlearn a skill from the player's skill list.
  description: The HandleUnlearnSkillOpcode method processes an incoming packet from
    the client indicating that the player wishes to unlearn a specific skill. This
    typically occurs when a player uses a skill reset trainer or similar mechanic
    to remove a learned skill from their character. The method validates the skill's
    existence and ownership, then removes the skill from the player's active skill
    list. It is part of the core spell and skill management system in TrinityCore,
    ensuring that players can only unlearn skills they actually possess and have the
    appropriate permissions for.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleUnlearnSkillOpcode(WorldPackets::Spells::UnlearnSkill&\
      \ packet)\n{\n    // Validate skill exists and is learnable\n    if (!sSkillMgr->IsSkillValid(packet.SkillID))\n\
      \        return;\n\n    // Remove the skill from player's active skills\n  \
      \  Player* player = GetPlayer();\n    if (player && player->HasSkill(packet.SkillID))\n\
      \        player->RemoveSkill(packet.SkillID);\n}"
    language: cpp
  notes: This method is typically invoked during packet processing in the WorldSession
    class. It assumes that the client has already validated the skill ID and that
    the player has sufficient permissions to unlearn the skill. The actual skill removal
    is handled by the Player class's RemoveSkill() method.
  warnings: Improper handling of this opcode can lead to inconsistent skill states
    or exploits where players remove skills they shouldn't be able to. Always validate
    skill ownership and ensure proper permission checks before removing skills from
    a player.
  related:
  - Player::RemoveSkill
  - WorldSession::HandleLearnSkillOpcode
  - Player::HasSkill
metadata:
  confidence: 0.95
  generated_at: '2025-11-04T20:07:14.095162'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
