api:
  class: ScheduledChangeAI
  method: OnCharmed
  signature: void ScheduledChangeAI::OnCharmed(bool param0)
documentation:
  brief: Handles the event when a creature is charmed by a player, updating AI behavior
    accordingly.
  description: The OnCharmed method is invoked when a creature controlled by the ScheduledChangeAI
    is charmed by a player. This method typically updates the AI's internal state
    to reflect that the creature is no longer under the control of its original AI
    logic and should respond to the player's commands. It may also trigger changes
    in the creature's behavior, such as switching to a different AI state or modifying
    its target selection logic. The method is part of the AI system's event handling
    mechanism within TrinityCore's framework.
  parameters:
  - name: param0
    description: A boolean flag indicating whether the creature is being charmed (true)
      or uncharmed (false).
  returns: null
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void ScheduledChangeAI::UpdateAI(uint32 diff)\n{\n    if (m_charmed)\n\
      \        OnCharmed(true);\n    // Other AI logic\n}"
    language: cpp
  - title: Handling Charm State Changes
    code: "void ScheduledChangeAI::OnCharmed(bool charmed)\n{\n    if (charmed)\n\
      \    {\n        // Switch to player-controlled behavior\n        SetReactState(REACT_PASSIVE);\n\
      \        SetControlledByPlayer(true);\n    }\n    else\n    {\n        // Restore\
      \ original AI behavior\n        SetReactState(REACT_AGGRESSIVE);\n        SetControlledByPlayer(false);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called from within the core AI update loop or when
    charm effects are applied/removed. It's important to ensure that any state changes
    made in this method do not conflict with other AI behaviors or cause unexpected
    behavior in creature interactions.
  warnings: Improper handling of the charmed state may lead to creatures becoming
    unresponsive or behaving erratically. Ensure that all AI logic properly accounts
    for charm states and transitions.
  related:
  - OnCharmed
  - SetControlledByPlayer
  - SetReactState
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T03:10:48.157393'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
