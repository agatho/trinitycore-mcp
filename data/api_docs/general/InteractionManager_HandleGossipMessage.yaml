api:
  class: InteractionManager
  method: HandleGossipMessage
  signature: void InteractionManager::HandleGossipMessage(Player * bot, const WorldPacket
    & packet)
documentation:
  brief: Processes incoming gossip messages from players within the game world
  description: The HandleGossipMessage method is responsible for processing and handling
    gossip interactions initiated by players in the TrinityCore emulator. This method
    typically receives a WorldPacket containing the player's selected gossip options
    or choices, and routes the interaction to appropriate handlers based on the current
    gossip state. The method manages the flow of dialogue between NPCs and players,
    including handling quest acceptances, vendor interactions, trainer selections,
    and other interactive elements within the game's gossip system. It ensures proper
    state management and maintains consistency with the player's current interaction
    context.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the interacting player
      character. This parameter contains all player-specific data and state information
      needed for processing the gossip interaction.
  - name: packet
    description: Reference to a WorldPacket containing the raw network data from the
      client's gossip selection. This packet typically includes the gossip menu ID,
      selected option index, and any additional parameters required for the specific
      interaction type.
  returns: null
  examples:
  - title: Basic Gossip Message Handling
    code: "void MyInteractionManager::HandleGossipMessage(Player* bot, const WorldPacket&\
      \ packet)\n{\n    // Process the gossip selection\n    uint32 gossipId = packet.read<uint32>();\n\
      \    uint32 optionIndex = packet.read<uint32>();\n    \n    // Route to appropriate\
      \ handler based on gossip ID\n    switch (gossipId)\n    {\n        case 1001:\n\
      \            HandleQuestGossip(bot, optionIndex);\n            break;\n    \
      \    case 1002:\n            HandleVendorGossip(bot, optionIndex);\n       \
      \     break;\n        default:\n            bot->PlayerTalkClass->ClearMenus();\n\
      \            break;\n    }\n}"
    language: cpp
  notes: This method is typically called from the core packet handling system when
    a player selects an option in a gossip menu. The implementation should be thread-safe
    as it may be called from different network threads. Developers should ensure proper
    validation of packet data to prevent exploits, and maintain consistency with the
    player's current interaction state.
  warnings: Improper handling of gossip messages can lead to client disconnections
    or inconsistent NPC interactions. Always validate packet contents before processing,
    especially when dealing with user input. Be cautious about modifying player state
    within this method as it may affect other systems that depend on consistent interaction
    flow.
  related:
  - HandleGossipHello
  - HandleGossipSelectOption
  - Player::PlayerTalkClass
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T02:26:05.989538'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
