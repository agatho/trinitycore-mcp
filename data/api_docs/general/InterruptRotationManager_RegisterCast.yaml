api:
  class: InterruptRotationManager
  method: RegisterCast
  signature: void InterruptRotationManager::RegisterCast(Unit * caster, uint32 spellId,
    uint32 castTime)
documentation:
  brief: Registers a spell cast with the interrupt rotation manager to track and manage
    casting interruptions.
  description: The RegisterCast method is used to register a spell cast performed
    by a unit with the InterruptRotationManager. This allows the system to track casting
    information including the caster, spell ID, and cast time. The method is typically
    called when a spell begins casting to ensure proper handling of potential interruptions
    or rotation management during gameplay. It serves as part of the core interrupt
    and rotation control mechanisms in TrinityCore's AI and combat systems.
  parameters:
  - name: caster
    description: Pointer to the Unit object that is initiating the spell cast. This
      represents the entity performing the action, such as a player or NPC.
  - name: spellId
    description: The unique identifier of the spell being cast. This ID corresponds
      to entries in the spell database and determines which spell mechanics are applied.
  - name: castTime
    description: The duration in milliseconds that the spell casting will take. This
      value is used to determine when the cast completes or can be interrupted.
  returns: null
  examples:
  - title: Basic Spell Cast Registration
    code: 'InterruptRotationManager* irm = ...;

      Unit* player = ...;

      uint32 spellId = 12345;

      uint32 castTime = 2000;

      irm->RegisterCast(player, spellId, castTime);'
    language: cpp
  - title: Integration with Spell Casting Event
    code: "void OnSpellCastStart(Unit* caster, uint32 spellId)\n{\n    InterruptRotationManager*\
      \ irm = sObjectAccessor->GetInterruptRotationManager();\n    if (irm)\n    {\n\
      \        uint32 castTime = sSpellMgr->GetSpellCastTime(spellId);\n        irm->RegisterCast(caster,\
      \ spellId, castTime);\n    }\n}"
    language: cpp
  notes: This method is typically invoked during the start of a spell cast event.
    The InterruptRotationManager uses this registration to maintain internal state
    for managing interruptible casts and rotation logic. It's important that the cast
    time parameter accurately reflects the spell's casting duration as defined in
    the spell database.
  warnings: Ensure that the caster pointer is valid before calling RegisterCast, as
    passing a null pointer may cause undefined behavior. Also, make sure the spellId
    corresponds to an actual spell entry in the database to avoid inconsistencies
    in rotation management.
  related:
  - UnregisterCast
  - IsCasting
  - GetCastTime
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T04:54:43.962545'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
