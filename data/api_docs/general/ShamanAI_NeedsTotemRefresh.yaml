api:
  class: ShamanAI
  method: NeedsTotemRefresh
  signature: bool ShamanAI::NeedsTotemRefresh(TotemType type) const
documentation:
  brief: Determines whether a specific totem type requires refreshing based on current
    AI state and totem duration.
  description: The NeedsTotemRefresh method evaluates if a given totem type needs
    to be refreshed or re-cast. This is typically used in Shaman AI logic to determine
    when totems such as Earthbind Totem, Fire Nova Totem, or other totems should be
    replaced due to expiration or low duration. The method checks the current state
    of the totem and compares it against internal thresholds for refresh timing. It's
    an integral part of maintaining optimal totem uptime during combat scenarios.
  parameters: []
  returns: Returns true if the specified totem type requires a refresh, false otherwise.
    A return value of true indicates that the totem is either expired, nearly expired,
    or has fallen below a minimum duration threshold requiring reapplication.
  examples:
  - title: Check if Earthbind Totem needs refresh
    code: "if (shamanAI->NeedsTotemRefresh(TOTEM_TYPE_EARTHBIND)) {\n    // Cast Earthbind\
      \ Totem again\n    shamanAI->CastSpell(SPELL_EARTHBIND_TOTEM);\n}"
    language: cpp
  - title: General totem refresh logic
    code: "for (int i = 0; i < TOTEM_TYPE_MAX; ++i) {\n    if (shamanAI->NeedsTotemRefresh(static_cast<TotemType>(i)))\
      \ {\n        // Handle totem refresh logic\n        shamanAI->HandleTotemRefresh(static_cast<TotemType>(i));\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called during AI update cycles and relies on internal
    totem tracking mechanisms. It may be influenced by Shaman's totem management settings
    and spell cooldowns. The exact refresh timing thresholds are determined by the
    game's internal logic and may vary based on player level, gear, or talent configurations.
  warnings: Ensure that this method is only called when a valid totem type is provided;
    passing invalid totem types may lead to undefined behavior. Also note that calling
    this method without proper AI state management can cause unnecessary spell casting
    or inconsistent totem uptime.
  related:
  - ShamanAI::HasTotem
  - ShamanAI::CastTotem
  - ShamanAI::UpdateTotems
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T19:38:32.140998'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
