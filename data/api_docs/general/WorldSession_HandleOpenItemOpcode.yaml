api:
  class: WorldSession
  method: HandleOpenItemOpcode
  signature: void WorldSession::HandleOpenItemOpcode(WorldPackets::Spells::OpenItem
    & packet)
documentation:
  brief: Processes the client's request to open a container item and retrieve its
    contents
  description: The HandleOpenItemOpcode method handles the client's request to open
    a container item, such as a lootable chest or bag. When invoked, it processes
    the packet sent by the client containing the item's GUID, validates that the player
    can interact with the item, and initiates the process of displaying the item's
    contents. This typically involves checking if the item is a valid container, verifying
    the player's proximity to the item, and sending back the appropriate response
    packet with the container's contents. The method is part of the WorldSession's
    packet handling system and integrates with the game's inventory and loot mechanics.
  parameters:
  - name: packet
    description: The WorldPackets::Spells::OpenItem packet containing the GUID of
      the item to be opened
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleOpenItemOpcode(WorldPackets::Spells::OpenItem&\
      \ packet)\n{\n    if (Player* player = GetPlayer())\n    {\n        Item* item\
      \ = player->GetItemByGuid(packet.ItemGUID);\n        if (item && item->IsContainer())\n\
      \        {\n            // Process opening the container\n            player->SendLoot(item->GetGUID(),\
      \ LOOT_CONTAINER);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called from within the WorldSession's packet handling
    loop. It assumes that the client has already validated the item's existence and
    accessibility. The actual container opening logic may involve additional checks
    for player proximity, item validity, and loot permissions.
  warnings: Improper handling of this opcode can lead to security vulnerabilities
    or exploits related to item access. Always validate that the player has proper
    access rights before allowing container contents to be retrieved. Ensure that
    the item GUID is properly validated against the player's inventory and world objects.
  related:
  - HandleLootOpcode
  - SendLoot
  - GetPlayer
  - GetItemByGuid
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:22:23.776851'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
