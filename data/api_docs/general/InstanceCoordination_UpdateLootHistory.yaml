api:
  class: InstanceCoordination
  method: UpdateLootHistory
  signature: void InstanceCoordination::UpdateLootHistory(Group * group, uint32 itemId,
    Player * recipient)
documentation:
  brief: Updates the loot history for a group after an item is awarded to a player.
  description: The UpdateLootHistory method records the distribution of a specific
    item to a player within a group context. This function is typically invoked when
    a group member receives loot from a dungeon or raid instance, ensuring that the
    loot tracking system maintains accurate records of who received what item and
    when. It plays a crucial role in maintaining loot consistency across the game
    world, particularly for systems like Need Before Greed, Loot Master assignments,
    and loot statistics tracking. The method likely updates internal data structures
    that track group loot history, potentially including timestamps, player GUIDs,
    item IDs, and group identifiers.
  parameters:
  - name: group
    description: Pointer to the Group object representing the group that received
      the loot. Must be a valid group instance with at least one member.
  - name: itemId
    description: The unique identifier of the item that was awarded. This corresponds
      to the ItemTemplate entry in the database and must represent a valid item.
  - name: recipient
    description: Pointer to the Player object who received the loot. Must be a valid
      player instance and a member of the provided group.
  returns: null
  examples:
  - title: Basic Loot History Update
    code: 'Group* group = player->GetGroup();

      uint32 itemId = 12345;

      InstanceCoordination::UpdateLootHistory(group, itemId, player);'
    language: cpp
  - title: Updating Loot History in a Raid Context
    code: "if (player->GetGroup() && player->GetGroup()->isRaidGroup()) {\n    uint32\
      \ lootId = sObjectMgr->GetLootIdForItem(12345);\n    InstanceCoordination::UpdateLootHistory(player->GetGroup(),\
      \ lootId, player);\n}"
    language: cpp
  notes: This method likely interacts with internal loot tracking systems and may
    update database entries for historical loot data. It's important to ensure that
    the group and recipient parameters are valid before calling this function to prevent
    undefined behavior. The method may also trigger additional events or notifications
    related to loot distribution within the instance.
  warnings: Calling this method with invalid group or player pointers can lead to
    crashes or corrupted internal state. Ensure that the player is actually a member
    of the provided group, and that the item ID corresponds to an existing item template
    in the database.
  related:
  - GetLootHistory
  - ClearLootHistory
  - UpdateGroupLootSettings
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T02:42:25.938020'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
