api:
  class: ShadowPriestRefactored
  method: ExecuteSingleTargetRotation
  signature: void ShadowPriestRefactored::ExecuteSingleTargetRotation(int * target)
documentation:
  brief: Executes the shadow priest's single-target rotation logic for the specified
    target.
  description: The ExecuteSingleTargetRotation method implements the core combat logic
    for a Shadow Priest in single-target scenarios. It evaluates the current state
    of the player and their target to determine the optimal sequence of spells and
    abilities to cast. This includes managing DoTs, handling mana efficiency, and
    prioritizing damage-over-time effects. The method is typically called during the
    AI's decision-making cycle and integrates with the TrinityCore's combat system
    to ensure proper spell casting order and timing. It assumes that a valid target
    has been selected and that the player has sufficient resources (mana, runes, etc.)
    to execute the rotation.
  parameters:
  - name: target
    description: Pointer to an integer representing the target's identifier or index
      within the combat system. This value is used to retrieve the target object from
      the AI's internal target list and must be a valid identifier for an active combatant.
  returns: null
  examples:
  - title: Basic Usage in Combat AI
    code: "void ShadowPriestAI::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n\
      \        return;\n\n    int targetId = m_creature->GetVictim()->GetGUID().GetRawValue();\n\
      \    ExecuteSingleTargetRotation(&targetId);\n}"
    language: cpp
  notes: This method is part of the AI decision-making process and should only be
    called when a valid combat target exists. The implementation relies on internal
    state tracking for DoT management, mana levels, and spell cooldowns. It does not
    perform any direct spell casting but rather determines what actions should be
    taken.
  warnings: Ensure that the target parameter points to a valid combatant before calling
    this method; otherwise, undefined behavior may occur. The method assumes that
    all necessary preconditions for spell casting are met by the caller or through
    internal checks.
  related:
  - ExecuteAOORotation
  - ExecuteHealRotation
  - GetTarget
  - IsSpellReady
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T11:10:25.983981'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
