api:
  class: PathfindingUtils
  method: CalculateFormationPosition
  signature: int PathfindingUtils::CalculateFormationPosition(const int & leaderPos,
    float angle, float distance)
documentation:
  brief: Calculates a formation position relative to a leader based on angle and distance
  description: The CalculateFormationPosition method computes a target position in
    a formation for a unit or NPC, using the leader's position as a reference point.
    It takes an angle and distance from the leader to determine where the follower
    should be positioned. This is commonly used in group AI behavior for maintaining
    formation during movement or combat. The method returns an identifier that can
    be used to reference the calculated position within the pathfinding system.
  parameters:
  - name: leaderPos
    description: The reference position of the leader unit, typically represented
      as a unique identifier or coordinate value
  - name: angle
    description: The angular offset in radians from the leader's facing direction
      to determine the formation position
  - name: distance
    description: The radial distance from the leader's position to calculate the formation
      position
  returns: An integer identifier representing the calculated formation position that
    can be used for pathfinding or movement targeting. Returns -1 if calculation fails
    due to invalid parameters.
  examples:
  - title: Basic Formation Position Calculation
    code: int posId = PathfindingUtils::CalculateFormationPosition(leaderGuid, M_PI_2,
      3.0f); // Calculate position at 90 degrees, 3 units away from leader
    language: cpp
  - title: Dynamic Formation Position Update
    code: 'float angle = GetUnitOrientation(target) + M_PI; // Behind target

      int posId = PathfindingUtils::CalculateFormationPosition(leaderGuid, angle,
      5.0f); // Position 5 units behind leader'
    language: cpp
  notes: This method assumes the leader position is valid and accessible within the
    current pathfinding context. The returned integer ID should be used immediately
    for pathfinding operations as it may become invalid if the formation changes or
    the leader moves significantly.
  warnings: Do not use the returned position ID after modifying the leader's position
    or changing formation parameters without recalculating. Invalid angle or distance
    values can lead to unexpected results or calculation failures.
  related:
  - GetFormationPosition
  - UpdateFormationPositions
  - ValidateFormationPosition
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T06:45:50.312103'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
