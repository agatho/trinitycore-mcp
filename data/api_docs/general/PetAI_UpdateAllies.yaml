api:
  class: PetAI
  method: UpdateAllies
  signature: void PetAI::UpdateAllies()
documentation:
  brief: Updates the list of nearby friendly units that the pet AI considers when
    making decisions.
  description: The UpdateAllies method in PetAI is responsible for maintaining an
    up-to-date list of nearby friendly targets, including the pet's owner and other
    nearby friendly creatures. This method is typically called during the pet's AI
    update cycle to ensure that the pet has current information about its allies for
    decision-making purposes such as targeting, avoidance, or support behaviors. The
    method iterates through the pet's vicinity and identifies units that are considered
    allies based on faction and relationship status. It updates internal data structures
    used by the pet AI to determine appropriate actions in combat or non-combat situations.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in AI update loop
    code: "void PetAI::UpdateAllies()\n{\n    // Clear existing ally list\n    m_allies.clear();\n\
      \    \n    // Find nearby friendly units\n    Map* map = GetUnit()->GetMap();\n\
      \    if (!map)\n        return;\n    \n    // Add owner to allies\n    if (Unit*\
      \ owner = GetUnit()->GetOwner())\n        m_allies.push_back(owner);\n    \n\
      \    // Add other friendly units in range\n    // Implementation details omitted\
      \ for brevity\n}"
    language: cpp
  notes: This method is typically called automatically by the AI system during each
    update cycle. Developers should be aware that ally detection uses faction-based
    checks and may not include all units that are technically friendly in complex
    scenarios. The method performs spatial queries to find nearby units, so performance
    can be affected by the number of units in the pet's vicinity.
  warnings: This method should not be called directly from outside the AI system unless
    you understand the implications of modifying the ally list during active combat
    or movement. Modifying ally lists during an AI update cycle could lead to inconsistent
    behavior or race conditions if not handled carefully.
  related:
  - PetAI::GetAllies
  - PetAI::IsAlly
  - PetAI::Update
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T01:05:20.064869'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
