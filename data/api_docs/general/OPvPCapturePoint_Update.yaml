api:
  class: OPvPCapturePoint
  method: Update
  signature: void OPvPCapturePoint::Update(int diff)
documentation:
  brief: Updates the capture point state based on elapsed time and game conditions.
  description: The Update method is responsible for processing the state changes of
    an OPvPCapturePoint over time. It handles the logic for capturing or losing control
    of the point, including updating ownership, managing capture progress timers,
    and triggering relevant events. This method is typically called by the game loop
    at regular intervals to ensure real-time updates of the capture point's status.
    The method uses the provided time delta (diff) parameter to accurately calculate
    how much time has passed since the last update, which is essential for smooth
    progression of capture mechanics.
  parameters:
  - name: diff
    description: The time elapsed in milliseconds since the last update call. This
      value is used to determine how much the capture progress should advance or how
      long the point has been held by a faction.
  returns: null
  examples:
  - title: Basic Update Call
    code: "void WorldSession::UpdateOPvPCapturePoints()\n{\n    for (auto& capturePoint\
      \ : m_capturePoints)\n    {\n        capturePoint->Update(diff);\n    }\n}"
    language: cpp
  - title: Custom Update Logic
    code: "class MyCapturePoint : public OPvPCapturePoint\n{\npublic:\n    void Update(int\
      \ diff) override\n    {\n        // Call parent implementation for standard\
      \ behavior\n        OPvPCapturePoint::Update(diff);\n        \n        // Add\
      \ custom logic here\n        if (m_captureProgress >= 100)\n        {\n    \
      \        // Trigger special event when capture is complete\n            HandleCaptureComplete();\n\
      \        }\n    }\n};"
    language: cpp
  notes: This method is called frequently by the game engine's main loop, so performance
    is critical. Implementations should avoid heavy computations or database access
    within this method. The diff parameter represents actual elapsed time and should
    be used to normalize any time-dependent calculations for consistent behavior across
    different server loads.
  warnings: Do not modify the capture point's ownership directly inside this method
    unless absolutely necessary, as it may interfere with the core capture logic.
    Always call the base class implementation when overriding this method to ensure
    standard behavior is maintained.
  related:
  - GetCapturePointData
  - IsUnderAttack
  - GetOwnerFaction
  - SetOwner
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T03:04:51.597711'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
