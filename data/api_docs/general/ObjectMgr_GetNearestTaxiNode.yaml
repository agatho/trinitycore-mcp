api:
  class: ObjectMgr
  method: GetNearestTaxiNode
  signature: uint32 ObjectMgr::GetNearestTaxiNode(float x, float y, float z, uint32
    mapid, uint32 team)
documentation:
  brief: Finds the nearest taxi node to a given location on a specific map for a player
    of the specified team.
  description: The GetNearestTaxiNode method searches through all available taxi nodes
    in the game world and returns the unique identifier (ID) of the closest one to
    the provided coordinates. This function is typically used by the game engine to
    determine which taxi node a player should be teleported to when they interact
    with a taxi master or attempt to use a taxi service. The method takes into account
    the map ID and team affiliation, ensuring that only nodes relevant to the player's
    current location and faction are considered. It performs a spatial search using
    3D coordinates and returns the ID of the nearest valid taxi node.
  parameters:
  - name: x
    description: The X coordinate of the player's position in the game world
  - name: y
    description: The Y coordinate of the player's position in the game world
  - name: z
    description: The Z coordinate of the player's position in the game world
  - name: mapid
    description: The map ID where the search should be performed. This determines
      which set of taxi nodes to consider
  - name: team
    description: The team ID (ALLIANCE or HORDE) used to filter taxi nodes that are
      accessible to the player's faction
  returns: Returns the unique identifier (ID) of the nearest taxi node. If no valid
    taxi node is found within the specified parameters, it returns 0.
  examples:
  - title: Finding nearest taxi node for a player
    code: "uint32 nodeId = sObjectMgr->GetNearestTaxiNode(playerX, playerY, playerZ,\
      \ playerMapId, playerTeam);\nif (nodeId != 0)\n{\n    // Proceed with taxi node\
      \ usage\n    TC_LOG_DEBUG(\"taxi\", \"Nearest taxi node ID: %u\", nodeId);\n\
      }\nelse\n{\n    // No valid taxi node found\n    TC_LOG_ERROR(\"taxi\", \"No\
      \ taxi node found near position (%f, %f, %f)\", playerX, playerY, playerZ);\n\
      }"
    language: cpp
  notes: This method performs a search through all registered taxi nodes in the database.
    For performance reasons, it is recommended to cache results when possible and
    avoid calling this function excessively during gameplay. The implementation uses
    spatial indexing or similar optimization techniques internally to find the nearest
    node efficiently.
  warnings: The method may return 0 if no valid taxi node exists for the specified
    map and team combination. This can happen in rare cases such as when a player
    is on an unsupported map or when faction-specific nodes are not properly configured
    in the database.
  related:
  - GetTaxiNodeById
  - GetTaxiPath
  - LoadTaxiNodes
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T09:28:22.611991'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
