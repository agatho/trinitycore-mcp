api:
  class: DefensiveBehaviorManager
  method: IsDamageMostlyMagical
  signature: bool DefensiveBehaviorManager::IsDamageMostlyMagical() const
documentation:
  brief: Determines whether the majority of incoming damage to the unit is magical
    in nature.
  description: The IsDamageMostlyMagical method evaluates the type of damage currently
    being received by the unit managed by the DefensiveBehaviorManager. It returns
    true if the majority of the damage is classified as magical, and false otherwise.
    This method is typically used in AI decision-making processes to determine appropriate
    defensive behaviors, such as whether to use magic resistance abilities or physical
    mitigation techniques. The determination is based on tracking the damage types
    over a short period of time to establish a trend rather than individual damage
    instances.
  parameters: []
  returns: Returns true if the majority of incoming damage is magical; otherwise returns
    false.
  examples:
  - title: Basic Usage in AI Logic
    code: "if (defensiveManager->IsDamageMostlyMagical())\n{\n    // Use magic resistance\
      \ abilities\n    unit->CastSpell(unit, MAGIC_RESISTANCE_SPELL_ID, true);\n}"
    language: cpp
  - title: Conditional Behavior Based on Damage Type
    code: "if (defensiveManager->IsDamageMostlyMagical())\n{\n    // Switch to magical\
      \ defense strategy\n    unit->SetReactState(REACT_DEFENSIVE);\n    unit->AddAura(MAGIC_IMMUNITY_AURA_ID);\n\
      }\nelse\n{\n    // Switch to physical defense strategy\n    unit->SetReactState(REACT_AGGRESSIVE);\n\
      \    unit->AddAura(PHYSICAL_IMMUNITY_AURA_ID);\n}"
    language: cpp
  notes: This method relies on tracking damage types over a brief time window for
    accuracy. It may return false if the damage types are evenly split or if magical
    damage is minimal compared to physical damage. The implementation likely uses
    internal counters or rolling averages to determine the damage type distribution.
  warnings: The method's accuracy depends on consistent damage tracking. If damage
    events are not properly recorded or if there are gaps in tracking, the result
    may be misleading. This method should not be used as the sole determinant for
    complex AI decisions without additional context checks.
  related:
  - GetDamageTypeCount
  - IsDamageMostlyPhysical
  - GetMostCommonDamageType
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T15:44:50.386096'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
