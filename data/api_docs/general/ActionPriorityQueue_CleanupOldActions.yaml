api:
  class: ActionPriorityQueue
  method: CleanupOldActions
  signature: void ActionPriorityQueue::CleanupOldActions(uint32 maxAgeMs)
documentation:
  brief: Removes actions from the queue that exceed the specified maximum age threshold.
  description: The CleanupOldActions method iterates through the ActionPriorityQueue
    and removes any queued actions that have exceeded the maximum allowed age, specified
    in milliseconds. This ensures that stale or outdated actions do not accumulate
    in the queue, which could otherwise lead to performance degradation or unexpected
    behavior. The cleanup process is typically invoked periodically by the AI system
    to maintain queue efficiency and relevance. This method does not affect actions
    that are currently being processed or have not yet reached their age threshold.
  parameters:
  - name: maxAgeMs
    description: The maximum allowable age in milliseconds for queued actions before
      they are considered stale and removed from the queue.
  returns: null
  examples:
  - title: Basic usage to clean up old actions
    code: 'ActionPriorityQueue queue;

      // ... add some actions to the queue ...

      queue.CleanupOldActions(30000); // Remove actions older than 30 seconds'
    language: cpp
  - title: Periodic cleanup in AI update loop
    code: "void AIUpdate()\n{\n    // ... other AI logic ...\n    actionQueue.CleanupOldActions(60000);\
      \ // Clean up actions older than 1 minute\n    // ... continue with action processing\
      \ ...\n}"
    language: cpp
  notes: This method is typically called from within the AI update cycle to ensure
    that the queue remains efficient and does not grow indefinitely. It's important
    to note that this cleanup process is non-blocking and operates on a copy of the
    queue data to avoid potential race conditions during concurrent access.
  warnings: null
  related:
  - AddAction
  - GetNextAction
  - ClearQueue
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T22:29:06.132103'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
