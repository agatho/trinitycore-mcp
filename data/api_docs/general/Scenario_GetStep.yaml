api:
  class: Scenario
  method: GetStep
  signature: const ScenarioStepEntry * Scenario::GetStep() const
documentation:
  brief: Retrieves the current scenario step entry for the scenario.
  description: The GetStep method returns a pointer to the ScenarioStepEntry object
    that represents the current step in the scenario. This entry contains metadata
    about the active step, such as objectives, rewards, and progression requirements.
    The method is typically used during scenario progression to determine what actions
    are currently required or available to the player. It's important to note that
    this method may return a null pointer if the scenario has not yet started or has
    completed its final step.
  parameters: []
  returns: A const pointer to the ScenarioStepEntry object representing the current
    step in the scenario, or nullptr if no valid step is active.
  examples:
  - title: Basic Usage
    code: "const ScenarioStepEntry* step = scenario->GetStep();\nif (step)\n{\n  \
      \  // Process current scenario step\n    sLog->outString(\"Current step ID:\
      \ %u\", step->ID);\n}"
    language: cpp
  - title: Checking Step Objectives
    code: "const ScenarioStepEntry* step = scenario->GetStep();\nif (step && step->CriteriaID[0]\
      \ > 0)\n{\n    // Check if player has completed the main objective\n    Player*\
      \ player = ...; // Get player reference\n    if (player->GetAchievementMgr()->CanCompleteCriteriaTree(step->CriteriaID[0]))\n\
      \    {\n        // Proceed with step completion logic\n    }\n}"
    language: cpp
  notes: This method is primarily used for scenario progression tracking and objective
    validation. The returned ScenarioStepEntry pointer should be treated as read-only
    since it represents static data from the game's database. The method does not
    perform any internal state updates or modifications to the scenario itself.
  warnings: Always check for null return values before dereferencing the returned
    pointer. Accessing a null pointer will result in undefined behavior and likely
    crash the application. Additionally, be aware that ScenarioStepEntry data is loaded
    from server databases at startup and should not be modified during runtime.
  related:
  - GetState
  - SetStep
  - IsScenarioComplete
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T19:12:41.027576'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
