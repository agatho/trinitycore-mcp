api:
  class: ProcEventInfo
  method: GetSpellPhaseMask
  signature: ProcFlagsSpellPhase ProcEventInfo::GetSpellPhaseMask() const
documentation:
  brief: Retrieves the spell phase mask associated with the proc event.
  description: The GetSpellPhaseMask method returns the ProcFlagsSpellPhase value
    that represents the current phase conditions under which a spell proc occurred.
    This bitmask is used by the TrinityCore framework to determine whether a proc
    event should trigger based on specific game phases such as pre-combat, combat,
    or post-combat states. The returned value can be used in conditional logic to
    enforce phase-specific behavior for procs, ensuring that abilities only activate
    under appropriate circumstances during the spell's execution cycle.
  parameters: []
  returns: A ProcFlagsSpellPhase bitmask indicating the phase conditions applicable
    to the proc event. This value combines multiple phase flags (e.g., PHASE_MASK_COMBAT,
    PHASE_MASK_NON_COMBAT) that define when and how the proc can occur during a spell's
    lifecycle.
  examples:
  - title: Basic Usage in Proc Handler
    code: "void MySpell::HandleProc(ProcEventInfo& eventInfo)\n{\n    ProcFlagsSpellPhase\
      \ phaseMask = eventInfo.GetSpellPhaseMask();\n    if (phaseMask & PHASE_MASK_COMBAT)\n\
      \    {\n        // Apply combat-specific proc effects\n        DoCombatProcEffect();\n\
      \    }\n}"
    language: cpp
  - title: Checking Multiple Phases
    code: "bool IsAllowedProc(ProcEventInfo& eventInfo)\n{\n    ProcFlagsSpellPhase\
      \ phaseMask = eventInfo.GetSpellPhaseMask();\n    return (phaseMask & (PHASE_MASK_COMBAT\
      \ | PHASE_MASK_NON_COMBAT)) != 0;\n}"
    language: cpp
  notes: This method is typically called within the context of spell proc handlers
    where phase-sensitive behavior is required. The returned mask may be combined
    with other flags to form complex conditional logic for determining proc eligibility.
  warnings: null
  related:
  - GetSpellInfo
  - GetProcFlags
  - GetDamage
metadata:
  confidence: 0.95
  generated_at: '2025-11-03T20:58:48.183472'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
