api:
  class: Item
  method: CanBeMergedPartlyWith
  signature: InventoryResult Item::CanBeMergedPartlyWith(const ItemTemplate * proto)
    const
documentation:
  brief: Determines whether an item can be partially merged with another item of the
    same type.
  description: This method checks if the current item can be partially merged with
    another item that has the same template. It evaluates whether the item's stack
    count allows for partial merging, considering factors such as item quality, duration,
    and other attributes. The method is typically used during item stacking operations
    in the game mechanics to determine if items of the same type can be combined into
    a single stack with reduced quantity.
  parameters: []
  returns: Returns an InventoryResult indicating whether the merge operation is possible.
    Possible return values include 'OK' for success, 'InventoryResultItemNotSame'
    for items not being the same type, or 'InventoryResultItemCannotStack' for items
    that cannot be stacked due to various constraints.
  examples:
  - title: Basic usage example
    code: 'Item* item1 = new Item();

      Item* item2 = new Item();

      InventoryResult result = item1->CanBeMergedPartlyWith(item2->GetTemplate());'
    language: cpp
  notes: This method is part of the item stacking logic and should be used in conjunction
    with other inventory-related methods to determine item merge feasibility. Performance
    considerations include checking for valid item templates and ensuring proper stack
    counts.
  warnings: The method may not always return 'OK' even if items are identical; it
    depends on various factors including item quality, duration, and stack count.
    Be cautious when relying on this method for item stacking operations as it may
    not always accurately reflect real-world game behavior.
  related:
  - Item::CanStack
  - Item::GetTemplate
  - Item::GetStackCount
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T05:19:25.109600'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
