api:
  class: TargetSelectionUtils
  method: GetMostWoundedAlly
  signature: Unit * TargetSelectionUtils::GetMostWoundedAlly(Player * bot, float maxRange)
documentation:
  brief: Returns the most wounded ally unit within the specified range for a given
    player bot.
  description: The GetMostWoundedAlly method identifies and returns the ally unit
    that has the lowest health percentage within the specified maximum range of the
    provided player bot. This utility is commonly used in AI decision-making processes
    to prioritize healing or support actions towards the most critically injured friendly
    target. The method evaluates all valid ally units in range, calculates their health
    percentages, and selects the one with the lowest value. It considers only units
    that are alive, within the specified range, and not currently dead or invalid.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that will be used
      as the reference point for finding allies. Must be a valid player instance.
  - name: maxRange
    description: Maximum distance in yards within which to search for ally units.
      Units beyond this range will be ignored in the selection process.
  returns: Pointer to the Unit object representing the most wounded ally within range,
    or nullptr if no valid allies are found within the specified range.
  examples:
  - title: Basic usage to find the most wounded ally
    code: "Player* myBot = ...;\nfloat range = 30.0f;\nUnit* mostWoundedAlly = TargetSelectionUtils::GetMostWoundedAlly(myBot,\
      \ range);\nif (mostWoundedAlly != nullptr)\n{\n    // Perform action on the\
      \ most wounded ally\n    printf(\"Found most wounded ally with %d health\\n\"\
      , mostWoundedAlly->GetHealth());\n}"
    language: cpp
  - title: Using in a healing decision logic
    code: "Player* bot = ...;\nUnit* target = TargetSelectionUtils::GetMostWoundedAlly(bot,\
      \ 40.0f);\nif (target != nullptr && target->IsAlive())\n{\n    // Cast healing\
      \ spell on the most wounded ally\n    bot->CastSpell(target, 8004, true); //\
      \ Example: Healing Wave\n}"
    language: cpp
  notes: This method performs a linear search through all valid units within range,
    so performance may degrade with many nearby units. The method does not account
    for threat or other AI-specific targeting preferences beyond health percentage.
    It is recommended to cache the result if used multiple times in quick succession.
  warnings: Ensure that the bot parameter is a valid Player object and not null before
    calling this method. If maxRange is negative, the behavior is undefined. The returned
    Unit pointer may become invalid if the target dies or leaves the area during execution.
  related:
  - GetMostWoundedEnemy
  - GetNearestTarget
  - GetHighestThreatTarget
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T17:25:50.752288'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
