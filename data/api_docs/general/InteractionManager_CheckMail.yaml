api:
  class: InteractionManager
  method: CheckMail
  signature: InteractionResult InteractionManager::CheckMail(Player * bot, GameObject
    * mailbox, bool takeAll)
documentation:
  brief: Checks and processes mailbox interactions for a bot player, optionally taking
    all items.
  description: The CheckMail method handles the interaction with a mailbox GameObject
    for a specified bot player. It evaluates whether the mailbox contains any mail
    and processes the retrieval of items based on the takeAll flag. This method is
    typically used in AI scripts to automate mailbox interactions, allowing bots to
    automatically collect mail without manual intervention. The method ensures proper
    handling of mailbox state changes and item distribution to the player's inventory.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that will interact
      with the mailbox
  - name: mailbox
    description: Pointer to the GameObject representing the mailbox to be checked
      and interacted with
  - name: takeAll
    description: Boolean flag indicating whether to take all items from the mailbox
      (true) or process them individually (false)
  returns: Returns an InteractionResult enum value indicating the outcome of the mailbox
    interaction. Possible values include SUCCESS, FAILED, or IN_PROGRESS depending
    on the operation's completion state.
  examples:
  - title: Basic Mail Check
    code: "InteractionResult result = interactionManager.CheckMail(botPlayer, mailboxObject,\
      \ false);\nif (result == InteractionResult::SUCCESS)\n{\n    // Mail processing\
      \ completed successfully\n}"
    language: cpp
  - title: Take All Mail Items
    code: "GameObject* mailBox = botPlayer->GetMap()->GetGameObject(ObjectGuid::Create<HighGuid::GameObject>(mailboxGUID));\n\
      InteractionResult result = interactionManager.CheckMail(botPlayer, mailBox,\
      \ true);\nif (result == InteractionResult::SUCCESS)\n{\n    // All items taken\
      \ from mailbox\n    sLog->outString(\"Bot successfully took all mail items\"\
      );\n}"
    language: cpp
  notes: This method assumes that the bot player has proper access rights to the mailbox
    and that the mailbox GameObject is valid. The implementation may involve database
    operations for mail retrieval and inventory management. Performance considerations
    include potential delays during mail processing when takeAll is true.
  warnings: Ensure that the bot player is within range of the mailbox before calling
    this method, as it may fail if the player cannot interact with the object. Improper
    handling of the returned InteractionResult can lead to unexpected behavior in
    automated scripts.
  related:
  - InteractWithGameObject
  - ProcessMail
  - TakeAllItemsFromMailbox
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T02:33:57.840299'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
