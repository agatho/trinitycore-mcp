api:
  class: WorldSession
  method: HandlePetAction
  signature: void WorldSession::HandlePetAction(WorldPackets::Pet::PetAction & packet)
documentation:
  brief: Processes pet action commands sent by the client, handling pet behavior and
    control.
  description: The HandlePetAction method processes incoming pet action packets from
    players, interpreting commands such as attack, follow, stay, and other pet behaviors.
    This method serves as the core handler for all pet-related actions initiated by
    the client, ensuring proper synchronization between player intent and pet state
    in the game world. It validates the pet's existence and ownership before executing
    any action, and may trigger additional game mechanics such as cooldowns or resource
    consumption. The method is typically invoked when a player sends a command to
    their summoned pet through the user interface.
  parameters: []
  returns: null
  examples:
  - title: Basic Pet Action Handling
    code: "void WorldSession::HandlePetAction(WorldPackets::Pet::PetAction& packet)\n\
      {\n    if (!GetPlayer() || !GetPlayer()->GetPet())\n        return;\n\n    //\
      \ Process pet action based on packet data\n    switch (packet.Action)\n    {\n\
      \        case PET_ACTION_ATTACK:\n            GetPlayer()->GetPet()->SetReactState(REACT_AGGRESSIVE);\n\
      \            break;\n        case PET_ACTION_FOLLOW:\n            GetPlayer()->GetPet()->SetReactState(REACT_DEFENSIVE);\n\
      \            break;\n        default:\n            break;\n    }\n}"
    language: cpp
  notes: This method is part of the core WorldSession packet handling system and should
    not be called directly from other modules. The packet structure contains flags
    and identifiers that must be validated before processing to prevent exploits.
    Performance considerations include checking pet ownership and validating action
    types efficiently.
  warnings: Improper validation of packet data can lead to security vulnerabilities
    or unexpected behavior. Always ensure the player owns the pet before executing
    actions, and validate all incoming command parameters against allowed ranges.
  related:
  - HandlePetAction
  - HandlePetStopAttack
  - HandlePetSetAction
  - HandlePetAbandon
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:17:00.751236'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
