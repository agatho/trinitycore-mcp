api:
  class: MapManager
  method: CreateGarrison
  signature: GarrisonMap * MapManager::CreateGarrison(uint32 mapId, uint32 instanceId,
    Player * owner)
documentation:
  brief: Creates a new garrison map instance for the specified player and returns
    a pointer to it.
  description: The CreateGarrison method is responsible for initializing and returning
    a GarrisonMap object that represents a player's garrison within the game world.
    This method is typically invoked when a player establishes or accesses their garrison,
    creating a dedicated map instance associated with their unique identifier and
    the specified map ID. The created garrison map allows for managing garrison-specific
    content such as buildings, followers, and other garrison-related mechanics. It
    requires valid map and instance identifiers along with a valid player reference
    to ensure proper instantiation.
  parameters:
  - name: mapId
    description: The unique identifier of the garrison map type. This value determines
      which specific garrison layout and mechanics are applied to the created instance.
  - name: instanceId
    description: The unique identifier for this particular garrison instance. Used
      to differentiate between multiple garrison instances belonging to different
      players or scenarios.
  - name: owner
    description: Pointer to the Player object that owns this garrison. Must be a valid
      player reference; otherwise, the method may fail or return null.
  returns: A pointer to the newly created GarrisonMap instance if successful, or nullptr
    if creation fails due to invalid parameters or resource constraints.
  examples:
  - title: Basic Usage of CreateGarrison
    code: "GarrisonMap* garrison = sMapMgr->CreateGarrison(1234, 5678, player);\n\
      if (garrison != nullptr) {\n    // Use the garrison map\n    sWorld->SendServerMessage(SERVER_MSG_STRING,\
      \ \"Garrison created successfully.\", nullptr, nullptr);\n} else {\n    sWorld->SendServerMessage(SERVER_MSG_STRING,\
      \ \"Failed to create garrison.\", nullptr, nullptr);\n}"
    language: cpp
  notes: This method assumes that the map and instance IDs are valid and that the
    player object is properly initialized. The returned GarrisonMap pointer should
    be managed carefully to prevent memory leaks or dangling pointers. It is recommended
    to check for null returns before using the resulting garrison map.
  warnings: Do not call this method with invalid or uninitialized player pointers
    as it could lead to undefined behavior. Also, ensure that the mapId and instanceId
    are valid identifiers; otherwise, the returned pointer may be null or cause runtime
    errors.
  related:
  - GetGarrison
  - RemoveGarrison
  - LoadGarrison
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T00:15:35.070738'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
