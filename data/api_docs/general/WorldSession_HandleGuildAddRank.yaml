api:
  class: WorldSession
  method: HandleGuildAddRank
  signature: void WorldSession::HandleGuildAddRank(WorldPackets::Guild::GuildAddRank
    & packet)
documentation:
  brief: Creates a new rank within a guild, assigning it a unique identifier and default
    permissions.
  description: The HandleGuildAddRank method processes a packet from the client to
    add a new rank to the player's guild. It validates that the player has sufficient
    permissions (typically Guild Master or equivalent) to create new ranks, ensures
    the guild is not at maximum rank capacity, and assigns the new rank a unique identifier.
    The method updates the guild's internal rank structure and broadcasts the change
    to all guild members. This functionality allows guild leaders to customize their
    guild's hierarchy and assign specific permissions to different levels of membership.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage
    code: "void WorldSession::HandleGuildAddRank(WorldPackets::Guild::GuildAddRank&\
      \ packet)\n{\n    // Validate player is in a guild\n    if (!GetPlayer()->GetGuild())\n\
      \        return;\n    \n    // Check permissions (requires Guild Master or equivalent)\n\
      \    if (!GetPlayer()->GetGuild()->HasRankPermission(GetPlayer()->GetGUID(),\
      \ GUILD_PERMISSION_ADD_RANK))\n        return;\n    \n    // Add new rank to\
      \ guild\n    GetPlayer()->GetGuild()->AddNewRank();\n}"
    language: cpp
  notes: This method directly modifies the guild's internal data structures and should
    only be called when the player has proper authorization. The packet structure
    contains minimal data as most rank properties are initialized with default values.
    Changes to guild ranks are automatically synchronized across all connected clients.
  warnings: Improper permission checks can lead to unauthorized rank creation, potentially
    compromising guild hierarchy. Ensure that all validation steps are performed before
    modifying guild data structures.
  related:
  - HandleGuildCreate
  - HandleGuildDeleteRank
  - HandleGuildSetMemberRank
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T22:06:20.738726'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
