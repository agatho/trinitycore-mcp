api:
  class: TerrainInfo
  method: GetGridHeight
  signature: float TerrainInfo::GetGridHeight(const PhaseShift & phaseShift, uint32
    mapId, float x, float y)
documentation:
  brief: Retrieves the height value of the terrain at the specified coordinates for
    a given map and phase.
  description: The GetGridHeight method calculates and returns the height of the terrain
    at the provided (x, y) coordinates within the specified map. It takes into account
    the current phase shift to ensure accurate height data for phased environments.
    This method is essential for determining ground level in World of Warcraft's 3D
    world, particularly when handling player movement, object placement, or collision
    detection. The method uses internal grid-based terrain data structures and may
    perform interpolation between grid points to provide precise height values. It
    requires valid mapId and coordinate values to return meaningful results.
  parameters:
  - name: phaseShift
    description: The phase shift object that defines the current phase state of the
      world. This is crucial for phased environments where different phases may have
      different terrain heights.
  - name: mapId
    description: The unique identifier of the map for which to retrieve the height
      value. Must correspond to a valid map in the game world.
  - name: x
    description: The X coordinate in map space for which to calculate the terrain
      height. Should be within the valid map boundaries.
  - name: y
    description: The Y coordinate in map space for which to calculate the terrain
      height. Should be within the valid map boundaries.
  returns: Returns a float value representing the terrain height at the specified
    coordinates. The value is in game world units (typically meters). Returns 0 or
    an invalid value if the coordinates are outside the valid map area or if the map
    data is not loaded.
  examples:
  - title: Basic usage to get terrain height
    code: float height = terrainInfo->GetGridHeight(phaseShift, 0, 123.45f, 678.90f);
    language: cpp
  - title: Using GetGridHeight for player position validation
    code: "float playerHeight = terrainInfo->GetGridHeight(phaseShift, mapId, playerX,\
      \ playerY);\nif (playerHeight > 0)\n{\n    // Valid height found\n    player->SetPosition(playerX,\
      \ playerY, playerHeight);\n}"
    language: cpp
  notes: This method internally accesses terrain grid data structures and may perform
    interpolation between grid points for smooth height transitions. It's optimized
    for frequent calls but should be used judiciously in performance-critical code
    paths. The method relies on the mapId being valid and the map data being loaded
    in memory.
  warnings: Calling this method with invalid map IDs or coordinates outside the map
    boundaries may return incorrect values or cause undefined behavior. Always validate
    input parameters before calling this method, especially when dealing with dynamic
    world objects or player movement calculations.
  related:
  - GetHeight
  - IsInLineOfSight
  - GetTerrain
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T16:57:01.801575'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
