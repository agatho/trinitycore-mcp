api:
  class: WorldObject
  method: GetMapHeight
  signature: float WorldObject::GetMapHeight(float x, float y, float z, bool vmap,
    float distanceToSearch) const
documentation:
  brief: Retrieves the height value at the specified coordinates on the map, optionally
    using VMap data for terrain collision.
  description: The GetMapHeight method calculates and returns the ground height at
    a given set of coordinates (x, y) in the game world. It can optionally utilize
    VMap data to account for terrain features like cliffs or buildings that might
    affect the actual height. This method is commonly used for positioning objects,
    determining if an object is on solid ground, or calculating movement paths. The
    method takes into account the map's elevation data and can search within a specified
    distance for the closest valid height value if needed.
  parameters:
  - name: x
    description: The X coordinate in the game world where the height is to be determined.
  - name: y
    description: The Y coordinate in the game world where the height is to be determined.
  - name: z
    description: The Z coordinate used as a reference point for height calculation,
      particularly when searching for valid terrain heights.
  - name: vmap
    description: A boolean flag indicating whether to use VMap data (true) or only
      basic map height data (false). When true, it considers object collisions and
      terrain features.
  - name: distanceToSearch
    description: The maximum distance in world units to search for a valid height
      value if the direct point is invalid. A value of 0 or negative means no search
      will occur.
  returns: Returns a float representing the calculated height at the specified coordinates.
    If no valid height can be found within the search distance, it may return an invalid
    or default height value (e.g., -5000.0f).
  examples:
  - title: Basic usage to get ground height
    code: float height = player->GetMapHeight(100.0f, 200.0f, 300.0f, false, 0.0f);
    language: cpp
  - title: Using VMap data to get accurate height with search distance
    code: float height = creature->GetMapHeight(500.0f, 600.0f, 700.0f, true, 10.0f);
    language: cpp
  notes: This method is primarily used internally by the TrinityCore engine for positioning
    and collision detection. It may perform expensive operations when VMap data is
    involved or when searching for valid heights over large distances. The search
    distance parameter allows for fallback behavior if the initial coordinates are
    not on valid terrain.
  warnings: Using a large distanceToSearch value can impact performance, especially
    in areas with complex terrain or numerous objects. Be cautious when calling this
    method frequently in tight loops or during high-frequency updates.
  related:
  - GetHeight
  - GetPositionZ
  - IsOnGround
metadata:
  confidence: 0.9
  generated_at: '2025-10-29T22:00:46.799558'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
