api:
  class: BattlefieldMgr
  method: Update
  signature: void BattlefieldMgr::Update(int diff)
documentation:
  brief: Updates the battlefield manager state with the specified time difference.
  description: The BattlefieldMgr::Update method is responsible for processing and
    maintaining the state of active battlefields within the TrinityCore server. It
    handles various battlefield-related operations such as updating player counts,
    checking for victory conditions, managing objectives, and performing cleanup tasks.
    This method is typically called from the main game loop with a time delta (diff)
    parameter that represents the elapsed time since the last update. The method ensures
    that all active battlefields are properly synchronized with the current game state
    and that any necessary transitions or updates occur in response to player actions
    or time-based events.
  parameters:
  - name: diff
    description: The time difference in milliseconds since the last update call. This
      value is used to determine how much time has passed and affects the timing of
      various battlefield operations such as objective updates, player scoring, and
      victory condition checks.
  returns: null
  examples:
  - title: Basic Update Call
    code: "void GameWorld::Update(uint32 diff)\n{\n    // ... other update logic ...\n\
      \    sBattlefieldMgr->Update(diff);\n    // ... other update logic ...\n}"
    language: cpp
  - title: Update with Time Delta Handling
    code: "void World::Update(uint32 diff)\n{\n    // Process game world updates\n\
      \    UpdateWorldStates();\n    \n    // Update battlefield manager with time\
      \ delta\n    sBattlefieldMgr->Update(diff);\n    \n    // Continue with other\
      \ updates\n    UpdateSessions();\n}"
    language: cpp
  notes: This method is typically called once per game tick from the main world update
    loop. The diff parameter should represent accurate time elapsed since the last
    call to maintain proper battlefield timing and state synchronization. Battlefield
    managers may cache or queue certain operations that are processed during this
    update cycle.
  warnings: Do not call this method directly from outside the main game update loop
    without understanding the implications for battlefield state consistency. Improper
    use of the diff parameter can cause unexpected behavior in time-sensitive battlefield
    mechanics such as capture timers or victory conditions.
  related:
  - BattlefieldMgr::AddBattlefield
  - BattlefieldMgr::RemoveBattlefield
  - BattlefieldMgr::GetBattlefieldByInstanceId
  - BattlefieldMgr::GetBattlefieldToZoneId
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T02:28:16.400079'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
