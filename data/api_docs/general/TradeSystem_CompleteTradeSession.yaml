api:
  class: TradeSystem
  method: CompleteTradeSession
  signature: void TradeSystem::CompleteTradeSession(uint32 sessionId)
documentation:
  brief: Completes a trade session by finalizing item transfers and updating player
    states.
  description: The CompleteTradeSession method finalizes an ongoing trade between
    two players within the TrinityCore framework. It processes all pending item exchanges,
    updates inventory states for both parties, removes the trade session from active
    tracking, and ensures that no further modifications can be made to the trade.
    This method is typically invoked when both players have accepted the trade terms
    and are ready to complete the transaction. The method handles synchronization
    of player data and ensures consistency in the game world state.
  parameters:
  - name: sessionId
    description: Unique identifier for the trade session to be completed. This ID
      corresponds to an active trade between two players and is used to locate and
      process the specific trade data.
  returns: null
  examples:
  - title: Basic Trade Session Completion
    code: TradeSystem::CompleteTradeSession(12345);
    language: cpp
  - title: Conditional Trade Completion
    code: "if (player1->HasActiveTrade() && player2->HasActiveTrade()) {\n    TradeSystem::CompleteTradeSession(player1->GetTradeSessionId());\n\
      }"
    language: cpp
  notes: This method assumes that both players have already confirmed their trade
    agreements. It performs internal validation to ensure the session exists and is
    in a valid state before proceeding with completion. The method may involve database
    updates for inventory changes and should be called only when appropriate game
    logic conditions are met.
  warnings: Calling this method without verifying that both parties have accepted
    the trade can result in inconsistent game state or data corruption. Ensure that
    all preconditions are satisfied before invoking this function to avoid unexpected
    behavior.
  related:
  - StartTradeSession
  - CancelTradeSession
  - AcceptTrade
  - GetTradeSession
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:38:11.548464'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
