api:
  class: LootDistribution
  method: ExecuteMainSpecPriorityStrategy
  signature: void LootDistribution::ExecuteMainSpecPriorityStrategy(Player * player,
    const LootItem & item, LootRollType & decision)
documentation:
  brief: Determines and applies the main spec priority strategy for loot rolling decisions.
  description: The ExecuteMainSpecPriorityStrategy method evaluates a player's primary
    specialization and applies the corresponding loot distribution priority rules
    to determine whether the player should roll need, greed, or pass on a specific
    item. This method is typically invoked during loot distribution events in World
    of Warcraft instances or raids where players are rolling for items. It considers
    the player's active spec, role, and configured loot settings to make an informed
    decision about how to proceed with the roll. The outcome of this method directly
    influences the LootRollType value that is passed back to the calling system.
  parameters:
  - name: player
    description: Pointer to the Player object for which the loot decision is being
      made. Must be a valid player instance with an active spec and loot settings
      configured.
  - name: item
    description: Reference to the LootItem structure representing the item being rolled
      on. Contains information about the item's properties, quality, and other relevant
      data for decision making.
  - name: decision
    description: Reference to a LootRollType variable that will be updated with the
      determined roll decision (Need, Greed, or Pass) based on main spec priority
      rules.
  returns: null
  examples:
  - title: Basic usage in loot distribution
    code: "void HandleLootRoll(Player* player, LootItem const& item, LootRollType&\
      \ decision)\n{\n    LootDistribution lootDist;\n    lootDist.ExecuteMainSpecPriorityStrategy(player,\
      \ item, decision);\n}"
    language: cpp
  - title: Integration with custom loot rolling logic
    code: "void CustomLootHandler(Player* player, LootItem const& item)\n{\n    LootRollType\
      \ decision = LOOT_ROLL_PASS;\n    LootDistribution lootDist;\n    \n    // Apply\
      \ main spec priority strategy\n    lootDist.ExecuteMainSpecPriorityStrategy(player,\
      \ item, decision);\n    \n    switch (decision)\n    {\n        case LOOT_ROLL_NEED:\n\
      \            // Player should roll need\n            break;\n        case LOOT_ROLL_GREED:\n\
      \            // Player should roll greed\n            break;\n        case LOOT_ROLL_PASS:\n\
      \            // Player should pass\n            break;\n    }\n}"
    language: cpp
  notes: This method assumes that the player object has valid specialization data
    and that the item being rolled on is properly initialized. The decision made by
    this method may be overridden by other systems such as group loot rules or master
    loot settings.
  warnings: Ensure that the player pointer is not null before calling this method,
    as it will cause undefined behavior. Also, make sure that the LootItem structure
    contains valid data to avoid incorrect decisions based on malformed item information.
  related:
  - LootDistribution::Roll
  - LootDistribution::DistributeLoot
  - Player::GetPrimaryTalentTree
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:32:52.592725'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
