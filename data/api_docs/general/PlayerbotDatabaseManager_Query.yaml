api:
  class: PlayerbotDatabaseManager
  method: Query
  signature: int PlayerbotDatabaseManager::Query(const std::string & sql)
documentation:
  brief: Executes a SQL query against the playerbot database and returns the number
    of affected rows.
  description: The Query method in PlayerbotDatabaseManager is used to execute arbitrary
    SQL statements on the playerbot database. It serves as a general-purpose interface
    for performing database operations such as INSERT, UPDATE, DELETE, or SELECT queries.
    The method returns the number of rows affected by the query, which can be useful
    for determining the success or impact of database modifications. This method is
    typically used within the context of playerbot AI logic where database interactions
    are required to store or retrieve bot-related data. The implementation handles
    connection management and ensures thread-safe execution within the TrinityCore
    framework.
  parameters:
  - name: sql
    description: The SQL query string to be executed against the playerbot database.
      This can be any valid SQL statement including SELECT, INSERT, UPDATE, DELETE,
      or other DDL/DML operations.
  returns: Returns an integer representing the number of rows affected by the SQL
    query. For SELECT statements, this typically represents the number of rows returned.
    For INSERT, UPDATE, or DELETE statements, it indicates how many records were modified.
    Returns -1 if the query execution fails.
  examples:
  - title: Basic Query Execution
    code: "int affectedRows = botDatabase->Query(\"INSERT INTO playerbot_ai_line VALUES\
      \ (1, 'test', 'hello');\");\nif (affectedRows > 0) {\n    // Successfully inserted\
      \ a row\n}"
    language: cpp
  - title: Updating Playerbot Configuration
    code: "std::string query = \"UPDATE playerbot_ai_line SET line = 'updated message'\
      \ WHERE id = 1;\";\nint rowsUpdated = botDatabase->Query(query);\nif (rowsUpdated\
      \ == 1) {\n    // Successfully updated one row\n} else if (rowsUpdated == 0)\
      \ {\n    // No matching records found\n}"
    language: cpp
  notes: This method is designed to be thread-safe and should not be called from multiple
    threads simultaneously without proper synchronization. The underlying database
    connection is managed internally by the PlayerbotDatabaseManager class, so developers
    do not need to handle connection lifecycle management. Performance considerations
    include avoiding long-running queries that could block other database operations.
  warnings: Be cautious with user-provided input in SQL strings as this can lead to
    SQL injection vulnerabilities. Always validate and sanitize inputs before constructing
    SQL queries. The method does not return result sets for SELECT statements; use
    specialized methods like QueryResult if you need to retrieve data from queries.
  related:
  - QueryResult
  - PQuery
  - DirectQuery
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T01:05:19.341331'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
