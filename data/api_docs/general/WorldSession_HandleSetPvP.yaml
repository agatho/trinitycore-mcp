api:
  class: WorldSession
  method: HandleSetPvP
  signature: void WorldSession::HandleSetPvP(WorldPackets::Misc::SetPvP & packet)
documentation:
  brief: Toggles the player's PvP flag status
  description: The HandleSetPvP method processes incoming client packets to enable
    or disable a player's PvP flag. This functionality allows players to toggle their
    PvP status, which affects various game mechanics including combat behavior, faction
    interactions, and zone restrictions. When invoked, the method updates the player's
    PvP flag state in the session and may trigger related updates to the player's
    visibility and faction standings within the game world.
  parameters: []
  returns: null
  examples:
  - title: Basic PvP Toggle Usage
    code: "void WorldSession::HandleSetPvP(WorldPackets::Misc::SetPvP& packet)\n{\n\
      \    Player* player = GetPlayer();\n    if (player)\n    {\n        player->SetPvP(packet.Enable);\n\
      \        // Additional logic to update player state\n    }\n}"
    language: cpp
  notes: This method directly interacts with the player's PvP flag state and should
    be called only when appropriate client validation has been performed. The actual
    PvP flag change is propagated through the session's packet handling system, and
    may trigger additional updates to the player's faction status and combat behavior.
  warnings: null
  related:
  - GetPlayer
  - SetPvP
  - IsPvP
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:15:06.779788'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
