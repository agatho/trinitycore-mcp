api:
  class: IVMapManager
  method: isInLineOfSight
  signature: bool IVMapManager::isInLineOfSight(unsigned int pMapId, float x1, float
    y1, float z1, float x2, float y2, float z2, int ignoreFlags)
documentation:
  brief: Determines whether there is a clear line of sight between two points in a
    specified map.
  description: The isInLineOfSight method checks if a direct line can be drawn from
    point A (x1, y1, z1) to point B (x2, y2, z2) without intersecting any solid geometry
    in the specified map. This is commonly used for spell casting, NPC vision, and
    other game mechanics that require checking visibility between two locations. The
    method uses the map's navigation mesh to perform the line-of-sight calculation,
    taking into account obstacles such as walls, terrain features, and other solid
    objects. It returns true if there is a clear path between the points, and false
    otherwise. The ignoreFlags parameter allows for filtering out certain types of
    geometry during the check.
  parameters:
  - name: pMapId
    description: The unique identifier of the map where the line-of-sight check will
      be performed. This corresponds to the MapID used in the game's database.
  - name: x1
    description: The X coordinate of the starting point for the line-of-sight check.
  - name: y1
    description: The Y coordinate of the starting point for the line-of-sight check.
  - name: z1
    description: The Z coordinate of the starting point for the line-of-sight check.
  - name: x2
    description: The X coordinate of the ending point for the line-of-sight check.
  - name: y2
    description: The Y coordinate of the ending point for the line-of-sight check.
  - name: z2
    description: The Z coordinate of the ending point for the line-of-sight check.
  - name: ignoreFlags
    description: A bitmask value that specifies which types of geometry should be
      ignored during the line-of-sight calculation. This allows filtering out specific
      obstacles such as doors or certain interactive objects.
  returns: Returns true if there is a clear line of sight between the two points,
    meaning no solid geometry blocks the path. Returns false if any obstacle prevents
    direct visibility between the points.
  examples:
  - title: Basic Line-of-Sight Check
    code: bool hasLOS = instance->getVMapManager()->isInLineOfSight(0, 100.0f, 200.0f,
      50.0f, 150.0f, 250.0f, 60.0f, 0);
    language: cpp
  - title: Line-of-Sight Check with Ignore Flags
    code: bool hasLOS = instance->getVMapManager()->isInLineOfSight(1, 500.0f, 300.0f,
      100.0f, 600.0f, 400.0f, 120.0f, 1);
    language: cpp
  notes: This method relies on the VMap (Virtual Map) system which is used for collision
    detection and line-of-sight calculations in TrinityCore. The implementation uses
    navigation meshes to perform fast geometric checks. Performance can be affected
    by complex terrain or large numbers of obstacles in the map. This method should
    not be called from within a tight loop without consideration of performance impact.
  warnings: The coordinates provided must be valid for the specified map ID, otherwise
    results are undefined. Using invalid map IDs may cause crashes or incorrect behavior.
    The ignoreFlags parameter should be used carefully as it can bypass important
    game mechanics if misused.
  related:
  - getVMapManager
  - isInLineOfSightWithObject
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:45:01.823550'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
