api:
  class: UnitAI
  method: CanAIAttack
  signature: bool UnitAI::CanAIAttack(const Unit * param0) const
documentation:
  brief: Determines whether the AI unit can attack the specified target unit.
  description: The CanAIAttack method evaluates whether a UnitAI-controlled unit is
    permitted to initiate an attack against a given target unit. This check considers
    various game mechanics such as faction neutrality, PvP status, creature flags,
    and AI state restrictions. The method ensures that the AI respects game rules
    and prevents inappropriate actions like attacking friendly units or units under
    protection. It is typically used internally by the AI system before executing
    attack commands.
  parameters:
  - name: param0
    description: A pointer to the target Unit that the AI unit is evaluating for potential
      attack. Must not be null.
  returns: Returns true if the AI unit can legally attack the specified target; otherwise
    returns false. This includes checks for hostility, faction alignment, and AI state
    constraints.
  examples:
  - title: Basic AI Attack Check
    code: "if (unitAI->CanAIAttack(targetUnit)) {\n    unitAI->AttackStart(targetUnit);\n\
      }"
    language: cpp
  - title: Conditional AI Attack with Logging
    code: "if (unitAI->CanAIAttack(enemyUnit)) {\n    TC_LOG_DEBUG(\"ai\", \"AI unit\
      \ can attack target.\");\n    unitAI->AttackStart(enemyUnit);\n} else {\n  \
      \  TC_LOG_DEBUG(\"ai\", \"AI unit cannot attack target.\");\n}"
    language: cpp
  notes: This method performs several internal checks including faction comparison,
    PvP flag status, creature flags (e.g., guard, neutral), and AI state. It is recommended
    to use this method before initiating any attack behavior to ensure proper game
    logic adherence.
  warnings: Do not call this method with a null pointer for the target unit; doing
    so may result in undefined behavior or crashes. Always validate that param0 points
    to a valid Unit object before calling.
  related:
  - AttackStart
  - CanAIAttack
  - IsHostileTo
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T15:56:26.701388'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
