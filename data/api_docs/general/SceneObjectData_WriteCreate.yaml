api:
  class: SceneObjectData
  method: WriteCreate
  signature: void SceneObjectData::WriteCreate(ByteBuffer & data, int fieldVisibilityFlags,
    const Object * owner, const Player * receiver) const
documentation:
  brief: Serializes scene object data for client creation packet
  description: Writes the complete create data for a SceneObjectData instance into
    a ByteBuffer, preparing it for transmission to a specific player. This method
    handles serialization of all relevant fields based on visibility flags and owner
    information, ensuring that only appropriate data is sent to the client. The method
    considers field visibility flags to determine which data should be included in
    the packet, and uses owner and receiver context to apply proper filtering and
    formatting. This is typically used during object spawning or when sending initial
    state information to players.
  parameters:
  - name: data
    description: Reference to a ByteBuffer where the serialized create data will be
      written. This buffer will contain the complete packet data for scene object
      creation.
  - name: fieldVisibilityFlags
    description: Integer flag indicating which fields should be included in the serialization.
      These flags control visibility of different object properties based on game
      context and player permissions.
  - name: owner
    description: Pointer to the Object that owns this scene object. Used for determining
      ownership-based visibility and data filtering during serialization.
  - name: receiver
    description: Pointer to the Player who will receive this create packet. The receiver
      context is used to apply player-specific visibility rules and formatting.
  returns: null
  examples:
  - title: Basic Scene Object Creation
    code: 'ByteBuffer data;

      SceneObjectData sceneObj;

      Player* player = ...;

      Object* owner = ...;

      sceneObj.WriteCreate(data, VISIBILITY_FLAG_DEFAULT, owner, player);

      // Send data to player''s connection'
    language: cpp
  notes: This method is part of the object serialization system in TrinityCore and
    should only be called when preparing network packets for client communication.
    The field visibility flags are crucial for proper packet construction and must
    match the expected client behavior. Performance considerations include avoiding
    unnecessary data serialization for objects that won't be visible to players.
  warnings: Calling this method without proper initialization of the SceneObjectData
    instance may result in incomplete or invalid packet data. Ensure that all required
    fields are properly set before calling WriteCreate, as missing data can cause
    client-side errors or unexpected behavior.
  related:
  - SceneObjectData::WriteUpdate
  - SceneObjectData::WriteDestroy
  - SceneObjectData::BuildCreateBlockForPlayer
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T23:47:21.440160'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
