api:
  class: InstanceLockMgr
  method: FindActiveInstanceLock
  signature: InstanceLock * InstanceLockMgr::FindActiveInstanceLock(const int & playerGuid,
    const MapDb2Entries & entries) const
documentation:
  brief: Retrieves the active instance lock for a player based on map entries.
  description: The FindActiveInstanceLock method searches for and returns an active
    InstanceLock associated with a specific player GUID and map entries. This functionality
    is used within TrinityCore's instance management system to track which players
    are currently inside or have access to certain instances. The method performs
    a lookup in the internal instance lock manager data structures, ensuring that
    only valid and active locks are returned. It is typically invoked when checking
    player access permissions or determining if a player can enter or interact with
    a specific instance.
  parameters:
  - name: playerGuid
    description: The unique identifier (GUID) of the player for whom to find an active
      instance lock.
  - name: entries
    description: A reference to MapDb2Entries structure containing map-related database
      entries used to identify the target instance.
  returns: Returns a pointer to an InstanceLock object if an active lock is found;
    otherwise, returns nullptr if no matching active instance lock exists for the
    given player and map entries.
  examples:
  - title: Basic Usage Example
    code: "InstanceLock* lock = instanceLockMgr->FindActiveInstanceLock(playerGuid,\
      \ mapEntries);\nif (lock != nullptr) {\n    // Player has an active instance\
      \ lock\n    std::cout << \"Player is in instance: \" << lock->GetInstanceId()\
      \ << std::endl;\n} else {\n    // No active instance lock found\n    std::cout\
      \ << \"Player not in any active instance\" << std::endl;\n}"
    language: cpp
  notes: This method assumes that the InstanceLockMgr has been properly initialized
    and populated with valid data. The returned pointer is managed internally and
    should not be deleted by the caller. Performance may be impacted if large numbers
    of instance locks exist, as this function performs a lookup operation.
  warnings: Do not assume the returned InstanceLock pointer is always valid; always
    check for nullptr before using it. Incorrectly passing invalid player GUIDs or
    map entries can lead to unexpected behavior or performance degradation.
  related:
  - GetInstanceLock
  - AddInstanceLock
  - RemoveInstanceLock
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T05:37:30.660599'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
