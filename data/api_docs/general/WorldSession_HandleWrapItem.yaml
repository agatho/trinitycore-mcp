api:
  class: WorldSession
  method: HandleWrapItem
  signature: void WorldSession::HandleWrapItem(WorldPackets::Item::WrapItem & packet)
documentation:
  brief: Processes a client request to wrap or unwrap an item in a gem or other container.
  description: The HandleWrapItem method handles the WorldPackets::Item::WrapItem
    packet sent by the client when a player attempts to wrap an item using a gem,
    enchanting scroll, or similar item. This method validates the operation, checks
    if the wrapping is allowed, and updates the item's state accordingly. It ensures
    that the wrapping process follows game rules such as item type restrictions, required
    materials, and inventory space availability. The method typically triggers visual
    effects and sends updated item information back to the client.
  parameters: []
  returns: null
  examples:
  - title: Basic Wrap Item Usage
    code: "void WorldSession::HandleWrapItem(WorldPackets::Item::WrapItem& packet)\n\
      {\n    // Validate item and gem\n    if (!CanWrapItem(packet.ItemGUID, packet.GemGUID))\n\
      \        return;\n    \n    // Perform wrapping logic\n    WrapItem(packet.ItemGUID,\
      \ packet.GemGUID);\n    \n    // Send updated item data to client\n    SendWrappedItemUpdate(packet.ItemGUID);\n\
      }"
    language: cpp
  notes: This method is part of the item management system and interacts with the
    player's inventory. It should be called only from within the packet handling context
    of WorldSession. The wrapping operation may involve multiple checks including
    item compatibility, resource requirements, and player permissions.
  warnings: Improper validation in this method can lead to item duplication or invalid
    item states. Ensure all preconditions are checked before performing any wrapping
    operations. This method should not be called directly from non-packet handling
    code paths.
  related:
  - CanWrapItem
  - WrapItem
  - SendWrappedItemUpdate
metadata:
  confidence: 0.85
  generated_at: '2025-11-04T20:02:10.462346'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
