api:
  class: BalanceDruid
  method: CanUseAbility
  signature: bool BalanceDruid::CanUseAbility(uint32 spellId)
documentation:
  brief: Determines whether a Balance Druid can use a specified spell ability based
    on class restrictions, resource requirements, and cooldowns.
  description: The CanUseAbility method evaluates if a Balance Druid character is
    eligible to cast or activate a given spell ability. It checks various conditions
    such as mana cost, cooldown status, shapeshift requirements (e.g., being in Moonkin
    form), and class-specific restrictions. This method is typically used within the
    AI logic or spell casting systems to validate whether an ability can be executed
    at the current moment. The function returns true if all prerequisites are met,
    otherwise false. It's commonly invoked before attempting to cast spells to prevent
    invalid actions from being processed.
  parameters:
  - name: spellId
    description: The unique identifier of the spell or ability to check. This ID corresponds
      to entries in the Spell.dbc file and must represent a valid Balance Druid spell.
  returns: True if the Balance Druid can use the specified ability under current conditions;
    false otherwise. Returns false if the spell is not available due to resource constraints,
    cooldowns, shapeshift state, or other class-specific limitations.
  examples:
  - title: Basic usage in AI logic
    code: "if (druid->CanUseAbility(SPELL_MOONFIRE)) {\n    druid->CastSpell(target,\
      \ SPELL_MOONFIRE);\n}"
    language: cpp
  - title: Checking multiple abilities before action
    code: "if (!druid->CanUseAbility(SPELL_STARFIRE) && !druid->CanUseAbility(SPELL_WRATH))\
      \ {\n    // Handle case where no usable abilities are available\n    return;\n\
      }\n// Proceed with ability selection logic"
    language: cpp
  notes: This method does not perform actual spell casting, but only validation. It
    assumes the character is already in a valid state (e.g., correct form) and focuses
    on resource and timing checks. The implementation may consider aura effects, talent
    points, and current mana levels when evaluating eligibility.
  warnings: Do not rely solely on this method for preventing invalid spell usage in
    combat; additional server-side validation should occur during actual spell execution
    to prevent exploits. Also note that some abilities might be restricted by external
    factors like PvP rules or instance limitations which are not covered by this function.
  related:
  - CastSpell
  - GetPower
  - IsInMoonkinForm
  - HasAura
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T20:06:05.016714'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
