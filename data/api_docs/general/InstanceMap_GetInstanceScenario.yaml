api:
  class: InstanceMap
  method: GetInstanceScenario
  signature: const InstanceScenario * InstanceMap::GetInstanceScenario() const
documentation:
  brief: Retrieves the scenario associated with this instance map.
  description: The GetInstanceScenario method returns a pointer to the InstanceScenario
    object that represents the active scenario for this instance map. This method
    is typically used in World of Warcraft's TrinityCore server implementation to
    access scenario-specific data and behavior for dungeon or raid instances that
    support scenarios. The returned pointer may be null if no scenario is currently
    active on the instance map. This method does not modify any state and is safe
    to call from multiple threads as long as the underlying InstanceScenario object
    remains valid during the call.
  parameters: []
  returns: A const pointer to the InstanceScenario object associated with this instance
    map, or nullptr if no scenario is active.
  examples:
  - title: Basic Usage
    code: "InstanceMap* map = ...; // Assume we have an instance map\nconst InstanceScenario*\
      \ scenario = map->GetInstanceScenario();\nif (scenario)\n{\n    // Use the scenario\
      \ data\n    uint32 scenarioId = scenario->GetScenarioId();\n    // Process scenario-specific\
      \ logic\n}"
    language: cpp
  - title: Checking Scenario State
    code: "InstanceMap* map = ...;\nconst InstanceScenario* scenario = map->GetInstanceScenario();\n\
      if (scenario && scenario->IsComplete())\n{\n    // Scenario is complete, handle\
      \ completion logic\n    map->SendScenarioUpdate();\n}\nelse if (!scenario)\n\
      {\n    // No active scenario\n    sLog->outInfo(LOG_FILTER_GENERAL, \"No scenario\
      \ active on instance map %u\", map->GetId());\n}"
    language: cpp
  notes: This method is commonly used in scenario-based content such as dungeon scenarios,
    raid scenarios, or world events. The InstanceScenario object returned contains
    information about the current scenario state, objectives, and rewards. Developers
    should ensure that they do not hold references to the returned pointer beyond
    the lifetime of the instance map.
  warnings: The returned pointer may be null if no scenario is active on the instance
    map. Always check for null before using the returned value to avoid dereferencing
    a null pointer. Additionally, since this is a const method, it should not be used
    to modify the scenario state directly.
  related:
  - GetInstanceId
  - GetDifficulty
  - IsScenario
  - SetInstanceScenario
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T03:11:17.682259'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
