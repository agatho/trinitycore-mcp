api:
  class: CombatBehaviorIntegration
  method: GetCrowdControlTarget
  signature: Unit * CombatBehaviorIntegration::GetCrowdControlTarget()
documentation:
  brief: Returns the target unit currently under crowd control effects.
  description: The GetCrowdControlTarget method retrieves a pointer to the Unit object
    that is currently affected by a crowd control spell or effect. This method is
    typically used within AI behavior logic to determine which enemy or ally unit
    is currently immobilized, silenced, feared, or otherwise controlled by an external
    effect. The returned Unit pointer may be null if no unit is currently under any
    crowd control effect. This functionality is essential for combat AI decision-making
    processes where the AI needs to prioritize targets based on their current status
    or to avoid targeting units that are already controlled by enemy effects.
  parameters: []
  returns: A pointer to the Unit object that is currently under a crowd control effect,
    or nullptr if no such unit exists. The returned pointer is valid only for the
    duration of the current game tick and should not be stored for later use without
    proper validation.
  examples:
  - title: Basic usage in AI behavior
    code: "void MyAI::UpdateAI(uint32 diff)\n{\n    Unit* ccTarget = GetCrowdControlTarget();\n\
      \    if (ccTarget && ccTarget->IsAlive())\n    {\n        // Prioritize attacking\
      \ the crowd controlled target\n        AttackStart(ccTarget);\n    }\n    else\n\
      \    {\n        // Fallback to normal targeting logic\n        SelectNextTarget();\n\
      \    }\n}"
    language: cpp
  notes: This method relies on internal tracking of crowd control effects applied
    to units. The implementation may vary depending on how the TrinityCore server
    handles different types of crowd control mechanics. It's important to note that
    the returned unit pointer should always be validated for null before use, as the
    target may have died or become uncontrolled between calls.
  warnings: Do not store the returned Unit pointer beyond the current game tick, as
    it may become invalid due to unit destruction or removal from combat. Always check
    for null return values before dereferencing the pointer. Using this method in
    performance-critical code paths should be done with caution as it may involve
    internal lookups or tracking mechanisms.
  related:
  - IsCrowdControlled
  - GetCrowdControlType
  - RemoveCrowdControlTarget
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T19:27:25.198574'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
