api:
  class: AuraEffect
  method: HandleModDamagePercentDone
  signature: void AuraEffect::HandleModDamagePercentDone(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Applies or removes a percentage-based damage modification aura effect.
  description: The HandleModDamagePercentDone method is responsible for applying or
    removing an aura effect that modifies the percentage of damage done by a unit.
    This method is typically invoked during aura application or removal events, adjusting
    the damage dealt by the affected unit based on the specified percentage modifier.
    It operates within the TrinityCore's aura system and interacts with the AuraApplication
    object to determine how the effect should be applied or removed. The method uses
    the mode parameter to control whether the effect is being applied (true) or removed
    (false), and it modifies the damage calculation accordingly.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This contains information about the aura's state, target,
      and application context.
  - name: mode
    description: The mode of operation, typically indicating how the aura is being
      applied (e.g., 0 for initial application, 1 for periodic updates). Used to control
      behavior during different stages of aura execution.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the damage percentage modifier effect. When true, the damage is increased by
      the specified percentage; when false, it's reverted.
  returns: null
  examples:
  - title: Applying a Damage Increase Aura
    code: "void ApplyDamageBoostAura(Unit* target, float percent) {\n    AuraApplication*\
      \ app = new AuraApplication(target, target, nullptr);\n    // Assume aura with\
      \ HandleModDamagePercentDone is created\n    aura->HandleModDamagePercentDone(app,\
      \ 0, true); // Apply the effect\n}"
    language: cpp
  - title: Removing a Damage Reduction Aura
    code: "void RemoveDamageReductionAura(Unit* target) {\n    AuraApplication* app\
      \ = target->GetAuraApplication(12345); // Get existing aura\n    if (app)\n\
      \        app->GetAuraEffect()->HandleModDamagePercentDone(app, 0, false); //\
      \ Remove effect\n}"
    language: cpp
  notes: This method is part of the TrinityCore's aura handling system and directly
    affects combat calculations. It should only be called from within the aura application
    context to ensure proper state management. The method modifies internal damage
    calculation values and may affect performance if used excessively on many units
    simultaneously.
  warnings: Improper use of this method can lead to incorrect damage calculations
    in combat. Ensure that aura applications are properly managed and that the mode
    parameter is correctly set according to the aura's lifecycle stage. Never call
    this method directly without proper aura application context.
  related:
  - AuraEffect::HandleModDamagePercentDone
  - AuraEffect::ApplyAura
  - AuraEffect::RemoveAura
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T12:39:21.892818'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
