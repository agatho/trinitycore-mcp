api:
  class: VendorInteractionManager
  method: PurchaseItems
  signature: uint32 VendorInteractionManager::PurchaseItems(Creature * vendor, const
    int & itemIds)
documentation:
  brief: Processes the purchase of items from a vendor creature and returns the number
    of successfully purchased items.
  description: The PurchaseItems method handles the logic for purchasing items from
    a vendor creature within the TrinityCore framework. It takes a pointer to the
    vendor Creature object and an integer representing item IDs to purchase. The method
    validates the player's ability to afford the items, checks vendor availability,
    and updates inventory accordingly. This method is typically invoked during vendor
    interaction when a player selects items to buy. It ensures proper transaction
    handling including currency deduction and item delivery.
  parameters:
  - name: vendor
    description: Pointer to the Creature object representing the vendor from which
      items are being purchased
  - name: itemIds
    description: Integer value representing the ID(s) of items to be purchased. May
      represent a single item or multiple items depending on implementation
  returns: Returns a uint32 value indicating the number of successfully purchased
    items. A return value of 0 indicates no items were purchased, while any positive
    value represents the count of items processed.
  examples:
  - title: Basic Vendor Purchase
    code: "Creature* vendor = player->GetNPCIfCanInteractWith();\nif (vendor && vendor->IsVendor())\
      \ {\n    uint32 purchasedCount = vendorInteractionManager.PurchaseItems(vendor,\
      \ 12345);\n    if (purchasedCount > 0) {\n        // Handle successful purchase\n\
      \        player->SendNotification(\"Successfully purchased %u items.\", purchasedCount);\n\
      \    }\n}"
    language: cpp
  notes: This method assumes proper validation of the vendor and player state before
    execution. It may internally call other methods for currency checks, inventory
    management, and item delivery. The implementation likely handles multiple item
    purchases in a single transaction.
  warnings: Ensure that the vendor pointer is valid and that the player has sufficient
    funds before calling this method. Improper handling of item IDs could lead to
    invalid purchases or crashes. This method should only be called during active
    vendor interactions.
  related:
  - GetVendorItems
  - CanAffordItem
  - UpdateInventory
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T17:40:30.863137'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
