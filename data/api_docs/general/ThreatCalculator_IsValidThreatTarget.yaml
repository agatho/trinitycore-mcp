api:
  class: ThreatCalculator
  method: IsValidThreatTarget
  signature: bool ThreatCalculator::IsValidThreatTarget(Unit * target)
documentation:
  brief: Determines whether a given unit is a valid target for threat calculation
    in the AI system
  description: "The IsValidThreatTarget method evaluates whether a specified Unit\
    \ object is eligible to be considered as a threat target within the TrinityCore\
    \ AI framework. This validation ensures that only appropriate targets\u2014such\
    \ as living enemies that are not immune to aggro\u2014are included in threat calculations.\
    \ The method performs checks on the target's status, faction, and other relevant\
    \ conditions to ensure proper behavior of the threat system. It is typically used\
    \ internally by AI modules before adding a unit to the threat list or calculating\
    \ threat values."
  parameters:
  - name: target
    description: Pointer to the Unit object that is being evaluated for validity as
      a threat target. Must not be null.
  returns: Returns true if the target unit is valid for threat calculation, meaning
    it is alive, hostile, and meets all criteria required by the AI system; otherwise
    returns false.
  examples:
  - title: Basic usage in AI logic
    code: "if (ThreatCalculator::IsValidThreatTarget(enemyUnit)) {\n    // Proceed\
      \ with threat calculation or addition to threat list\n    threatList.AddThreat(enemyUnit,\
      \ threatValue);\n}"
    language: cpp
  - title: Integration with custom AI behavior
    code: "class MyAI : public CreatureAI {\npublic:\n    void UpdateAI(uint32 diff)\
      \ override {\n        if (IsValidThreatTarget(me->GetVictim())) {\n        \
      \    // Perform threat-based actions\n            DoThreatCalculation();\n \
      \       }\n    }\n};"
    language: cpp
  notes: This method is part of the core threat management system and may be called
    frequently during AI updates. It's important to note that valid targets must not
    be dead, invisible, or immune to threat generation. The implementation relies
    on internal flags and state checks within the Unit class.
  warnings: Do not assume all units returned by GetVictim() or similar methods are
    automatically valid threats; always validate using this method before performing
    any threat-related operations. Failure to do so may result in incorrect AI behavior
    or crashes.
  related:
  - ThreatCalculator::AddThreat
  - ThreatCalculator::GetThreat
  - Unit::IsAlive
  - Unit::IsHostileTo
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T16:42:08.681438'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
