api:
  class: InterruptManager
  method: CalculateCastTimeRemaining
  signature: float InterruptManager::CalculateCastTimeRemaining(Unit * caster)
documentation:
  brief: Calculates and returns the remaining cast time for a unit's current spell
    cast.
  description: The CalculateCastTimeRemaining method determines how much time is left
    before a unit's ongoing spell casting completes. This utility function is typically
    used within the interrupt management system to assess whether a spell can be interrupted
    or if it has already finished. It retrieves the caster's current casting information
    and computes the remaining duration based on the original cast time and elapsed
    time since the cast began. The method assumes that the unit is currently casting
    a spell and may return unexpected results if invoked when no spell is actively
    being cast.
  parameters: []
  returns: A float value representing the number of seconds remaining until the caster's
    current spell finishes casting. Returns zero or negative values if the cast has
    already completed or if invalid state occurs.
  examples:
  - title: Basic Usage in Interrupt Logic
    code: "void HandleInterruptLogic(Unit* caster)\n{\n    float remainingTime = sObjectMgr->GetInterruptManager()->CalculateCastTimeRemaining(caster);\n\
      \    if (remainingTime > 0.0f)\n    {\n        // Spell is still casting, interrupt\
      \ logic can proceed\n        sLog->outString(\"Spell has %f seconds remaining.\"\
      , remainingTime);\n    }\n}"
    language: cpp
  notes: This method relies on internal spell cast tracking data maintained by the
    core. It should only be called when the caster is confirmed to be in a casting
    state; otherwise, it may return incorrect or undefined values. The returned value
    reflects real-time elapsed time and is subject to server tick updates.
  warnings: Calling this method without verifying that the unit is actually casting
    a spell may result in invalid calculations or runtime errors. Ensure proper state
    checks before invoking this function in performance-critical code paths.
  related:
  - InterruptManager::InterruptSpell
  - Unit::HasUnitState
  - Spell::GetCastTime
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T02:33:15.947653'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
