api:
  class: KitingManager
  method: CalculateSafetyRating
  signature: float KitingManager::CalculateSafetyRating(const int & pos, const int
    & threats)
documentation:
  brief: Calculates a safety rating based on position and threat levels for kiting
    behavior.
  description: The CalculateSafetyRating method computes a floating-point value representing
    the safety level of a unit's current position relative to threat sources. This
    rating is used by the kiting manager to determine optimal movement patterns during
    combat, where higher values indicate safer positions. The calculation considers
    both the absolute position and the number of active threats in the vicinity. This
    method is crucial for AI-driven kiting behavior, helping units avoid dangerous
    areas while maintaining engagement with enemies.
  parameters:
  - name: pos
    description: An integer representing the current position of the unit in relation
      to threat sources. Values typically correspond to spatial coordinates or positioning
      metrics within the game world.
  - name: threats
    description: An integer indicating the number of active threats or enemy units
      targeting this unit. Higher values generally result in lower safety ratings.
  returns: A float value representing the calculated safety rating. Values typically
    range from 0.0 (completely unsafe) to 1.0 (fully safe), though exact ranges may
    vary based on implementation details and game mechanics.
  examples:
  - title: Basic Usage Example
    code: 'float safety = kitingManager.CalculateSafetyRating(50, 3);

      // Returns a safety rating for a unit at position 50 with 3 active threats'
    language: cpp
  - title: Combat Decision Making
    code: "int currentPosition = unit->GetPositionX();\nint threatCount = GetThreatCount(unit);\n\
      float rating = kitingManager.CalculateSafetyRating(currentPosition, threatCount);\n\
      if (rating < 0.3f) {\n    // Move away from threats\n    unit->MoveToSafePosition();\n\
      }"
    language: cpp
  notes: This method is part of the kiting AI system and should be called frequently
    during combat to make real-time decisions about movement. The exact formula used
    for calculation may vary between different TrinityCore versions or custom modifications.
  warnings: Ensure that both parameters are valid and non-negative integers, as negative
    values could produce unexpected results in the safety rating calculation. This
    method does not perform bounds checking on input values.
  related:
  - GetThreatCount
  - MoveToSafePosition
  - CalculateThreatDistance
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T02:22:48.429083'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
