api:
  class: FormationManager
  method: CalculateDungeonFormation
  signature: int FormationManager::CalculateDungeonFormation(const int & leaderPos,
    float orientation)
documentation:
  brief: Calculates and returns the formation index for a dungeon group based on leader
    position and orientation.
  description: The CalculateDungeonFormation method determines the appropriate formation
    index for a dungeon group by evaluating the leader's position and orientation.
    This method is used internally by the FormationManager to assign proper positioning
    logic for player groups in dungeon environments. The calculation takes into account
    the spatial relationship between group members and ensures optimal positioning
    for dungeon mechanics such as movement, combat strategy, and encounter handling.
    The method assumes valid input parameters and does not perform explicit validation
    checks.
  parameters:
  - name: leaderPos
    description: The position index of the group leader within the formation. Valid
      values are typically integers representing positions in a predefined formation
      layout.
  - name: orientation
    description: The angular orientation of the group leader in radians. This value
      determines how the formation is rotated relative to the world coordinate system.
  returns: Returns an integer representing the calculated formation index. A negative
    value typically indicates an error or invalid configuration, while positive values
    correspond to valid formation templates used for dungeon group positioning.
  examples:
  - title: Basic Usage
    code: int formationIndex = formationManager.CalculateDungeonFormation(0, 1.57f);
      // Leader at position 0 with 90-degree orientation
    language: cpp
  - title: Advanced Usage with Error Handling
    code: "int result = formationManager.CalculateDungeonFormation(2, 3.14f);\nif\
      \ (result < 0)\n{\n    // Handle invalid formation calculation\n    LOG_ERROR(\"\
      world\", \"Failed to calculate dungeon formation for leader at position {}\"\
      , 2);\n}"
    language: cpp
  notes: This method is typically called during group creation or when a group's leader
    orientation changes. The implementation likely uses internal lookup tables or
    mathematical calculations based on the leader's position and orientation to determine
    the appropriate formation template. Performance is generally fast as it involves
    simple mathematical operations.
  warnings: The method does not validate input parameters, so passing invalid leader
    positions or extreme orientation values may result in unexpected behavior or incorrect
    formation indices. Ensure that leaderPos corresponds to valid formation indices
    and orientation is within expected angular ranges.
  related:
  - GetFormationByIndex
  - UpdateGroupFormation
  - ValidateFormationParameters
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T03:23:00.910192'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
