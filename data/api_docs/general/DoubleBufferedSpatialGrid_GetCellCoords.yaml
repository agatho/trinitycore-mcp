api:
  class: DoubleBufferedSpatialGrid
  method: GetCellCoords
  signature: std::pair<uint32, uint32> DoubleBufferedSpatialGrid::GetCellCoords(const
    int & pos) const
documentation:
  brief: Calculates and returns the grid cell coordinates for a given position within
    the spatial grid system.
  description: The GetCellCoords method converts a world position coordinate into
    corresponding grid cell coordinates. This is essential for spatial partitioning
    in TrinityCore's world management, allowing efficient object lookup and culling.
    The method takes a single position value (typically an X or Y coordinate) and
    maps it to the appropriate cell index within the double-buffered spatial grid
    structure. It is commonly used when determining which grid cells contain objects
    or when performing spatial queries. The returned pair represents the cell coordinates
    in the format (x, y), where each value corresponds to a specific grid cell index
    based on the internal grid size and positioning logic.
  parameters:
  - name: pos
    description: The position coordinate (typically X or Y) to convert into grid cell
      coordinates. This is usually a world coordinate value in the range of the map's
      boundaries.
  returns: A std::pair<uint32, uint32> representing the grid cell coordinates. The
    first element corresponds to the X-axis cell index, and the second element corresponds
    to the Y-axis cell index. Both values are unsigned 32-bit integers indicating
    valid grid cell positions within the spatial grid.
  examples:
  - title: Basic Usage Example
    code: 'DoubleBufferedSpatialGrid grid;

      int xPosition = 1000;

      std::pair<uint32, uint32> coords = grid.GetCellCoords(xPosition);

      // coords.first contains the X cell index

      // coords.second contains the Y cell index'
    language: cpp
  - title: Using with World Object Positioning
    code: "class GameObject {\npublic:\n    void UpdatePosition() {\n        DoubleBufferedSpatialGrid*\
      \ grid = GetMap()->GetSpatialGrid();\n        std::pair<uint32, uint32> cellCoords\
      \ = grid->GetCellCoords(GetPositionX());\n        // Use cellCoords to determine\
      \ which grid cells this object occupies\n    }\n};"
    language: cpp
  notes: This method is part of TrinityCore's spatial grid system designed for efficient
    world object management. The implementation assumes a fixed grid size and coordinate
    mapping scheme. It's important to note that the returned coordinates are based
    on internal grid parameters and may not directly correspond to world coordinates
    without proper scaling or offset calculations. This method is thread-safe when
    used with properly synchronized access to the grid structure.
  warnings: The method expects valid position values within the map's coordinate range.
    Passing out-of-bounds coordinates may result in incorrect cell index calculations.
    Developers should ensure that position values are validated before calling this
    method, especially when dealing with dynamic world objects or teleportation scenarios.
  related:
  - GetCell
  - GetCellByCoords
  - UpdateObjectInGrid
metadata:
  confidence: 0.92
  generated_at: '2025-11-07T14:39:39.011096'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
