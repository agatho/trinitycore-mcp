api:
  class: PlayerScript
  method: OnChat
  signature: void PlayerScript::OnChat(Player * player, uint32 type, uint32 lang,
    std::string & msg, Channel * channel)
documentation:
  brief: Executes custom logic when a player sends a chat message in the game.
  description: The OnChat method is a virtual callback function that gets invoked
    whenever a player sends a chat message. This method allows script developers to
    intercept and modify chat behavior, such as filtering messages, adding custom
    prefixes, or triggering events based on specific keywords. It provides access
    to the player, message type, language, and channel information, enabling fine-grained
    control over in-game communication. The method is part of the PlayerScript class
    which is used for extending player-related functionality in TrinityCore.
  parameters:
  - name: player
    description: Pointer to the Player object who sent the chat message. This parameter
      provides access to the player's properties and methods.
  - name: type
    description: Type of chat message being sent. Common values include CHAT_MSG_SAY,
      CHAT_MSG_YELL, CHAT_MSG_WHISPER, etc., defined in the TrinityCore chat system.
  - name: lang
    description: Language identifier used for the message. This typically corresponds
      to language IDs defined in the game's language system.
  - name: msg
    description: Reference to a std::string containing the actual chat message content
      that was sent by the player.
  - name: channel
    description: Pointer to the Channel object if the message was sent through a specific
      channel. May be NULL for direct messages or general chat types.
  returns: null
  examples:
  - title: Basic Chat Filtering Example
    code: "class MyPlayerScript : public PlayerScript\n{\npublic:\n    void OnChat(Player*\
      \ player, uint32 type, uint32 lang, std::string& msg, Channel* channel) override\n\
      \    {\n        // Filter out messages containing 'spam'\n        if (msg.find(\"\
      spam\") != std::string::npos)\n        {\n            player->SendNotification(\"\
      Your message was filtered.\");\n            msg.clear(); // Clear the message\
      \ to prevent sending\n        }\n    }\n};"
    language: cpp
  - title: Adding Custom Prefix to All Messages
    code: "class MyPlayerScript : public PlayerScript\n{\npublic:\n    void OnChat(Player*\
      \ player, uint32 type, uint32 lang, std::string& msg, Channel* channel) override\n\
      \    {\n        // Add a custom prefix to all messages\n        msg = \"[MOD]\
      \ \" + msg;\n    }\n};"
    language: cpp
  notes: This method is called during the chat processing phase, so modifications
    to the message string will affect what gets sent to other players. Be cautious
    when modifying or clearing messages as it may impact gameplay balance and user
    experience.
  warnings: Modifying the message content directly can cause unexpected behavior if
    not handled carefully. Clearing the message string will prevent it from being
    sent, which might be unintended. Ensure that any filtering logic doesn't break
    core game functionality.
  related:
  - PlayerScript::OnChat
  - PlayerScript::OnChat
  - PlayerScript::OnChat
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T01:27:59.554941'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
