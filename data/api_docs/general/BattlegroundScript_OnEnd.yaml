api:
  class: BattlegroundScript
  method: OnEnd
  signature: void BattlegroundScript::OnEnd(int winner)
documentation:
  brief: Called when a battleground ends, allowing scripts to perform cleanup or reward
    distribution.
  description: The OnEnd method is invoked when a battleground concludes, providing
    an opportunity for custom scripts to execute logic such as rewarding players,
    cleaning up game objects, or handling post-battle events. This method receives
    the winner parameter which indicates which faction has won the match. The method
    is part of the BattlegroundScript class and is typically used in custom battleground
    implementations to extend or modify default behavior. It's important to note that
    this method runs during the battleground's finalization phase, so any modifications
    to the battleground state should be handled carefully.
  parameters:
  - name: winner
    description: An integer value indicating which faction has won the battleground.
      Typically 0 for alliance victory, 1 for horde victory, and -1 for a draw or
      neutral result.
  returns: void
  examples:
  - title: Basic battleground end handler
    code: "class MyBattlegroundScript : public BattlegroundScript\n{\npublic:\n  \
      \  MyBattlegroundScript() : BattlegroundScript(\"MyBattleground\") {}\n    \n\
      \    void OnEnd(int winner) override\n    {\n        if (winner == 0)\n    \
      \        sWorld->SendWorldText(L\"Alliance has won the battleground!\");\n \
      \       else if (winner == 1)\n            sWorld->SendWorldText(L\"Horde has\
      \ won the battleground!\");\n        else\n            sWorld->SendWorldText(L\"\
      Battleground ended in a draw.\");\n    }\n};"
    language: cpp
  notes: This method is called after all battleground cleanup operations are complete,
    so any modifications to player states or game objects should be done carefully.
    The winner parameter value may vary depending on the battleground type and specific
    implementation details.
  warnings: null
  related:
  - OnStart
  - OnPlayerJoin
  - OnPlayerLeave
  - Update
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T12:27:38.085726'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
