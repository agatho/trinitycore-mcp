api:
  class: WorldSession
  method: HandleSelfResOpcode
  signature: void WorldSession::HandleSelfResOpcode(WorldPackets::Spells::SelfRes
    & selfRes)
documentation:
  brief: Processes the self-resurrection opcode sent by a player to initiate their
    own resurrection.
  description: The HandleSelfResOpcode method handles the client-initiated self-resurrection
    request, typically triggered when a player clicks the 'Resurrect' button after
    dying. This method processes the incoming packet and performs the necessary actions
    to resurrect the player, including updating their health, mana, and any relevant
    game state. The method is part of the WorldSession class which manages all network
    communication with a connected client. It ensures that players can only self-resurrect
    under appropriate conditions such as having sufficient soul shards or other resources
    required for resurrection.
  parameters:
  - name: selfRes
    description: The SelfRes packet containing information about the player's self-resurrection
      request, including any associated data like soul shard usage.
  returns: null
  examples:
  - title: Basic self-resurrection handling
    code: "void WorldSession::HandleSelfResOpcode(WorldPackets::Spells::SelfRes &\
      \ selfRes)\n{\n    Player* player = GetPlayer();\n    if (!player || player->IsAlive())\n\
      \        return;\n\n    // Process the self-resurrection logic here\n    player->ResurrectPlayer(0);\n\
      \    player->SendHeartBeat();\n}"
    language: cpp
  notes: This method is typically called from within the packet handling system when
    a client sends a self-resurrection request. It should be noted that this operation
    may require specific conditions to be met such as having enough soul shards or
    being in a valid resurrection state. The method does not directly handle the visual
    effects of resurrection, which are usually handled separately by the client-side
    code.
  warnings: Improper handling of this opcode can lead to exploits where players might
    resurrect without proper resources or conditions. Developers should ensure all
    validation checks are performed before allowing any resurrection actions to occur.
  related:
  - HandleResurrect
  - Player::ResurrectPlayer
  - Player::GetSession
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:37:40.094793'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
