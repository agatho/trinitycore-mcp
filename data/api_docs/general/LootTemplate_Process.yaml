api:
  class: LootTemplate
  method: Process
  signature: void LootTemplate::Process(Loot & loot, bool rate, uint16 lootMode, uint8
    groupId, const Player * personalLooter) const
documentation:
  brief: Processes a loot template to generate items for a loot collection based on
    specified conditions and looting rules.
  description: The Process method evaluates a loot template and populates a given
    Loot object with items according to the template's entries, considering factors
    such as group ID, loot mode, personal looter, and whether rate-based processing
    is required. This method is typically invoked during the loot distribution process
    in World of Warcraft instances, where it determines which items from a template
    are awarded to players based on their roles (e.g., group member, personal looter)
    and loot rules (e.g., need before greed, free-for-all). It ensures that only valid
    and appropriate items are added to the loot collection, respecting item limits,
    group restrictions, and player-specific conditions.
  parameters:
  - name: loot
    description: Reference to the Loot object where processed items will be added.
      This is the destination for the generated loot.
  - name: rate
    description: Boolean flag indicating whether rate-based processing should be applied.
      When true, item drop rates are considered; when false, all items in the template
      may be awarded regardless of chance.
  - name: lootMode
    description: The loot mode to use for processing (e.g., normal, heroic, mythic).
      Determines how items are distributed among players based on game rules and instance
      difficulty.
  - name: groupId
    description: Group ID used to filter template entries. Only items belonging to
      the specified group will be processed. A value of 0 typically means no group
      restriction.
  - name: personalLooter
    description: Pointer to the Player who is designated as the personal looter for
      this template. Used to determine if certain items should be awarded directly
      to a specific player.
  returns: null
  examples:
  - title: Basic loot processing with group restriction
    code: 'LootTemplate* lootTemplate = sLootMgr->GetLootTemplate(12345);

      Loot loot;

      Player* looter = player;

      lootTemplate->Process(loot, true, 0, 1, looter);'
    language: cpp
  - title: Processing loot with specific loot mode and no rate consideration
    code: 'LootTemplate* lootTemplate = sLootMgr->GetLootTemplate(67890);

      Loot loot;

      lootTemplate->Process(loot, false, 2, 0, nullptr); // No personal looter

      // Loot now contains all items from template with no rate checks'
    language: cpp
  notes: This method is part of the core loot system in TrinityCore and relies heavily
    on internal loot managers and player state tracking. It should be called only
    after verifying that the loot template exists and is valid for use. The method
    modifies the provided Loot object directly, so it's important to ensure that the
    Loot instance is properly initialized before calling Process.
  warnings: Improper usage of this method may result in incorrect loot distribution
    or invalid items being added to a player's loot collection. Ensure that all parameters
    are correctly set, especially 'groupId' and 'personalLooter', as these can significantly
    affect which items are awarded.
  related:
  - LootTemplate::AddItem
  - LootTemplate::Clear
  - LootTemplate::HasItem
metadata:
  confidence: 0.95
  generated_at: '2025-11-06T09:11:31.886700'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
