api:
  class: ScriptMgr
  method: OnSceneComplete
  signature: void ScriptMgr::OnSceneComplete(Player * player, uint32 sceneInstanceID,
    const SceneTemplate * sceneTemplate)
documentation:
  brief: Invoked when a scene instance has completed for a player
  description: This method is called by the TrinityCore scripting system when a scene
    instance, initiated for a specific player, has finished executing. Scenes in World
    of Warcraft are scripted sequences that can involve cutscenes, quest events, or
    other narrative elements. The OnSceneComplete callback allows custom scripts to
    react to the completion of such scenes, enabling developers to trigger additional
    game logic, update quest states, or modify player conditions upon scene termination.
    This method is part of the general scripting interface and is typically used in
    conjunction with scene management systems.
  parameters:
  - name: player
    description: Pointer to the Player object for whom the scene instance has completed.
      This parameter provides access to the player's state, inventory, quest data,
      and other relevant attributes.
  - name: sceneInstanceID
    description: Unique identifier of the scene instance that has completed. This
      ID is used internally by the core to track active scenes and can be used to
      correlate with specific scene events or templates.
  - name: sceneTemplate
    description: Pointer to the SceneTemplate object that defines the structure and
      behavior of the scene that was completed. This provides access to scene properties,
      triggers, and associated data.
  returns: null
  examples:
  - title: Basic scene completion handler
    code: "void MyScript::OnSceneComplete(Player* player, uint32 sceneInstanceID,\
      \ const SceneTemplate* sceneTemplate)\n{\n    if (player && sceneTemplate)\n\
      \    {\n        // Log the completion of a specific scene\n        sLog->outString(\"\
      Scene %u completed for player %s\", sceneInstanceID, player->GetName().c_str());\n\
      \        \n        // Trigger quest completion or other logic\n        if (sceneTemplate->GetSceneType()\
      \ == SCENE_TYPE_QUEST)\n        {\n            player->CompleteQuest(12345);\n\
      \        }\n    }\n}"
    language: cpp
  notes: The OnSceneComplete method is executed on the main game thread and should
    avoid heavy computations or blocking operations to prevent performance degradation.
    It's recommended to defer complex logic to a separate task queue if necessary.
  warnings: Ensure that the player pointer and sceneTemplate are valid before using
    them, as they may be null in certain edge cases. Improper handling of these parameters
    can lead to crashes or undefined behavior.
  related:
  - OnSceneStart
  - OnSceneTrigger
  - OnSceneCancel
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T22:06:08.457055'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
