api:
  class: CombatAI
  method: JustDied
  signature: void CombatAI::JustDied(int * killer)
documentation:
  brief: Handles the death event of a creature in combat, performing cleanup and optional
    actions.
  description: The JustDied method is invoked when a creature controlled by the CombatAI
    system dies. This method typically performs necessary cleanup operations such
    as removing the creature from combat, triggering any death-related events or quests,
    and potentially notifying other systems about the creature's demise. It may also
    handle special behaviors like dropping loot, playing death animations, or updating
    the AI state to reflect that the creature is no longer active in combat.
  parameters:
  - name: killer
    description: Pointer to an integer representing the ID of the entity that killed
      this creature. This value can be used to determine which player or unit triggered
      the death event, and may influence subsequent actions like quest completion
      or loot distribution.
  returns: null
  examples:
  - title: Basic usage in custom AI
    code: "class MyCreatureAI : public CombatAI {\npublic:\n    void JustDied(int*\
      \ killer) override {\n        // Perform cleanup\n        if (killer && *killer\
      \ > 0) {\n            // Handle quest completion or reward logic here\n    \
      \    }\n        // Call base class implementation if needed\n        CombatAI::JustDied(killer);\n\
      \    }\n};"
    language: cpp
  notes: This method is part of the AI event system and should not be called manually
    unless implementing a custom AI behavior. The killer parameter may be NULL or
    zero if the death was caused by environmental effects or other non-unit sources.
  warnings: Ensure that any cleanup or state changes performed in JustDied do not
    interfere with ongoing combat operations or cause memory leaks. Avoid modifying
    the creature's health or combat status directly within this function as it may
    lead to undefined behavior.
  related:
  - EnterCombat
  - JustEnteredCombat
  - UpdateAI
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T17:17:42.351789'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
