api:
  class: WorldSession
  method: HandleReportPvPAFK
  signature: void WorldSession::HandleReportPvPAFK(WorldPackets::Battleground::ReportPvPPlayerAFK
    & reportPvPPlayerAFK)
documentation:
  brief: Processes a player's report of another player being AFK in a PvP battleground.
  description: The HandleReportPvPAFK method handles incoming reports from players
    who believe another player is idle or AFK during PvP battlegrounds. This method
    validates the report, ensures the reporting player is in a valid battleground
    state, and processes the AFK status update for the targeted player. It integrates
    with the game's anti-AFK system to maintain fair play by tracking and potentially
    penalizing players who remain inactive during competitive matches. The method
    checks that both the reporter and reported player are participating in the same
    battleground and that the report is made within appropriate time constraints.
  parameters:
  - name: reportPvPPlayerAFK
    description: A packet containing information about the AFK report, including the
      GUID of the reporting player and the GUID of the player being reported as AFK.
  returns: null
  examples:
  - title: Basic AFK Report Handling
    code: "void WorldSession::HandleReportPvPAFK(WorldPackets::Battleground::ReportPvPPlayerAFK&\
      \ reportPvPPlayerAFK)\n{\n    // Validate that the reporting player is in a\
      \ battleground\n    if (!GetPlayer()->InBattleground())\n        return;\n \
      \   \n    // Process the AFK report for the target player\n    // Implementation\
      \ details would handle validation and status updates\n    sWorld->SendGlobalMessage(\"\
      AFK Report received: \" + std::to_string(reportPvPPlayerAFK.TargetGUID.GetRawValue()));\n\
      }"
    language: cpp
  notes: This method is part of the battleground anti-AFK system. It should only be
    called when a player is actively participating in a PvP battleground. The method
    relies on proper packet validation and assumes that the client has already validated
    the report before sending it to the server.
  warnings: Improper handling of AFK reports can lead to false accusations and player
    frustration. Ensure that all validations are performed before processing the report,
    including checking that both players are in the same battleground and that the
    reporting player is not also AFK.
  related:
  - WorldSession::HandleBattlegroundPlayerPosition
  - WorldSession::HandleReportPvPPlayerAFK
  - Battleground::UpdatePlayerStatus
  - Player::SetAFK
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T20:50:01.428225'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
