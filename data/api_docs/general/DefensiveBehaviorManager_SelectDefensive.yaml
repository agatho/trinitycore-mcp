api:
  class: DefensiveBehaviorManager
  method: SelectDefensive
  signature: uint32 DefensiveBehaviorManager::SelectDefensive() const
documentation:
  brief: Selects and returns a defensive behavior ID based on current AI state and
    combat conditions.
  description: The SelectDefensive method is responsible for determining which defensive
    behavior should be executed by an AI-controlled unit. It evaluates various factors
    such as health percentage, threat level, available defensive abilities, and current
    combat situation to choose the most appropriate defensive action. This method
    is typically called during AI decision-making cycles when the unit needs to respond
    to incoming threats or maintain defensive positioning. The returned ID corresponds
    to a predefined defensive behavior in the AI system's behavior tree or action
    list.
  parameters: []
  returns: Returns a uint32 value representing the ID of the selected defensive behavior.
    This ID maps to a specific defensive action such as 'Shield Block', 'Retreat',
    'Heal Self', or other defensive mechanics defined in the AI configuration. A return
    value of 0 typically indicates no valid defensive behavior was selected.
  examples:
  - title: Basic Usage in AI Update Loop
    code: "void EnemyAI::UpdateAI(uint32 diff)\n{\n    if (me->IsInCombat())\n   \
      \ {\n        uint32 defensiveAction = defensiveBehaviorManager.SelectDefensive();\n\
      \        if (defensiveAction > 0)\n        {\n            // Execute the selected\
      \ defensive behavior\n            DoDefensiveAction(defensiveAction);\n    \
      \    }\n    }\n}"
    language: cpp
  - title: Integration with Health-Based Decision Making
    code: "uint32 DefensiveBehaviorManager::SelectDefensive() const\n{\n    if (me->GetHealthPct()\
      \ < 30)\n        return DEFENSIVE_BEHAVIOR_HEAL_SELF;\n    \n    if (me->GetThreatManager().GetHighestThreat()\
      \ > 10000)\n        return DEFENSIVE_BEHAVIOR_SHIELD_BLOCK;\n    \n    return\
      \ DEFENSIVE_BEHAVIOR_RETREAT;\n}"
    language: cpp
  notes: This method is expected to be called frequently during AI update cycles,
    so performance considerations should be taken into account. The implementation
    may cache certain values or use optimized lookup tables for better efficiency.
    The method assumes that the owning unit's state (health, threat, etc.) has been
    properly updated before calling.
  warnings: Ensure that the defensive behavior IDs returned by this method are valid
    and correspond to actual behaviors defined in the AI system. Calling this method
    without proper initialization or with an invalid AI context may result in undefined
    behavior or incorrect combat decisions.
  related:
  - GetDefensiveBehavior
  - SetDefensiveBehavior
  - ExecuteDefensiveAction
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T08:37:55.085999'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
