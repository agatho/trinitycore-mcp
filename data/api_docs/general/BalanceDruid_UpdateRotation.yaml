api:
  class: BalanceDruid
  method: UpdateRotation
  signature: void BalanceDruid::UpdateRotation(::Unit * target)
documentation:
  brief: Updates the balance druid's spell rotation based on the current target and
    combat state.
  description: The UpdateRotation method is responsible for determining and executing
    the optimal sequence of spells for a balance druid during combat. It evaluates
    the current target's health, distance, and combat situation to decide which abilities
    to cast next. This method typically integrates with the AI system to make real-time
    decisions about spell usage, including managing mana efficiency, applying debuffs,
    and maintaining appropriate positioning. The method is called regularly during
    combat to ensure optimal gameplay performance and adherence to balance druid rotation
    theory.
  parameters:
  - name: target
    description: Pointer to the Unit object representing the current combat target.
      This parameter determines which enemy the druid will focus their rotation on,
      including targeting mechanics, spell priority, and debuff application.
  returns: null
  examples:
  - title: Basic Usage in Combat
    code: "void MyBalanceDruidAI::Update()\n{\n    if (Unit* target = GetVictim())\n\
      \    {\n        UpdateRotation(target);\n    }\n}"
    language: cpp
  - title: Integration with Custom AI Logic
    code: "void BalanceDruid::UpdateRotation(Unit* target)\n{\n    if (!target ||\
      \ !target->IsAlive())\n        return;\n\n    // Check for mana and spell availability\n\
      \    if (HasManaForSpell(SPELL_MOONFIRE) && !target->HasAura(SPELL_MOONFIRE_AURA))\n\
      \    {\n        CastSpell(target, SPELL_MOONFIRE);\n    }\n    else if (HasManaForSpell(SPELL_INSECT_SWARM)\
      \ && !target->HasAura(SPELL_INSECT_SWARM_AURA))\n    {\n        CastSpell(target,\
      \ SPELL_INSECT_SWARM);\n    }\n    // Additional rotation logic here\n}"
    language: cpp
  notes: This method is typically called from within the AI update loop and should
    not be invoked directly unless implementing custom behavior. The method assumes
    that the target is valid and in combat range. Performance considerations include
    minimizing spell checks and avoiding unnecessary calculations when no action is
    required.
  warnings: Do not call this method with a null or invalid target pointer as it may
    cause undefined behavior. Ensure proper target validation before invoking this
    method to prevent crashes or incorrect AI decisions.
  related:
  - GetVictim
  - CastSpell
  - HasManaForSpell
  - Update
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T08:50:00.195268'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
