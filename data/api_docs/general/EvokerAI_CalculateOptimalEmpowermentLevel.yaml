api:
  class: EvokerAI
  method: CalculateOptimalEmpowermentLevel
  signature: EmpowermentLevel EvokerAI::CalculateOptimalEmpowermentLevel(int spellId,
    int * target)
documentation:
  brief: Calculates the optimal empowerment level for an evoker based on spell ID
    and target.
  description: The CalculateOptimalEmpowermentLevel method determines the most effective
    empowerment level for an evoker's abilities, considering the specific spell being
    cast and the current target. This method is crucial for AI decision-making in
    evoker class behavior, ensuring that spells are empowered at the appropriate level
    to maximize damage output or utility. The calculation takes into account factors
    such as spell properties, target health, and combat situation. It returns an EmpowermentLevel
    enum value indicating whether the spell should be empowered to level 1, 2, or
    3.
  parameters:
  - name: spellId
    description: The identifier of the spell for which to calculate optimal empowerment
      level
  - name: target
    description: Pointer to the target unit for which empowerment is calculated; may
      be null in some contexts
  returns: Returns an EmpowermentLevel enum value indicating the optimal empowerment
    level (1, 2, or 3) for the specified spell and target. Returns level 0 if no empowerment
    is recommended.
  examples:
  - title: Basic usage in AI decision making
    code: "void EvokerAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \    {\n        EmpowermentLevel level = CalculateOptimalEmpowermentLevel(SPELL_DRAGONSPIT,\
      \ &target);\n        if (level > 0)\n        {\n            // Apply empowerment\
      \ logic\n        }\n    }\n}"
    language: cpp
  - title: Using calculated empowerment level for spell casting
    code: "void EvokerAI::CastSpellWithEmpowerment(int spellId)\n{\n    Unit* target\
      \ = me->GetVictim();\n    int* targetPtr = target ? &target->GetGUID().GetRawValue()\
      \ : nullptr;\n    EmpowermentLevel level = CalculateOptimalEmpowermentLevel(spellId,\
      \ targetPtr);\n    \n    switch (level)\n    {\n        case EMPowermentLevel::LEVEL_1:\n\
      \            // Cast empowered version 1\n            break;\n        case EMPowermentLevel::LEVEL_2:\n\
      \            // Cast empowered version 2\n            break;\n        case EMPowermentLevel::LEVEL_3:\n\
      \            // Cast empowered version 3\n            break;\n        default:\n\
      \            // Cast normal version\n            break;\n    }\n}"
    language: cpp
  notes: This method is part of the evoker's AI decision-making system and should
    be called regularly during combat updates. The empowerment level calculation may
    vary based on current game state, target type, and spell-specific rules. Ensure
    that the target parameter is valid before calling to avoid undefined behavior.
  warnings: Do not call this method without proper initialization of the AI context.
    Passing a null target pointer may lead to unexpected results or crashes depending
    on implementation details. The method assumes that spell data and target information
    are up-to-date.
  related:
  - GetEmpowermentLevel
  - SetEmpowermentLevel
  - IsSpellEmpowered
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T05:18:28.085048'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
