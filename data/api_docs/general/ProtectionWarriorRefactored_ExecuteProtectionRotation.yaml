api:
  class: ProtectionWarriorRefactored
  method: ExecuteProtectionRotation
  signature: void ProtectionWarriorRefactored::ExecuteProtectionRotation(::Unit *
    target)
documentation:
  brief: Executes the protection warrior's rotation logic against a specified target.
  description: The ExecuteProtectionRotation method implements the core combat decision-making
    logic for a protection warrior class in TrinityCore. It evaluates the current
    state of the player and their target to determine the appropriate ability to cast
    or execute next, following established protection warrior rotation priorities.
    This includes managing defensive cooldowns, threat generation, and ensuring optimal
    use of abilities like Shield Block, Revenge, and Defensive Stance. The method
    assumes a valid target is provided and operates within the context of the AI's
    decision-making framework for tanking roles.
  parameters:
  - name: target
    description: Pointer to the Unit object representing the current combat target.
      Must be a valid Unit instance; null or invalid targets will result in undefined
      behavior.
  returns: void
  examples:
  - title: Basic Usage Example
    code: "void MyProtectionWarrior::OnCombatStart(Unit* target)\n{\n    ExecuteProtectionRotation(target);\n\
      }"
    language: cpp
  - title: Integration with Combat State Machine
    code: "void ProtectionWarriorRefactored::UpdateAI(const uint32 diff)\n{\n    if\
      \ (!UpdateVictim())\n        return;\n\n    if (me->GetVictim())\n    {\n  \
      \      ExecuteProtectionRotation(me->GetVictim());\n    }\n}"
    language: cpp
  notes: This method is typically called from within an AI update loop or combat state
    handler. It relies on internal class state tracking for cooldowns and resource
    management, so it should only be invoked when the warrior is actively engaged
    in combat with a valid target.
  warnings: Do not call this method without ensuring that the target parameter is
    a valid Unit pointer. Passing null or invalid pointers may lead to crashes or
    unexpected behavior. The method does not perform any validation on the target's
    validity beyond basic null checks.
  related:
  - GetVictim
  - UpdateVictim
  - HandleMeleeAttack
  - UseDefensiveCooldowns
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T08:11:49.356132'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
