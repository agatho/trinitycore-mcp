api:
  class: QuestCompletion
  method: RecoverFromStuckState
  signature: void QuestCompletion::RecoverFromStuckState(Player * bot, uint32 questId)
documentation:
  brief: Attempts to recover a player bot from a stuck quest state by resetting quest
    completion flags and reinitializing quest progress.
  description: The RecoverFromStuckState method is designed to resolve situations
    where a player bot becomes trapped in an incomplete or inconsistent quest state.
    This typically occurs when a quest's completion status is not properly updated,
    leaving the bot unable to proceed with quest objectives or receive rewards. The
    method resets internal quest tracking flags for the specified quest ID and ensures
    that the bot's quest log reflects the correct state. It may also reinitialize
    quest-related data structures to prevent further inconsistencies. This function
    is particularly useful in automated questing scripts or AI systems where bots
    might get stuck due to network latency, server issues, or unexpected quest behavior.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that needs to be
      recovered from a stuck quest state. Must not be null.
  - name: questId
    description: Unique identifier of the quest for which the stuck state recovery
      is being attempted. Must correspond to a valid quest in the game database.
  returns: null
  examples:
  - title: Basic Quest Recovery Usage
    code: 'Player* myBot = ...; // Assume bot is initialized

      uint32 stuckQuestId = 12345;

      questCompletion.RecoverFromStuckState(myBot, stuckQuestId);'
    language: cpp
  - title: Recovery with Error Handling
    code: "if (myBot && questId > 0) {\n    questCompletion.RecoverFromStuckState(myBot,\
      \ questId);\n    // Additional logic to verify recovery\n}"
    language: cpp
  notes: This method assumes that the provided player object is a valid bot instance
    and that the quest ID exists in the database. It may reset quest data including
    objective progress, completion flags, and related timers. The recovery process
    does not guarantee that all quest-related actions will be fully restored; it primarily
    addresses state inconsistencies.
  warnings: Using this method on non-bot players or invalid quest IDs can lead to
    undefined behavior or data corruption. Ensure that the bot is in a safe state
    before calling this function, as it may interrupt ongoing quest activities or
    cause temporary UI glitches.
  related:
  - QuestCompletion::CompleteQuest
  - QuestCompletion::ResetQuestState
  - Player::GetQuestStatus
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T05:04:39.347028'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
