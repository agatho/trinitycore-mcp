api:
  class: CombatMovementStrategy
  method: FindSafePosition
  signature: int CombatMovementStrategy::FindSafePosition(Player * player, const int
    & preferredPosition, float searchRadius) const
documentation:
  brief: Finds a safe position for the player within a specified search radius during
    combat.
  description: The FindSafePosition method calculates and returns a suitable location
    for a player to move to while avoiding dangerous areas during combat. It evaluates
    the preferred position and searches within the given radius for a valid, unobstructed
    spot that minimizes risk. This method is typically used by AI-controlled characters
    or in combat movement strategies to ensure safe positioning. The method considers
    factors such as terrain, obstacles, and enemy proximity when determining safety.
    It requires a valid player object and a positive search radius.
  parameters:
  - name: player
    description: Pointer to the Player object for which to find a safe position. Must
      not be null.
  - name: preferredPosition
    description: The preferred position index or identifier that the method will attempt
      to use as a starting point for finding a safe location.
  - name: searchRadius
    description: Float value representing the maximum distance to search for a safe
      position around the preferred location. Must be positive and greater than zero.
  returns: Returns an integer identifier or index representing the found safe position.
    A negative value typically indicates failure to find a suitable position, while
    a non-negative value represents a valid safe position index.
  examples:
  - title: Basic Usage in Combat AI
    code: "int safePos = strategy.FindSafePosition(player, 5, 10.0f);\nif (safePos\
      \ >= 0) {\n    // Move player to the safe position\n    player->MoveTo(safePos);\n\
      } else {\n    // Handle case where no safe position was found\n    player->SendSystemMessage(\"\
      No safe position available.\");\n}"
    language: cpp
  - title: Advanced Usage with Position Validation
    code: "int preferred = GetPreferredCombatPosition(player);\nfloat radius = GetCombatRadius(player);\n\
      int safePos = strategy.FindSafePosition(player, preferred, radius);\n\nif (safePos\
      \ >= 0 && IsPositionSafe(safePos)) {\n    // Execute movement to the safe position\n\
      \    ExecuteMovement(player, safePos);\n} else if (safePos < 0) {\n    // Fallback\
      \ behavior when no safe position is found\n    RetreatFromCombat(player);\n}"
    language: cpp
  notes: This method may perform pathfinding calculations internally and could have
    performance implications during high-frequency combat scenarios. The implementation
    likely uses collision detection and terrain analysis to determine safety. It's
    recommended to cache results when possible to avoid repeated computations.
  warnings: Ensure the player pointer is valid before calling this method, as passing
    a null pointer will result in undefined behavior. The search radius should be
    carefully chosen to balance between finding a suitable position and performance
    impact.
  related:
  - CombatMovementStrategy::GetSafePosition
  - CombatMovementStrategy::IsPositionSafe
  - CombatMovementStrategy::MoveToSafePosition
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:41:31.364469'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
