api:
  class: CombatMovementStrategy
  method: CalculateTankPosition
  signature: int CombatMovementStrategy::CalculateTankPosition(Player * player, Unit
    * target) const
documentation:
  brief: Calculates and returns the optimal positioning for a tank unit in combat
    based on player and target data.
  description: The CalculateTankPosition method determines the best positional strategy
    for a tank character during combat engagements. It evaluates the current state
    of the player and their target unit to compute an appropriate positioning value
    that helps maintain aggro, avoid dangerous attacks, and optimize combat effectiveness.
    This method is typically used by AI systems within TrinityCore's combat movement
    logic to guide tank behavior in both PvE and PvP scenarios. The returned integer
    represents a calculated position index or offset that can be used by the movement
    strategy to adjust the tank's positioning relative to the target.
  parameters:
  - name: player
    description: Pointer to the Player object representing the tank unit performing
      the calculation. Must not be null and must represent a valid player with combat
      capabilities.
  - name: target
    description: Pointer to the Unit object that the player is engaging in combat.
      Must not be null and should represent a valid combat target with measurable
      attributes such as health, position, and threat level.
  returns: An integer value representing the calculated tank positioning strategy.
    Positive values typically indicate forward movement or aggressive positioning,
    negative values suggest retreat or defensive positioning, while zero may imply
    neutral positioning or no change in current stance.
  examples:
  - title: Basic Tank Position Calculation
    code: "int position = strategy.CalculateTankPosition(player, target);\nif (position\
      \ > 0) {\n    // Move forward to maintain aggro\n    player->SetFacing(target->GetOrientation());\n\
      } else if (position < 0) {\n    // Retreat to avoid damage\n    player->Move\
      \ backwards slowly;\n}"
    language: cpp
  - title: Integrating with Combat Movement Logic
    code: "void ApplyTankMovementStrategy(Player* player, Unit* target) {\n    CombatMovementStrategy\
      \ strategy;\n    int position = strategy.CalculateTankPosition(player, target);\n\
      \    \n    switch (position) {\n        case 1:\n            // Aggressive stance\
      \ - move closer\n            player->MoveForward();\n            break;\n  \
      \      case -1:\n            // Defensive stance - move back\n            player->MoveBackward();\n\
      \            break;\n        default:\n            // Neutral stance - maintain\
      \ current position\n            break;\n    }\n}"
    language: cpp
  notes: This method is part of the core AI movement system and relies on accurate
    unit positioning, threat levels, and combat state information. The implementation
    may vary depending on the specific subclass or specialization of CombatMovementStrategy
    being used. Performance considerations include avoiding frequent recalculations
    during active combat to prevent CPU overhead.
  warnings: Ensure that both player and target parameters are valid and not null before
    calling this method. Passing invalid pointers can lead to undefined behavior or
    crashes. The returned value should be interpreted in context with the current
    combat situation as positioning strategies may change dynamically.
  related:
  - GetTankPosition
  - SetTankPosition
  - UpdateCombatMovement
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:46:35.409755'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
