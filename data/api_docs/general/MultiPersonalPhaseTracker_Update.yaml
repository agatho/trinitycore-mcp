api:
  class: MultiPersonalPhaseTracker
  method: Update
  signature: void MultiPersonalPhaseTracker::Update(Map * map, uint32 diff)
documentation:
  brief: Updates the multi-personal phase tracker for the specified map with the given
    time difference.
  description: The Update method in MultiPersonalPhaseTracker is responsible for processing
    and maintaining phase-related data for multiple players within a specific map.
    It handles the synchronization of phase states, ensuring that all players in the
    tracked phases are properly updated according to the elapsed game time. This method
    typically runs during each tick of the game loop and is crucial for maintaining
    proper phase visibility and interaction between players and game objects. The
    implementation likely involves iterating through active player phases, checking
    for phase transitions, and updating internal tracking structures based on the
    provided time difference.
  parameters:
  - name: map
    description: Pointer to the Map object where the phase tracking should be updated.
      This represents the current game map instance containing players and objects
      that may be affected by phase changes.
  - name: diff
    description: The time difference (in milliseconds) since the last update call.
      This value is used to determine how much time has passed and whether any phase
      transitions or updates are required.
  returns: null
  examples:
  - title: Basic Update Call
    code: "void GameLoop()\n{\n    Map* map = ...; // Get current map\n    uint32\
      \ diff = sWorld->getDiff(); // Get elapsed time since last update\n    multiPhaseTracker->Update(map,\
      \ diff);\n}"
    language: cpp
  - title: Integration with World Update Loop
    code: "void World::Update(uint32 diff)\n{\n    // ... other world updates ...\n\
      \    \n    for (MapManager::MapMapType::const_iterator itr = m_mapRefs.begin();\
      \ itr != m_mapRefs.end(); ++itr)\n    {\n        if (Map* map = itr->second)\n\
      \        {\n            multiPhaseTracker->Update(map, diff);\n        }\n \
      \   }\n    \n    // ... other world updates ...\n}"
    language: cpp
  notes: This method is typically called from within the game's main update loop.
    It's important to note that the phase tracking system may have performance implications
    if many players are involved, as it needs to process each player's phase data
    efficiently. The diff parameter should be carefully managed to ensure accurate
    time-based phase transitions.
  warnings: Improper handling of the diff parameter can lead to incorrect phase transitions
    or timing issues. Ensure that the map pointer is valid before calling this method,
    and be aware that frequent calls to Update may impact performance if not optimized
    properly.
  related:
  - GetPhaseForPlayer
  - AddPlayerToPhase
  - RemovePlayerFromPhase
  - IsPlayerInPhase
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T23:26:48.846048'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
