api:
  class: WorldSession
  method: HandleGuildLeave
  signature: void WorldSession::HandleGuildLeave(WorldPackets::Guild::GuildLeave &
    leave)
documentation:
  brief: Removes the player from their current guild and updates guild membership
    records.
  description: The HandleGuildLeave method processes a client request to leave the
    player's current guild. It validates that the player is indeed a member of a guild,
    ensures they are not the guild leader (who cannot leave without disbanding), and
    then removes the player from the guild's member list. The method updates internal
    guild data structures and sends appropriate responses back to the client. This
    function is typically invoked when a player selects the 'Leave Guild' option in
    the game interface.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleGuildLeave(WorldPackets::Guild::GuildLeave& leave)\n\
      {\n    if (!GetPlayer()->GetGuildId())\n        return;\n\n    // Logic to remove\
      \ player from guild\n    // Update database and send response\n}"
    language: cpp
  notes: This method should only be called when a valid player session exists with
    an active guild membership. The implementation must ensure thread safety when
    modifying shared guild data structures.
  warnings: Attempting to leave a guild as the leader will result in an error; the
    guild must be disbanded instead. This function does not validate whether the player
    is in a state where leaving is allowed (e.g., during combat).
  related:
  - HandleGuildDisband
  - HandleGuildCreate
  - GetPlayer
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:59:00.506525'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
