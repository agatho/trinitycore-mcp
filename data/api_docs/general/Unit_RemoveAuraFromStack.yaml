api:
  class: Unit
  method: RemoveAuraFromStack
  signature: void Unit::RemoveAuraFromStack(uint32 spellId, int casterGUID, int removeMode,
    uint16 num)
documentation:
  brief: Removes a spell aura from the target's stack with specified parameters
  description: The RemoveAuraFromStack method removes a specific spell aura from the
    unit's aura stack, allowing for precise control over how many times a spell is
    removed. This method is commonly used in World of Warcraft TrinityCore to manage
    spell effects and their duration on targets. It operates by identifying the correct
    aura based on the spell ID and caster GUID, then removing the specified number
    of stacks from that aura. The method supports various removal modes including
    direct removal, stacking, and conditional removal based on specific conditions.
  parameters:
  - name: spellId
    description: The unique identifier of the spell whose aura is to be removed. This
      must match the spell ID of the aura being targeted.
  - name: casterGUID
    description: The GUID of the caster who applied the aura. This helps identify
      which specific aura instance to remove from the stack.
  - name: removeMode
    description: The removal mode determines how the aura is removed, with values
      typically indicating direct removal (0) or conditional removal (1-255).
  - name: num
    description: The number of stacks to remove from the aura. This parameter controls
      how many times the spell effect is reduced.
  returns: null
  examples:
  - title: Basic usage example
    code: 'Unit* target = GetTarget();

      uint32 spellId = 12345;

      int casterGUID = 67890;

      int removeMode = 0;

      uint16 num = 1;

      target->RemoveAuraFromStack(spellId, casterGUID, removeMode, num);'
    language: cpp
  - title: Advanced usage example with multiple stacks
    code: 'Unit* target = GetTarget();

      uint32 spellId = 12345;

      int casterGUID = 67890;

      int removeMode = 1;

      uint16 num = 3;

      target->RemoveAuraFromStack(spellId, casterGUID, removeMode, num);'
    language: cpp
  notes: This method requires careful handling of spell IDs and caster GUIDs to ensure
    correct removal. Performance considerations include potential impact on aura tracking
    and stack management. The method is thread-safe when used properly but may cause
    issues if multiple threads attempt to modify the same aura simultaneously.
  warnings: Improper use of this method can lead to incorrect aura removal or stack
    management, potentially causing game mechanics issues such as missing buffs/debuffs.
    Common mistakes include using wrong spell IDs or caster GUIDs, which can result
    in unintended removal of auras.
  related:
  - RemoveAura
  - AddAura
  - GetAura
  - UpdateAura
  - AuraRemove
metadata:
  confidence: 0.85
  generated_at: '2025-10-30T20:43:37.738219'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
