api:
  class: WorldSession
  method: SendUpdateTrade
  signature: void WorldSession::SendUpdateTrade(bool trader_data)
documentation:
  brief: Sends an update message to the client indicating changes to the trade window
    state.
  description: The SendUpdateTrade method is used by the WorldSession class to communicate
    trade state updates to the connected client. This method is typically invoked
    when a player's trade offer changes, such as when items are added or removed from
    the trade window, or when the trade status (e.g., accepted, cancelled) is modified.
    The boolean parameter trader_data determines whether the update includes detailed
    information about the trading partner's side of the trade. This functionality
    is essential for maintaining synchronization between the server and client in
    real-time trading interactions within World of Warcraft.
  parameters:
  - name: trader_data
    description: A boolean flag indicating whether to include detailed trade data
      for the opposing trader. When true, the update includes full trade information
      for both parties; when false, only basic trade state changes are sent.
  returns: null
  examples:
  - title: Basic Trade Update
    code: "void MyTradeHandler::HandleTradeUpdate(WorldSession* session)\n{\n    //\
      \ Send a basic trade update without trader data\n    session->SendUpdateTrade(false);\n\
      }"
    language: cpp
  - title: Full Trade Data Update
    code: "void MyTradeHandler::HandleTradeUpdateWithDetails(WorldSession* session)\n\
      {\n    // Send a full trade update including trader data\n    session->SendUpdateTrade(true);\n\
      }"
    language: cpp
  notes: This method directly interacts with the client's network layer to send serialized
    trade data. It should only be called from within the context of an active trade
    session, and must be invoked on the correct WorldSession object associated with
    the trading players. The method does not perform any validation of trade state
    internally; it simply sends whatever trade information is currently stored in
    the session.
  warnings: Calling this method outside of a proper trade context may result in client-side
    errors or unexpected behavior. Ensure that the trade window is properly initialized
    before sending updates, and avoid calling this method during critical sections
    where race conditions could occur. The trader_data parameter should be set appropriately
    based on the current trade state to prevent unnecessary data transmission.
  related:
  - SendTradeStatus
  - SendUpdateWorldState
  - HandleTradeUpdate
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T19:06:21.475510'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
