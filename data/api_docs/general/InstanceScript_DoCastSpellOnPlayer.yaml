api:
  class: InstanceScript
  method: DoCastSpellOnPlayer
  signature: void InstanceScript::DoCastSpellOnPlayer(Player * player, uint32 spell,
    bool includePets, bool includeControlled)
documentation:
  brief: Casts a specified spell on a player, with optional inclusion of pets and
    controlled creatures.
  description: The DoCastSpellOnPlayer method is used within InstanceScript classes
    to cast a spell directly onto a specific Player object. This function allows for
    precise control over spell application, including the option to also apply the
    spell to the player's pets or any creatures they currently control. It's commonly
    used in scripted encounters where targeted effects need to be applied to players
    during dungeon or raid instances. The method does not return any value and operates
    synchronously within the game's core execution flow.
  parameters:
  - name: player
    description: Pointer to the Player object on which the spell will be cast. Must
      be a valid player reference; passing nullptr may result in undefined behavior.
  - name: spell
    description: The ID of the spell to be cast, as defined in the spell database.
      This value must correspond to an existing spell entry in the game's spell system.
  - name: includePets
    description: Boolean flag indicating whether to also cast the spell on the player's
      pets. If true, the spell will affect all active summoned pets controlled by
      the player.
  - name: includeControlled
    description: Boolean flag indicating whether to also cast the spell on creatures
      the player is currently controlling (e.g., guardians, totems). If true, the
      spell will be applied to any such creatures.
  returns: null
  examples:
  - title: Basic usage casting a damage spell on a player
    code: "void InstanceScript::HandlePlayerSpellCast(Player* player)\n{\n    DoCastSpellOnPlayer(player,\
      \ 12345, false, false);\n}"
    language: cpp
  - title: Casting a buff spell on player and their pets
    code: "void InstanceScript::ApplyBuffToPlayerAndPets(Player* player)\n{\n    DoCastSpellOnPlayer(player,\
      \ 67890, true, false);\n}"
    language: cpp
  notes: This method is part of the TrinityCore scripting API and should only be called
    from within valid InstanceScript contexts. Ensure that the Player pointer passed
    is valid and not expired before calling this function. The spell ID must exist
    in the database or the cast will silently fail.
  warnings: Passing a null player pointer may cause crashes or undefined behavior.
    Always validate player references before invoking this method. Be cautious when
    including pets or controlled creatures as unintended side effects might occur
    if those entities are not properly managed.
  related:
  - DoCastSpellOnPlayers
  - DoCastSpellOnCreature
  - DoCastSpellOnGameObject
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:31:04.664968'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
