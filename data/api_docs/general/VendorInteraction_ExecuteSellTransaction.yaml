api:
  class: VendorInteraction
  method: ExecuteSellTransaction
  signature: void VendorInteraction::ExecuteSellTransaction(Player * player, uint32
    vendorGuid, uint32 itemGuid, uint32 count)
documentation:
  brief: Processes a sell transaction from a player to a vendor, updating item inventory
    and player gold.
  description: The ExecuteSellTransaction method handles the core logic for selling
    items from a player's inventory back to a vendor. It validates that the player
    has the specified item, checks if the vendor accepts that item, calculates the
    sell price based on item quality and vendor settings, updates the player's gold
    balance, removes the sold item from their inventory, and sends appropriate packets
    to update the client UI. This method is typically invoked when a player clicks
    to sell an item through the vendor interface.
  parameters:
  - name: player
    description: Pointer to the Player object representing the character selling the
      item. Must be a valid player instance with an active session.
  - name: vendorGuid
    description: The unique identifier (GUID) of the vendor to whom the item is being
      sold. This should correspond to a valid NPC in the world.
  - name: itemGuid
    description: The unique identifier (GUID) of the specific item in the player's
      inventory that is being sold. Must be a valid item with an associated entry.
  - name: count
    description: The number of items to sell from the stack. Must be a positive integer,
      typically 1 for single-item sales or the full stack size.
  returns: null
  examples:
  - title: Basic Sell Transaction
    code: 'Player* player = ...; // Valid player instance

      uint32 vendorGuid = 12345;

      uint32 itemGuid = 67890;

      uint32 count = 1;

      VendorInteraction::ExecuteSellTransaction(player, vendorGuid, itemGuid, count);'
    language: cpp
  - title: Sell Multiple Items
    code: 'Player* player = ...; // Valid player instance

      uint32 vendorGuid = 12345;

      uint32 itemGuid = 67890;

      uint32 count = 5;

      VendorInteraction::ExecuteSellTransaction(player, vendorGuid, itemGuid, count);'
    language: cpp
  notes: This method assumes that all parameter validation has been performed prior
    to calling. It does not perform any checks for player distance from vendor or
    vendor availability. The method relies on internal TrinityCore systems for currency
    handling and packet sending.
  warnings: Calling this method without proper pre-validation may lead to crashes
    or inconsistent state. Ensure the player actually owns the item, the vendor accepts
    that item type, and the count is valid before invoking this function.
  related:
  - VendorInteraction::CanSellItem
  - VendorInteraction::GetSellPrice
  - Player::RemoveItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T17:46:07.225719'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
