api:
  class: WorldSession
  method: HandleHearthAndResurrect
  signature: void WorldSession::HandleHearthAndResurrect(WorldPackets::Battleground::HearthAndResurrect
    & hearthAndResurrect)
documentation:
  brief: Handles the player's request to use a hearthstone or resurrect at a graveyard.
  description: The HandleHearthAndResurrect method processes client requests related
    to teleporting players to their hearthstone location or resurrecting them at a
    graveyard. This method is typically invoked when a player uses a hearthstone item
    or accepts a resurrection offer during battlegrounds or arena matches. The method
    validates the player's current state, checks for valid resurrection locations,
    and performs the appropriate teleportation or resurrection action. It ensures
    that players cannot use hearthstones or resurrect in invalid locations such as
    during combat or when not in a valid game state.
  parameters:
  - name: hearthAndResurrect
    description: A packet containing information about the player's request to use
      a hearthstone or resurrect. This includes details such as the target location
      type and any relevant identifiers for the resurrection point.
  returns: null
  examples:
  - title: Basic usage of hearthstone
    code: "void WorldSession::HandleHearthAndResurrect(WorldPackets::Battleground::HearthAndResurrect&\
      \ hearthAndResurrect)\n{\n    // Validate player state\n    if (!GetPlayer()\
      \ || GetPlayer()->IsInCombat())\n        return;\n    \n    // Process the hearthstone\
      \ request\n    GetPlayer()->TeleportToHomebind();\n}"
    language: cpp
  notes: This method is part of the battleground and resurrection system in TrinityCore.
    It interacts with player state management and must be called from within a valid
    session context. The method assumes that the client has properly validated the
    request before sending it to the server.
  warnings: Improper handling of this method can lead to players being teleported
    incorrectly or stuck in invalid states. Ensure that all preconditions are checked
    before processing the request, especially regarding combat status and player location
    validity.
  related:
  - HandleAreaTrigger
  - HandleResurrect
  - TeleportToHomebind
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:54:30.492947'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
