api:
  class: NPCInteractionManager
  method: FindNearestQuestGiver
  signature: Creature * NPCInteractionManager::FindNearestQuestGiver() const
documentation:
  brief: Finds and returns the nearest Creature that can provide quests to the player.
  description: The FindNearestQuestGiver method searches for the closest Creature
    within the player's interaction range that has active quest givers associated
    with it. This function is typically used during NPC interaction to determine which
    quest-giving NPC is nearest to the player. The method considers only creatures
    that are valid quest givers, meaning they have at least one quest available or
    in progress for the player. It returns a pointer to the Creature object if found,
    or nullptr if no suitable quest giver is within range.
  parameters: []
  returns: A pointer to the Creature object representing the nearest quest-giving
    NPC, or nullptr if no such creature exists within the valid interaction range.
  examples:
  - title: Basic Usage in Player Interaction
    code: "Creature* questGiver = player->GetNPCInteractionManager()->FindNearestQuestGiver();\n\
      if (questGiver)\n{\n    // Proceed with quest interaction logic\n    player->TalkToCreature(questGiver);\n\
      }"
    language: cpp
  - title: Checking for Valid Quest Giver Before Interaction
    code: "NPCInteractionManager* npcMgr = player->GetNPCInteractionManager();\nCreature*\
      \ questGiver = npcMgr->FindNearestQuestGiver();\nif (questGiver && questGiver->HasQuests())\n\
      {\n    // Ensure the NPC actually has quests before proceeding\n    player->PlayerTalkClass->ClearMenus();\n\
      \    player->PlayerTalkClass->SendQuestMenu(questGiver->GetGUID());\n}\nelse\n\
      {\n    // No valid quest giver found\n    player->SendNoQuestGiver();\n}"
    language: cpp
  notes: This method uses the player's current position and the server's internal
    NPC positioning system to determine proximity. It may not account for complex
    terrain or line-of-sight restrictions, relying solely on distance calculations.
    The returned Creature object is valid only during the current game tick and should
    not be stored for later use without proper validation.
  warnings: The method returns nullptr if no quest-giving NPCs are within range, so
    always check the return value before using it. Additionally, the returned Creature
    pointer may become invalid if the NPC is despawned or removed from the world during
    the same game tick, leading to potential crashes if not properly validated.
  related:
  - GetNearestCreature
  - HasQuests
  - CanInteractWith
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T23:21:28.226790'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
