api:
  class: Ticket
  method: FormatViewMessageString
  signature: int Ticket::FormatViewMessageString(ChatHandler & handler, const char
    * szClosedName, const char * szAssignedToName, const char * szUnassignedName,
    const char * szDeletedName) const
documentation:
  brief: Formats and sends a ticket view message to the specified chat handler with
    status information.
  description: The FormatViewMessageString method constructs a formatted string containing
    ticket details including its closed status, assigned player name, and other relevant
    information. It is typically used within the TrinityCore's ticketing system to
    display ticket data in a standardized format to players or GMs through the chat
    handler interface. The method utilizes provided names for closed, assigned, unassigned,
    and deleted states to properly label the ticket's current status. This function
    ensures consistent presentation of ticket information across different parts of
    the game's administrative interface.
  parameters:
  - name: handler
    description: Reference to the ChatHandler object used to send the formatted message
      to the client.
  - name: szClosedName
    description: Character string representing the name of the player who closed the
      ticket, or NULL if not closed.
  - name: szAssignedToName
    description: Character string representing the name of the player to whom the
      ticket is assigned, or NULL if unassigned.
  - name: szUnassignedName
    description: Character string representing the name used for unassigned tickets,
      typically a localized placeholder.
  - name: szDeletedName
    description: Character string representing the name used for deleted tickets,
      typically a localized placeholder.
  returns: Returns an integer value indicating success or failure of the message formatting
    and sending operation. A return value of 0 usually indicates success, while non-zero
    values may indicate errors during processing.
  examples:
  - title: Basic Usage in Ticket View Command
    code: "void HandleTicketViewCommand(ChatHandler* handler)\n{\n    if (!handler\
      \ || !handler->GetSession())\n        return;\n\n    // Assume ticket is retrieved\
      \ from database\n    Ticket* ticket = sTicketMgr->GetTicketByGuid(ticketGuid);\n\
      \    if (!ticket)\n        return;\n\n    ticket->FormatViewMessageString(*handler,\
      \ \"ClosedByGM\", \"AssignedToPlayer\", \"Unassigned\", \"Deleted\");\n}"
    language: cpp
  notes: This method is part of the internal ticket management system in TrinityCore
    and relies on proper localization strings for displaying status information. It
    assumes that all parameter strings are valid and properly null-terminated. The
    method may perform multiple string operations internally to format the final message
    before sending it via the ChatHandler.
  warnings: Do not call this method without ensuring that the ChatHandler reference
    is valid and the session context is properly initialized. Passing invalid or NULL
    pointers for any of the name parameters could lead to undefined behavior or crashes
    in debug builds.
  related:
  - Ticket::GetGuid
  - Ticket::GetPlayerName
  - Ticket::GetMessage
  - Ticket::IsClosed
  - Ticket::IsAssigned
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T00:50:23.801597'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
