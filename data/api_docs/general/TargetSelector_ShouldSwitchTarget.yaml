api:
  class: TargetSelector
  method: ShouldSwitchTarget
  signature: bool TargetSelector::ShouldSwitchTarget(Unit * currentTarget, Unit *
    newTarget)
documentation:
  brief: Determines whether the AI should switch from the current target to a new
    target based on threat and priority calculations.
  description: The ShouldSwitchTarget method evaluates if a Unit's current target
    should be replaced by a new target. It considers factors such as threat levels,
    target priority, and combat relevance. This method is typically used in AI decision-making
    processes to ensure that the most dangerous or relevant enemy is being targeted.
    The method returns true if switching is recommended, false otherwise. It is commonly
    called during AI update cycles when evaluating potential target changes.
  parameters:
  - name: currentTarget
    description: Pointer to the Unit currently being targeted by the AI. Can be nullptr
      if no target exists.
  - name: newTarget
    description: Pointer to the potential new target that the AI is considering switching
      to. Can be nullptr if no alternative target exists.
  returns: Returns true if the AI should switch from currentTarget to newTarget, false
    otherwise. The decision is based on threat comparison and target priority logic.
  examples:
  - title: Basic Target Switching Logic
    code: "if (targetSelector->ShouldSwitchTarget(currentTarget, newTarget)) {\n \
      \   // Switch to new target\n    ai->SetCurrentTarget(newTarget);\n}"
    language: cpp
  - title: Integration with AI Update Loop
    code: "void CreatureAI::UpdateAI(uint32 diff) {\n    if (Unit* current = me->GetVictim())\
      \ {\n        if (Unit* newTarget = SelectNextTarget()) {\n            if (targetSelector->ShouldSwitchTarget(current,\
      \ newTarget)) {\n                AttackStart(newTarget);\n            }\n  \
      \      }\n    }\n}"
    language: cpp
  notes: This method is part of the core AI target selection logic in TrinityCore.
    It may be overridden or extended by custom AI implementations to provide more
    sophisticated targeting behavior. The method assumes that both currentTarget and
    newTarget are valid Units, though null checks should be performed in custom implementations.
  warnings: Ensure that both parameters are valid Unit pointers before calling this
    method, as dereferencing invalid pointers will cause crashes. This method does
    not perform any automatic target switching; it only evaluates whether switching
    should occur.
  related:
  - TargetSelector::SelectNextTarget
  - TargetSelector::GetMostHated
  - Unit::GetVictim
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T17:10:07.568749'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
