api:
  class: BotAI
  method: OnNPCEvent
  signature: void BotAI::OnNPCEvent(const NPCEvent & event)
documentation:
  brief: Handles NPC events for bot AI behavior
  description: The OnNPCEvent method is a core callback function in the BotAI class
    that processes and responds to various NPC-related events within the TrinityCore
    environment. This method is invoked when an NPC event occurs, such as gossip interactions,
    quest updates, or combat triggers, allowing the bot AI to make decisions based
    on these events. The method typically updates the bot's internal state and may
    trigger specific actions like initiating dialogue, accepting quests, or engaging
    in combat. It serves as a central point for event-driven behavior in bot AI implementations.
  parameters:
  - name: event
    description: Reference to the NPCEvent object containing details about the triggered
      event including event type, associated NPC, and contextual data
  returns: null
  examples:
  - title: Basic NPC Event Handling
    code: "void BotAI::OnNPCEvent(const NPCEvent& event) {\n    switch (event.GetType())\
      \ {\n        case NPC_EVENT_GOSSIP:\n            HandleGossipEvent(event);\n\
      \            break;\n        case NPC_EVENT_QUEST_ACCEPT:\n            HandleQuestAccept(event);\n\
      \            break;\n        default:\n            break;\n    }\n}"
    language: cpp
  - title: Advanced Event Processing with State Management
    code: "void BotAI::OnNPCEvent(const NPCEvent& event) {\n    if (event.GetType()\
      \ == NPC_EVENT_GOSSIP && !IsInCombat()) {\n        uint32 gossipId = event.GetGossipId();\n\
      \        if (gossipId == 1001) {\n            // Handle specific gossip option\n\
      \            SetCurrentTarget(event.GetNPC());\n            SendGossipMenu(1001,\
      \ event.GetNPC()->GetGUID());\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called from the core game loop and should not perform
    heavy operations that could block the main thread. The event parameter is passed
    by const reference to avoid unnecessary copying, and implementations should be
    thread-safe if the bot AI may be accessed from multiple threads.
  warnings: Improper handling of NPC events can lead to bots getting stuck in infinite
    loops or failing to respond correctly to game state changes. Always validate event
    data before processing and ensure proper cleanup of temporary state variables.
  related:
  - OnUpdate
  - HandleGossipEvent
  - HandleQuestAccept
  - IsInCombat
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T19:35:39.331502'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
