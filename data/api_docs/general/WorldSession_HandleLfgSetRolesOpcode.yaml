api:
  class: WorldSession
  method: HandleLfgSetRolesOpcode
  signature: void WorldSession::HandleLfgSetRolesOpcode(WorldPackets::LFG::DFSetRoles
    & dfSetRoles)
documentation:
  brief: Processes a player's LFG role assignment packet and updates their role preferences
    for dungeon finding.
  description: The HandleLfgSetRolesOpcode method handles incoming WorldPackets::LFG::DFSetRoles
    packets from players, which contain their selected roles (tank, healer, damage
    dealer) for dungeon finding. This method updates the player's LFG role preferences
    in the session state and synchronizes these settings with the internal LFG system.
    The packet typically arrives when a player selects or changes their preferred
    roles in the LFG interface before joining a group or queue. This method does not
    directly trigger any group matching or queuing behavior, but rather prepares the
    player's role data for potential future use by the LFG subsystem.
  parameters:
  - name: dfSetRoles
    description: A reference to the WorldPackets::LFG::DFSetRoles packet containing
      the player's selected roles. This packet includes flags indicating which roles
      (tank, healer, damage) the player is willing to take in a group.
  returns: null
  examples:
  - title: Basic role assignment handling
    code: "void WorldSession::HandleLfgSetRolesOpcode(WorldPackets::LFG::DFSetRoles\
      \ & dfSetRoles)\n{\n    // Update player's LFG roles in session\n    _player->GetLFGState()->SetRoles(dfSetRoles.Roles);\n\
      \    // No return value needed\n}"
    language: cpp
  notes: This method is part of the LFG (Looking For Group) subsystem and integrates
    with TrinityCore's internal dungeon finding system. The roles are typically stored
    in the player's LFG state and may be used when forming groups or matching players
    to dungeons.
  warnings: null
  related:
  - HandleLfgJoinOpcode
  - HandleLfgLeaveOpcode
  - GetLFGState
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:28:34.003579'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
