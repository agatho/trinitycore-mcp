api:
  class: WorldSession
  method: HandleGarrisonPurchaseBuilding
  signature: void WorldSession::HandleGarrisonPurchaseBuilding(WorldPackets::Garrison::GarrisonPurchaseBuilding
    & garrisonPurchaseBuilding)
documentation:
  brief: Processes a client request to purchase a building in a garrison.
  description: The HandleGarrisonPurchaseBuilding method handles the client's request
    to purchase a new building within a player's garrison. This method is part of
    the Garrison system in World of Warcraft, which allows players to expand and customize
    their garrison by constructing various buildings. The method validates the request,
    checks if the player has sufficient resources, and then proceeds to construct
    the requested building if all conditions are met. It interacts with the garrison's
    internal state and updates the player's garrison data accordingly.
  parameters:
  - name: garrisonPurchaseBuilding
    description: A packet containing information about the building to be purchased,
      including the garrison ID, building type, and other relevant data required for
      the purchase process.
  returns: null
  examples:
  - title: Basic usage of HandleGarrisonPurchaseBuilding
    code: 'WorldPackets::Garrison::GarrisonPurchaseBuilding packet;

      packet.GarrisonID = 12345;

      packet.BuildingType = 10;

      // Assume session is a valid WorldSession pointer

      session->HandleGarrisonPurchaseBuilding(packet);'
    language: cpp
  notes: This method is typically invoked from the network handler when a client sends
    a garrison building purchase request. It requires proper synchronization with
    the database to ensure resource updates and building construction are correctly
    persisted.
  warnings: Improper handling of this packet can lead to invalid building constructions
    or resource discrepancies in the player's garrison. Ensure all preconditions such
    as resource availability and building type validity are checked before calling
    this method.
  related:
  - HandleGarrisonBuildings
  - HandleGarrisonStartMission
  - HandleGarrisonUpgrade
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T22:09:18.703099'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
