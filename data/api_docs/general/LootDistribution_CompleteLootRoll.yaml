api:
  class: LootDistribution
  method: CompleteLootRoll
  signature: void LootDistribution::CompleteLootRoll(uint32 rollId)
documentation:
  brief: Completes a loot roll by processing the outcome and distributing the item
    to the winning player.
  description: The CompleteLootRoll method finalizes a loot roll process for a specific
    roll ID. It evaluates the results of the roll, determines the winning player based
    on the roll values, and handles the distribution of the corresponding loot item.
    This method is typically invoked after all players have finished rolling on an
    item, and it ensures that the correct player receives the loot according to the
    game's loot rules (such as need-before-greed or free-for-all). The method updates
    internal loot tracking structures and may trigger related events or notifications
    within the TrinityCore framework.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage
    code: 'LootDistribution* lootDist = sObjectMgr->GetLootDistribution(12345);

      lootDist->CompleteLootRoll(67890);'
    language: cpp
  notes: This method assumes that the roll has already been finalized and all players
    have made their decisions. It does not validate whether the roll ID is valid or
    active, so calling it with an invalid ID may lead to undefined behavior. The method
    should only be called from within a thread-safe context where loot distribution
    state changes are properly synchronized.
  warnings: Calling this method without ensuring that all players have finished rolling
    can result in incorrect loot distribution or race conditions. It is critical to
    ensure that the roll process is fully complete before invoking CompleteLootRoll.
  related:
  - GetLootDistribution
  - StartLootRoll
  - RollForItem
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:34:59.689056'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
