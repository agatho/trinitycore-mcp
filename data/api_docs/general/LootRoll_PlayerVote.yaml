api:
  class: LootRoll
  method: PlayerVote
  signature: bool LootRoll::PlayerVote(Player * player, RollVote vote)
documentation:
  brief: Records a player's vote for a loot roll.
  description: The PlayerVote method processes a player's decision to either pass
    or roll on an item during a loot roll. This method is typically called when a
    player interacts with the loot roll interface, indicating their preference for
    the item being rolled. The method validates the player's eligibility and the current
    state of the roll before recording the vote. It ensures that each player can only
    vote once per roll and updates the internal vote tracking system accordingly.
  parameters:
  - name: player
    description: Pointer to the Player object whose vote is being recorded. Must be
      a valid player instance with an active session.
  - name: vote
    description: The RollVote enum value indicating the player's choice. Valid values
      are either ROLL_PASS or ROLL_ROLL, representing whether the player passes on
      the item or votes to roll for it.
  returns: Returns true if the vote was successfully recorded and processed; returns
    false if the vote could not be recorded due to invalid state, such as an expired
    roll or if the player has already voted.
  examples:
  - title: Basic Player Vote Usage
    code: "if (lootRoll->PlayerVote(player, ROLL_ROLL)) {\n    // Vote successfully\
      \ recorded\n    ChatHandler(player->GetSession()).SendSysMessage(\"You have\
      \ voted to roll on the item.\");\n} else {\n    // Vote failed\n    ChatHandler(player->GetSession()).SendSysMessage(\"\
      Your vote could not be recorded.\");\n}"
    language: cpp
  notes: This method is part of the loot rolling system in TrinityCore and integrates
    with the broader loot management framework. It assumes that the roll has already
    been initialized and is active. The method does not directly handle item distribution;
    it only records votes.
  warnings: Calling this method with an invalid player pointer or an invalid vote
    type may lead to undefined behavior. Always ensure the player is valid and the
    roll is still active before calling this method.
  related:
  - GetRollType
  - GetItemId
  - GetItem
  - PlayerVote
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T00:06:55.433951'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
