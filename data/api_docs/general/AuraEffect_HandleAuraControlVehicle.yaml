api:
  class: AuraEffect
  method: HandleAuraControlVehicle
  signature: void AuraEffect::HandleAuraControlVehicle(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Controls vehicle access for aura applications when applied or removed.
  description: The HandleAuraControlVehicle method manages the vehicle control state
    for an aura application. It is invoked during aura application or removal to either
    grant or revoke vehicle access permissions for the affected unit. This method
    ensures proper synchronization between aura states and vehicle interaction mechanics
    in World of Warcraft's TrinityCore implementation. The method operates based on
    the provided aura application context, mode flag, and apply status to determine
    appropriate vehicle control behavior.
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This parameter contains all relevant information about the
      aura state and target unit.
  - name: mode
    description: Mode flag indicating the operation context (typically 0 for apply,
      1 for remove). Controls how vehicle access is handled during aura application.
  - name: apply
    description: Boolean flag indicating whether to apply (true) or remove (false)
      the aura effect. Determines the direction of vehicle control state changes.
  returns: null
  examples:
  - title: Basic Vehicle Aura Application
    code: "void ApplyVehicleAura(Unit* target, uint32 auraId)\n{\n    AuraApplication*\
      \ app = target->GetAuraApplication(auraId);\n    if (app)\n    {\n        AuraEffect*\
      \ effect = app->GetBase()->GetEffect(0);\n        if (effect && effect->GetAuraType()\
      \ == SPELL_AURA_CONTROL_VEHICLE)\n        {\n            effect->HandleAuraControlVehicle(app,\
      \ 0, true);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called internally by the aura system during aura
    application/removal events. The vehicle control mechanism may involve updating
    unit movement flags, passenger state, and related vehicle interaction components.
    Developers should ensure proper aura type checking before calling this method
    directly.
  warnings: Direct invocation of this method outside of aura system context may lead
    to inconsistent vehicle states or game mechanics issues. Always verify that the
    aura type is SPELL_AURA_CONTROL_VEHICLE before calling this method.
  related:
  - AuraEffect::HandleAuraApply
  - AuraEffect::HandleAuraRemove
  - Unit::SetVehicleKit
  - Unit::GetVehicleBase
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T13:35:22.095715'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
