api:
  class: WorldSession
  method: HandleGuildPermissionsQuery
  signature: void WorldSession::HandleGuildPermissionsQuery(WorldPackets::Guild::GuildPermissionsQuery
    & packet)
documentation:
  brief: Processes a guild permissions query packet from the client to retrieve guild
    permission settings.
  description: The HandleGuildPermissionsQuery method is responsible for handling
    incoming guild permissions query requests from players in World of Warcraft. When
    a player opens the guild permissions interface or attempts to view guild rank
    permissions, this method is invoked to process the request and send back the current
    guild permission settings. It typically retrieves data about which actions each
    guild rank can perform, such as inviting members, promoting/demoting, or managing
    guild banks. The method operates within the WorldSession context and interacts
    with the TrinityCore's guild management system to ensure proper access control
    and game balance.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in Guild Management
    code: "void WorldSession::HandleGuildPermissionsQuery(WorldPackets::Guild::GuildPermissionsQuery&\
      \ packet)\n{\n    if (!GetPlayer() || !GetPlayer()->GetGuild())\n        return;\n\
      \n    // Process the permissions query and send response\n    SendGuildPermissions();\n\
      }"
    language: cpp
  notes: This method is typically triggered when a player opens the guild permissions
    window in the UI. It's important to verify that the player has sufficient permissions
    to view guild settings before processing the request. The method may be called
    multiple times during a session as players navigate through different guild management
    interfaces.
  warnings: Ensure proper authentication and authorization checks are performed before
    sending permission data back to the client. Improper handling could lead to unauthorized
    access to guild management features or information disclosure.
  related:
  - SendGuildPermissions
  - HandleGuildCommand
  - GetPlayer
  - GetGuild
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:58:12.260632'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
