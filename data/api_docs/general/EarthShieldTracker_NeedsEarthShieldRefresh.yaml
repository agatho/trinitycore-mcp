api:
  class: EarthShieldTracker
  method: NeedsEarthShieldRefresh
  signature: bool EarthShieldTracker::NeedsEarthShieldRefresh(uint32 refreshWindow)
    const
documentation:
  brief: Determines whether the Earth Shield aura on the target needs to be refreshed
    based on the specified refresh window.
  description: The NeedsEarthShieldRefresh method evaluates if the Earth Shield buff
    applied to a target should be renewed. It checks the current state of the aura
    against a defined refresh window, which typically represents how long the shield
    can remain active before it requires reapplication. This method is commonly used
    in spell logic and aura management systems within TrinityCore's combat framework.
    The method does not modify any state but rather provides a boolean result indicating
    whether a refresh action should be triggered. It assumes that the aura's duration
    and application time are already tracked internally by the EarthShieldTracker
    instance.
  parameters: []
  returns: Returns true if the Earth Shield aura requires refreshing within the given
    refresh window; otherwise, returns false.
  examples:
  - title: Basic Usage in Spell Logic
    code: "if (earthShieldTracker.NeedsEarthShieldRefresh(3000)) {\n    // Refresh\
      \ the Earth Shield aura\n    caster->AddAura(SPELL_EARTH_SHIELD, target);\n}"
    language: cpp
  - title: Integration with Combat AI
    code: "void CombatAI::UpdateEarthShield()\n{\n    if (earthShieldTracker.NeedsEarthShieldRefresh(2000))\n\
      \    {\n        // Apply new Earth Shield to target\n        DoCast(target,\
      \ SPELL_EARTH_SHIELD);\n    }\n}"
    language: cpp
  notes: This method relies on internal tracking of the aura's application time and
    duration. The refreshWindow parameter typically corresponds to a configurable
    value in the spell definition or a fixed threshold used for performance optimization.
  warnings: Ensure that the EarthShieldTracker instance is properly initialized before
    calling this method, as accessing an uninitialized tracker may lead to undefined
    behavior. Also, be cautious about using very small refresh windows which could
    cause excessive aura updates.
  related:
  - GetEarthShieldDuration
  - IsEarthShieldActive
  - ApplyEarthShield
metadata:
  confidence: 0.9
  generated_at: '2025-11-09T02:21:30.355760'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
