api:
  class: InstanceLockMgr
  method: GetNextResetTime
  signature: int InstanceLockMgr::GetNextResetTime(const MapDb2Entries & entries)
documentation:
  brief: Calculates and returns the next reset time for instance locks based on provided
    map database entries.
  description: The GetNextResetTime method determines when instance locks will expire
    or reset for a given set of map database entries. This is typically used in World
    of Warcraft's TrinityCore to manage dungeon and raid lockouts, ensuring players
    cannot re-enter instances until the lockout period has passed. The method evaluates
    the provided MapDb2Entries to compute the earliest reset time across all relevant
    locks. It is commonly called during instance creation or player entry checks to
    enforce proper cooldown periods between instance attempts.
  parameters:
  - name: entries
    description: A reference to a collection of map database entries that define which
      instances and their lockout times should be considered for reset time calculation.
      Each entry typically contains information about the map ID, lockout duration,
      and associated reset timing data.
  returns: An integer representing the Unix timestamp (in seconds) when the next instance
    lock will reset. Returns 0 if no locks are active or if there is an error in processing
    the entries.
  examples:
  - title: Basic usage to determine next reset time for a set of map entries
    code: "MapDb2Entries entries;\n// Populate entries with relevant map data\nint\
      \ nextReset = instanceLockMgr.GetNextResetTime(entries);\nif (nextReset > 0)\
      \ {\n    std::cout << \"Next reset at: \" << nextReset << std::endl;\n} else\
      \ {\n    std::cout << \"No active locks found.\" << std::endl;\n}"
    language: cpp
  notes: This method is primarily used in conjunction with instance lock management
    systems to enforce proper cooldowns. It assumes that the MapDb2Entries parameter
    contains valid and up-to-date map data. The returned timestamp should be compared
    against current time using standard Unix time functions to determine if a reset
    has occurred.
  warnings: Ensure that the MapDb2Entries passed to this method are properly initialized
    and contain valid map identifiers; otherwise, the result may be undefined or incorrect.
    This method does not modify any internal state but relies on external data for
    calculations.
  related:
  - GetInstanceLockStatus
  - UpdateInstanceLocks
  - IsInstanceLocked
metadata:
  confidence: 0.85
  generated_at: '2025-11-01T12:55:34.738177'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
