api:
  class: Battleground
  method: _ProcessJoin
  signature: void Battleground::_ProcessJoin(int diff)
documentation:
  brief: Processes the joining of players to a battleground by handling queue management
    and assignment logic.
  description: The _ProcessJoin method is responsible for managing the internal logic
    that occurs when players attempt to join a battleground. It handles queue processing,
    player assignment to teams, and ensures proper synchronization between the game
    state and the battleground's current status. This method typically operates during
    battleground update cycles and manages transitions from queued state to active
    battleground participation. The method uses the provided difficulty parameter
    to determine appropriate team assignments and groupings based on player levels
    and battleground configurations.
  parameters:
  - name: diff
    description: The difficulty level of the battleground being joined. This value
      determines how players are grouped, what level ranges are allowed, and which
      specific battleground instance is used for assignment.
  returns: null
  examples:
  - title: Basic battleground join processing
    code: "Battleground* bg = sBattlegroundMgr->GetBattlegroundTemplate(BGTypeId::BATTLEGROUND_AV);\n\
      if (bg)\n{\n    bg->_ProcessJoin(DIFFICULTY_NORMAL);\n}"
    language: cpp
  - title: Processing join with different difficulty levels
    code: "switch (player->GetDifficulty())\n{\n    case DUNGEON_DIFFICULTY_NORMAL:\n\
      \        bg->_ProcessJoin(DIFFICULTY_NORMAL);\n        break;\n    case DUNGEON_DIFFICULTY_HEROIC:\n\
      \        bg->_ProcessJoin(DIFFICULTY_HEROIC);\n        break;\n    default:\n\
      \        bg->_ProcessJoin(DIFFICULTY_NORMAL);\n        break;\n}"
    language: cpp
  notes: This method is typically called internally by the battleground system during
    update ticks and should not be invoked directly by external code. The method assumes
    that players are already in the queue and handles all necessary state transitions
    for joining. It may perform operations such as checking player eligibility, assigning
    teams, updating player battleground data, and triggering related events.
  warnings: Direct invocation of this method outside of the battleground update cycle
    may cause unexpected behavior or inconsistencies in player state management. The
    method modifies internal battleground state and should only be called when the
    battleground is in a valid processing state.
  related:
  - Battleground::AddPlayer
  - Battleground::RemovePlayer
  - Battleground::Update
  - Battleground::HandleAreaTrigger
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T12:43:53.961259'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
