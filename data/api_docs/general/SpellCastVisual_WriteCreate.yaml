api:
  class: SpellCastVisual
  method: WriteCreate
  signature: void SpellCastVisual::WriteCreate(ByteBuffer & data, const Object * owner,
    const Player * receiver) const
documentation:
  brief: Writes spell cast visual data to a packet buffer for transmission to a player.
  description: The WriteCreate method serializes the spell cast visual information
    into a ByteBuffer, which is then sent to a specific player client. This method
    is typically invoked during the creation or update of spell cast visuals in the
    game world, ensuring that the visual effects associated with spells are properly
    communicated to players. It handles serialization of relevant visual properties
    such as spell ID, caster GUID, target information, and visual parameters. The
    method takes into account the owner object (typically a unit casting the spell)
    and the receiving player to ensure proper data formatting and visibility.
  parameters:
  - name: data
    description: Reference to a ByteBuffer where the serialized spell cast visual
      data will be written.
  - name: owner
    description: Pointer to the Object that owns this spell cast visual (typically
      a Unit casting the spell).
  - name: receiver
    description: Pointer to the Player who will receive the spell cast visual data
      in their client.
  returns: null
  examples:
  - title: Basic usage in spell handling
    code: 'SpellCastVisual visual;

      Player* player = ...; // target player

      Object* caster = ...; // unit casting the spell

      ByteBuffer data;

      visual.WriteCreate(data, caster, player);'
    language: cpp
  - title: Integration with packet sending logic
    code: 'SpellCastVisual visual;

      WorldPacket packet(SMSG_SPELL_CAST_VISUAL);

      Player* receiver = ...;

      Object* owner = ...;

      visual.WriteCreate(packet, owner, receiver);

      receiver->SendDirectMessage(&packet);'
    language: cpp
  notes: This method is part of the packet serialization system for spell visual effects
    in TrinityCore. It should only be called when preparing data to send to a client.
    The method does not perform any validation on input parameters, so callers must
    ensure that owner and receiver are valid objects before invoking this method.
  warnings: Do not call this method with null pointers for owner or receiver as it
    may lead to undefined behavior. Ensure the ByteBuffer is properly initialized
    before passing it to this method. This method modifies the provided ByteBuffer
    directly, so be cautious when reusing buffers.
  related:
  - SpellCastVisual::WriteUpdate
  - SpellCastVisual::WriteDestroy
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T18:53:55.438022'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
