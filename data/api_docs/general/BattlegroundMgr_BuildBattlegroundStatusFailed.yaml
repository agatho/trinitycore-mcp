api:
  class: BattlegroundMgr
  method: BuildBattlegroundStatusFailed
  signature: void BattlegroundMgr::BuildBattlegroundStatusFailed(WorldPackets::Battleground::BattlefieldStatusFailed
    * battlefieldStatus, int queueId, const Player * player, uint32 ticketId, int
    result, const int * errorGuid)
documentation:
  brief: Constructs a battleground status failed packet for a player's queue attempt.
  description: The BuildBattlegroundStatusFailed method prepares and fills a BattlefieldStatusFailed
    packet that is sent to a player when their battleground queue request fails. This
    method is typically invoked during the battleground queue process to notify players
    of why their request was unsuccessful, such as due to matchmaking issues or invalid
    parameters. The packet contains information about the queue ID, ticket ID, result
    code, and optionally an error GUID for further diagnostics. It's part of the core
    battleground management system in TrinityCore, ensuring proper communication between
    the server and client regarding queue status.
  parameters:
  - name: battlefieldStatus
    description: Pointer to a BattlefieldStatusFailed packet object that will be populated
      with failure information. This packet is sent directly to the player's client.
  - name: queueId
    description: The identifier of the battleground queue that failed. Used to correlate
      the failure with the specific queue the player attempted to join.
  - name: player
    description: Pointer to the Player object for whom the failure notification is
      being constructed. Required to determine proper packet formatting and target.
  - name: ticketId
    description: Unique identifier for the queue ticket associated with this request.
      Helps track individual player queue attempts across the system.
  - name: result
    description: Integer result code indicating the reason for queue failure. Values
      typically correspond to specific error conditions defined in the battleground
      system.
  - name: errorGuid
    description: Optional pointer to an integer GUID that may provide additional context
      about the error, such as a specific object or player involved in the failed
      attempt.
  returns: null
  examples:
  - title: Basic usage for handling queue failure
    code: 'WorldPackets::Battleground::BattlefieldStatusFailed status;

      int queueId = 1;

      Player* player = ...;

      uint32 ticketId = 1001;

      int result = 2; // Example error code

      int errorGuid = 0;


      BattlegroundMgr::Instance()->BuildBattlegroundStatusFailed(&status, queueId,
      player, ticketId, result, &errorGuid);

      player->SendDirectMessage(status);'
    language: cpp
  notes: This method is typically called from within the battleground queue handling
    logic when a player's request cannot be fulfilled. The packet structure and fields
    are designed to match the client's expectations for error reporting in battleground
    queues.
  warnings: Ensure that the player pointer is valid before calling this method, as
    passing a null pointer could lead to undefined behavior. Also verify that the
    result code corresponds to known error conditions to maintain proper client-side
    handling.
  related:
  - BattlegroundMgr::BuildBattlegroundStatusNone
  - BattlegroundMgr::BuildBattlegroundStatusJoin
  - BattlegroundMgr::BuildBattlegroundStatusWaitJoin
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T12:38:14.006469'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
