api:
  class: SmartScript
  method: OnMoveInLineOfSight
  signature: void SmartScript::OnMoveInLineOfSight(Unit * who)
documentation:
  brief: Triggers AI behavior when a unit enters the smart script's line of sight
  description: The OnMoveInLineOfSight method is a callback function invoked by the
    SmartScript system when a Unit (such as a player or NPC) moves into the line of
    sight of the scripted creature. This method serves as part of the AI event handling
    system, allowing for dynamic responses to player movement and positioning. The
    method typically triggers associated smart script actions such as gossip options,
    quest updates, or combat engagement based on configured conditions. It is automatically
    called by the TrinityCore engine during movement detection and does not require
    manual invocation.
  parameters:
  - name: who
    description: Pointer to the Unit object that has moved into line of sight. This
      parameter represents the entity (player or NPC) that triggered the event. It
      can be null if the event is triggered incorrectly or if the unit was destroyed.
  returns: null
  examples:
  - title: Basic usage in smart script context
    code: "void MyCreatureAI::OnMoveInLineOfSight(Unit* who)\n{\n    if (who && who->IsPlayer())\n\
      \    {\n        // Trigger a gossip option when player enters line of sight\n\
      \        me->GetAI()->Talk(0);\n    }\n}"
    language: cpp
  - title: Advanced usage with condition checking
    code: "void AdvancedCreatureAI::OnMoveInLineOfSight(Unit* who)\n{\n    if (!who\
      \ || !who->IsPlayer())\n        return;\n\n    Player* player = who->ToPlayer();\n\
      \    if (player && player->GetQuestStatus(12345) == QUEST_STATUS_INCOMPLETE)\n\
      \    {\n        // Start quest dialogue when player enters line of sight with\
      \ active quest\n        me->AI()->Talk(1);\n    }\n}"
    language: cpp
  notes: This method is part of the SmartScript AI framework and is automatically
    invoked by the engine. It should not be called directly from user code unless
    implementing custom AI behavior. The method is typically used in conjunction with
    smart scripts defined in the database or through scripting interfaces.
  warnings: Ensure that any actions taken within this method do not cause infinite
    loops or excessive resource consumption. Avoid performing heavy operations or
    blocking calls inside this function as it may impact performance.
  related:
  - SmartScript::OnEnterCombat
  - SmartScript::OnReceiveEmote
  - SmartScript::OnSpellHit
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T21:24:57.721508'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
