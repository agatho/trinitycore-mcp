api:
  class: Battleground
  method: EndBattleground
  signature: void Battleground::EndBattleground(int winner)
documentation:
  brief: Ends the battleground and declares a winner
  description: The EndBattleground method is responsible for concluding a battleground
    match and officially declaring the winning faction. This method handles the cleanup
    of battleground resources, rewards players, updates statistics, and sends necessary
    notifications to all participants. It ensures that the battleground state is properly
    transitioned from active gameplay to post-match processing. The method typically
    gets invoked when one team successfully achieves victory conditions or when the
    battleground timer expires.
  parameters:
  - name: winner
    description: The faction identifier of the winning team (0 for alliance, 1 for
      horde, -1 for draw). This parameter determines which faction receives victory
      rewards and how the battleground results are recorded in the game database.
  returns: null
  examples:
  - title: Ending a battleground with Alliance victory
    code: "Battleground* bg = sBattlegroundMgr->GetBattleground(12345);\nif (bg)\n\
      {\n    bg->EndBattleground(0); // Alliance wins\n}"
    language: cpp
  - title: Ending a battleground with draw result
    code: "Battleground* bg = sBattlegroundMgr->GetBattleground(12345);\nif (bg)\n\
      {\n    bg->EndBattleground(-1); // No winner, draw\n}"
    language: cpp
  notes: This method should only be called when the battleground is in an active state.
    It performs critical cleanup operations including updating player stats, sending
    reward packets, and removing battleground objects from memory. The method is typically
    invoked by internal battleground logic rather than directly by external code.
  warnings: Calling this method on a battleground that has already ended or is not
    in a valid state can lead to undefined behavior or crashes. Always verify the
    battleground's active status before invoking EndBattleground.
  related:
  - StartBattleground
  - IsBattlegroundActive
  - GetWinner
  - RewardBattlegroundWinner
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T02:23:29.460887'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
