api:
  class: DeathRecoveryManager
  method: AcceptBattleResurrection
  signature: bool DeathRecoveryManager::AcceptBattleResurrection(int casterGuid, uint32
    spellId)
documentation:
  brief: Processes a battle resurrection request for a player, returning true if successful.
  description: The AcceptBattleResurrection method handles the logic for accepting
    a battle resurrection spell cast by another player. This method is typically invoked
    when a player is in a state where they can be resurrected through a battle resurrection
    (such as being dead in a battleground or arena). It validates that the caster
    GUID and spell ID are valid, checks if the resurrection is allowed based on game
    rules and player states, and performs the necessary actions to restore the player.
    The method ensures proper handling of resurrection mechanics within the context
    of PvP environments such as battlegrounds and arenas.
  parameters:
  - name: casterGuid
    description: The global unique identifier (GUID) of the player who is casting
      the battle resurrection spell. Must be a valid player GUID.
  - name: spellId
    description: The ID of the battle resurrection spell being cast. Should correspond
      to a valid resurrection spell such as those used in battlegrounds or arenas.
  returns: Returns true if the battle resurrection was successfully processed and
    the player's state updated accordingly; otherwise returns false if validation
    fails or the operation cannot be completed.
  examples:
  - title: Basic usage of AcceptBattleResurrection
    code: "if (deathRecoveryManager->AcceptBattleResurrection(casterGuid, SPELL_BATTLE_RESURRECTION))\
      \ {\n    // Resurrection was successful\n    player->SetHealth(player->GetMaxHealth());\n\
      \    player->SetPower(POWER_MANA, player->GetMaxPower(POWER_MANA));\n}"
    language: cpp
  - title: Checking battle resurrection acceptance with error handling
    code: "uint32 spellId = 20061; // Battle Resurrection\nif (!deathRecoveryManager->AcceptBattleResurrection(casterGuid,\
      \ spellId)) {\n    // Handle failure case\n    ChatHandler(player->GetSession()).SendSysMessage(\"\
      Battle resurrection failed.\");\n    return false;\n}\n// Proceed with successful\
      \ resurrection logic\nplayer->ResurrectPlayer(1.0f);\nplayer->SpawnCorpseBones();"
    language: cpp
  notes: This method is part of the death recovery system in TrinityCore and interacts
    closely with battleground and arena systems. It assumes that the player being
    resurrected is already in a valid state for resurrection, such as being flagged
    as dead in a PvP environment.
  warnings: Ensure that the casterGuid and spellId are validated before calling this
    method to avoid unexpected behavior or crashes. The method does not perform any
    checks on whether the caster has sufficient mana or is within range of the target
    player.
  related:
  - GetBattleResurrectionSpellId
  - IsPlayerInBattleResurrectionState
  - HandleBattleResurrection
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T08:47:43.040422'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
