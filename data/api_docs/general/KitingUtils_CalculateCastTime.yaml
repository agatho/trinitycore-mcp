api:
  class: KitingUtils
  method: CalculateCastTime
  signature: float KitingUtils::CalculateCastTime(Player * bot, uint32 spellId)
documentation:
  brief: Calculates the cast time for a specified spell on a player bot.
  description: The CalculateCastTime method determines the total cast time in seconds
    for a given spell when executed by a player bot. This utility function accounts
    for various game mechanics such as spell haste, casting speed modifiers, and base
    spell properties. It is primarily used in AI behavior scripting to determine how
    long a bot should wait before performing actions after initiating a spell cast.
    The method retrieves the spell information from the SpellMgr and applies relevant
    modifiers based on the bot's current state and equipment.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot that will cast
      the spell. Must not be null.
  - name: spellId
    description: The unique identifier of the spell for which to calculate the cast
      time. Must correspond to a valid spell in the database.
  returns: Returns the calculated cast time in seconds as a floating-point value.
    A return value of 0.0 indicates an error or invalid spell ID.
  examples:
  - title: Basic Usage Example
    code: 'Player* myBot = ...; // Assume bot is initialized

      uint32 spellId = 12345; // Example spell ID

      float castTime = KitingUtils::CalculateCastTime(myBot, spellId);

      // castTime now contains the calculated cast time in seconds'
    language: cpp
  - title: AI Decision Making Based on Cast Time
    code: "Player* bot = ...;\nuint32 spellId = 12345;\nfloat castTime = KitingUtils::CalculateCastTime(bot,\
      \ spellId);\nif (castTime > 0.0f)\n{\n    // Schedule next action after cast\
      \ time\n    bot->SetNextActionTime(bot->GetMap()->GetGameTime() + castTime);\n\
      }"
    language: cpp
  notes: This method relies on the SpellMgr to retrieve spell data and applies game-specific
    modifiers. It does not account for temporary effects like haste buffs that might
    be applied during runtime unless they are already reflected in the Player object's
    state. The calculation includes base cast time, spell modifiers, and any relevant
    player attributes.
  warnings: Ensure that the provided Player pointer is valid and not null before calling
    this method. Passing an invalid or uninitialized spellId may result in unexpected
    behavior or return values of 0.0f. This function should be used carefully in performance-critical
    code paths as it involves database lookups and calculations.
  related:
  - GetSpellCastTime
  - CalculateSpellDamage
  - GetPlayerSpellPower
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T11:10:37.011459'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
