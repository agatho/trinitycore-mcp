api:
  class: DungeonScript
  method: CalculateAddPriority
  signature: uint32 DungeonScript::CalculateAddPriority(int * add) const
documentation:
  brief: Calculates and returns the priority value for adding a player to a dungeon
    group based on provided criteria.
  description: The CalculateAddPriority method determines the appropriate priority
    level for including a player in a dungeon group. This function evaluates various
    factors such as player level, gear, and group composition to assign a numerical
    priority value. The returned value is used by the dungeon system to manage queueing
    and group formation logic. It is typically invoked during dungeon queue processing
    to ensure optimal grouping of players with similar capabilities. The method takes
    an integer array as input which likely contains player statistics or group-related
    data that influences the priority calculation.
  parameters:
  - name: add
    description: Pointer to an integer array containing player statistics or group
      data used for priority calculation. Values may include player level, item level,
      role distribution, or other relevant metrics affecting dungeon group composition.
  returns: A uint32 value representing the calculated priority for adding a player
    to a dungeon group. Higher values typically indicate higher priority, though exact
    interpretation depends on internal dungeon system logic and may vary based on
    current group needs.
  examples:
  - title: Basic usage in dungeon queue processing
    code: 'int playerData[5] = {80, 600, 1, 0, 2};

      uint32 priority = dungeonScript->CalculateAddPriority(playerData);

      // Use priority to determine player placement in dungeon queue'
    language: cpp
  - title: Integration with group formation logic
    code: "void ProcessDungeonQueue(DungeonScript* script) {\n    int groupStats[5]\
      \ = {70, 500, 2, 1, 3};\n    uint32 priority = script->CalculateAddPriority(groupStats);\n\
      \    if (priority > 1000) {\n        // Player qualifies for high-priority group\n\
      \        AddToHighPriorityGroup();\n    } else {\n        // Assign to standard\
      \ queue\n        AddToStandardQueue();\n    }\n}"
    language: cpp
  notes: The method is marked as const, indicating it does not modify the DungeonScript
    object's state. The exact algorithm for calculating priority values is internal
    to TrinityCore and may be subject to updates based on game balance changes. This
    function is part of the core dungeon matchmaking system and should only be called
    during appropriate queue processing phases.
  warnings: The input array 'add' must contain valid data or undefined behavior may
    occur. Ensure that the integer array has sufficient elements (at least 5) to prevent
    memory access violations. The method assumes all values in the array are meaningful
    for priority calculation and does not perform validation checks.
  related:
  - GetDungeonGroupSize
  - IsPlayerEligible
  - CalculateGroupMatch
metadata:
  confidence: 0.85
  generated_at: '2025-11-02T08:27:12.860550'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
