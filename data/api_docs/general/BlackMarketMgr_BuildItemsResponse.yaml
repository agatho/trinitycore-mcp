api:
  class: BlackMarketMgr
  method: BuildItemsResponse
  signature: void BlackMarketMgr::BuildItemsResponse(WorldPackets::BlackMarket::BlackMarketRequestItemsResult
    & packet, Player * player)
documentation:
  brief: Populates a black market items response packet with data for the specified
    player.
  description: The BuildItemsResponse method constructs and fills a WorldPackets::BlackMarket::BlackMarketRequestItemsResult
    packet with the current black market auction items available to a specific player.
    This method is typically invoked when a player requests to view the black market
    inventory, ensuring that only relevant items are presented based on the player's
    level, faction, and other criteria. The packet includes item information such
    as item ID, bid amount, time remaining, and other metadata required for displaying
    the black market interface correctly in the client.
  parameters:
  - name: packet
    description: Reference to a WorldPackets::BlackMarket::BlackMarketRequestItemsResult
      packet that will be populated with black market item data.
  - name: player
    description: Pointer to the Player object for whom the black market items are
      being prepared. Used to determine eligible items based on player criteria such
      as level and faction.
  returns: null
  examples:
  - title: Basic Usage Example
    code: 'WorldPackets::BlackMarket::BlackMarketRequestItemsResult packet;

      Player* player = ...; // Assume valid player pointer

      blackMarketMgr->BuildItemsResponse(packet, player);

      player->SendDirectMessage(&packet);'
    language: cpp
  notes: This method is part of the black market system in TrinityCore and relies
    on internal data structures to determine which items should be visible to a given
    player. It may involve database lookups or cached data depending on the implementation.
  warnings: null
  related:
  - BlackMarketMgr::SendItems
  - BlackMarketMgr::GetAuctionsForPlayer
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T12:12:32.218309'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
