api:
  class: VMapManager2
  method: getAreaAndLiquidData
  signature: bool VMapManager2::getAreaAndLiquidData(uint32 mapId, float x, float
    y, float z, int reqLiquidType, AreaAndLiquidData & data) const
documentation:
  brief: Retrieves area and liquid data for a given map position, checking if the
    specified liquid type is present.
  description: The getAreaAndLiquidData method queries the VMapManager2 system to
    determine the area information and liquid details at a specific coordinate within
    a given map. It checks whether the specified liquid type (if required) exists
    at that location. This functionality is crucial for game mechanics such as determining
    if a player can swim, walk on water, or interact with liquids in the world. The
    method performs spatial queries against the virtual map system and returns detailed
    data about terrain and liquid properties. The function requires valid map coordinates
    and will return false if the map ID is invalid or the position is outside of the
    loaded map boundaries.
  parameters:
  - name: mapId
    description: The unique identifier of the map where the query is performed. Must
      correspond to a valid loaded map in the game world.
  - name: x
    description: The X coordinate (horizontal) of the position being queried within
      the specified map.
  - name: y
    description: The Y coordinate (vertical) of the position being queried within
      the specified map.
  - name: z
    description: The Z coordinate (height) of the position being queried within the
      specified map.
  - name: reqLiquidType
    description: The required liquid type to check for at the specified location.
      If set to -1, any liquid type is accepted; otherwise, only the specified liquid
      type will be considered valid.
  - name: data
    description: Reference to an AreaAndLiquidData structure where the results will
      be stored upon successful query. This includes area information and liquid properties
      at the queried location.
  returns: Returns true if the area and liquid data were successfully retrieved for
    the specified coordinates; otherwise, returns false if the map is invalid, the
    position is out of bounds, or no valid data exists for the requested location.
  examples:
  - title: Basic usage to check liquid at a specific point
    code: "AreaAndLiquidData data;\nbool result = vmapManager->getAreaAndLiquidData(0,\
      \ 123.4f, 567.8f, 90.1f, -1, data);\nif (result) {\n    // Process the area\
      \ and liquid data\n    printf(\"Area ID: %u, Liquid Type: %d\\n\", data.areaId,\
      \ data.liquidType);\n}"
    language: cpp
  - title: Checking for a specific liquid type at a location
    code: "AreaAndLiquidData data;\nint requiredLiquid = 2; // Example: Water\nbool\
      \ result = vmapManager->getAreaAndLiquidData(1, 1000.0f, 2000.0f, 50.0f, requiredLiquid,\
      \ data);\nif (result && data.liquidType == requiredLiquid) {\n    // The location\
      \ has the specified liquid type\n    printf(\"Found required liquid at this\
      \ location\\n\");\n} else {\n    // Either no liquid or not the required type\n\
      \    printf(\"No valid liquid found\\n\");\n}"
    language: cpp
  notes: This method is part of the virtual map system used in TrinityCore to handle
    area and liquid data for collision detection, movement validation, and gameplay
    mechanics. It relies on pre-loaded VMap files and may return false if a map is
    not currently loaded or if coordinates are outside valid ranges. The AreaAndLiquidData
    structure contains multiple fields including area ID, liquid type, height, and
    flags that define the terrain properties at the queried point.
  warnings: Calling this method with invalid map IDs or out-of-bounds coordinates
    may lead to undefined behavior or incorrect data retrieval. Always validate input
    parameters before calling this function. The method does not perform any automatic
    coordinate normalization or boundary checking beyond what is inherent in the VMap
    system.
  related:
  - getAreaInfo
  - getHeight
  - isInLineOfSight
  - getLiquidData
metadata:
  confidence: 0.92
  generated_at: '2025-11-01T19:58:44.798238'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
