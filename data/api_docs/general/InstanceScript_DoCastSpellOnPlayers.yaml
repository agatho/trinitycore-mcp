api:
  class: InstanceScript
  method: DoCastSpellOnPlayers
  signature: void InstanceScript::DoCastSpellOnPlayers(uint32 spell, bool includePets,
    bool includeControlled)
documentation:
  brief: Casts a specified spell on all players within the instance, with options
    to include pets and controlled creatures.
  description: The DoCastSpellOnPlayers method is used in TrinityCore's InstanceScript
    framework to apply a specific spell effect to all players currently present in
    the instance. This method allows for targeted spell application across multiple
    players simultaneously, which is commonly used for area-of-effect abilities, debuffs,
    or buffs that affect the entire player base. The method provides flexibility through
    optional parameters to include pets and controlled creatures, making it suitable
    for various encounter mechanics where summoned or controlled units should also
    be affected by the spell. It's important to note that this method operates within
    the instance context, so it only affects players who are currently within the
    boundaries of the specific instance where the script is running.
  parameters:
  - name: spell
    description: The spell ID to be cast on all players in the instance. This must
      correspond to a valid spell entry in the database.
  - name: includePets
    description: Boolean flag indicating whether to include player pets in the spell
      application. If true, pets will also receive the spell effect.
  - name: includeControlled
    description: Boolean flag indicating whether to include creatures controlled by
      players (such as guardians or charm effects) in the spell application. If true,
      these controlled units will also receive the spell effect.
  returns: null
  examples:
  - title: Basic Usage - Cast Healing Spell on All Players
    code: "void BossAI::JustDied()\n{\n    // Cast a healing spell on all players\
      \ in the instance\n    DoCastSpellOnPlayers(12345, false, false);\n}"
    language: cpp
  - title: Advanced Usage - Apply Debuff to Players and Their Pets
    code: "void Encounter::DoStartCombat()\n{\n    // Apply a debuff spell on all\
      \ players and their pets\n    DoCastSpellOnPlayers(67890, true, false);\n}"
    language: cpp
  notes: This method is typically used in boss encounter scripts or instance-wide
    event triggers. It's important to ensure that the spell ID provided is valid and
    appropriate for the context, as invalid spell IDs may cause errors or unexpected
    behavior. The method does not check if players are in combat or have specific
    conditions; it applies the spell regardless of player state. Performance-wise,
    this method iterates through all players in the instance, so it should be used
    judiciously in frequently called functions.
  warnings: Be cautious when using this method with spells that may cause stacking
    issues or have unintended side effects on multiple targets. Ensure that the spell
    being cast is appropriate for the target group to avoid game balance issues. Also,
    note that this method will not affect players who are not currently in the instance
    (e.g., those who have left or are in a different phase).
  related:
  - DoCastSpellOnPlayers
  - DoAreaTrigger
  - DoRemoveAurasDueToSpell
  - DoCast
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:30:31.803267'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
