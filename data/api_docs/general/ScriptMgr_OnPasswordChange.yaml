api:
  class: ScriptMgr
  method: OnPasswordChange
  signature: void ScriptMgr::OnPasswordChange(uint32 accountId)
documentation:
  brief: Called when a player changes their account password in the game.
  description: The OnPasswordChange method is a hook in the ScriptMgr class that gets
    invoked whenever a player successfully changes their account password. This method
    serves as an event handler for password modification actions within the TrinityCore
    framework. It allows custom scripts or modules to execute specific logic when
    a password change occurs, such as logging the event, updating related data, or
    triggering notifications. The method is typically called after the password has
    been validated and updated in the database but before the session is finalized.
  parameters:
  - name: accountId
    description: The unique identifier of the account whose password is being changed.
      This value corresponds to the 'id' field in the 'account' table of the TrinityCore
      database.
  returns: null
  examples:
  - title: Basic Password Change Handler
    code: "class MyScript : public ScriptObject\n{\npublic:\n    MyScript() : ScriptObject(\"\
      MyScript\") {}\n\n    void OnPasswordChange(uint32 accountId) override\n   \
      \ {\n        // Log password change event\n        sLog->outInfo(LOG_FILTER_SCRIPTS,\
      \ \"Player with account ID %u changed their password.\", accountId);\n    }\n\
      };"
    language: cpp
  - title: Advanced Password Change with Database Update
    code: "class MyScript : public ScriptObject\n{\npublic:\n    MyScript() : ScriptObject(\"\
      MyScript\") {}\n\n    void OnPasswordChange(uint32 accountId) override\n   \
      \ {\n        // Update last password change timestamp in custom table\n    \
      \    CharacterDatabase.PExecute(\"UPDATE account_custom SET last_password_change\
      \ = UNIX_TIMESTAMP() WHERE account_id = %u\", accountId);\n        \n      \
      \  // Notify other systems about the password change\n        sWorld->SendGlobalGMSysMessage(\"\
      Account ID %u has changed their password.\");\n    }\n};"
    language: cpp
  notes: This method is part of the global script manager and is called synchronously
    during the password change process. It's important to ensure that any operations
    performed within this handler are lightweight to avoid blocking the authentication
    flow. The accountId parameter should be validated before performing any database
    operations.
  warnings: Avoid performing heavy database operations or network calls in this method
    as it may block the login process. Do not attempt to modify the password change
    itself from this hook, as it's already been completed by the time this method
    is invoked.
  related:
  - OnAccountLogin
  - OnAccountLogout
  - OnPasswordReset
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T22:27:37.436789'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
