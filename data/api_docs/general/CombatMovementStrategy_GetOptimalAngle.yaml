api:
  class: CombatMovementStrategy
  method: GetOptimalAngle
  signature: float CombatMovementStrategy::GetOptimalAngle(Player * player, Unit *
    target, FormationRole role) const
documentation:
  brief: Calculates the optimal angle for a player to position themselves relative
    to a target during combat based on formation role.
  description: The GetOptimalAngle method computes the ideal angular positioning for
    a player unit in relation to their combat target, taking into account the specified
    formation role. This calculation is used by the CombatMovementStrategy to determine
    optimal movement and positioning during combat encounters. The method considers
    factors such as the player's current orientation, the target's position, and the
    strategic requirements of the assigned formation role (e.g., front-line, flanking,
    support). It returns an angle in radians that represents the direction the player
    should face or move toward for optimal tactical positioning.
  parameters:
  - name: player
    description: Pointer to the Player object for which the optimal angle is being
      calculated. Must not be null.
  - name: target
    description: Pointer to the Unit object representing the combat target. Must not
      be null.
  - name: role
    description: FormationRole enum value indicating the tactical role the player
      should assume during combat. Defines how positioning calculations should be
      weighted.
  returns: A float value representing the optimal angle in radians. This angle indicates
    the direction the player should face or move toward for effective combat positioning
    based on their formation role.
  examples:
  - title: Basic usage to determine optimal angle
    code: 'Player* player = ...;

      Unit* target = ...;

      FormationRole role = FORMATION_ROLE_FRONT;

      float optimalAngle = strategy.GetOptimalAngle(player, target, role);

      // Use optimalAngle for positioning calculations'
    language: cpp
  - title: Using optimal angle in movement logic
    code: 'Player* player = ...;

      Unit* target = ...;

      float angle = strategy.GetOptimalAngle(player, target, FORMATION_ROLE_FLANK);

      float currentFacing = player->GetOrientation();

      float turnAngle = angle - currentFacing;

      player->SetFacing(turnAngle);'
    language: cpp
  notes: This method is part of the CombatMovementStrategy class and is typically
    invoked during combat decision-making processes. The implementation likely involves
    trigonometric calculations based on player and target positions, with consideration
    for role-specific tactical requirements. Performance is generally acceptable as
    it's called infrequently during active combat states.
  warnings: Ensure that both player and target pointers are valid before calling this
    method to avoid undefined behavior. The FormationRole parameter should be one
    of the predefined enum values; invalid values may lead to unexpected positioning
    calculations.
  related:
  - CombatMovementStrategy::GetOptimalDistance
  - CombatMovementStrategy::GetFormationPosition
  - CombatMovementStrategy::CalculateMovement
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T10:03:15.484406'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
