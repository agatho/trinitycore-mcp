api:
  class: TradeSystem
  method: FindNearbyVendors
  signature: int TradeSystem::FindNearbyVendors(Player * player, float radius)
documentation:
  brief: Finds and counts nearby vendor NPCs within a specified radius for the given
    player.
  description: The FindNearbyVendors method searches for all vendor NPCs located within
    the specified radius around the provided player character. It iterates through
    the game world's objects to identify NPCs that are flagged as vendors (typically
    merchants or auctioneers) and are within the defined distance. The method returns
    an integer count of how many such vendors were found, which can be used by the
    trading system to determine available trading partners or to display vendor information
    in the user interface. This functionality is essential for implementing features
    like vendor proximity detection, trade route optimization, or automatic vendor
    selection in player-driven commerce systems.
  parameters:
  - name: player
    description: Pointer to the Player object for whom nearby vendors are being searched.
      Must be a valid player instance; null pointers will result in undefined behavior.
  - name: radius
    description: Floating-point value representing the maximum distance (in yards)
      from the player's position to consider for vendor detection. Must be positive;
      negative values may produce unexpected results or no vendors found.
  returns: Returns an integer representing the number of vendor NPCs found within
    the specified radius. A return value of zero indicates no vendors were located
    nearby, while a positive integer indicates the count of available vendors.
  examples:
  - title: Basic Vendor Search
    code: "Player* player = ...; // Assume valid player object\nint vendorCount =\
      \ TradeSystem::FindNearbyVendors(player, 10.0f);\nif (vendorCount > 0)\n{\n\
      \    // Proceed with vendor interaction logic\n    sLog->outString(\"Found %d\
      \ vendors nearby.\", vendorCount);\n}"
    language: cpp
  - title: Dynamic Radius Vendor Search
    code: 'Player* player = ...;

      float searchRadius = player->GetMap()->GetVisibilityDistance(); // Use map''s
      visibility distance

      int vendorCount = TradeSystem::FindNearbyVendors(player, searchRadius);

      sLog->outString("Vendor count within %.2f yards: %d", searchRadius, vendorCount);'
    language: cpp
  notes: This method relies on the underlying WorldObject system and requires that
    the player object is properly initialized with a valid map reference. Performance
    may be impacted when searching large areas or in densely populated zones due to
    the number of objects being checked. The method does not perform any filtering
    based on vendor type or reputation; it simply counts all vendors within range.
  warnings: Passing null as the player parameter will likely cause a crash or undefined
    behavior. Using extremely large radius values may significantly impact performance,
    especially in areas with many NPCs. The method assumes that vendor identification
    is handled by the game's internal NPC flags and does not validate if the found
    objects are actually usable for trading.
  related:
  - GetNearbyVendors
  - IsVendorInRange
  - CountAvailableVendors
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T00:36:27.829647'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
