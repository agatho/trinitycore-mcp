api:
  class: TradeSystem
  method: HandleTradeError
  signature: void TradeSystem::HandleTradeError(uint32 sessionId, const std::string
    & error)
documentation:
  brief: Handles trade errors by sending an error message to the player's client for
    a specific trade session.
  description: The HandleTradeError method is responsible for managing and communicating
    trade-related errors within the TrinityCore server. It takes a session identifier
    and an error message string, then formats and sends this information back to the
    player's client to notify them of a trade failure. This method is typically invoked
    when a trade operation cannot proceed due to invalid conditions such as insufficient
    inventory, incompatible items, or other game logic violations. The method ensures
    that players receive appropriate feedback regarding why their trade attempt failed,
    improving user experience and helping maintain game balance.
  parameters:
  - name: sessionId
    description: Unique identifier for the player's active trade session. This value
      corresponds to the session ID used internally by the TrinityCore trade system
      to track ongoing trades between players.
  - name: error
    description: String containing the error message to be sent to the client. This
      should be a human-readable description of why the trade failed, such as 'Item
      not found' or 'Trade cancelled'.
  returns: null
  examples:
  - title: Basic Trade Error Handling
    code: TradeSystem::HandleTradeError(12345, "Not enough gold to complete trade");
    language: cpp
  - title: Sending Inventory Error Message
    code: TradeSystem::HandleTradeError(playerSessionId, "Item is not available in
      your inventory");
    language: cpp
  notes: This method likely interacts with the network layer to send a specific opcode
    to the client, informing them of the trade error. The sessionId parameter must
    correspond to an active trade session; otherwise, the error may not be properly
    delivered. It is important that error messages are localized and user-friendly
    for optimal gameplay experience.
  warnings: Ensure that the sessionId is valid before calling this method to avoid
    potential crashes or undefined behavior. Also, make sure that error strings do
    not contain sensitive information that could be exploited by malicious users.
  related:
  - HandleTradeAccept
  - HandleTradeCancel
  - HandleTradeUpdate
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T00:34:16.451823'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
