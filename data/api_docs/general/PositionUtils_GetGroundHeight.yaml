api:
  class: PositionUtils
  method: GetGroundHeight
  signature: float PositionUtils::GetGroundHeight(const int & pos, Map * map)
documentation:
  brief: Retrieves the ground height at a specified position within a given map.
  description: The GetGroundHeight method calculates and returns the vertical elevation
    (Y-coordinate) of the ground surface at a specific location on a map. This utility
    is commonly used in World of Warcraft TrinityCore for determining terrain heights,
    which is essential for character movement, spell targeting, object placement,
    and collision detection. The method takes an integer position identifier and a
    pointer to the map where the height should be queried. It internally resolves
    the position data to find the corresponding ground level, making it useful for
    dynamic world interactions and pathfinding algorithms.
  parameters:
  - name: pos
    description: An integer identifier representing a specific position in the game
      world. This value is typically used as a key or index to locate a particular
      coordinate within the map's spatial structure.
  - name: map
    description: A pointer to the Map object where the ground height is to be calculated.
      The map must be valid and loaded for accurate results.
  returns: Returns a float value representing the ground height (Y-coordinate) at
    the specified position on the given map. If the position or map is invalid, the
    method may return an undefined or default value such as 0.0f.
  examples:
  - title: Basic Usage
    code: "float height = PositionUtils::GetGroundHeight(12345, player->GetMap());\n\
      if (height != 0.0f) {\n    // Proceed with logic using the retrieved ground\
      \ height\n}"
    language: cpp
  - title: Using in Movement Logic
    code: 'Position pos;

      pos.Relocate(100.0f, 200.0f, 0.0f);

      float groundHeight = PositionUtils::GetGroundHeight(pos.GetPositionX(), player->GetMap());

      player->SetPosition(pos.GetPositionX(), pos.GetPositionY(), groundHeight, pos.GetOrientation());'
    language: cpp
  notes: This method relies on the internal map data structures and terrain information.
    Ensure that the provided map is loaded before calling this function to avoid undefined
    behavior. The position identifier 'pos' should be consistent with how positions
    are stored or indexed within the game world system.
  warnings: Do not pass a null pointer for the 'map' parameter; doing so will likely
    result in a crash or invalid data retrieval. Also, note that the method may return
    inaccurate values if the map is not fully initialized or if the position identifier
    does not correspond to a valid location.
  related:
  - GetPosition
  - SetPosition
  - GetHeight
metadata:
  confidence: 0.9
  generated_at: '2025-11-03T21:11:32.348570'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
