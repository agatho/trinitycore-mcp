api:
  class: InterruptUtils
  method: CalculateCCThreat
  signature: float InterruptUtils::CalculateCCThreat(const SpellInfo * spellInfo,
    Unit * caster)
documentation:
  brief: Calculates the threat generated by a crowd control spell based on its properties
    and caster.
  description: The CalculateCCThreat method computes the amount of threat a crowd
    control spell will generate when successfully applied to a target. This calculation
    is crucial for determining how much aggro a caster will gain from applying CC
    effects, which directly impacts mob targeting behavior in World of Warcraft. The
    method takes into account various spell attributes such as spell power, base threat,
    and any modifiers that might affect the threat generation. It's typically used
    within the combat system to ensure proper threat management for crowd control
    abilities.
  parameters:
  - name: spellInfo
    description: Pointer to the SpellInfo structure containing detailed information
      about the spell being cast, including base threat values, spell power requirements,
      and other relevant attributes that influence threat generation.
  - name: caster
    description: Pointer to the Unit object representing the caster of the spell.
      This is used to determine the caster's stats, level, and any buffs or debuffs
      that may affect threat calculation.
  returns: Returns a float value representing the calculated threat amount generated
    by the crowd control spell. This value determines how much aggro the caster will
    gain from successfully applying the CC effect.
  examples:
  - title: Basic Usage Example
    code: "float threat = InterruptUtils::CalculateCCThreat(spellInfo, caster);\n\
      // Use the calculated threat to apply aggro to the target\nif (threat > 0.0f)\n\
      {\n    target->AddThreat(caster, threat);\n}"
    language: cpp
  - title: Integration with Spell Effect Application
    code: "void ApplyCrowdControlSpell(Unit* target, SpellInfo* spellInfo, Unit* caster)\n\
      {\n    float threat = InterruptUtils::CalculateCCThreat(spellInfo, caster);\n\
      \    if (threat > 0.0f && target->IsAlive())\n    {\n        // Apply the CC\
      \ effect\n        target->AddThreat(caster, threat);\n        // Additional\
      \ logic for applying the actual spell effect\n    }\n}"
    language: cpp
  notes: This method is part of the core combat threat system and should be called
    only when a crowd control spell is successfully applied. The calculation may vary
    based on server settings, difficulty levels, and specific game mechanics such
    as PvP or PvE threat modifiers. Performance-wise, this function should be lightweight
    since it's called frequently during combat events.
  warnings: Ensure that both spellInfo and caster parameters are valid pointers before
    calling this method to avoid crashes. The method assumes the spell is a valid
    crowd control effect; calling it with non-CC spells may produce unexpected results.
    Be aware that threat calculations can be affected by various buffs, debuffs, and
    server configurations.
  related:
  - CalculateSpellThreat
  - GetThreatMultiplier
  - AddThreat
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T11:18:28.578060'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
