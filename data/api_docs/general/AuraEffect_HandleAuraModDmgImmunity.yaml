api:
  class: AuraEffect
  method: HandleAuraModDmgImmunity
  signature: void AuraEffect::HandleAuraModDmgImmunity(const AuraApplication * aurApp,
    uint8 mode, bool apply) const
documentation:
  brief: Applies or removes damage immunity effects from an aura application.
  description: The HandleAuraModDmgImmunity method manages the application and removal
    of damage immunity effects associated with a specific aura. It is invoked during
    aura application or removal to modify the target's immunity status against certain
    types of damage. This method integrates with the TrinityCore aura system to ensure
    proper handling of damage immunity mechanics, including updating the target's
    damage immunity state and potentially triggering related events or callbacks.
    The method operates based on the aura's application context and the mode of operation
    (apply or remove).
  parameters:
  - name: aurApp
    description: Pointer to the AuraApplication object representing the aura being
      applied or removed. This parameter provides context about which aura is affecting
      the target.
  - name: mode
    description: The mode of operation indicating whether the effect is being applied
      (true) or removed (false). This parameter controls the direction of the immunity
      state change.
  - name: apply
    description: Boolean flag indicating if the immunity effect should be applied
      (true) or removed (false). This determines the actual behavior of the method
      during execution.
  returns: null
  examples:
  - title: Applying Damage Immunity Aura
    code: 'AuraEffect* auraEffect = new AuraEffect();

      AuraApplication* app = new AuraApplication();

      auraEffect->HandleAuraModDmgImmunity(app, 1, true); // Apply immunity'
    language: cpp
  - title: Removing Damage Immunity Aura
    code: 'AuraEffect* auraEffect = new AuraEffect();

      AuraApplication* app = new AuraApplication();

      auraEffect->HandleAuraModDmgImmunity(app, 0, false); // Remove immunity'
    language: cpp
  notes: This method is part of the internal aura handling system in TrinityCore and
    should not be called directly by external code. It relies on proper initialization
    of the AuraApplication object and correct mode values to function properly. The
    method updates the target's immunity state but does not perform any direct damage
    calculations or event firing.
  warnings: Improper use of this method with incorrect parameters can lead to inconsistent
    immunity states for players or creatures, potentially causing unexpected behavior
    in combat mechanics. Ensure that aura applications are properly initialized before
    calling this method.
  related:
  - AuraEffect::ApplyAura
  - AuraEffect::RemoveAura
  - AuraApplication::GetTarget
  - AuraEffect::HandleAuraModDamageImmunity
metadata:
  confidence: 0.85
  generated_at: '2025-10-31T13:25:35.066804'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
