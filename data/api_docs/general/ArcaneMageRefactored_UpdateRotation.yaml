api:
  class: ArcaneMageRefactored
  method: UpdateRotation
  signature: void ArcaneMageRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the arcane mage's spell rotation based on current target and combat
    state
  description: The UpdateRotation method manages the core spell casting logic for
    an Arcane Mage AI, determining which spells to cast next based on the target's
    current status, mana availability, and combat conditions. This method evaluates
    the optimal sequence of arcane spells including Arcane Missiles, Arcane Blast,
    and other rotation abilities while considering cooldowns, resource management,
    and target vulnerability. The method integrates with the broader AI system to
    ensure efficient spell usage and maintains proper rotation timing for maximum
    damage output or survivability depending on the configured playstyle.
  parameters:
  - name: target
    description: Pointer to the current target's health or combat state information
      used to determine optimal spell selection and casting priority
  returns: null
  examples:
  - title: Basic usage in AI update loop
    code: "void ArcaneMageAI::Update()\n{\n    Unit* target = GetVictim();\n    if\
      \ (target)\n        m_mage->UpdateRotation(&target->GetHealth());\n}"
    language: cpp
  - title: Integration with combat state management
    code: "void ArcaneMageRefactored::UpdateRotation(int* target)\n{\n    if (!target\
      \ || *target <= 0) return;\n    \n    // Check mana and cooldowns\n    if (HasMana()\
      \ && !IsOnCooldown())\n    {\n        CastArcaneBlast();\n    }\n    else if\
      \ (CanCastMissiles())\n    {\n        CastArcaneMissiles();\n    }\n}"
    language: cpp
  notes: This method is typically called during the AI update cycle and should be
    invoked only when the mage has a valid target. The method assumes that the target
    pointer points to a valid combat entity with accessible health information. Performance
    considerations include avoiding unnecessary spell checks and maintaining efficient
    cooldown tracking.
  warnings: Do not call this method without ensuring the target parameter points to
    a valid memory location. Passing a null or invalid pointer may cause undefined
    behavior. The method does not perform target validation internally, so callers
    must ensure proper state management.
  related:
  - CastArcaneBlast
  - CastArcaneMissiles
  - HasMana
  - IsOnCooldown
  - CanCastMissiles
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T09:29:47.802950'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
