api:
  class: InstanceScript
  method: DoUpdateCriteria
  signature: void InstanceScript::DoUpdateCriteria(CriteriaType type, uint32 miscValue1,
    uint32 miscValue2, Unit * unit)
documentation:
  brief: Updates instance criteria based on specified type and miscellaneous values.
  description: The DoUpdateCriteria method is used within TrinityCore's InstanceScript
    framework to trigger updates to achievement criteria related to instance content.
    It allows script developers to programmatically advance or modify criteria progress
    for players within a dungeon, raid, or other instance-based content. This method
    is typically invoked when certain events occur in the instance, such as defeating
    a boss or collecting specific items. The method takes into account the criteria
    type and associated miscellaneous values to determine how to update the player's
    progress toward achievements.
  parameters:
  - name: type
    description: The type of criteria to update, defined by the CriteriaType enumeration.
      This determines what kind of achievement condition is being progressed.
  - name: miscValue1
    description: First miscellaneous value that provides additional context for the
      criteria update. The meaning depends on the specific criteria type and may represent
      creature entry IDs, item IDs, or other relevant data.
  - name: miscValue2
    description: Second miscellaneous value providing further context for the criteria
      update. Used in conjunction with miscValue1 to determine how the achievement
      progress should be modified.
  - name: unit
    description: Pointer to the Unit object (typically a Player) that is associated
      with the criteria update. This determines which player's progress gets updated.
  returns: null
  examples:
  - title: Update boss kill criteria for a raid instance
    code: "void InstanceScript::OnBossKilled(uint32 bossId)\n{\n    // Update criteria\
      \ for defeating a specific boss\n    DoUpdateCriteria(CRITERIA_TYPE_BEAT_BOSS,\
      \ bossId, 0, nullptr);\n}"
    language: cpp
  - title: Update player-specific achievement criteria
    code: "void InstanceScript::OnPlayerEnter(Player* player)\n{\n    // Update criteria\
      \ for entering instance with specific requirements\n    DoUpdateCriteria(CRITERIA_TYPE_COMPLETE_DUNGEON,\
      \ 0, 0, player);\n}"
    language: cpp
  notes: This method is part of the core achievement system in TrinityCore and integrates
    closely with the CriteriaManager. It should only be called from within valid instance
    script contexts where player progress tracking is appropriate. The unit parameter
    can be null, which typically means all players in the instance will have their
    criteria updated.
  warnings: Improper use of this method may lead to incorrect achievement progression
    or unexpected behavior in player achievements. Ensure that the criteria type and
    miscellaneous values match valid combinations defined by the game's internal systems.
    Avoid calling this method outside of appropriate instance events as it may cause
    synchronization issues with the achievement system.
  related:
  - DoUpdateCriteriaForPlayer
  - DoCompleteAchievement
  - GetCriteriaProgress
metadata:
  confidence: 0.9
  generated_at: '2025-11-01T00:14:18.591492'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
