api:
  class: InstanceScript
  method: SendEncounterStart
  signature: void InstanceScript::SendEncounterStart(uint32 inCombatResCount, uint32
    maxInCombatResCount, uint32 inCombatResChargeRecovery, uint32 nextCombatResChargeTime)
documentation:
  brief: Sends an encounter start message to all players in the instance with combat
    resource information.
  description: The SendEncounterStart method is used within TrinityCore's InstanceScript
    framework to notify all players in a dungeon or raid instance that an encounter
    has begun. It transmits combat resource data including current and maximum combat
    ressources, as well as charge recovery timing. This method is typically called
    when initiating a boss fight or significant encounter event, ensuring all players
    receive the necessary information for proper engagement. The method does not return
    any value but triggers client-side updates to display encounter-related UI elements
    and resource management.
  parameters:
  - name: inCombatResCount
    description: Current number of combat resources available to the player group
  - name: maxInCombatResCount
    description: Maximum allowed combat resources for the encounter
  - name: inCombatResChargeRecovery
    description: Time in milliseconds between combat resource charges
  - name: nextCombatResChargeTime
    description: Timestamp when next combat resource will be available
  returns: null
  examples:
  - title: Basic Encounter Start
    code: "void BossAI::JustEngagedWith(Unit* who)\n{\n    // Initialize encounter\
      \ with 3 resources, 5 max, 30s charge time\n    instance->SendEncounterStart(3,\
      \ 5, 30000, 0);\n}\n"
    language: cpp
  - title: Advanced Encounter Start with Dynamic Values
    code: "void InstanceScript::OnEncounterStart()\n{\n    uint32 maxResources = GetDifficulty()\
      \ == DUNGEON_DIFFICULTY_HEROIC ? 7 : 5;\n    uint32 chargeTime = GetDifficulty()\
      \ == DUNGEON_DIFFICULTY_HEROIC ? 20000 : 30000;\n    \n    SendEncounterStart(0,\
      \ maxResources, chargeTime, 0);\n}\n"
    language: cpp
  notes: This method should only be called during active encounters when players are
    present in the instance. The client will automatically handle UI updates based
    on these resource values. Ensure that parameter values are valid and within expected
    ranges to prevent client-side UI glitches.
  warnings: Calling this method outside of proper encounter contexts may cause client-side
    errors or unexpected behavior. The nextCombatResChargeTime parameter should be
    set to a valid future timestamp or zero for immediate availability. Incorrect
    parameter values can lead to resource display inconsistencies in the player interface.
  related:
  - SendEncounterEnd
  - UpdateCombatResCount
  - SetEncounterState
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T05:19:08.882811'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
