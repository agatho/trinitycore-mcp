api:
  class: Spell
  method: EffectCreateHeirloomItem
  signature: void Spell::EffectCreateHeirloomItem()
documentation:
  brief: Creates a heirloom item for the target player when a spell effect is applied.
  description: The EffectCreateHeirloomItem method is responsible for generating and
    granting a heirloom item to the spell's target. This method is typically invoked
    as part of a spell effect that bestows a special, high-value item with unique
    properties. Heirloom items in World of Warcraft are usually bound to the character
    and often have special visual effects or bonuses. The method handles the creation
    of the item within the game world and ensures it is properly added to the target's
    inventory or mailbox if the inventory is full. This function is commonly used
    in conjunction with specific spells or quest rewards that provide players with
    powerful, lasting items.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in spell effect handler
    code: "void Spell::EffectCreateHeirloomItem()\n{\n    if (!GetUnitTarget())\n\
      \        return;\n\n    Player* target = GetUnitTarget()->ToPlayer();\n    if\
      \ (!target)\n        return;\n\n    // Create heirloom item with specific ID\n\
      \    ItemTemplate const* proto = sObjectMgr->GetItemTemplate(12345);\n    if\
      \ (!proto)\n        return;\n\n    Item* item = Item::CreateItem(12345, 1, target);\n\
      \    if (!item)\n        return;\n\n    // Add to inventory or mail if full\n\
      \    if (target->GetInventory()->AddItemToFreeSlot(item))\n        target->SendNewItem(item,\
      \ 1, true, false);\n    else\n        target->AddItemToMailbox(item);\n}"
    language: cpp
  notes: This method assumes that the spell's target is a valid player object. It
    does not perform any validation on item templates or inventory space beyond basic
    checks. The actual creation and distribution of heirloom items may be influenced
    by various game systems such as achievement tracking, quest completion, or player
    level restrictions.
  warnings: Improper handling of item creation can lead to client-side errors or missing
    items for players. Ensure that the item template ID is valid and that the target
    player exists before calling this method. Also, be aware that heirloom items are
    typically designed with specific gameplay balance in mind, so creating them outside
    of proper spell contexts may cause unintended consequences.
  related:
  - Spell::DoCreateItem
  - Spell::EffectHeal
  - Spell::EffectAddItemToInventory
metadata:
  confidence: 0.85
  generated_at: '2025-10-29T16:59:57.267270'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
