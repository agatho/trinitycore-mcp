api:
  class: AoEDecisionManager
  method: CalculateClusters
  signature: void AoEDecisionManager::CalculateClusters()
documentation:
  brief: Analyzes area of effect spell targets to group them into logical clusters
    for optimal casting decisions
  description: The CalculateClusters method processes the current set of valid targets
    for an area of effect spell and groups them into clusters based on proximity and
    spatial relationships. This clustering algorithm helps AI decision-making systems
    determine the most effective casting positions and target priorities when dealing
    with AoE abilities. The method analyzes target locations, distances between entities,
    and environmental factors to form coherent groups that maximize damage potential
    or utility while minimizing friendly fire risks. It prepares data structures that
    can be used by subsequent methods in the AoE decision process.
  parameters: []
  returns: null
  examples:
  - title: Basic Usage in AI Decision Loop
    code: "void GenericAI::UpdateAI()\n{\n    if (m_aoeManager && m_spellInfo->IsAreaOfEffect())\n\
      \    {\n        m_aoeManager->CalculateClusters();\n        // Proceed with\
      \ cluster-based decision making\n    }\n}"
    language: cpp
  - title: Integration with Custom AoE Logic
    code: "class CustomAoEHandler : public AoEDecisionManager\n{\npublic:\n    void\
      \ ProcessSpellCast()\n    {\n        CalculateClusters();\n        // Access\
      \ clustered targets for custom logic\n        for (auto& cluster : GetClusters())\n\
      \        {\n            if (cluster.size() > 2)\n                CastAOEAtCluster(cluster);\n\
      \        }\n    }\n};"
    language: cpp
  notes: This method assumes that target data has already been populated and validated.
    The clustering algorithm uses a configurable distance threshold to determine which
    targets belong to the same cluster. Performance is optimized for typical AoE spell
    scenarios with up to 20 targets, but may degrade with very large target sets.
    The method modifies internal state variables that are used by other methods in
    the class.
  warnings: Calling this method without proper target validation can lead to incorrect
    clustering results. The method does not perform any target filtering or validation
    - it assumes all targets in the current context are valid for clustering. In high-frequency
    AI update scenarios, repeated calls to this method may cause performance bottlenecks
    if not properly batched.
  related:
  - GetClusters
  - SetTargetList
  - ClearClusters
  - EvaluateClusterEffectiveness
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T06:44:56.755697'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
