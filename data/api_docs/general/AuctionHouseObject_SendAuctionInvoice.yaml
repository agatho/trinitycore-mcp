api:
  class: AuctionHouseObject
  method: SendAuctionInvoice
  signature: void AuctionHouseObject::SendAuctionInvoice(const AuctionPosting * auction,
    Player * owner, int trans) const
documentation:
  brief: Sends an auction invoice message to the auction owner when an auction completes.
  description: The SendAuctionInvoice method is responsible for generating and sending
    a notification message to the player who posted an auction item. This message,
    known as an auction invoice, contains details about the final sale of the item,
    including the final bid amount, any applicable taxes or fees, and the net amount
    received by the seller. The method is typically invoked when an auction concludes
    either through successful bidding or expiration without bids. It ensures that
    players are properly informed of their auction outcomes and financial transactions
    within the game's economy system.
  parameters:
  - name: auction
    description: Pointer to the AuctionPosting object representing the completed auction.
      This parameter contains all relevant information about the auction such as the
      item, bid amount, and auction duration.
  - name: owner
    description: Pointer to the Player object who originally posted the auction. This
      player will receive the auction invoice message containing details of the transaction.
  - name: trans
    description: Integer value representing the transaction type or identifier. This
      parameter likely determines how the invoice is formatted or which specific transaction
      record is referenced in the message.
  returns: null
  examples:
  - title: Basic Usage Example
    code: "AuctionHouseObject* ah = sAuctionHouseMgr->GetAuctionHouseForFaction(PLAYER_FACTION_GROUP_ALLIANCE);\n\
      AuctionPosting* auction = ah->GetAuctionById(auctionId);\nPlayer* owner = ObjectAccessor::FindPlayer(auction->owner);\n\
      if (auction && owner)\n{\n    ah->SendAuctionInvoice(auction, owner, 1);\n}"
    language: cpp
  notes: This method likely interacts with the player's mailbox system to deliver
    the auction invoice. It may also update internal auction house statistics and
    trigger related financial transactions in the game economy.
  warnings: Ensure that both the auction and owner parameters are valid pointers before
    calling this method, as passing null pointers could lead to undefined behavior
    or crashes. The transaction identifier should be properly validated to avoid incorrect
    invoice generation.
  related:
  - AuctionHouseObject::AddAuction
  - AuctionHouseObject::RemoveAuction
  - AuctionHouseObject::SendAuctionOutbid
  - AuctionHouseObject::SendAuctionExpired
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T21:09:29.967899'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
