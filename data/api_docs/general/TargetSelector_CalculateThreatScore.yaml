api:
  class: TargetSelector
  method: CalculateThreatScore
  signature: float TargetSelector::CalculateThreatScore(Unit * target, const SelectionContext
    & context)
documentation:
  brief: Calculates and returns a threat score for a given target unit based on selection
    context.
  description: The CalculateThreatScore method evaluates the threat level of a specified
    target unit within the context of AI decision-making. It considers various factors
    such as the target's health, distance, threat generated by the unit, and other
    relevant combat parameters to determine how likely the target is to be selected
    for attack or targeting. This score is used internally by the AI system to prioritize
    targets in threat-based selection logic. The method requires a valid Unit pointer
    for the target and a properly initialized SelectionContext object that provides
    contextual information about the current state of the AI and environment.
  parameters:
  - name: target
    description: Pointer to the Unit object representing the target for which the
      threat score is calculated. Must not be null.
  - name: context
    description: Reference to a SelectionContext object containing contextual information
      about the current AI state, including caster unit, threat levels, and selection
      parameters.
  returns: A float value representing the calculated threat score for the target.
    Higher values indicate higher threat priority. Returns 0.0f if the target is invalid
    or cannot be evaluated.
  examples:
  - title: Basic usage in AI target selection
    code: "float score = selector.CalculateThreatScore(targetUnit, context);\nif (score\
      \ > highestScore)\n{\n    highestScore = score;\n    bestTarget = targetUnit;\n\
      }"
    language: cpp
  - title: Using threat score for priority-based targeting
    code: "float threatScore = selector.CalculateThreatScore(enemy, selectionContext);\n\
      if (threatScore > 10.0f && enemy->IsAlive())\n{\n    // Prioritize this target\n\
      \    target = enemy;\n}"
    language: cpp
  notes: This method is typically called during AI decision-making cycles to evaluate
    potential targets. The threat score calculation may involve complex interactions
    with the unit's current threat table, aggro mechanics, and combat state. Performance
    is generally good but can be impacted by complex threat calculations in high-combat
    scenarios.
  warnings: Ensure that both target and context parameters are valid before calling
    this method to avoid undefined behavior or crashes. The returned score should
    not be used directly for combat decisions without proper validation of the target's
    eligibility.
  related:
  - GetThreatList
  - AddThreat
  - RemoveThreat
  - UpdateThreat
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T18:28:08.074611'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
