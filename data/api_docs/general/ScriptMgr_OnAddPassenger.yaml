api:
  class: ScriptMgr
  method: OnAddPassenger
  signature: void ScriptMgr::OnAddPassenger(Transport * transport, Player * player)
documentation:
  brief: Invoked when a player is added as a passenger to a transport vehicle.
  description: The OnAddPassenger method is a hook in the ScriptMgr class that gets
    called whenever a player is successfully added as a passenger to a transport object,
    such as a boat, zeppelin, or other moving vehicle in the game world. This method
    allows custom scripts to execute logic when passengers board transports, enabling
    features like quest progression, event triggers, or custom behavior modifications.
    The method is part of TrinityCore's scripting system and is typically used by
    scripters to extend or modify default transport behavior without directly altering
    core game mechanics.
  parameters:
  - name: transport
    description: Pointer to the Transport object to which the player is being added
      as a passenger. This represents the vehicle (e.g., boat, zeppelin) that the
      player is boarding.
  - name: player
    description: Pointer to the Player object who is being added as a passenger. This
      represents the player character who has boarded the transport.
  returns: null
  examples:
  - title: Basic usage in a custom script
    code: "#include \"ScriptMgr.h\"\n\nclass MyTransportScript : public TransportScript\n\
      {\npublic:\n    void OnAddPassenger(Transport* transport, Player* player) override\n\
      \    {\n        // Example: Send a message to the player when they board a transport\n\
      \        player->SendNotification(\"Welcome aboard the %s!\", transport->GetName().c_str());\n\
      \    }\n};"
    language: cpp
  - title: Triggering quest progress on passenger boarding
    code: "#include \"ScriptMgr.h\"\n\nvoid OnAddPassenger(Transport* transport, Player*\
      \ player)\n{\n    // Example: Check if the transport is a specific quest transport\
      \ and update quest status\n    if (transport->GetEntry() == 12345) // Quest\
      \ transport entry ID\n    {\n        if (player->GetQuestStatus(54321) == QUEST_STATUS_INCOMPLETE)\n\
      \        {\n            player->AreaExploredOrEventHappens(54321);\n       \
      \ }\n    }\n}"
    language: cpp
  notes: This method is called during the transport passenger management process,
    and it's important to note that it may be invoked multiple times for a single
    player if they board and disembark multiple transports. The method does not prevent
    the passenger from being added; it simply notifies scripts of the event.
  warnings: Be cautious when modifying player or transport state within this function,
    as improper handling could lead to game instability or unexpected behavior. Avoid
    performing heavy operations in this hook, as it may affect performance during
    frequent passenger interactions.
  related:
  - OnRemovePassenger
  - OnTransportAdd
  - OnTransportRemove
metadata:
  confidence: 0.95
  generated_at: '2025-11-01T23:00:04.825473'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
