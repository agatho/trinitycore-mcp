api:
  class: MechanicAwareness
  method: DetectCastingMechanic
  signature: MechanicInfo MechanicAwareness::DetectCastingMechanic(Unit * caster)
documentation:
  brief: Detects and returns the mechanic type of the casting unit's current spell.
  description: The DetectCastingMechanic method analyzes the spell being cast by the
    specified caster unit and identifies the mechanic type associated with that spell.
    This functionality is commonly used in AI systems to determine how to respond
    to different types of spells, such as applying immunity checks or determining
    appropriate counteractions. The method examines the casting unit's current spell
    and extracts its mechanic information, which can be crucial for implementing behavior
    logic in game mechanics like crowd control, dispel detection, or spell resistance
    calculations.
  parameters: []
  returns: Returns a MechanicInfo structure containing details about the detected
    mechanic type of the casting spell. The structure typically includes fields such
    as the mechanic ID, flags, and other relevant properties that define how the mechanic
    behaves in the game world.
  examples:
  - title: Basic Usage in AI Logic
    code: "void MyAI::Update(Unit* target)\n{\n    if (target && target->IsInCombat())\n\
      \    {\n        MechanicInfo mechanic = DetectCastingMechanic(target);\n   \
      \     if (mechanic.GetMechanicType() == MECHANIC_STUN)\n        {\n        \
      \    // Handle stun detection logic\n            DoSpecialStunResponse();\n\
      \        }\n    }\n}"
    language: cpp
  notes: This method relies on the caster unit having an active spell cast. If the
    caster is not casting a spell or if the spell data is invalid, the returned MechanicInfo
    may contain default or undefined values. The implementation assumes that the Unit
    pointer passed to it is valid and in a consistent state.
  warnings: Do not call this method on units that are not currently casting spells,
    as it may lead to undefined behavior or incorrect mechanic detection. Ensure proper
    null checks before using the returned MechanicInfo structure.
  related:
  - GetCastingSpell
  - IsCasting
  - HasMechanic
metadata:
  confidence: 0.85
  generated_at: '2025-11-08T00:13:02.856811'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
