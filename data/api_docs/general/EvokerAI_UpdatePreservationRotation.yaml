api:
  class: EvokerAI
  method: UpdatePreservationRotation
  signature: void EvokerAI::UpdatePreservationRotation(int * target)
documentation:
  brief: Updates the preservation rotation logic for an evoker AI, determining optimal
    spell casting based on target status.
  description: The UpdatePreservationRotation method manages the core decision-making
    process for an EvokerAI's preservation spell rotation. It evaluates the current
    target's health, magical debuffs, and the evoker's available resources to determine
    the most effective preservation spell to cast next. This method integrates with
    the broader AI framework to ensure optimal resource usage and damage mitigation.
    The function operates within the context of the Evoker's class-specific abilities,
    particularly focusing on the preservation mechanism that allows for strategic
    healing and protective spells during combat. It typically gets invoked during
    the AI update cycle when the evoker needs to make tactical decisions about spell
    selection.
  parameters:
  - name: target
    description: Pointer to an integer representing the target's current state or
      index in the combat system. This value is used to determine which target to
      prioritize for preservation spells and how to adjust the rotation strategy accordingly.
  returns: null
  examples:
  - title: Basic Usage in AI Update Cycle
    code: "void EvokerAI::UpdateAI(uint32 diff)\n{\n    if (Unit* target = SelectTarget(SELECT_TARGET_TOPAGGRO))\n\
      \    {\n        int targetIndex = target->GetGUID().GetCounter();\n        UpdatePreservationRotation(&targetIndex);\n\
      \    }\n}"
    language: cpp
  notes: This method is part of the Evoker's combat AI logic and should only be called
    when the evoker has a valid target. The preservation rotation logic may involve
    complex spell prioritization based on cooldowns, mana costs, and target conditions.
    Developers should ensure that the target parameter accurately reflects the current
    combat state to avoid incorrect spell selection.
  warnings: Improper handling of the target parameter can lead to invalid spell casting
    or AI behavior anomalies. This method assumes that the evoker has sufficient resources
    (mana, cooldowns) to cast preservation spells. Calling this method without a proper
    target context may result in undefined behavior or incorrect rotation decisions.
  related:
  - EvokerAI::UpdateAI
  - EvokerAI::SelectTarget
  - EvokerAI::CastSpell
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T03:29:54.624598'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
