api:
  class: CooldownStackingOptimizer
  method: DetectBossPhase
  signature: BossPhase CooldownStackingOptimizer::DetectBossPhase(Unit * boss) const
documentation:
  brief: Determines the current boss phase based on unit state and combat conditions.
  description: The DetectBossPhase method evaluates the current phase of a boss encounter
    by analyzing various combat states, health thresholds, and encounter-specific
    flags. This method is crucial for AI decision-making during boss fights, allowing
    the system to adapt behavior based on whether the boss is in its initial phase,
    transitioning between phases, or in a final phase. The method considers factors
    such as boss health percentage, active debuffs, and combat engagement status to
    accurately classify the boss's current phase. It serves as a core component for
    cooldown stacking optimization strategies that must adjust based on encounter
    progression.
  parameters: []
  returns: Returns a BossPhase enum value indicating the current phase of the boss
    encounter. Possible values include PHASE_NORMAL, PHASE_TRANSITION, and PHASE_FINAL,
    each representing different stages of the boss fight with corresponding AI behaviors
    and cooldown strategies.
  examples:
  - title: Basic Usage in AI Logic
    code: "void BossAI::UpdateAI(uint32 diff)\n{\n    if (Unit* boss = GetBoss())\n\
      \    {\n        BossPhase phase = _optimizer.DetectBossPhase(boss);\n      \
      \  switch (phase)\n        {\n            case PHASE_NORMAL:\n             \
      \   // Execute normal cooldown strategies\n                break;\n        \
      \    case PHASE_TRANSITION:\n                // Adjust for transition phase\n\
      \                break;\n            case PHASE_FINAL:\n                // Apply\
      \ final phase optimizations\n                break;\n        }\n    }\n}"
    language: cpp
  notes: This method relies on accurate boss state tracking and should only be called
    when a valid boss unit reference exists. The implementation may cache previous
    phase states to prevent unnecessary recalculations during rapid combat transitions.
    Performance is generally optimal as it primarily uses cached state information
    rather than complex calculations.
  warnings: Ensure that the boss parameter passed to this method is valid and not
    null, as accessing invalid units can lead to undefined behavior. The method assumes
    that boss unit data is properly synchronized with the current encounter state,
    so calling it outside of active boss encounters may produce incorrect results.
  related:
  - CooldownStackingOptimizer::GetCooldownStrategy
  - CooldownStackingOptimizer::ApplyPhaseBasedCooldowns
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T16:38:52.852796'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
