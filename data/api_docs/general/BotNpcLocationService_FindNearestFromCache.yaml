api:
  class: BotNpcLocationService
  method: FindNearestFromCache
  signature: NpcLocationResult BotNpcLocationService::FindNearestFromCache(Player
    * bot, const int & locations, float maxRange, const int & sourceName)
documentation:
  brief: Finds the nearest NPC location from a cached list based on player position
    and specified criteria.
  description: The FindNearestFromCache method retrieves the closest NPC location
    from a pre-cached set of locations, using the provided player's current position
    as the reference point. It filters results based on maximum range and source name
    constraints to ensure only relevant locations are considered. This method is typically
    used in bot AI logic where NPCs need to be located efficiently without recalculating
    positions every time. The cache ensures performance optimization by avoiding repeated
    database or calculation overhead.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot requesting the
      NPC location. Used to determine the reference position for finding the nearest
      location.
  - name: locations
    description: Integer identifier or index representing a specific set of cached
      NPC locations to search through. This may correspond to a group, zone, or category
      of NPCs.
  - name: maxRange
    description: Float value defining the maximum distance (in yards) from the bot's
      position within which to consider NPC locations. Locations beyond this range
      are ignored.
  - name: sourceName
    description: Integer identifier used to filter cached locations by source name
      or type. Only locations matching this source will be considered in the search.
  returns: Returns an NpcLocationResult object containing information about the nearest
    NPC location found, including coordinates and validity status. If no valid location
    is within range, it may return an invalid result with appropriate error flags.
  examples:
  - title: Basic usage to find nearest NPC
    code: "Player* bot = ...; // Bot player instance\nint locations = 1001; // Cached\
      \ location group ID\nfloat maxRange = 50.0f;\nint sourceName = 2001; // Source\
      \ name filter\nNpcLocationResult result = sBotNpcLocationService->FindNearestFromCache(bot,\
      \ locations, maxRange, sourceName);\nif (result.IsValid()) {\n    // Process\
      \ valid NPC location\n    std::cout << \"Found NPC at: \" << result.GetX() <<\
      \ \", \" << result.GetY() << std::endl;\n}"
    language: cpp
  notes: This method relies on a pre-populated cache of NPC locations. Ensure that
    the cache is properly initialized before calling this function to avoid incorrect
    results or performance issues. The method does not perform any caching itself
    but assumes that locations are already cached.
  warnings: Do not call this method with invalid or uninitialized player pointers
    as it will likely cause undefined behavior. Also, ensure that the 'locations'
    and 'sourceName' parameters refer to valid entries in the cache system; otherwise,
    the result may be empty or incorrect.
  related:
  - CacheNpcLocations
  - ClearCache
  - GetCachedLocations
metadata:
  confidence: 0.85
  generated_at: '2025-11-09T12:57:19.517409'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
