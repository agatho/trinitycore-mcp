api:
  class: PlayerData
  method: AppendAllowedFieldsMaskForFlag
  signature: void PlayerData::AppendAllowedFieldsMaskForFlag(int & allowedMaskForTarget,
    int fieldVisibilityFlags)
documentation:
  brief: Appends field visibility flags to the allowed mask for a target player.
  description: The AppendAllowedFieldsMaskForFlag method modifies an existing allowed
    field mask by incorporating specified visibility flags. This functionality is
    typically used in player data serialization or network packet construction where
    certain fields should only be visible to specific targets based on visibility
    conditions. The method adjusts the mask in-place, allowing for fine-grained control
    over which data fields are included when sending information about a player to
    another player. It's commonly employed in scenarios such as player-to-player communication,
    object visibility checks, or when building update packets for client synchronization.
  parameters:
  - name: allowedMaskForTarget
    description: Reference to an integer that holds the current allowed field mask
      for a target. This value is modified in-place by appending new visibility flags.
  - name: fieldVisibilityFlags
    description: Integer representing the field visibility flags to append to the
      allowed mask. These flags determine which fields should be visible based on
      player relationship, faction, or other game logic conditions.
  returns: null
  examples:
  - title: Basic usage of AppendAllowedFieldsMaskForFlag
    code: 'int mask = 0x1;

      PlayerData* playerData = ...;

      playerData->AppendAllowedFieldsMaskForFlag(mask, 0x2);

      // mask now contains 0x3 (0x1 | 0x2)'
    language: cpp
  - title: Applying visibility flags for a friendly player
    code: 'int allowedMask = 0;

      PlayerData* targetPlayer = ...;

      // Assume we''re building packet for a friendly player

      playerData->AppendAllowedFieldsMaskForFlag(allowedMask, PLAYER_FIELD_VISIBLE_FLAGS);

      // The mask now includes visible flags for friendly players'
    language: cpp
  notes: This method modifies the input parameter 'allowedMaskForTarget' in-place.
    Ensure that the initial value of the mask is properly initialized before calling
    this function. The fieldVisibilityFlags are typically defined as bitmasks representing
    different visibility conditions such as faction, relationship status, or game
    state.
  warnings: Be cautious when using this method with uninitialized masks, as it may
    lead to unexpected behavior. Also, ensure that the fieldVisibilityFlags passed
    are valid and correspond to expected visibility states in the game logic.
  related:
  - GetAllowedFieldsMaskForTarget
  - SetAllowedFieldsMaskForTarget
  - BuildUpdateDataForPlayer
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T22:27:27.139079'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
