api:
  class: ProtectionPaladinRefactored
  method: UpdateRotation
  signature: void ProtectionPaladinRefactored::UpdateRotation(int * target)
documentation:
  brief: Updates the protection paladin's rotation based on current target and combat
    state
  description: The UpdateRotation method is responsible for determining and executing
    the optimal sequence of abilities for a protection paladin during combat. This
    method evaluates the current target, player health, threat levels, and available
    cooldowns to decide which defensive and offensive abilities should be used next
    in the rotation. It integrates with the TrinityCore AI system to ensure proper
    spell casting order and timing. The method typically runs during each AI update
    cycle and modifies the paladin's action queue accordingly.
  parameters:
  - name: target
    description: Pointer to the current target entity that the protection paladin
      is engaging in combat. This parameter determines which abilities are selected
      based on target type, health percentage, and threat status.
  returns: null
  examples:
  - title: Basic usage in AI update cycle
    code: "void AIUpdate()\n{\n    if (Unit* target = GetVictim())\n    {\n      \
      \  m_Paladin->UpdateRotation(&target);\n    }\n}"
    language: cpp
  - title: Integration with custom paladin AI
    code: "void CustomProtectionPaladinAI::Update()\n{\n    if (m_Player && m_Player->IsInCombat())\n\
      \    {\n        Unit* target = m_Player->GetVictim();\n        if (target)\n\
      \        {\n            UpdateRotation(&target);\n        }\n    }\n}"
    language: cpp
  notes: This method is typically called from within the AI update loop and should
    not be invoked manually unless implementing custom behavior. The rotation logic
    considers various factors including player mana levels, target proximity, and
    cooldown states. Performance is optimized to run quickly during each AI cycle
    without blocking other systems.
  warnings: Do not call this method directly with a null target pointer as it may
    cause undefined behavior. Ensure that the target parameter points to a valid Unit
    object before calling this method. The method modifies internal state and should
    only be called when the paladin is actively engaged in combat.
  related:
  - GetVictim
  - CastSpell
  - IsInCombat
  - HasCooldown
metadata:
  confidence: 0.85
  generated_at: '2025-11-07T21:57:42.733003'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
