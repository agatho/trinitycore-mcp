api:
  class: MageAI
  method: UpdateRotation
  signature: void MageAI::UpdateRotation(::Unit * target)
documentation:
  brief: Updates the Mage AI's spell rotation based on the current target and combat
    state.
  description: The UpdateRotation method is responsible for determining and executing
    the optimal sequence of spells for a Mage AI character during combat. It evaluates
    the current target's health, distance, available mana, and other relevant factors
    to decide which spells to cast next in order to maximize damage output or survivability.
    This method typically gets called regularly during combat to ensure the AI adapts
    its rotation dynamically as conditions change. The method does not directly perform
    spell casting but rather updates internal state and logic that will be used by
    the AI's main execution loop.
  parameters:
  - name: target
    description: Pointer to the Unit object representing the current combat target.
      This parameter is essential for determining spell priorities, range requirements,
      and targeting logic. Must not be null during normal operation.
  returns: None. The method performs internal state updates but does not return any
    value.
  examples:
  - title: Basic Usage in Combat Loop
    code: "void MageAI::Update()\n{\n    if (me->IsInCombat())\n    {\n        UpdateRotation(me->GetVictim());\n\
      \    }\n}"
    language: cpp
  - title: Integration with Custom AI Logic
    code: "void MageAI::UpdateRotation(Unit* target)\n{\n    if (!target || !target->IsAlive())\n\
      \        return;\n\n    // Update spell priorities based on target state\n \
      \   if (target->GetHealthPct() < 20.0f)\n    {\n        // Prioritize high-damage\
      \ spells when target is low health\n        m_spellPriority = SPELL_PRIORITY_HIGH_DAMAGE;\n\
      \    }\n    else\n    {\n        m_spellPriority = SPELL_PRIORITY_BALANCED;\n\
      \    }\n}"
    language: cpp
  notes: This method should be called frequently during combat to ensure the AI rotation
    remains optimal. It is typically invoked from the main AI update loop and may
    influence spell selection, cooldown tracking, and mana management decisions. The
    method assumes that target validity has already been checked before calling.
  warnings: Ensure that the target parameter is valid and alive before calling this
    method; passing a null or dead target can lead to undefined behavior or crashes.
    This method modifies internal AI state which might affect subsequent spell casting
    decisions.
  related:
  - GetNextSpell
  - IsSpellReady
  - CheckManaRequirements
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T03:28:40.295422'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
