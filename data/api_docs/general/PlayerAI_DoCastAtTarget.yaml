api:
  class: PlayerAI
  method: DoCastAtTarget
  signature: void PlayerAI::DoCastAtTarget(TargetedSpell spell)
documentation:
  brief: Casts a targeted spell at the current AI target.
  description: The DoCastAtTarget method executes a spell cast operation targeting
    the current enemy unit assigned to the PlayerAI's target. This method is typically
    used by AI-controlled players or NPCs to perform spell casting actions against
    their designated targets. The method handles the necessary checks for spell validity,
    line-of-sight, and cooldowns before initiating the cast. It ensures that the spell
    is properly directed at the target unit and manages the casting animation and
    spell effects accordingly.
  parameters:
  - name: spell
    description: The TargetedSpell structure containing spell information including
      spell ID, target type, and any additional targeting parameters required for
      the cast.
  returns: null
  examples:
  - title: Basic Spell Casting Example
    code: "void PlayerAI::UpdateAI(uint32 diff) {\n    if (!UpdateVictim())\n    \
      \    return;\n    \n    TargetedSpell fireballSpell;\n    fireballSpell.spellId\
      \ = 133;\n    fireballSpell.targetType = TARGET_UNIT_ENEMY;\n    \n    DoCastAtTarget(fireballSpell);\n\
      }"
    language: cpp
  - title: Conditional Spell Casting with Cooldown
    code: "void PlayerAI::UpdateAI(uint32 diff) {\n    if (!UpdateVictim())\n    \
      \    return;\n    \n    if (me->HasSpellCooldown(133)) // Fireball cooldown\n\
      \        return;\n    \n    TargetedSpell frostNovaSpell;\n    frostNovaSpell.spellId\
      \ = 122;\n    frostNovaSpell.targetType = TARGET_UNIT_ENEMY;\n    \n    DoCastAtTarget(frostNovaSpell);\n\
      }"
    language: cpp
  notes: This method assumes the AI has a valid target set through UpdateVictim()
    or similar mechanisms. The spell must be known and available to the player character.
    The method does not handle spell interrupt conditions or mana checks directly,
    these should be managed by calling code.
  warnings: Calling this method without ensuring a valid target may result in undefined
    behavior or failed spell casts. Always verify that the AI has an appropriate target
    before invoking DoCastAtTarget.
  related:
  - UpdateVictim
  - DoCast
  - GetAI
  - SetTarget
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T11:45:09.434093'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
