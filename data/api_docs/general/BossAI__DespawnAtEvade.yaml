api:
  class: BossAI
  method: _DespawnAtEvade
  signature: void BossAI::_DespawnAtEvade(int delayToRespawn, int * who)
documentation:
  brief: Initiates the despawn process for a boss entity when it enters evade mode,
    with optional respawn delay.
  description: The _DespawnAtEvade method is used within the BossAI class to handle
    the despawning of a boss creature when it enters evade mode. This typically occurs
    when the boss loses all aggro or fails to engage the player within a specified
    time frame. The method allows for a configurable delay before the boss respawns,
    which can be useful for implementing cooldown periods or scripted events. It manages
    the cleanup of the boss's AI state and ensures proper removal from the game world,
    while also preparing the necessary data structures for a potential respawn.
  parameters:
  - name: delayToRespawn
    description: The time in milliseconds to wait before respawning the boss. A value
      of 0 indicates immediate despawn without respawn.
  - name: who
    description: Pointer to an integer that tracks which entity initiated the evade
      state. This is used for logging or debugging purposes to identify the source
      of the evade event.
  returns: null
  examples:
  - title: Basic Usage in Boss AI
    code: "void BossExample::UpdateAI(uint32 diff)\n{\n    if (!UpdateVictim())\n\
      \        return;\n\n    // If boss is evading, despawn with 10 second respawn\
      \ delay\n    _DespawnAtEvade(10000, &who);\n}"
    language: cpp
  - title: Conditional Despawn with Logging
    code: "void BossExample::JustDied(Unit* killer)\n{\n    if (me->GetMap()->IsDungeon())\n\
      \    {\n        int who = 0;\n        _DespawnAtEvade(30000, &who);\n      \
      \  sLog->outString(\"Boss %u despawned with 30s respawn delay\", me->GetEntry());\n\
      \    }\n}"
    language: cpp
  notes: This method is typically called internally by the BossAI framework when certain
    conditions are met, such as loss of aggro or timeout. It's important to note that
    this function does not directly remove the creature from memory but rather schedules
    its removal and prepares for respawn if needed.
  warnings: Improper usage of this method may lead to inconsistent boss behavior or
    unexpected respawns. Ensure that delayToRespawn is set appropriately to avoid
    disrupting gameplay flow or causing server performance issues due to rapid despawn/respawn
    cycles.
  related:
  - BossAI::EnterEvadeMode
  - BossAI::Reset
  - Creature::DespawnOrUnsummon
metadata:
  confidence: 0.85
  generated_at: '2025-11-06T19:44:24.914388'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
