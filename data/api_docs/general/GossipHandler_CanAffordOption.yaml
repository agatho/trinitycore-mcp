api:
  class: GossipHandler
  method: CanAffordOption
  signature: bool GossipHandler::CanAffordOption(::Player * bot, const GossipMenuOption
    & option) const
documentation:
  brief: Determines whether a bot player can afford the cost associated with a gossip
    menu option.
  description: The CanAffordOption method evaluates if a given player (typically a
    bot) has sufficient in-game currency to pay for the cost specified by a GossipMenuOption.
    This method is used in the context of World of Warcraft's gossip system, where
    NPCs present players with choices that may require payment. It checks various
    types of currency including gold, items, or other resources defined in the option's
    cost structure. The method returns true if the player can afford the option, and
    false otherwise. This check is crucial for maintaining game balance and ensuring
    that players cannot select options they do not have the required resources to
    purchase.
  parameters:
  - name: bot
    description: Pointer to the Player object representing the bot attempting to use
      the gossip option. Must be a valid player instance.
  - name: option
    description: Reference to a GossipMenuOption structure containing the cost information
      and other properties of the gossip menu item being evaluated.
  returns: Returns true if the bot has sufficient currency to afford the option's
    cost, false otherwise. The method considers all applicable currencies including
    gold, items, or quest requirements specified in the option.
  examples:
  - title: Basic usage to check affordability
    code: "if (GossipHandler::CanAffordOption(bot, gossipOption)) {\n    // Proceed\
      \ with the action\n    bot->SendGossipMenu(12345, bot->GetNPCFlags());\n} else\
      \ {\n    // Inform player they cannot afford it\n    bot->SendNotification(\"\
      You cannot afford this option.\");\n}"
    language: cpp
  - title: Using within a gossip menu handler
    code: "void GossipHello(Player* player) {\n    if (GossipHandler::CanAffordOption(player,\
      \ gossipOption)) {\n        AddGossipItemFor(player, GOSSIP_ICON_CHAT, \"Purchase\
      \ Item\", GOSSIP_SENDER_MAIN, 1);\n    } else {\n        AddGossipItemFor(player,\
      \ GOSSIP_ICON_CHAT, \"Cannot Afford\", GOSSIP_SENDER_MAIN, 2);\n    }\n    SendGossipMenuFor(player);\n\
      }"
    language: cpp
  notes: This method likely performs checks against the player's current gold amount,
    inventory items, and any quest requirements. It may also consider item durability
    or other resource constraints depending on how the GossipMenuOption is defined.
    The implementation might cache currency values for performance reasons during
    a single gossip interaction.
  warnings: Ensure that the bot parameter is not null before calling this method to
    avoid undefined behavior. Also, be aware that this method only checks immediate
    affordability and does not handle complex currency combinations or dynamic pricing
    systems.
  related:
  - GossipMenuOption::GetCost
  - Player::HasEnoughMoney
  - Player::ModifyMoney
metadata:
  confidence: 0.9
  generated_at: '2025-11-07T13:56:53.385058'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
