api:
  class: WorldSession
  method: HandleCommerceTokenGetMarketPrice
  signature: void WorldSession::HandleCommerceTokenGetMarketPrice(WorldPackets::Token::CommerceTokenGetMarketPrice
    & requestWowTokenMarketPrice)
documentation:
  brief: Retrieves the current market price for the WoW Token from the commerce token
    system.
  description: This method handles the client request to fetch the market price of
    the World of Warcraft Token. It processes the incoming packet from the player's
    client and responds with the current token value, which is used in the game's
    auction house and token vendor interfaces. The method ensures that only valid
    requests are processed and sends back an appropriate response containing the token's
    market price or an error status if the request cannot be fulfilled.
  parameters:
  - name: requestWowTokenMarketPrice
    description: The incoming packet containing the client's request for the WoW Token
      market price. This parameter includes data about the requesting player and the
      context of the token price query.
  returns: void
  examples:
  - title: Basic Usage Example
    code: "void WorldSession::HandleCommerceTokenGetMarketPrice(WorldPackets::Token::CommerceTokenGetMarketPrice&\
      \ requestWowTokenMarketPrice)\n{\n    // Process the token market price request\n\
      \    WorldPackets::Token::CommerceTokenGetMarketPriceResponse response;\n  \
      \  response.TokenID = 1; // WoW Token ID\n    response.Price = sWorld->getWowTokenPrice();\
      \ // Get current token price\n    SendPacket(response.Write());\n}"
    language: cpp
  notes: This method is part of the commerce token system introduced in later expansions.
    It requires proper session validation before processing, and the actual token
    price should be retrieved from a central server or database that tracks real-time
    market values.
  warnings: Improper handling of this packet can lead to incorrect token pricing being
    displayed to players, potentially causing issues with in-game economy balance.
    Ensure that all requests are authenticated and that the token price is updated
    regularly.
  related:
  - HandleCommerceTokenRedeem
  - HandleCommerceTokenVendorRequest
  - HandleCommerceTokenGetItemInfo
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T19:37:49.800141'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
