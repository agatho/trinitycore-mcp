api:
  class: PreservationEvoker
  method: CanUseAbility
  signature: bool PreservationEvoker::CanUseAbility(uint32 spellId)
documentation:
  brief: Checks if a Preservation Evoker can use a specified ability spell.
  description: The CanUseAbility method determines whether a Preservation Evoker character
    is eligible to cast or use a specific spell ability. This check typically evaluates
    factors such as resource requirements (like mana, essence, or other evoker-specific
    resources), cooldown states, player state (such as being stunned or silenced),
    and class-specific restrictions. The method is commonly used in AI logic and spell
    execution validation within the TrinityCore framework for the Evoker class, particularly
    for Preservation specialization which focuses on healing and protective abilities.
  parameters:
  - name: spellId
    description: The unique identifier of the spell to be checked for usability. This
      corresponds to the Spell.dbc entry ID in the game database.
  returns: Returns true if the Evoker can currently use the specified ability, considering
    all relevant conditions such as resource availability, cooldowns, and player state.
    Returns false otherwise.
  examples:
  - title: Basic usage to check if an ability is usable
    code: "if (player->ToEvoker()->CanUseAbility(325201)) {\n    // Cast the ability\n\
      \    player->CastSpell(target, 325201, true);\n}"
    language: cpp
  - title: Using within AI logic to decide spell usage
    code: "class PreservationEvokerAI : public ScriptedAI {\npublic:\n    void UpdateAI(uint32\
      \ diff) override {\n        if (me->ToEvoker()->CanUseAbility(325201)) {\n \
      \           DoCastVictim(325201);\n        }\n    }\n};"
    language: cpp
  notes: This method is typically called before attempting to cast a spell to avoid
    invalid actions. It's important to note that the method may also consider aura
    states, combat status, and other temporary conditions that affect spell casting.
    The implementation likely integrates with TrinityCore's spell system and player
    state management.
  warnings: Do not rely solely on this method for spell execution; always validate
    spell targeting and range in addition to usability checks. Incorrect usage of
    this method in AI logic could lead to spamming unusable abilities or skipping
    valid ones.
  related:
  - GetSpellCooldown
  - HasManaForSpell
  - IsCasting
  - CanCastSpell
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T15:32:30.901649'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
