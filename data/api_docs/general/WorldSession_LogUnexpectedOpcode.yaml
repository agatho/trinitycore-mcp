api:
  class: WorldSession
  method: LogUnexpectedOpcode
  signature: void WorldSession::LogUnexpectedOpcode(WorldPacket * packet, const char
    * status, const char * reason)
documentation:
  brief: Logs unexpected opcode data for debugging and security purposes.
  description: The LogUnexpectedOpcode method records information about unexpected
    or invalid opcodes received by a WorldSession. This function is typically invoked
    when the server encounters a packet that does not match expected protocol behavior,
    helping developers identify potential client-side issues, exploits, or protocol
    violations. It logs details such as the opcode, session status, and reason for
    the unexpected packet, which aids in diagnosing network-related problems or malicious
    activity. The method does not alter the packet's processing flow but serves purely
    for diagnostic logging.
  parameters:
  - name: packet
    description: Pointer to the WorldPacket object containing the unexpected opcode
      data. This packet is analyzed and logged for debugging purposes.
  - name: status
    description: A string describing the current status of the session when the unexpected
      opcode was received. Used to provide context in the log output.
  - name: reason
    description: A descriptive reason explaining why the opcode was considered unexpected
      or invalid. Helps categorize and filter logs during debugging.
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void HandleUnknownOpcode(WorldSession* session, WorldPacket& packet)\n\
      {\n    session->LogUnexpectedOpcode(&packet, \"IN_GAME\", \"Invalid opcode received\"\
      );\n}"
    language: cpp
  - title: Usage with custom reason for debugging
    code: "if (opcode == 0xFFFF)\n{\n    session->LogUnexpectedOpcode(&recvPacket,\
      \ \"AUTHENTICATED\", \"Reserved opcode used\");\n}\nelse\n{\n    // Normal packet\
      \ handling\n}"
    language: cpp
  notes: This method is primarily used in development and debugging environments to
    track down unexpected client behavior or potential exploit attempts. It does not
    affect gameplay or performance directly, but may produce verbose logs under high
    traffic conditions.
  warnings: Ensure that sensitive data within the packet is not logged in production
    builds due to privacy or security concerns. The method should be used carefully
    in release builds to avoid excessive logging overhead.
  related:
  - WorldSession::HandlePacket
  - WorldSession::SendPacket
  - WorldSession::GetPlayer
metadata:
  confidence: 0.95
  generated_at: '2025-11-07T16:42:06.463749'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
