api:
  class: LootStrategy
  method: OnDeactivate
  signature: void LootStrategy::OnDeactivate(BotAI * ai)
documentation:
  brief: Deactivates the loot strategy and performs cleanup operations for the associated
    bot AI.
  description: The OnDeactivate method is called when a loot strategy is no longer
    active for a bot AI instance. This method typically handles cleanup tasks such
    as releasing resources, resetting internal state, or unregistering from event
    systems. It ensures that the bot AI properly transitions out of the loot strategy
    context and maintains system integrity during strategy changes or bot destruction.
    The method is invoked automatically by the TrinityCore AI framework when the strategy
    is deactivated.
  parameters:
  - name: ai
    description: Pointer to the BotAI instance that owns this loot strategy. This
      parameter provides access to the bot's current state, inventory, and other AI-related
      data structures during deactivation.
  returns: null
  examples:
  - title: Basic usage in custom loot strategy
    code: "class MyLootStrategy : public LootStrategy {\npublic:\n    void OnDeactivate(BotAI*\
      \ ai) override {\n        // Perform cleanup\n        if (ai) {\n          \
      \  ai->ClearLootCache();\n        }\n        // Call base implementation if\
      \ needed\n        LootStrategy::OnDeactivate(ai);\n    }\n};"
    language: cpp
  notes: This method is typically called during bot destruction or strategy switching.
    Developers should ensure that any resources allocated in OnActivate are properly
    released here to prevent memory leaks. The ai parameter may be null in some edge
    cases, so null checks are recommended.
  warnings: Do not perform operations that might cause crashes or undefined behavior
    in this method. Avoid calling methods on the ai object that could lead to recursive
    calls or deadlocks. Always ensure proper cleanup to maintain AI system stability.
  related:
  - OnActivate
  - Update
  - IsEnabled
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T09:13:46.129740'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
