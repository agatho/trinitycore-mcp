api:
  class: CriteriaHandler
  method: CanUpdateCriteria
  signature: bool CriteriaHandler::CanUpdateCriteria(const Criteria * criteria, const
    CriteriaTreeList * trees, uint64 miscValue1, uint64 miscValue2, uint64 miscValue3,
    const WorldObject * ref, Player * referencePlayer)
documentation:
  brief: Determines whether a criteria can be updated based on provided conditions
    and references.
  description: The CanUpdateCriteria method evaluates if a given criteria object is
    eligible for an update based on its associated trees, miscellaneous values, and
    reference objects. This method plays a crucial role in the achievement and criterion
    system of TrinityCore, ensuring that criteria are only updated when appropriate
    conditions are met. It checks various factors including the validity of the criteria
    tree, the relevance of misc values, and the appropriateness of the reference player
    or object. The method is typically invoked during event handling or progress tracking
    for achievements and quests.
  parameters:
  - name: criteria
    description: Pointer to the Criteria object that needs to be evaluated for update
      eligibility. Must not be null.
  - name: trees
    description: Pointer to a list of CriteriaTree objects associated with the criteria.
      Used to validate tree conditions and dependencies.
  - name: miscValue1
    description: First miscellaneous value used for criteria evaluation. Often represents
      an ID, count, or type parameter.
  - name: miscValue2
    description: Second miscellaneous value used in criteria validation logic. May
      represent secondary parameters like item quality or spell school.
  - name: miscValue3
    description: Third miscellaneous value for advanced criteria evaluation. Can be
      used for complex conditions or additional context.
  - name: ref
    description: Pointer to a WorldObject that serves as the reference point for criteria
      evaluation. May be null if not applicable.
  - name: referencePlayer
    description: Pointer to the Player object that provides context for the criteria
      update. Used for player-specific conditions and checks.
  returns: Returns true if the criteria can be updated according to all validation
    rules, false otherwise. The method returns false when any of the preconditions
    fail or when the criteria is not eligible for advancement.
  examples:
  - title: Basic usage in achievement handling
    code: "if (handler.CanUpdateCriteria(criteria, trees, miscValue1, miscValue2,\
      \ miscValue3, refObject, player)) {\n    // Proceed with updating the criteria\n\
      \    handler.UpdateCriteria(criteria);\n}"
    language: cpp
  - title: Advanced usage with multiple conditions
    code: "bool canUpdate = handler.CanUpdateCriteria(\n    criteria,\n    &criteriaTrees,\n\
      \    player->GetGUID().GetCounter(),\n    0,\n    0,\n    nullptr,\n    player\n\
      );\nif (canUpdate) {\n    // Criteria is valid for update, proceed with logic\n\
      \    handler.UpdateCriteria(criteria);\n} else {\n    // Skip update due to\
      \ invalid conditions\n}"
    language: cpp
  notes: This method performs several internal checks including validation of criteria
    trees, ensuring that all required dependencies are met. It's designed to be lightweight
    and efficient as it may be called frequently during gameplay events. The method
    assumes that the input parameters are valid and properly initialized.
  warnings: Ensure that all pointers passed to this method are valid before calling.
    Passing null pointers for criteria or trees can lead to undefined behavior. Also,
    be cautious when using miscValue parameters as they directly influence the outcome
    of the evaluation.
  related:
  - UpdateCriteria
  - GetCriteriaProgress
  - CheckCriteriaTree
metadata:
  confidence: 0.9
  generated_at: '2025-11-02T09:01:13.145385'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
