api:
  class: MoveSpline
  method: _currentSplineIdx
  signature: int32 MoveSpline::_currentSplineIdx() const
documentation:
  brief: Returns the index of the currently active spline segment within the MoveSpline.
  description: The _currentSplineIdx method retrieves the index of the spline segment
    that is currently being executed by the MoveSpline object. This index corresponds
    to the active portion of a multi-segment path that defines an NPC or player's
    movement trajectory. The returned value typically represents the current segment
    in a sequence of waypoints or spline points, allowing developers to track progress
    through a complex movement path. In World of Warcraft's TrinityCore implementation,
    this method is used internally by movement handlers and AI systems to determine
    which portion of a character's movement is currently active.
  parameters: []
  returns: An int32 value representing the zero-based index of the current spline
    segment. A negative value may indicate an error or invalid state, while a non-negative
    value corresponds to a valid segment within the spline path. The value will typically
    increment as the movement progresses through successive segments.
  examples:
  - title: Basic Usage in Movement Tracking
    code: "void OnMoveUpdate(Player* player)\n{\n    if (player->GetMotionMaster()->GetCurrentMotionType()\
      \ == MOTION_TYPE spline)\n    {\n        MoveSpline* spline = player->GetMotionMaster()->GetCurrentSpline();\n\
      \        int32 currentIdx = spline->_currentSplineIdx();\n        // Use currentIdx\
      \ to determine progress through movement path\n        if (currentIdx >= 0)\n\
      \            sLog->outString(\"Current spline segment: %d\", currentIdx);\n\
      \    }\n}"
    language: cpp
  notes: This method is typically used internally by TrinityCore's movement system
    and should not be called directly from most game logic. The index returned represents
    the internal state of the spline and may change during execution as the character
    moves through waypoints. The method is marked with an underscore prefix, indicating
    it's a private/internal implementation detail.
  warnings: Do not rely on this method for external code unless you understand the
    internal movement system architecture. Changes to the spline structure or movement
    path can cause unexpected index values. This method may return negative values
    if the spline is in an invalid state or has not yet started.
  related:
  - MoveSpline::GetLength
  - MoveSpline::getPoint
  - MoveSpline::isFinished
metadata:
  confidence: 0.9
  generated_at: '2025-11-06T08:27:13.469326'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
