api:
  class: Aura
  method: PrepareProcChargeDrop
  signature: void Aura::PrepareProcChargeDrop(const SpellProcEntry * procEntry, const
    ProcEventInfo & eventInfo)
documentation:
  brief: Prepares an aura to drop a proc charge based on the provided spell proc entry
    and event information.
  description: The PrepareProcChargeDrop method is responsible for managing the internal
    state of an aura when a proc event occurs. It evaluates whether a proc charge
    should be consumed or dropped according to the rules defined in the SpellProcEntry
    and the context provided by ProcEventInfo. This method is typically invoked during
    spell proc handling to ensure proper charge management for auras that have limited
    proc charges, such as those with limited uses or cooldowns. The method does not
    directly consume the charge but prepares the aura's internal state for subsequent
    processing.
  parameters:
  - name: procEntry
    description: Pointer to the SpellProcEntry structure defining the proc rules and
      conditions for this aura. This includes information such as proc chances, required
      flags, and other proc-related parameters.
  - name: eventInfo
    description: Reference to a ProcEventInfo structure containing detailed context
      about the proc event that triggered this method. Includes data like the triggering
      spell, target, damage type, and other relevant event properties.
  returns: null
  examples:
  - title: Basic Usage in Proc Handling
    code: "void SomeAuraClass::HandleProc(AuraEffect const* aurEff, ProcEventInfo&\
      \ eventInfo)\n{\n    SpellProcEntry const* procEntry = sSpellMgr->GetSpellProcEntry(GetId());\n\
      \    if (procEntry)\n        PrepareProcChargeDrop(procEntry, eventInfo);\n}"
    language: cpp
  notes: This method is part of the aura's internal proc handling logic and should
    only be called when a proc event occurs. It does not perform any direct charge
    consumption but prepares the aura for potential future charge deduction.
  warnings: null
  related:
  - GetProcCharges
  - SetProcCharges
  - HandleProc
metadata:
  confidence: 0.9
  generated_at: '2025-10-31T13:53:13.713661'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
