api:
  class: RotationPriority
  method: GetNextAbility
  signature: uint32 RotationPriority::GetNextAbility()
documentation:
  brief: Retrieves the identifier of the next ability in the rotation priority sequence.
  description: The GetNextAbility method is used within the TrinityCore AI system
    to determine which ability should be executed next based on defined rotation priorities.
    This method typically operates within a combat or spellcasting context where abilities
    are queued or prioritized according to game logic, such as for player classes,
    NPCs, or pets. It returns a unique identifier (uint32) that corresponds to an
    ability or spell in the game's database. The method does not modify any internal
    state but rather provides a read-only view of the next available ability in the
    current rotation sequence.
  parameters: []
  returns: A uint32 value representing the identifier of the next ability in the rotation
    priority list. This ID typically maps to an entry in the spell database or ability
    table within TrinityCore's core systems. Returns zero if no valid next ability
    exists or if the rotation is empty.
  examples:
  - title: Basic Usage in AI Logic
    code: "uint32 nextAbility = rotationPriority.GetNextAbility();\nif (nextAbility\
      \ != 0)\n{\n    // Execute the ability with ID 'nextAbility'\n    unit->CastSpell(unit,\
      \ nextAbility, true);\n}"
    language: cpp
  - title: Integration with Combat State Management
    code: "class EnemyAI\n{\npublic:\n    void Update()\n    {\n        uint32 abilityId\
      \ = rotationPriority.GetNextAbility();\n        if (abilityId != 0 && unit->CanCastSpell(abilityId))\n\
      \        {\n            unit->CastSpell(unit, abilityId, true);\n          \
      \  rotationPriority.Advance(); // Move to next ability\n        }\n    }\n};"
    language: cpp
  notes: This method assumes that the RotationPriority object has been properly initialized
    with a valid sequence of abilities. The returned identifier should be validated
    against the spell database before casting to prevent runtime errors. Performance
    is generally optimal as it only reads from internal state without complex computations.
  warnings: Ensure that the rotation priority list contains valid ability IDs; otherwise,
    calling CastSpell with an invalid ID may result in undefined behavior or silent
    failures. Avoid calling this method outside of combat or AI update contexts where
    the rotation logic is active.
  related:
  - RotationPriority::Advance
  - RotationPriority::Reset
  - RotationPriority::SetAbility
metadata:
  confidence: 0.9
  generated_at: '2025-11-08T15:10:22.898211'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
