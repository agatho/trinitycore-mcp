api:
  class: BattlegroundMgr
  method: BuildBattlegroundStatusActive
  signature: void BattlegroundMgr::BuildBattlegroundStatusActive(WorldPackets::Battleground::BattlefieldStatusActive
    * battlefieldStatus, const Battleground * bg, const Player * player, uint32 ticketId,
    uint32 joinTime, int queueId)
documentation:
  brief: Populates a BattlefieldStatusActive packet with current battleground information
    for a player.
  description: The BuildBattlegroundStatusActive method constructs and fills a BattlefieldStatusActive
    packet that is sent to a player's client to provide real-time updates about their
    active battleground status. This includes details such as the battleground type,
    queue time, ticket ID, and join time. The method is typically invoked when a player
    joins or rejoins a battleground, ensuring their client displays accurate information
    about the ongoing match. It integrates with TrinityCore's battleground management
    system to synchronize server-side battleground state with client-side UI elements.
  parameters:
  - name: battlefieldStatus
    description: Pointer to a BattlefieldStatusActive packet object that will be populated
      with battleground status data for the player.
  - name: bg
    description: Pointer to the Battleground object representing the active battleground
      instance the player is participating in.
  - name: player
    description: Pointer to the Player object for whom the battleground status packet
      is being constructed.
  - name: ticketId
    description: Unique identifier assigned to the player's battleground queue ticket,
      used to track their position in the queue and match assignment.
  - name: joinTime
    description: Timestamp indicating when the player joined the battleground, used
      to calculate time remaining or elapsed in the match.
  - name: queueId
    description: Identifier of the specific battleground queue the player is associated
      with, useful for tracking multiple queue types or instances.
  returns: null
  examples:
  - title: Basic Usage in Player Join Logic
    code: "void HandlePlayerJoinBattleground(Player* player, Battleground* bg) {\n\
      \    WorldPackets::Battleground::BattlefieldStatusActive status;\n    uint32\
      \ ticketId = 12345;\n    uint32 joinTime = getMSTime();\n    int queueId = 0;\n\
      \    sBattlegroundMgr->BuildBattlegroundStatusActive(&status, bg, player, ticketId,\
      \ joinTime, queueId);\n    player->SendDirectMessage(status.Write());\n}"
    language: cpp
  notes: This method is part of the battleground synchronization mechanism in TrinityCore.
    It relies on accurate timestamps and queue management to ensure players receive
    correct information about their battleground participation.
  warnings: null
  related:
  - BattlegroundMgr::BuildBattlegroundStatusFailed
  - BattlegroundMgr::BuildBattlegroundStatusNone
  - BattlegroundMgr::BuildBattlegroundStatusWentWrong
metadata:
  confidence: 0.95
  generated_at: '2025-11-02T12:38:46.810602'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
