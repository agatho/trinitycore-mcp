api:
  class: WorldSession
  method: HandleQueryNextMailTime
  signature: void WorldSession::HandleQueryNextMailTime(WorldPackets::Mail::MailQueryNextMailTime
    & queryNextMailTime)
documentation:
  brief: Handles a client request to query the next scheduled mail delivery time for
    the player.
  description: The HandleQueryNextMailTime method processes an incoming packet from
    the client requesting information about when the next mail will be delivered.
    This functionality is part of the game's mail system, allowing players to know
    when they can expect new mail without manually checking. The method typically
    retrieves the next scheduled mail time from the player's mailbox data and sends
    a response back to the client with that information. It does not directly modify
    any persistent data but rather serves as an interface between the client and server
    mail state.
  parameters: []
  returns: null
  examples:
  - title: Basic usage in packet handling
    code: "void WorldSession::HandleQueryNextMailTime(WorldPackets::Mail::MailQueryNextMailTime&\
      \ queryNextMailTime)\n{\n    // Process the request to get next mail time\n\
      \    uint32 nextMailTime = _player->GetNextMailTime();\n    WorldPackets::Mail::MailQueryNextMailTimeResponse\
      \ response;\n    response.NextMailTime = nextMailTime;\n    SendPacket(response.Write());\n\
      }"
    language: cpp
  notes: This method is typically called automatically by the TrinityCore framework
    when a client sends a MailQueryNextMailTime packet. Developers should ensure that
    the player's mail system state is properly initialized before this method is invoked.
    The method assumes that the player object exists and has valid mail-related data.
  warnings: null
  related:
  - GetNextMailTime
  - SendMail
  - HandleSendMail
metadata:
  confidence: 0.9
  generated_at: '2025-11-04T21:06:38.583834'
  generator: lmstudio-qwen3-coder-30b
  version: 1.0.0
  source: core
